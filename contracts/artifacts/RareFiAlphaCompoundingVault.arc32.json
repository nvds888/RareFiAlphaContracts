{
    "hints": {
        "createVault(uint64,uint64,uint64,uint64,uint64,address,address)void": {
            "call_config": {
                "no_op": "CREATE"
            }
        },
        "optInAssets()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "optIn()void": {
            "call_config": {
                "opt_in": "CALL"
            }
        },
        "closeOut()void": {
            "call_config": {
                "close_out": "CALL"
            }
        },
        "deposit()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "withdraw(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "claimCreator()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "compoundYield(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getVaultStats()(uint64,uint64,uint64,uint64,uint64,uint64)": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getUserAlphaBalance(address)uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getUserShares(address)uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "previewDeposit(uint64)uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "previewWithdraw(uint64)uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getCompoundQuote()(uint64,uint64,uint64)": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "updateMinSwapThreshold(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "updateTinymanPool(uint64,address)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "contributeFarm()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "setFarmEmissionRate(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "withdrawFarm(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getFarmStats()(uint64,uint64)": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        }
    },
    "source": {
        "approval": "I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYXJjNC9pbmRleC5kLnRzOjpDb250cmFjdC5hcHByb3ZhbFByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBpbnRjYmxvY2sgMCAxIDggNCAxMDAwMCAyMDAwMDAgMTAwMDAwMDAwMDAwMAogICAgYnl0ZWNibG9jayAidG90YWxTaGFyZXMiICJ0b3RhbEFscGhhIiAiZmFybUJhbGFuY2UiICJhbHBoYUFzc2V0IiAidXNkY0Fzc2V0IiAiY3JlYXRvckFkZHJlc3MiICJ1c2VyU2hhcmVzIiAweDE1MWY3Yzc1ICJjcmVhdG9yVW5jbGFpbWVkQWxwaGEiICJyYXJlZmlBZGRyZXNzIiAiZmFybUVtaXNzaW9uUmF0ZSIgIm1pblN3YXBUaHJlc2hvbGQiICJ0b3RhbFlpZWxkQ29tcG91bmRlZCIgInRpbnltYW5Qb29sQXBwSWQiICJ0aW55bWFuUG9vbEFkZHJlc3MiICJjcmVhdG9yRmVlUmF0ZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM0CiAgICAvLyBleHBvcnQgY2xhc3MgUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0IGV4dGVuZHMgYXJjNC5Db250cmFjdCB7CiAgICB0eG4gTnVtQXBwQXJncwogICAgYnogbWFpbl9iYXJlX3JvdXRpbmdAMjkKICAgIHB1c2hieXRlc3MgMHgyOTMxNGQ5NSAweDZhNjkxZmUyIC8vIG1ldGhvZCAib3B0SW4oKXZvaWQiLCBtZXRob2QgImNsb3NlT3V0KCl2b2lkIgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAogICAgbWF0Y2ggbWFpbl9vcHRJbl9yb3V0ZUAzIG1haW5fY2xvc2VPdXRfcm91dGVANAoKbWFpbl9zd2l0Y2hfY2FzZV9uZXh0QDU6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNAogICAgLy8gZXhwb3J0IGNsYXNzIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdCBleHRlbmRzIGFyYzQuQ29udHJhY3QgewogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBtdXN0IGJlIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBieiBtYWluX2NyZWF0ZV9Ob09wQDI1CiAgICBwdXNoYnl0ZXNzIDB4NDE0ZTQxYjUgMHg5MmUwM2IxYyAweDIxZjFkZGZmIDB4YmM5OTQ0OWUgMHhjOGIzYzBmMCAweDAwMzU5N2EyIDB4YzdkNGRiZjMgMHgzZTJmN2NiNyAweDNmZDc5ODU2IDB4OTczNjU0YmYgMHgwYzc5M2IxOCAweGFiNmVmNzNiIDB4MWVmN2I1ODYgMHhhZmViZmNhYyAweDEyNzg1MDY1IDB4Yjg0ZGE1NGEgMHgzODQ1YTcxZCAvLyBtZXRob2QgIm9wdEluQXNzZXRzKCl2b2lkIiwgbWV0aG9kICJkZXBvc2l0KCl2b2lkIiwgbWV0aG9kICJ3aXRoZHJhdyh1aW50NjQpdm9pZCIsIG1ldGhvZCAiY2xhaW1DcmVhdG9yKCl2b2lkIiwgbWV0aG9kICJjb21wb3VuZFlpZWxkKHVpbnQ2NCl2b2lkIiwgbWV0aG9kICJnZXRWYXVsdFN0YXRzKCkodWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQpIiwgbWV0aG9kICJnZXRVc2VyQWxwaGFCYWxhbmNlKGFkZHJlc3MpdWludDY0IiwgbWV0aG9kICJnZXRVc2VyU2hhcmVzKGFkZHJlc3MpdWludDY0IiwgbWV0aG9kICJwcmV2aWV3RGVwb3NpdCh1aW50NjQpdWludDY0IiwgbWV0aG9kICJwcmV2aWV3V2l0aGRyYXcodWludDY0KXVpbnQ2NCIsIG1ldGhvZCAiZ2V0Q29tcG91bmRRdW90ZSgpKHVpbnQ2NCx1aW50NjQsdWludDY0KSIsIG1ldGhvZCAidXBkYXRlTWluU3dhcFRocmVzaG9sZCh1aW50NjQpdm9pZCIsIG1ldGhvZCAidXBkYXRlVGlueW1hblBvb2wodWludDY0LGFkZHJlc3Mpdm9pZCIsIG1ldGhvZCAiY29udHJpYnV0ZUZhcm0oKXZvaWQiLCBtZXRob2QgInNldEZhcm1FbWlzc2lvblJhdGUodWludDY0KXZvaWQiLCBtZXRob2QgIndpdGhkcmF3RmFybSh1aW50NjQpdm9pZCIsIG1ldGhvZCAiZ2V0RmFybVN0YXRzKCkodWludDY0LHVpbnQ2NCkiCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAwCiAgICBtYXRjaCBvcHRJbkFzc2V0cyBkZXBvc2l0IHdpdGhkcmF3IGNsYWltQ3JlYXRvciBjb21wb3VuZFlpZWxkIGdldFZhdWx0U3RhdHMgZ2V0VXNlckFscGhhQmFsYW5jZSBnZXRVc2VyU2hhcmVzIHByZXZpZXdEZXBvc2l0IHByZXZpZXdXaXRoZHJhdyBnZXRDb21wb3VuZFF1b3RlIHVwZGF0ZU1pblN3YXBUaHJlc2hvbGQgdXBkYXRlVGlueW1hblBvb2wgY29udHJpYnV0ZUZhcm0gc2V0RmFybUVtaXNzaW9uUmF0ZSB3aXRoZHJhd0Zhcm0gZ2V0RmFybVN0YXRzCiAgICBlcnIKCm1haW5fY3JlYXRlX05vT3BAMjU6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNAogICAgLy8gZXhwb3J0IGNsYXNzIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdCBleHRlbmRzIGFyYzQuQ29udHJhY3QgewogICAgcHVzaGJ5dGVzIDB4YTM4YzViMTYgLy8gbWV0aG9kICJjcmVhdGVWYXVsdCh1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0LGFkZHJlc3MsYWRkcmVzcyl2b2lkIgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAogICAgbWF0Y2ggY3JlYXRlVmF1bHQKICAgIGVycgoKbWFpbl9jbG9zZU91dF9yb3V0ZUA0OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjU4CiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyBhbGxvd0FjdGlvbnM6ICdDbG9zZU91dCcgfSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIHB1c2hpbnQgMiAvLyBDbG9zZU91dAogICAgPT0KICAgIHR4biBBcHBsaWNhdGlvbklECiAgICAmJgogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBtdXN0IGJlIENsb3NlT3V0ICYmIGNhbiBvbmx5IGNhbGwgd2hlbiBub3QgY3JlYXRpbmcKICAgIGIgY2xvc2VPdXQKCm1haW5fb3B0SW5fcm91dGVAMzoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI0OQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAnT3B0SW4nIH0pCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnRjXzEgLy8gT3B0SW4KICAgID09CiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgJiYKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gbXVzdCBiZSBPcHRJbiAmJiBjYW4gb25seSBjYWxsIHdoZW4gbm90IGNyZWF0aW5nCiAgICBiIG9wdEluCgptYWluX2JhcmVfcm91dGluZ0AyOToKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM0CiAgICAvLyBleHBvcnQgY2xhc3MgUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0IGV4dGVuZHMgYXJjNC5Db250cmFjdCB7CiAgICBpbnRjXzMgLy8gVXBkYXRlQXBwbGljYXRpb24KICAgIHB1c2hpbnQgNSAvLyBEZWxldGVBcHBsaWNhdGlvbgogICAgdHhuIE9uQ29tcGxldGlvbgogICAgbWF0Y2ggbWFpbl91cGRhdGVBcHBsaWNhdGlvbkAzMCBtYWluX2RlbGV0ZUFwcGxpY2F0aW9uQDMxCiAgICBlcnIKCm1haW5fZGVsZXRlQXBwbGljYXRpb25AMzE6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2ODEKICAgIC8vIEBiYXJlbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAnRGVsZXRlQXBwbGljYXRpb24nIH0pCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGNhbiBvbmx5IGNhbGwgd2hlbiBub3QgY3JlYXRpbmcKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY4MwogICAgLy8gYXNzZXJ0KGZhbHNlLCAnQ29udHJhY3QgZGVsZXRpb24gZGlzYWJsZWQnKTsKICAgIGVyciAvLyBDb250cmFjdCBkZWxldGlvbiBkaXNhYmxlZAoKbWFpbl91cGRhdGVBcHBsaWNhdGlvbkAzMDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY3NgogICAgLy8gQGJhcmVtZXRob2QoeyBhbGxvd0FjdGlvbnM6ICdVcGRhdGVBcHBsaWNhdGlvbicgfSkKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gY2FuIG9ubHkgY2FsbCB3aGVuIG5vdCBjcmVhdGluZwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Njc4CiAgICAvLyBhc3NlcnQoZmFsc2UsICdDb250cmFjdCB1cGRhdGVzIGRpc2FibGVkJyk7CiAgICBlcnIgLy8gQ29udHJhY3QgdXBkYXRlcyBkaXNhYmxlZAoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuY3JlYXRlVmF1bHRbcm91dGluZ10oKSAtPiB2b2lkOgpjcmVhdGVWYXVsdDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE2MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgb25DcmVhdGU6ICdyZXF1aXJlJyB9KQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNAogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNgogICAgZHVwCiAgICBsZW4KICAgIHB1c2hpbnQgMzIgLy8gMzIKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuc3RhdGljX2FycmF5PGFyYzQudWludDgsIDMyPgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNwogICAgZHVwCiAgICBsZW4KICAgIHB1c2hpbnQgMzIgLy8gMzIKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuc3RhdGljX2FycmF5PGFyYzQudWludDgsIDMyPgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTcyCiAgICAvLyBhc3NlcnQoY3JlYXRvckZlZVJhdGUgPD0gTUFYX0ZFRV9SQVRFLCAnQ3JlYXRvciBmZWUgcmF0ZSBleGNlZWRzIG1heGltdW0gKDEwMCUpJyk7CiAgICBkaWcgNAogICAgcHVzaGludCAxMDAgLy8gMTAwCiAgICA8PQogICAgYXNzZXJ0IC8vIENyZWF0b3IgZmVlIHJhdGUgZXhjZWVkcyBtYXhpbXVtICgxMDAlKQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTczCiAgICAvLyBhc3NlcnQobWluU3dhcFRocmVzaG9sZCA+PSBNSU5fU1dBUF9BTU9VTlQsICdTd2FwIHRocmVzaG9sZCB0b28gbG93Jyk7CiAgICBkaWcgMwogICAgaW50YyA1IC8vIDIwMDAwMAogICAgPj0KICAgIGFzc2VydCAvLyBTd2FwIHRocmVzaG9sZCB0b28gbG93CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNzQKICAgIC8vIGFzc2VydChhbHBoYUFzc2V0SWQgIT09IFVpbnQ2NCgwKSwgJ0ludmFsaWQgQWxwaGEgYXNzZXQnKTsKICAgIGRpZyA2CiAgICBhc3NlcnQgLy8gSW52YWxpZCBBbHBoYSBhc3NldAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTc1CiAgICAvLyBhc3NlcnQodXNkY0Fzc2V0SWQgIT09IFVpbnQ2NCgwKSwgJ0ludmFsaWQgVVNEQyBhc3NldCcpOwogICAgZGlnIDUKICAgIGFzc2VydCAvLyBJbnZhbGlkIFVTREMgYXNzZXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE3NgogICAgLy8gYXNzZXJ0KGFscGhhQXNzZXRJZCAhPT0gdXNkY0Fzc2V0SWQsICdBbHBoYSBhbmQgVVNEQyBtdXN0IGJlIGRpZmZlcmVudCcpOwogICAgZGlnIDYKICAgIGRpZyA2CiAgICAhPQogICAgYXNzZXJ0IC8vIEFscGhhIGFuZCBVU0RDIG11c3QgYmUgZGlmZmVyZW50CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNzcKICAgIC8vIGFzc2VydCh0aW55bWFuUG9vbEFwcElkICE9PSBVaW50NjQoMCksICdJbnZhbGlkIFRpbnltYW4gcG9vbCBhcHAgSUQnKTsKICAgIGRpZyAyCiAgICBhc3NlcnQgLy8gSW52YWxpZCBUaW55bWFuIHBvb2wgYXBwIElECiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MAogICAgLy8gYWxwaGFBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gQWxwaGEgQVNBIElEIChkZXBvc2l0ICYgeWllbGQgYXNzZXQpCiAgICBieXRlY18zIC8vICJhbHBoYUFzc2V0IgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTgwCiAgICAvLyB0aGlzLmFscGhhQXNzZXQudmFsdWUgPSBhbHBoYUFzc2V0SWQ7CiAgICB1bmNvdmVyIDcKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MQogICAgLy8gdXNkY0Fzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKGFpcmRyb3BzIGNvbWUgaW4gYXMgdGhpcykKICAgIGJ5dGVjIDQgLy8gInVzZGNBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE4MQogICAgLy8gdGhpcy51c2RjQXNzZXQudmFsdWUgPSB1c2RjQXNzZXRJZDsKICAgIHVuY292ZXIgNgogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0CiAgICAvLyBjcmVhdG9yQWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7ICAgLy8gVmF1bHQgY3JlYXRvciB3aG8gcmVjZWl2ZXMgZmVlCiAgICBieXRlYyA1IC8vICJjcmVhdG9yQWRkcmVzcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE4NAogICAgLy8gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZSA9IFR4bi5zZW5kZXI7CiAgICB0eG4gU2VuZGVyCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDUKICAgIC8vIHJhcmVmaUFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgICAvLyBSYXJlRmkgcGxhdGZvcm0gYWRkcmVzcyAoY2FuIGFsc28gdHJpZ2dlciBzd2FwcykKICAgIGJ5dGVjIDkgLy8gInJhcmVmaUFkZHJlc3MiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxODUKICAgIC8vIHRoaXMucmFyZWZpQWRkcmVzcy52YWx1ZSA9IHJhcmVmaUFkZHJlc3M7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDYKICAgIC8vIGNyZWF0b3JGZWVSYXRlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyAwLTEwMCwgcGVyY2VudGFnZSBvZiB5aWVsZCB0byBjcmVhdG9yCiAgICBieXRlYyAxNSAvLyAiY3JlYXRvckZlZVJhdGUiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxODYKICAgIC8vIHRoaXMuY3JlYXRvckZlZVJhdGUudmFsdWUgPSBjcmVhdG9yRmVlUmF0ZTsKICAgIHVuY292ZXIgNAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3CiAgICAvLyBjcmVhdG9yVW5jbGFpbWVkQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIEFjY3VtdWxhdGVkIEFscGhhIGZvciBjcmVhdG9yIHRvIGNsYWltCiAgICBieXRlYyA4IC8vICJjcmVhdG9yVW5jbGFpbWVkQWxwaGEiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxODcKICAgIC8vIHRoaXMuY3JlYXRvclVuY2xhaW1lZEFscGhhLnZhbHVlID0gVWludDY0KDApOwogICAgaW50Y18wIC8vIDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MAogICAgLy8gdG90YWxTaGFyZXMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIFRvdGFsIHNoYXJlcyBpc3N1ZWQgdG8gYWxsIGRlcG9zaXRvcnMKICAgIGJ5dGVjXzAgLy8gInRvdGFsU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTkwCiAgICAvLyB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID0gVWludDY0KDApOwogICAgaW50Y18wIC8vIDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MQogICAgLy8gdG90YWxBbHBoYSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFRvdGFsIEFscGhhIGhlbGQgKGRlcG9zaXRzICsgY29tcG91bmRlZCB5aWVsZCkKICAgIGJ5dGVjXzEgLy8gInRvdGFsQWxwaGEiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxOTEKICAgIC8vIHRoaXMudG90YWxBbHBoYS52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTIKICAgIC8vIG1pblN3YXBUaHJlc2hvbGQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBNaW5pbXVtIFVTREMgYmVmb3JlIHN3YXAgYWxsb3dlZAogICAgYnl0ZWMgMTEgLy8gIm1pblN3YXBUaHJlc2hvbGQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxOTIKICAgIC8vIHRoaXMubWluU3dhcFRocmVzaG9sZC52YWx1ZSA9IG1pblN3YXBUaHJlc2hvbGQ7CiAgICB1bmNvdmVyIDMKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MwogICAgLy8gdG90YWxZaWVsZENvbXBvdW5kZWQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIFRvdGFsIHlpZWxkIGNvbXBvdW5kZWQgKGZvciBzdGF0cykKICAgIGJ5dGVjIDEyIC8vICJ0b3RhbFlpZWxkQ29tcG91bmRlZCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE5MwogICAgLy8gdGhpcy50b3RhbFlpZWxkQ29tcG91bmRlZC52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTYKICAgIC8vIHRpbnltYW5Qb29sQXBwSWQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBUaW55bWFuIFYyIHBvb2wgYXBwIElECiAgICBieXRlYyAxMyAvLyAidGlueW1hblBvb2xBcHBJZCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE5NgogICAgLy8gdGhpcy50aW55bWFuUG9vbEFwcElkLnZhbHVlID0gdGlueW1hblBvb2xBcHBJZDsKICAgIHVuY292ZXIgMgogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU3CiAgICAvLyB0aW55bWFuUG9vbEFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAvLyBUaW55bWFuIHBvb2wgYWRkcmVzcwogICAgYnl0ZWMgMTQgLy8gInRpbnltYW5Qb29sQWRkcmVzcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE5NwogICAgLy8gdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWUgPSB0aW55bWFuUG9vbEFkZHJlc3M7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjAKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIEFscGhhIGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMiAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMDAKICAgIC8vIHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYxCiAgICAvLyBmYXJtRW1pc3Npb25SYXRlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyBCYXNpcyBwb2ludHMgb2YgY29tcG91bmQgb3V0cHV0IHRvIGFkZCBmcm9tIGZhcm0gKGUuZy4sIDEwMDAgPSAxMCUpCiAgICBieXRlYyAxMCAvLyAiZmFybUVtaXNzaW9uUmF0ZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIwMQogICAgLy8gdGhpcy5mYXJtRW1pc3Npb25SYXRlLnZhbHVlID0gVWludDY0KDApOyAvLyBEaXNhYmxlZCBieSBkZWZhdWx0CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE2MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgb25DcmVhdGU6ICdyZXF1aXJlJyB9KQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQub3B0SW5Bc3NldHNbcm91dGluZ10oKSAtPiB2b2lkOgpvcHRJbkFzc2V0czoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIxMQogICAgLy8gYXNzZXJ0KFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWUsICdPbmx5IGNyZWF0b3IgY2FuIG9wdC1pbiBhc3NldHMnKTsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NAogICAgLy8gY3JlYXRvckFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgIC8vIFZhdWx0IGNyZWF0b3Igd2hvIHJlY2VpdmVzIGZlZQogICAgYnl0ZWMgNSAvLyAiY3JlYXRvckFkZHJlc3MiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMTEKICAgIC8vIGFzc2VydChUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlLCAnT25seSBjcmVhdG9yIGNhbiBvcHQtaW4gYXNzZXRzJyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBPbmx5IGNyZWF0b3IgY2FuIG9wdC1pbiBhc3NldHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIxMwogICAgLy8gY29uc3QgYXBwQWRkcjogQWNjb3VudCA9IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzOwogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIxNwogICAgLy8gY29uc3QgY3VycmVudEluZGV4ID0gVHhuLmdyb3VwSW5kZXg7CiAgICB0eG4gR3JvdXBJbmRleAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjE4CiAgICAvLyBhc3NlcnQoY3VycmVudEluZGV4ID49IFVpbnQ2NCgxKSwgJ0FwcCBjYWxsIG11c3QgZm9sbG93IHBheW1lbnQnKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIEFwcCBjYWxsIG11c3QgZm9sbG93IHBheW1lbnQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIyMAogICAgLy8gY29uc3QgYWxnb1BheW1lbnQgPSBndHhuLlBheW1lbnRUeG4oY3VycmVudEluZGV4IC0gVWludDY0KDEpKTsKICAgIGludGNfMSAvLyAxCiAgICAtCiAgICBkdXAKICAgIGd0eG5zIFR5cGVFbnVtCiAgICBpbnRjXzEgLy8gcGF5CiAgICA9PQogICAgYXNzZXJ0IC8vIHRyYW5zYWN0aW9uIHR5cGUgaXMgcGF5CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMjEKICAgIC8vIGFzc2VydChhbGdvUGF5bWVudC5yZWNlaXZlciA9PT0gYXBwQWRkciwgJ1BheW1lbnQgbXVzdCBiZSB0byBhcHAnKTsKICAgIGR1cAogICAgZ3R4bnMgUmVjZWl2ZXIKICAgIGRpZyAyCiAgICA9PQogICAgYXNzZXJ0IC8vIFBheW1lbnQgbXVzdCBiZSB0byBhcHAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIyMgogICAgLy8gYXNzZXJ0KGFsZ29QYXltZW50LmFtb3VudCA+PSB0b3RhbFJlcXVpcmVkLCAnSW5zdWZmaWNpZW50IEFMR08gKG5lZWQgNS40IEFMR08pJyk7CiAgICBkdXAKICAgIGd0eG5zIEFtb3VudAogICAgcHVzaGludCA1NDAwMDAwIC8vIDU0MDAwMDAKICAgID49CiAgICBhc3NlcnQgLy8gSW5zdWZmaWNpZW50IEFMR08gKG5lZWQgNS40IEFMR08pCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMjMKICAgIC8vIGFzc2VydChhbGdvUGF5bWVudC5zZW5kZXIgPT09IFR4bi5zZW5kZXIsICdQYXltZW50IG11c3QgYmUgZnJvbSBjYWxsZXInKTsKICAgIGd0eG5zIFNlbmRlcgogICAgdHhuIFNlbmRlcgogICAgPT0KICAgIGFzc2VydCAvLyBQYXltZW50IG11c3QgYmUgZnJvbSBjYWxsZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIyNi0yMzEKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IGFwcEFkZHIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIyOAogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQwCiAgICAvLyBhbHBoYUFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBBbHBoYSBBU0EgSUQgKGRlcG9zaXQgJiB5aWVsZCBhc3NldCkKICAgIGJ5dGVjXzMgLy8gImFscGhhQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMjgKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMjkKICAgIC8vIGFzc2V0QW1vdW50OiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBBc3NldEFtb3VudAogICAgaXR4bl9maWVsZCBYZmVyQXNzZXQKICAgIGR1cAogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMjYtMjMxCiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBhcHBBZGRyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBVaW50NjQoMCksCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpbnRjXzMgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjMwCiAgICAvLyBmZWU6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjI2LTIzMQogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogYXBwQWRkciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIzNC0yMzkKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IGFwcEFkZHIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjM2CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMudXNkY0Fzc2V0LnZhbHVlKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MQogICAgLy8gdXNkY0Fzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKGFpcmRyb3BzIGNvbWUgaW4gYXMgdGhpcykKICAgIGJ5dGVjIDQgLy8gInVzZGNBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIzNgogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjM3CiAgICAvLyBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIzNC0yMzkKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IGFwcEFkZHIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaW50Y18zIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIzOAogICAgLy8gZmVlOiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIzNC0yMzkKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IGFwcEFkZHIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIwOQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0Lm9wdEluW3JvdXRpbmddKCkgLT4gdm9pZDoKb3B0SW46CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyNTIKICAgIC8vIHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY3CiAgICAvLyB1c2VyU2hhcmVzID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVXNlcidzIHNoYXJlIGJhbGFuY2UgKHJlcHJlc2VudHMgcHJvcG9ydGlvbmFsIG93bmVyc2hpcCkKICAgIGJ5dGVjIDYgLy8gInVzZXJTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyNTIKICAgIC8vIHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBhcHBfbG9jYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyNDkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IGFsbG93QWN0aW9uczogJ09wdEluJyB9KQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuY2xvc2VPdXRbcm91dGluZ10oKSAtPiB2b2lkOgpjbG9zZU91dDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI2MAogICAgLy8gY29uc3Qgc2hhcmVzID0gdGhpcy51c2VyU2hhcmVzKFR4bi5zZW5kZXIpLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY3CiAgICAvLyB1c2VyU2hhcmVzID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVXNlcidzIHNoYXJlIGJhbGFuY2UgKHJlcHJlc2VudHMgcHJvcG9ydGlvbmFsIG93bmVyc2hpcCkKICAgIGJ5dGVjIDYgLy8gInVzZXJTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyNjAKICAgIC8vIGNvbnN0IHNoYXJlcyA9IHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZTsKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICBhc3NlcnQgLy8gY2hlY2sgTG9jYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI2MgogICAgLy8gaWYgKHNoYXJlcyA+IFVpbnQ2NCgwKSkgewogICAgYnogY2xvc2VPdXRfYWZ0ZXJfaWZfZWxzZUA0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyNjQKICAgIC8vIGNvbnN0IGFscGhhQW1vdW50ID0gdGhpcy5zaGFyZXNUb0FscGhhKHNoYXJlcyk7CiAgICBkdXBuIDIKICAgIGNhbGxzdWIgc2hhcmVzVG9BbHBoYQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjY3CiAgICAvLyB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID0gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSAtIHNoYXJlczsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MAogICAgLy8gdG90YWxTaGFyZXMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIFRvdGFsIHNoYXJlcyBpc3N1ZWQgdG8gYWxsIGRlcG9zaXRvcnMKICAgIGJ5dGVjXzAgLy8gInRvdGFsU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjY3CiAgICAvLyB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID0gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSAtIHNoYXJlczsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICB1bmNvdmVyIDIKICAgIC0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUwCiAgICAvLyB0b3RhbFNoYXJlcyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gVG90YWwgc2hhcmVzIGlzc3VlZCB0byBhbGwgZGVwb3NpdG9ycwogICAgYnl0ZWNfMCAvLyAidG90YWxTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyNjcKICAgIC8vIHRoaXMudG90YWxTaGFyZXMudmFsdWUgPSB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlIC0gc2hhcmVzOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI2OAogICAgLy8gdGhpcy50b3RhbEFscGhhLnZhbHVlID0gdGhpcy50b3RhbEFscGhhLnZhbHVlIC0gYWxwaGFBbW91bnQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTEKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjY4CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgLSBhbHBoYUFtb3VudDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBkaWcgMQogICAgLQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTEKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjY4CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgLSBhbHBoYUFtb3VudDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyNzEtMjc2CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBhbHBoYUFtb3VudCwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI3MgogICAgLy8gYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI3MwogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQwCiAgICAvLyBhbHBoYUFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBBbHBoYSBBU0EgSUQgKGRlcG9zaXQgJiB5aWVsZCBhc3NldCkKICAgIGJ5dGVjXzMgLy8gImFscGhhQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyNzMKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICB1bmNvdmVyIDIKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI3MS0yNzYKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IGFscGhhQW1vdW50LAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaW50Y18zIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI3NQogICAgLy8gZmVlOiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI3MS0yNzYKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IGFscGhhQW1vdW50LAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKCmNsb3NlT3V0X2FmdGVyX2lmX2Vsc2VANDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI1OAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAnQ2xvc2VPdXQnIH0pCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5kZXBvc2l0W3JvdXRpbmddKCkgLT4gdm9pZDoKZGVwb3NpdDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI5MwogICAgLy8gY29uc3QgYXBwQWRkcjogQWNjb3VudCA9IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzOwogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI5NgogICAgLy8gY29uc3QgdXNkY0JhbGFuY2UgPSBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MQogICAgLy8gdXNkY0Fzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKGFpcmRyb3BzIGNvbWUgaW4gYXMgdGhpcykKICAgIGJ5dGVjIDQgLy8gInVzZGNBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI5NgogICAgLy8gY29uc3QgdXNkY0JhbGFuY2UgPSBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBkaWcgMQogICAgc3dhcAogICAgYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCiAgICBhc3NlcnQgLy8gYWNjb3VudCBvcHRlZCBpbnRvIGFzc2V0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyOTcKICAgIC8vIGFzc2VydCh1c2RjQmFsYW5jZSA8IHRoaXMubWluU3dhcFRocmVzaG9sZC52YWx1ZSwgJ0RlcG9zaXRzIHBhdXNlZDogeWllbGQgcGVuZGluZyBjb21wb3VuZCcpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUyCiAgICAvLyBtaW5Td2FwVGhyZXNob2xkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgLy8gTWluaW11bSBVU0RDIGJlZm9yZSBzd2FwIGFsbG93ZWQKICAgIGJ5dGVjIDExIC8vICJtaW5Td2FwVGhyZXNob2xkIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mjk3CiAgICAvLyBhc3NlcnQodXNkY0JhbGFuY2UgPCB0aGlzLm1pblN3YXBUaHJlc2hvbGQudmFsdWUsICdEZXBvc2l0cyBwYXVzZWQ6IHlpZWxkIHBlbmRpbmcgY29tcG91bmQnKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA8CiAgICBhc3NlcnQgLy8gRGVwb3NpdHMgcGF1c2VkOiB5aWVsZCBwZW5kaW5nIGNvbXBvdW5kCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyOTkKICAgIC8vIGNvbnN0IGN1cnJlbnRJbmRleCA9IFR4bi5ncm91cEluZGV4OwogICAgdHhuIEdyb3VwSW5kZXgKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMwMAogICAgLy8gYXNzZXJ0KGN1cnJlbnRJbmRleCA+PSBVaW50NjQoMSksICdBcHAgY2FsbCBtdXN0IGZvbGxvdyBhc3NldCB0cmFuc2ZlcicpOwogICAgZHVwCiAgICBhc3NlcnQgLy8gQXBwIGNhbGwgbXVzdCBmb2xsb3cgYXNzZXQgdHJhbnNmZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMwMwogICAgLy8gY29uc3QgZGVwb3NpdFRyYW5zZmVyID0gZ3R4bi5Bc3NldFRyYW5zZmVyVHhuKGN1cnJlbnRJbmRleCAtIFVpbnQ2NCgxKSk7CiAgICBpbnRjXzEgLy8gMQogICAgLQogICAgZHVwCiAgICBndHhucyBUeXBlRW51bQogICAgaW50Y18zIC8vIGF4ZmVyCiAgICA9PQogICAgYXNzZXJ0IC8vIHRyYW5zYWN0aW9uIHR5cGUgaXMgYXhmZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMwNAogICAgLy8gYXNzZXJ0KGRlcG9zaXRUcmFuc2Zlci54ZmVyQXNzZXQgPT09IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksICdNdXN0IHRyYW5zZmVyIEFscGhhIGFzc2V0Jyk7CiAgICBkdXAKICAgIGd0eG5zIFhmZXJBc3NldAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQwCiAgICAvLyBhbHBoYUFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBBbHBoYSBBU0EgSUQgKGRlcG9zaXQgJiB5aWVsZCBhc3NldCkKICAgIGJ5dGVjXzMgLy8gImFscGhhQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMDQKICAgIC8vIGFzc2VydChkZXBvc2l0VHJhbnNmZXIueGZlckFzc2V0ID09PSBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLCAnTXVzdCB0cmFuc2ZlciBBbHBoYSBhc3NldCcpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBhc3NlcnQgLy8gTXVzdCB0cmFuc2ZlciBBbHBoYSBhc3NldAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzA1CiAgICAvLyBhc3NlcnQoZGVwb3NpdFRyYW5zZmVyLmFzc2V0UmVjZWl2ZXIgPT09IGFwcEFkZHIsICdNdXN0IHNlbmQgdG8gY29udHJhY3QnKTsKICAgIGR1cAogICAgZ3R4bnMgQXNzZXRSZWNlaXZlcgogICAgdW5jb3ZlciAyCiAgICA9PQogICAgYXNzZXJ0IC8vIE11c3Qgc2VuZCB0byBjb250cmFjdAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzA2CiAgICAvLyBhc3NlcnQoZGVwb3NpdFRyYW5zZmVyLnNlbmRlciA9PT0gVHhuLnNlbmRlciwgJ1RyYW5zZmVyIG11c3QgYmUgZnJvbSBjYWxsZXInKTsKICAgIGR1cAogICAgZ3R4bnMgU2VuZGVyCiAgICB0eG4gU2VuZGVyCiAgICA9PQogICAgYXNzZXJ0IC8vIFRyYW5zZmVyIG11c3QgYmUgZnJvbSBjYWxsZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMwOAogICAgLy8gY29uc3QgYW1vdW50ID0gZGVwb3NpdFRyYW5zZmVyLmFzc2V0QW1vdW50OwogICAgZ3R4bnMgQXNzZXRBbW91bnQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMwOQogICAgLy8gYXNzZXJ0KGFtb3VudCA+PSBNSU5fREVQT1NJVF9BTU9VTlQsICdEZXBvc2l0IHRvbyBzbWFsbCcpOwogICAgZHVwCiAgICBwdXNoaW50IDEwMDAwMDAgLy8gMTAwMDAwMAogICAgPj0KICAgIGFzc2VydCAvLyBEZXBvc2l0IHRvbyBzbWFsbAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzEyCiAgICAvLyBjb25zdCBzaGFyZXNUb01pbnQgPSB0aGlzLmFscGhhVG9TaGFyZXMoYW1vdW50KTsKICAgIGR1cAogICAgY2FsbHN1YiBhbHBoYVRvU2hhcmVzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMTMKICAgIC8vIGFzc2VydChzaGFyZXNUb01pbnQgPiBVaW50NjQoMCksICdTaGFyZXMgdG8gbWludCBpcyB6ZXJvJyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBTaGFyZXMgdG8gbWludCBpcyB6ZXJvCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMTYKICAgIC8vIHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZSA9IHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZSArIHNoYXJlc1RvTWludDsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NwogICAgLy8gdXNlclNoYXJlcyA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFVzZXIncyBzaGFyZSBiYWxhbmNlIChyZXByZXNlbnRzIHByb3BvcnRpb25hbCBvd25lcnNoaXApCiAgICBieXRlYyA2IC8vICJ1c2VyU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzE2CiAgICAvLyB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWUgPSB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWUgKyBzaGFyZXNUb01pbnQ7CiAgICBhcHBfbG9jYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgTG9jYWxTdGF0ZSBleGlzdHMKICAgIGRpZyAxCiAgICArCiAgICB0eG4gU2VuZGVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NwogICAgLy8gdXNlclNoYXJlcyA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFVzZXIncyBzaGFyZSBiYWxhbmNlIChyZXByZXNlbnRzIHByb3BvcnRpb25hbCBvd25lcnNoaXApCiAgICBieXRlYyA2IC8vICJ1c2VyU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzE2CiAgICAvLyB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWUgPSB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWUgKyBzaGFyZXNUb01pbnQ7CiAgICB1bmNvdmVyIDIKICAgIGFwcF9sb2NhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMxNwogICAgLy8gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9IHRoaXMudG90YWxTaGFyZXMudmFsdWUgKyBzaGFyZXNUb01pbnQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTAKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMxNwogICAgLy8gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9IHRoaXMudG90YWxTaGFyZXMudmFsdWUgKyBzaGFyZXNUb01pbnQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgKwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTAKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMxNwogICAgLy8gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9IHRoaXMudG90YWxTaGFyZXMudmFsdWUgKyBzaGFyZXNUb01pbnQ7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzE4CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgKyBhbW91bnQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTEKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzE4CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgKyBhbW91bnQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgKwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTEKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzE4CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgKyBhbW91bnQ7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjkxCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQud2l0aGRyYXdbcm91dGluZ10oKSAtPiB2b2lkOgp3aXRoZHJhdzoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMyNgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIGR1cAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzI4CiAgICAvLyBjb25zdCB1c2VyU2hhcmVCYWxhbmNlID0gdGhpcy51c2VyU2hhcmVzKFR4bi5zZW5kZXIpLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY3CiAgICAvLyB1c2VyU2hhcmVzID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVXNlcidzIHNoYXJlIGJhbGFuY2UgKHJlcHJlc2VudHMgcHJvcG9ydGlvbmFsIG93bmVyc2hpcCkKICAgIGJ5dGVjIDYgLy8gInVzZXJTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMjgKICAgIC8vIGNvbnN0IHVzZXJTaGFyZUJhbGFuY2UgPSB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWU7CiAgICBhcHBfbG9jYWxfZ2V0X2V4CiAgICBzd2FwCiAgICBjb3ZlciAyCiAgICBhc3NlcnQgLy8gY2hlY2sgTG9jYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMzMgogICAgLy8gaWYgKHNoYXJlc1RvUmVkZWVtID09PSBVaW50NjQoMCkpIHsKICAgIGJ6IHdpdGhkcmF3X2lmX2JvZHlAMgogICAgZGlnIDEKCndpdGhkcmF3X2FmdGVyX2lmX2Vsc2VAMzoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMzNgogICAgLy8gYXNzZXJ0KHNoYXJlc1RvUmVkZWVtID4gVWludDY0KDApLCAnTm90aGluZyB0byB3aXRoZHJhdycpOwogICAgZHVwCiAgICBhc3NlcnQgLy8gTm90aGluZyB0byB3aXRoZHJhdwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzM3CiAgICAvLyBhc3NlcnQoc2hhcmVzVG9SZWRlZW0gPD0gdXNlclNoYXJlQmFsYW5jZSwgJ0luc3VmZmljaWVudCBzaGFyZXMnKTsKICAgIGR1cAogICAgZGlnIDIKICAgIGR1cAogICAgY292ZXIgMwogICAgPD0KICAgIGFzc2VydCAvLyBJbnN1ZmZpY2llbnQgc2hhcmVzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNDAKICAgIC8vIGNvbnN0IGFscGhhQW1vdW50ID0gdGhpcy5zaGFyZXNUb0FscGhhKHNoYXJlc1RvUmVkZWVtKTsKICAgIGR1cAogICAgY2FsbHN1YiBzaGFyZXNUb0FscGhhCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNDEKICAgIC8vIGFzc2VydChhbHBoYUFtb3VudCA+IFVpbnQ2NCgwKSwgJ0FscGhhIGFtb3VudCBpcyB6ZXJvJyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBBbHBoYSBhbW91bnQgaXMgemVybwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzQ0CiAgICAvLyB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWUgPSB1c2VyU2hhcmVCYWxhbmNlIC0gc2hhcmVzVG9SZWRlZW07CiAgICB1bmNvdmVyIDIKICAgIGRpZyAyCiAgICAtCiAgICB0eG4gU2VuZGVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NwogICAgLy8gdXNlclNoYXJlcyA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFVzZXIncyBzaGFyZSBiYWxhbmNlIChyZXByZXNlbnRzIHByb3BvcnRpb25hbCBvd25lcnNoaXApCiAgICBieXRlYyA2IC8vICJ1c2VyU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzQ0CiAgICAvLyB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWUgPSB1c2VyU2hhcmVCYWxhbmNlIC0gc2hhcmVzVG9SZWRlZW07CiAgICB1bmNvdmVyIDIKICAgIGFwcF9sb2NhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM0NQogICAgLy8gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9IHRoaXMudG90YWxTaGFyZXMudmFsdWUgLSBzaGFyZXNUb1JlZGVlbTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MAogICAgLy8gdG90YWxTaGFyZXMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIFRvdGFsIHNoYXJlcyBpc3N1ZWQgdG8gYWxsIGRlcG9zaXRvcnMKICAgIGJ5dGVjXzAgLy8gInRvdGFsU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzQ1CiAgICAvLyB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID0gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSAtIHNoYXJlc1RvUmVkZWVtOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIHVuY292ZXIgMgogICAgLQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTAKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM0NQogICAgLy8gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9IHRoaXMudG90YWxTaGFyZXMudmFsdWUgLSBzaGFyZXNUb1JlZGVlbTsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNDYKICAgIC8vIHRoaXMudG90YWxBbHBoYS52YWx1ZSA9IHRoaXMudG90YWxBbHBoYS52YWx1ZSAtIGFscGhhQW1vdW50OwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUxCiAgICAvLyB0b3RhbEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVG90YWwgQWxwaGEgaGVsZCAoZGVwb3NpdHMgKyBjb21wb3VuZGVkIHlpZWxkKQogICAgYnl0ZWNfMSAvLyAidG90YWxBbHBoYSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM0NgogICAgLy8gdGhpcy50b3RhbEFscGhhLnZhbHVlID0gdGhpcy50b3RhbEFscGhhLnZhbHVlIC0gYWxwaGFBbW91bnQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZGlnIDEKICAgIC0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUxCiAgICAvLyB0b3RhbEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVG90YWwgQWxwaGEgaGVsZCAoZGVwb3NpdHMgKyBjb21wb3VuZGVkIHlpZWxkKQogICAgYnl0ZWNfMSAvLyAidG90YWxBbHBoYSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM0NgogICAgLy8gdGhpcy50b3RhbEFscGhhLnZhbHVlID0gdGhpcy50b3RhbEFscGhhLnZhbHVlIC0gYWxwaGFBbW91bnQ7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzQ5LTM1NAogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogYWxwaGFBbW91bnQsCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNTAKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICB0eG4gU2VuZGVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNTEKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MAogICAgLy8gYWxwaGFBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gQWxwaGEgQVNBIElEIChkZXBvc2l0ICYgeWllbGQgYXNzZXQpCiAgICBieXRlY18zIC8vICJhbHBoYUFzc2V0IgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzUxCiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgdW5jb3ZlciAyCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNDktMzU0CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBhbHBoYUFtb3VudCwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGludGNfMyAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNTMKICAgIC8vIGZlZTogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNDktMzU0CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBhbHBoYUFtb3VudCwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMjYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgp3aXRoZHJhd19pZl9ib2R5QDI6CiAgICBkdXAKICAgIGIgd2l0aGRyYXdfYWZ0ZXJfaWZfZWxzZUAzCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5jbGFpbUNyZWF0b3Jbcm91dGluZ10oKSAtPiB2b2lkOgpjbGFpbUNyZWF0b3I6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNjYKICAgIC8vIGFzc2VydChUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlLCAnT25seSBjcmVhdG9yIGNhbiBjbGFpbScpOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0CiAgICAvLyBjcmVhdG9yQWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7ICAgLy8gVmF1bHQgY3JlYXRvciB3aG8gcmVjZWl2ZXMgZmVlCiAgICBieXRlYyA1IC8vICJjcmVhdG9yQWRkcmVzcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM2NgogICAgLy8gYXNzZXJ0KFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWUsICdPbmx5IGNyZWF0b3IgY2FuIGNsYWltJyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBPbmx5IGNyZWF0b3IgY2FuIGNsYWltCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNjgKICAgIC8vIGNvbnN0IGNsYWltYWJsZSA9IHRoaXMuY3JlYXRvclVuY2xhaW1lZEFscGhhLnZhbHVlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3CiAgICAvLyBjcmVhdG9yVW5jbGFpbWVkQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIEFjY3VtdWxhdGVkIEFscGhhIGZvciBjcmVhdG9yIHRvIGNsYWltCiAgICBieXRlYyA4IC8vICJjcmVhdG9yVW5jbGFpbWVkQWxwaGEiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNjgKICAgIC8vIGNvbnN0IGNsYWltYWJsZSA9IHRoaXMuY3JlYXRvclVuY2xhaW1lZEFscGhhLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM2OQogICAgLy8gYXNzZXJ0KGNsYWltYWJsZSA+IFVpbnQ2NCgwKSwgJ05vdGhpbmcgdG8gY2xhaW0nKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIE5vdGhpbmcgdG8gY2xhaW0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3CiAgICAvLyBjcmVhdG9yVW5jbGFpbWVkQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIEFjY3VtdWxhdGVkIEFscGhhIGZvciBjcmVhdG9yIHRvIGNsYWltCiAgICBieXRlYyA4IC8vICJjcmVhdG9yVW5jbGFpbWVkQWxwaGEiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNzIKICAgIC8vIHRoaXMuY3JlYXRvclVuY2xhaW1lZEFscGhhLnZhbHVlID0gVWludDY0KDApOwogICAgaW50Y18wIC8vIDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNzUtMzgwCiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBjbGFpbWFibGUsCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNzYKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICB0eG4gU2VuZGVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNzcKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MAogICAgLy8gYWxwaGFBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gQWxwaGEgQVNBIElEIChkZXBvc2l0ICYgeWllbGQgYXNzZXQpCiAgICBieXRlY18zIC8vICJhbHBoYUFzc2V0IgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mzc3CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgdW5jb3ZlciAyCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNzUtMzgwCiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBjbGFpbWFibGUsCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpbnRjXzMgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mzc5CiAgICAvLyBmZWU6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mzc1LTM4MAogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogY2xhaW1hYmxlLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM2NAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmNvbXBvdW5kWWllbGRbcm91dGluZ10oKSAtPiB2b2lkOgpjb21wb3VuZFlpZWxkOgogICAgcHVzaGJ5dGVzICIiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozOTQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozOTYKICAgIC8vIGNvbnN0IGlzQ3JlYXRvciA9IFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWU7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDQKICAgIC8vIGNyZWF0b3JBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAvLyBWYXVsdCBjcmVhdG9yIHdobyByZWNlaXZlcyBmZWUKICAgIGJ5dGVjIDUgLy8gImNyZWF0b3JBZGRyZXNzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mzk2CiAgICAvLyBjb25zdCBpc0NyZWF0b3IgPSBUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozOTcKICAgIC8vIGNvbnN0IGlzUmFyZWZpID0gVHhuLnNlbmRlciA9PT0gdGhpcy5yYXJlZmlBZGRyZXNzLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ1CiAgICAvLyByYXJlZmlBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAgLy8gUmFyZUZpIHBsYXRmb3JtIGFkZHJlc3MgKGNhbiBhbHNvIHRyaWdnZXIgc3dhcHMpCiAgICBieXRlYyA5IC8vICJyYXJlZmlBZGRyZXNzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mzk3CiAgICAvLyBjb25zdCBpc1JhcmVmaSA9IFR4bi5zZW5kZXIgPT09IHRoaXMucmFyZWZpQWRkcmVzcy52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mzk4CiAgICAvLyBhc3NlcnQoaXNDcmVhdG9yIHx8IGlzUmFyZWZpLCAnT25seSBjcmVhdG9yIG9yIFJhcmVGaSBjYW4gY29tcG91bmQnKTsKICAgIHx8CiAgICBhc3NlcnQgLy8gT25seSBjcmVhdG9yIG9yIFJhcmVGaSBjYW4gY29tcG91bmQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM5OQogICAgLy8gYXNzZXJ0KHNsaXBwYWdlQnBzIDw9IE1BWF9TTElQUEFHRV9CUFMsICdTbGlwcGFnZSB0b28gaGlnaCAobWF4IDEwJSknKTsKICAgIGR1cAogICAgcHVzaGludCAxMDAwIC8vIDEwMDAKICAgIDw9CiAgICBhc3NlcnQgLy8gU2xpcHBhZ2UgdG9vIGhpZ2ggKG1heCAxMCUpCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MDEKICAgIC8vIGNvbnN0IGFwcEFkZHI6IEFjY291bnQgPSBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzczsKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MDIKICAgIC8vIGNvbnN0IHVzZGNCYWxhbmNlID0gQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDEKICAgIC8vIHVzZGNBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFVTREMgQVNBIElEIChhaXJkcm9wcyBjb21lIGluIGFzIHRoaXMpCiAgICBieXRlYyA0IC8vICJ1c2RjQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MDIKICAgIC8vIGNvbnN0IHVzZGNCYWxhbmNlID0gQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZGlnIDEKICAgIHN3YXAKICAgIGFzc2V0X2hvbGRpbmdfZ2V0IEFzc2V0QmFsYW5jZQogICAgYXNzZXJ0IC8vIGFjY291bnQgb3B0ZWQgaW50byBhc3NldAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDA0CiAgICAvLyBhc3NlcnQodXNkY0JhbGFuY2UgPj0gdGhpcy5taW5Td2FwVGhyZXNob2xkLnZhbHVlLCAnQmVsb3cgbWluaW11bSBzd2FwIHRocmVzaG9sZCcpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUyCiAgICAvLyBtaW5Td2FwVGhyZXNob2xkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgLy8gTWluaW11bSBVU0RDIGJlZm9yZSBzd2FwIGFsbG93ZWQKICAgIGJ5dGVjIDExIC8vICJtaW5Td2FwVGhyZXNob2xkIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDA0CiAgICAvLyBhc3NlcnQodXNkY0JhbGFuY2UgPj0gdGhpcy5taW5Td2FwVGhyZXNob2xkLnZhbHVlLCAnQmVsb3cgbWluaW11bSBzd2FwIHRocmVzaG9sZCcpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGRpZyAxCiAgICA8PQogICAgYXNzZXJ0IC8vIEJlbG93IG1pbmltdW0gc3dhcCB0aHJlc2hvbGQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQwNQogICAgLy8gYXNzZXJ0KHRoaXMudG90YWxTaGFyZXMudmFsdWUgPiBVaW50NjQoMCksICdObyBkZXBvc2l0b3JzIHRvIGNvbXBvdW5kIGZvcicpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUwCiAgICAvLyB0b3RhbFNoYXJlcyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gVG90YWwgc2hhcmVzIGlzc3VlZCB0byBhbGwgZGVwb3NpdG9ycwogICAgYnl0ZWNfMCAvLyAidG90YWxTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MDUKICAgIC8vIGFzc2VydCh0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID4gVWludDY0KDApLCAnTm8gZGVwb3NpdG9ycyB0byBjb21wb3VuZCBmb3InKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBhc3NlcnQgLy8gTm8gZGVwb3NpdG9ycyB0byBjb21wb3VuZCBmb3IKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQwOAogICAgLy8gY29uc3QgZXhwZWN0ZWRPdXRwdXQgPSB0aGlzLmdldEV4cGVjdGVkU3dhcE91dHB1dCh1c2RjQmFsYW5jZSk7CiAgICBkdXAKICAgIGNhbGxzdWIgZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MDkKICAgIC8vIGFzc2VydChleHBlY3RlZE91dHB1dCA+IFVpbnQ2NCgwKSwgJ0V4cGVjdGVkIG91dHB1dCBpcyB6ZXJvJyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBFeHBlY3RlZCBvdXRwdXQgaXMgemVybwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDEyCiAgICAvLyBjb25zdCBtaW5BbW91bnRPdXQgPSB0aGlzLm11bERpdkZsb29yKGV4cGVjdGVkT3V0cHV0LCBGRUVfQlBTX0JBU0UgLSBzbGlwcGFnZUJwcywgRkVFX0JQU19CQVNFKTsKICAgIGludGMgNCAvLyAxMDAwMAogICAgdW5jb3ZlciA0CiAgICAtCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3OAogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KG4xLCBuMik7CiAgICBtdWx3CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3OQogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MTIKICAgIC8vIGNvbnN0IG1pbkFtb3VudE91dCA9IHRoaXMubXVsRGl2Rmxvb3IoZXhwZWN0ZWRPdXRwdXQsIEZFRV9CUFNfQkFTRSAtIHNsaXBwYWdlQnBzLCBGRUVfQlBTX0JBU0UpOwogICAgaW50YyA0IC8vIDEwMDAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3OQogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODAKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MTUKICAgIC8vIGNvbnN0IGFscGhhQmVmb3JlID0gQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQwCiAgICAvLyBhbHBoYUFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBBbHBoYSBBU0EgSUQgKGRlcG9zaXQgJiB5aWVsZCBhc3NldCkKICAgIGJ5dGVjXzMgLy8gImFscGhhQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MTUKICAgIC8vIGNvbnN0IGFscGhhQmVmb3JlID0gQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGRpZyAzCiAgICBkaWcgMQogICAgYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCiAgICBhc3NlcnQgLy8gYWNjb3VudCBvcHRlZCBpbnRvIGFzc2V0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MTgtNDM4CiAgICAvLyBpdHhuLnN1Ym1pdEdyb3VwKAogICAgLy8gICAvLyBUcmFuc2FjdGlvbiAxOiBTZW5kIFVTREMgdG8gcG9vbAogICAgLy8gICBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlLAogICAgLy8gICAgIHhmZXJBc3NldDogQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiB1c2RjQmFsYW5jZSwKICAgIC8vICAgICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vICAgfSksCiAgICAvLyAgIC8vIFRyYW5zYWN0aW9uIDI6IENhbGwgVGlueW1hbiBwb29sIHRvIGV4ZWN1dGUgc3dhcAogICAgLy8gICBpdHhuLmFwcGxpY2F0aW9uQ2FsbCh7CiAgICAvLyAgICAgYXBwSWQ6IEFwcGxpY2F0aW9uKHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZSksCiAgICAvLyAgICAgYXBwQXJnczogWwogICAgLy8gICAgICAgQnl0ZXMoJ3N3YXAnKSwKICAgIC8vICAgICAgIEJ5dGVzKCdmaXhlZC1pbnB1dCcpLAogICAgLy8gICAgICAgaXRvYihtaW5BbW91bnRPdXQpLAogICAgLy8gICAgIF0sCiAgICAvLyAgICAgYXNzZXRzOiBbQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKV0sICAvLyBPdXRwdXQgYXNzZXQKICAgIC8vICAgICBhY2NvdW50czogW3RoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlXSwKICAgIC8vICAgICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vICAgfSksCiAgICAvLyApOwogICAgaXR4bl9iZWdpbgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDIxCiAgICAvLyBhc3NldFJlY2VpdmVyOiB0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NwogICAgLy8gdGlueW1hblBvb2xBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgLy8gVGlueW1hbiBwb29sIGFkZHJlc3MKICAgIGJ5dGVjIDE0IC8vICJ0aW55bWFuUG9vbEFkZHJlc3MiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MjEKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQyMgogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSksCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDEKICAgIC8vIHVzZGNBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFVTREMgQVNBIElEIChhaXJkcm9wcyBjb21lIGluIGFzIHRoaXMpCiAgICBieXRlYyA0IC8vICJ1c2RjQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MjIKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIHVuY292ZXIgNQogICAgaXR4bl9maWVsZCBBc3NldEFtb3VudAogICAgaXR4bl9maWVsZCBYZmVyQXNzZXQKICAgIGR1cAogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MjAtNDI1CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiB0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZSwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiB1c2RjQmFsYW5jZSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KSwKICAgIGludGNfMyAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MjQKICAgIC8vIGZlZTogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MjctNDM3CiAgICAvLyBpdHhuLmFwcGxpY2F0aW9uQ2FsbCh7CiAgICAvLyAgIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgLy8gICBhcHBBcmdzOiBbCiAgICAvLyAgICAgQnl0ZXMoJ3N3YXAnKSwKICAgIC8vICAgICBCeXRlcygnZml4ZWQtaW5wdXQnKSwKICAgIC8vICAgICBpdG9iKG1pbkFtb3VudE91dCksCiAgICAvLyAgIF0sCiAgICAvLyAgIGFzc2V0czogW0Fzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSldLCAgLy8gT3V0cHV0IGFzc2V0CiAgICAvLyAgIGFjY291bnRzOiBbdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWVdLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLAogICAgaXR4bl9uZXh0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MjgKICAgIC8vIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU2CiAgICAvLyB0aW55bWFuUG9vbEFwcElkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgLy8gVGlueW1hbiBWMiBwb29sIGFwcCBJRAogICAgYnl0ZWMgMTMgLy8gInRpbnltYW5Qb29sQXBwSWQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MjgKICAgIC8vIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQzMgogICAgLy8gaXRvYihtaW5BbW91bnRPdXQpLAogICAgZGlnIDQKICAgIGl0b2IKICAgIHVuY292ZXIgMgogICAgaXR4bl9maWVsZCBBY2NvdW50cwogICAgZGlnIDMKICAgIGl0eG5fZmllbGQgQXNzZXRzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MzAKICAgIC8vIEJ5dGVzKCdzd2FwJyksCiAgICBwdXNoYnl0ZXMgInN3YXAiCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDMxCiAgICAvLyBCeXRlcygnZml4ZWQtaW5wdXQnKSwKICAgIHB1c2hieXRlcyAiZml4ZWQtaW5wdXQiCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25JRAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDI3LTQzNwogICAgLy8gaXR4bi5hcHBsaWNhdGlvbkNhbGwoewogICAgLy8gICBhcHBJZDogQXBwbGljYXRpb24odGhpcy50aW55bWFuUG9vbEFwcElkLnZhbHVlKSwKICAgIC8vICAgYXBwQXJnczogWwogICAgLy8gICAgIEJ5dGVzKCdzd2FwJyksCiAgICAvLyAgICAgQnl0ZXMoJ2ZpeGVkLWlucHV0JyksCiAgICAvLyAgICAgaXRvYihtaW5BbW91bnRPdXQpLAogICAgLy8gICBdLAogICAgLy8gICBhc3NldHM6IFtBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpXSwgIC8vIE91dHB1dCBhc3NldAogICAgLy8gICBhY2NvdW50czogW3RoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlXSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KSwKICAgIHB1c2hpbnQgNiAvLyA2CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MzYKICAgIC8vIGZlZTogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MTgtNDM4CiAgICAvLyBpdHhuLnN1Ym1pdEdyb3VwKAogICAgLy8gICAvLyBUcmFuc2FjdGlvbiAxOiBTZW5kIFVTREMgdG8gcG9vbAogICAgLy8gICBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlLAogICAgLy8gICAgIHhmZXJBc3NldDogQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiB1c2RjQmFsYW5jZSwKICAgIC8vICAgICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vICAgfSksCiAgICAvLyAgIC8vIFRyYW5zYWN0aW9uIDI6IENhbGwgVGlueW1hbiBwb29sIHRvIGV4ZWN1dGUgc3dhcAogICAgLy8gICBpdHhuLmFwcGxpY2F0aW9uQ2FsbCh7CiAgICAvLyAgICAgYXBwSWQ6IEFwcGxpY2F0aW9uKHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZSksCiAgICAvLyAgICAgYXBwQXJnczogWwogICAgLy8gICAgICAgQnl0ZXMoJ3N3YXAnKSwKICAgIC8vICAgICAgIEJ5dGVzKCdmaXhlZC1pbnB1dCcpLAogICAgLy8gICAgICAgaXRvYihtaW5BbW91bnRPdXQpLAogICAgLy8gICAgIF0sCiAgICAvLyAgICAgYXNzZXRzOiBbQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKV0sICAvLyBPdXRwdXQgYXNzZXQKICAgIC8vICAgICBhY2NvdW50czogW3RoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlXSwKICAgIC8vICAgICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vICAgfSksCiAgICAvLyApOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0MQogICAgLy8gY29uc3QgYWxwaGFBZnRlcjogdWludDY0ID0gQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgdW5jb3ZlciAzCiAgICB1bmNvdmVyIDIKICAgIGFzc2V0X2hvbGRpbmdfZ2V0IEFzc2V0QmFsYW5jZQogICAgYXNzZXJ0IC8vIGFjY291bnQgb3B0ZWQgaW50byBhc3NldAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDQyCiAgICAvLyBjb25zdCBzd2FwT3V0cHV0OiB1aW50NjQgPSBhbHBoYUFmdGVyIC0gYWxwaGFCZWZvcmU7CiAgICBzd2FwCiAgICAtCiAgICBkdXAKICAgIHVuY292ZXIgMgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDQ0CiAgICAvLyBhc3NlcnQoc3dhcE91dHB1dCA+PSBtaW5BbW91bnRPdXQsICdTd2FwIG91dHB1dCBiZWxvdyBtaW5pbXVtJyk7CiAgICA+PQogICAgYXNzZXJ0IC8vIFN3YXAgb3V0cHV0IGJlbG93IG1pbmltdW0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0NwogICAgLy8gbGV0IGZhcm1Cb251czogdWludDY0ID0gVWludDY0KDApOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0OAogICAgLy8gaWYgKHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSA+IFVpbnQ2NCgwKSAmJiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBkdXAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYxCiAgICAvLyBmYXJtRW1pc3Npb25SYXRlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyBCYXNpcyBwb2ludHMgb2YgY29tcG91bmQgb3V0cHV0IHRvIGFkZCBmcm9tIGZhcm0gKGUuZy4sIDEwMDAgPSAxMCUpCiAgICBieXRlYyAxMCAvLyAiZmFybUVtaXNzaW9uUmF0ZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0OAogICAgLy8gaWYgKHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSA+IFVpbnQ2NCgwKSAmJiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnogY29tcG91bmRZaWVsZF9hZnRlcl9pZl9lbHNlQDkKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgQWxwaGEgYXZhaWxhYmxlIGZvciBmYXJtIGJvbnVzCiAgICBieXRlY18yIC8vICJmYXJtQmFsYW5jZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0OAogICAgLy8gaWYgKHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSA+IFVpbnQ2NCgwKSAmJiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnogY29tcG91bmRZaWVsZF9hZnRlcl9pZl9lbHNlQDkKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0OQogICAgLy8gY29uc3QgcmVxdWVzdGVkQm9udXMgPSB0aGlzLm11bERpdkZsb29yKHN3YXBPdXRwdXQsIHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSwgRkVFX0JQU19CQVNFKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MQogICAgLy8gZmFybUVtaXNzaW9uUmF0ZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gQmFzaXMgcG9pbnRzIG9mIGNvbXBvdW5kIG91dHB1dCB0byBhZGQgZnJvbSBmYXJtIChlLmcuLCAxMDAwID0gMTAlKQogICAgYnl0ZWMgMTAgLy8gImZhcm1FbWlzc2lvblJhdGUiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NDkKICAgIC8vIGNvbnN0IHJlcXVlc3RlZEJvbnVzID0gdGhpcy5tdWxEaXZGbG9vcihzd2FwT3V0cHV0LCB0aGlzLmZhcm1FbWlzc2lvblJhdGUudmFsdWUsIEZFRV9CUFNfQkFTRSk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzgKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgZGlnIDIKICAgIG11bHcKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjc5CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0OQogICAgLy8gY29uc3QgcmVxdWVzdGVkQm9udXMgPSB0aGlzLm11bERpdkZsb29yKHN3YXBPdXRwdXQsIHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSwgRkVFX0JQU19CQVNFKTsKICAgIGludGMgNCAvLyAxMDAwMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzkKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBkaXZtb2R3CiAgICBwb3BuIDIKICAgIGR1cAogICAgY292ZXIgMgogICAgYnVyeSA1CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4MAogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ1MQogICAgLy8gZmFybUJvbnVzID0gcmVxdWVzdGVkQm9udXMgPCB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID8gcmVxdWVzdGVkQm9udXMgOiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYwCiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBBbHBoYSBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzIgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDUxCiAgICAvLyBmYXJtQm9udXMgPSByZXF1ZXN0ZWRCb251cyA8IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPyByZXF1ZXN0ZWRCb251cyA6IHRoaXMuZmFybUJhbGFuY2UudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPAogICAgYnogY29tcG91bmRZaWVsZF90ZXJuYXJ5X2ZhbHNlQDcKICAgIGRpZyAyCiAgICBidXJ5IDEKCmNvbXBvdW5kWWllbGRfdGVybmFyeV9tZXJnZUA4OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDUzCiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSAtIGZhcm1Cb251czsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgQWxwaGEgYXZhaWxhYmxlIGZvciBmYXJtIGJvbnVzCiAgICBieXRlY18yIC8vICJmYXJtQmFsYW5jZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ1MwogICAgLy8gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA9IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgLSBmYXJtQm9udXM7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZGlnIDEKICAgIC0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYwCiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBBbHBoYSBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzIgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDUzCiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSAtIGZhcm1Cb251czsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0Cgpjb21wb3VuZFlpZWxkX2FmdGVyX2lmX2Vsc2VAOToKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ1NwogICAgLy8gY29uc3QgdG90YWxPdXRwdXQ6IHVpbnQ2NCA9IHN3YXBPdXRwdXQgKyBmYXJtQm9udXM7CiAgICBkdXAyCiAgICArCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NjAKICAgIC8vIGNvbnN0IGNyZWF0b3JDdXQ6IHVpbnQ2NCA9IHRoaXMubXVsRGl2Rmxvb3IodG90YWxPdXRwdXQsIHRoaXMuY3JlYXRvckZlZVJhdGUudmFsdWUsIE1BWF9GRUVfUkFURSk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDYKICAgIC8vIGNyZWF0b3JGZWVSYXRlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyAwLTEwMCwgcGVyY2VudGFnZSBvZiB5aWVsZCB0byBjcmVhdG9yCiAgICBieXRlYyAxNSAvLyAiY3JlYXRvckZlZVJhdGUiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NjAKICAgIC8vIGNvbnN0IGNyZWF0b3JDdXQ6IHVpbnQ2NCA9IHRoaXMubXVsRGl2Rmxvb3IodG90YWxPdXRwdXQsIHRoaXMuY3JlYXRvckZlZVJhdGUudmFsdWUsIE1BWF9GRUVfUkFURSk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzgKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgZGlnIDEKICAgIG11bHcKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjc5CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ2MAogICAgLy8gY29uc3QgY3JlYXRvckN1dDogdWludDY0ID0gdGhpcy5tdWxEaXZGbG9vcih0b3RhbE91dHB1dCwgdGhpcy5jcmVhdG9yRmVlUmF0ZS52YWx1ZSwgTUFYX0ZFRV9SQVRFKTsKICAgIHB1c2hpbnQgMTAwIC8vIDEwMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzkKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBkaXZtb2R3CiAgICBwb3BuIDIKICAgIHN3YXAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjgwCiAgICAvLyBhc3NlcnQocV9oaSA9PT0gVWludDY0KDApLCAnTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3InKTsKICAgICEKICAgIGFzc2VydCAvLyBNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDYxCiAgICAvLyBjb25zdCB2YXVsdEN1dDogdWludDY0ID0gdG90YWxPdXRwdXQgLSBjcmVhdG9yQ3V0OwogICAgZHVwMgogICAgLQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDY0CiAgICAvLyB0aGlzLmNyZWF0b3JVbmNsYWltZWRBbHBoYS52YWx1ZSA9IHRoaXMuY3JlYXRvclVuY2xhaW1lZEFscGhhLnZhbHVlICsgY3JlYXRvckN1dDsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NwogICAgLy8gY3JlYXRvclVuY2xhaW1lZEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBBY2N1bXVsYXRlZCBBbHBoYSBmb3IgY3JlYXRvciB0byBjbGFpbQogICAgYnl0ZWMgOCAvLyAiY3JlYXRvclVuY2xhaW1lZEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDY0CiAgICAvLyB0aGlzLmNyZWF0b3JVbmNsYWltZWRBbHBoYS52YWx1ZSA9IHRoaXMuY3JlYXRvclVuY2xhaW1lZEFscGhhLnZhbHVlICsgY3JlYXRvckN1dDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICB1bmNvdmVyIDIKICAgICsKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3CiAgICAvLyBjcmVhdG9yVW5jbGFpbWVkQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIEFjY3VtdWxhdGVkIEFscGhhIGZvciBjcmVhdG9yIHRvIGNsYWltCiAgICBieXRlYyA4IC8vICJjcmVhdG9yVW5jbGFpbWVkQWxwaGEiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NjQKICAgIC8vIHRoaXMuY3JlYXRvclVuY2xhaW1lZEFscGhhLnZhbHVlID0gdGhpcy5jcmVhdG9yVW5jbGFpbWVkQWxwaGEudmFsdWUgKyBjcmVhdG9yQ3V0OwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ2OAogICAgLy8gdGhpcy50b3RhbEFscGhhLnZhbHVlID0gdGhpcy50b3RhbEFscGhhLnZhbHVlICsgdmF1bHRDdXQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTEKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDY4CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgKyB2YXVsdEN1dDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICArCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MQogICAgLy8gdG90YWxBbHBoYSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFRvdGFsIEFscGhhIGhlbGQgKGRlcG9zaXRzICsgY29tcG91bmRlZCB5aWVsZCkKICAgIGJ5dGVjXzEgLy8gInRvdGFsQWxwaGEiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NjgKICAgIC8vIHRoaXMudG90YWxBbHBoYS52YWx1ZSA9IHRoaXMudG90YWxBbHBoYS52YWx1ZSArIHZhdWx0Q3V0OwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3MQogICAgLy8gdGhpcy50b3RhbFlpZWxkQ29tcG91bmRlZC52YWx1ZSA9IHRoaXMudG90YWxZaWVsZENvbXBvdW5kZWQudmFsdWUgKyB0b3RhbE91dHB1dDsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MwogICAgLy8gdG90YWxZaWVsZENvbXBvdW5kZWQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIFRvdGFsIHlpZWxkIGNvbXBvdW5kZWQgKGZvciBzdGF0cykKICAgIGJ5dGVjIDEyIC8vICJ0b3RhbFlpZWxkQ29tcG91bmRlZCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3MQogICAgLy8gdGhpcy50b3RhbFlpZWxkQ29tcG91bmRlZC52YWx1ZSA9IHRoaXMudG90YWxZaWVsZENvbXBvdW5kZWQudmFsdWUgKyB0b3RhbE91dHB1dDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICArCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MwogICAgLy8gdG90YWxZaWVsZENvbXBvdW5kZWQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIFRvdGFsIHlpZWxkIGNvbXBvdW5kZWQgKGZvciBzdGF0cykKICAgIGJ5dGVjIDEyIC8vICJ0b3RhbFlpZWxkQ29tcG91bmRlZCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3MQogICAgLy8gdGhpcy50b3RhbFlpZWxkQ29tcG91bmRlZC52YWx1ZSA9IHRoaXMudG90YWxZaWVsZENvbXBvdW5kZWQudmFsdWUgKyB0b3RhbE91dHB1dDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozOTQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgpjb21wb3VuZFlpZWxkX3Rlcm5hcnlfZmFsc2VANzoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ1MQogICAgLy8gZmFybUJvbnVzID0gcmVxdWVzdGVkQm9udXMgPCB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID8gcmVxdWVzdGVkQm9udXMgOiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYwCiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBBbHBoYSBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzIgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDUxCiAgICAvLyBmYXJtQm9udXMgPSByZXF1ZXN0ZWRCb251cyA8IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPyByZXF1ZXN0ZWRCb251cyA6IHRoaXMuZmFybUJhbGFuY2UudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnVyeSAxCiAgICBiIGNvbXBvdW5kWWllbGRfdGVybmFyeV9tZXJnZUA4CgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5nZXRWYXVsdFN0YXRzW3JvdXRpbmddKCkgLT4gdm9pZDoKZ2V0VmF1bHRTdGF0czoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ4NQogICAgLy8gY29uc3QgYXBwQWRkcjogQWNjb3VudCA9IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzOwogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ4NgogICAgLy8gY29uc3QgdXNkY0JhbGFuY2UgPSBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MQogICAgLy8gdXNkY0Fzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKGFpcmRyb3BzIGNvbWUgaW4gYXMgdGhpcykKICAgIGJ5dGVjIDQgLy8gInVzZGNBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ4NgogICAgLy8gY29uc3QgdXNkY0JhbGFuY2UgPSBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBhc3NldF9ob2xkaW5nX2dldCBBc3NldEJhbGFuY2UKICAgIGFzc2VydCAvLyBhY2NvdW50IG9wdGVkIGludG8gYXNzZXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ4OQogICAgLy8gbGV0IHNoYXJlUHJpY2U6IHVpbnQ2NCA9IFNDQUxFOyAvLyBEZWZhdWx0IDE6MSBpZiBubyBzaGFyZXMKICAgIGludGMgNiAvLyAxMDAwMDAwMDAwMDAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0OTAKICAgIC8vIGlmICh0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTAKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ5MAogICAgLy8gaWYgKHRoaXMudG90YWxTaGFyZXMudmFsdWUgPiBVaW50NjQoMCkpIHsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBieiBnZXRWYXVsdFN0YXRzX2FmdGVyX2lmX2Vsc2VAMwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDkxCiAgICAvLyBzaGFyZVByaWNlID0gdGhpcy5tdWxEaXZGbG9vcih0aGlzLnRvdGFsQWxwaGEudmFsdWUsIFNDQUxFLCB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MQogICAgLy8gdG90YWxBbHBoYSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFRvdGFsIEFscGhhIGhlbGQgKGRlcG9zaXRzICsgY29tcG91bmRlZCB5aWVsZCkKICAgIGJ5dGVjXzEgLy8gInRvdGFsQWxwaGEiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0OTEKICAgIC8vIHNoYXJlUHJpY2UgPSB0aGlzLm11bERpdkZsb29yKHRoaXMudG90YWxBbHBoYS52YWx1ZSwgU0NBTEUsIHRoaXMudG90YWxTaGFyZXMudmFsdWUpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MAogICAgLy8gdG90YWxTaGFyZXMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIFRvdGFsIHNoYXJlcyBpc3N1ZWQgdG8gYWxsIGRlcG9zaXRvcnMKICAgIGJ5dGVjXzAgLy8gInRvdGFsU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDkxCiAgICAvLyBzaGFyZVByaWNlID0gdGhpcy5tdWxEaXZGbG9vcih0aGlzLnRvdGFsQWxwaGEudmFsdWUsIFNDQUxFLCB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3OAogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KG4xLCBuMik7CiAgICBzd2FwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0OTEKICAgIC8vIHNoYXJlUHJpY2UgPSB0aGlzLm11bERpdkZsb29yKHRoaXMudG90YWxBbHBoYS52YWx1ZSwgU0NBTEUsIHRoaXMudG90YWxTaGFyZXMudmFsdWUpOwogICAgaW50YyA2IC8vIDEwMDAwMDAwMDAwMDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjc4CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIG11bHcKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjc5CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIHVuY292ZXIgMwogICAgZGl2bW9kdwogICAgcG9wbiAyCiAgICBzd2FwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4MAogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIGJ1cnkgMQoKZ2V0VmF1bHRTdGF0c19hZnRlcl9pZl9lbHNlQDM6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0OTUKICAgIC8vIHRoaXMudG90YWxTaGFyZXMudmFsdWUsCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTAKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ5NQogICAgLy8gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0OTYKICAgIC8vIHRoaXMudG90YWxBbHBoYS52YWx1ZSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MQogICAgLy8gdG90YWxBbHBoYSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFRvdGFsIEFscGhhIGhlbGQgKGRlcG9zaXRzICsgY29tcG91bmRlZCB5aWVsZCkKICAgIGJ5dGVjXzEgLy8gInRvdGFsQWxwaGEiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0OTYKICAgIC8vIHRoaXMudG90YWxBbHBoYS52YWx1ZSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0OTcKICAgIC8vIHRoaXMuY3JlYXRvclVuY2xhaW1lZEFscGhhLnZhbHVlLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3CiAgICAvLyBjcmVhdG9yVW5jbGFpbWVkQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIEFjY3VtdWxhdGVkIEFscGhhIGZvciBjcmVhdG9yIHRvIGNsYWltCiAgICBieXRlYyA4IC8vICJjcmVhdG9yVW5jbGFpbWVkQWxwaGEiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0OTcKICAgIC8vIHRoaXMuY3JlYXRvclVuY2xhaW1lZEFscGhhLnZhbHVlLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ5OQogICAgLy8gdGhpcy50b3RhbFlpZWxkQ29tcG91bmRlZC52YWx1ZSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MwogICAgLy8gdG90YWxZaWVsZENvbXBvdW5kZWQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIFRvdGFsIHlpZWxkIGNvbXBvdW5kZWQgKGZvciBzdGF0cykKICAgIGJ5dGVjIDEyIC8vICJ0b3RhbFlpZWxkQ29tcG91bmRlZCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ5OQogICAgLy8gdGhpcy50b3RhbFlpZWxkQ29tcG91bmRlZC52YWx1ZSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0OTQtNTAxCiAgICAvLyByZXR1cm4gWwogICAgLy8gICB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlLAogICAgLy8gICB0aGlzLnRvdGFsQWxwaGEudmFsdWUsCiAgICAvLyAgIHRoaXMuY3JlYXRvclVuY2xhaW1lZEFscGhhLnZhbHVlLAogICAgLy8gICB1c2RjQmFsYW5jZSwKICAgIC8vICAgdGhpcy50b3RhbFlpZWxkQ29tcG91bmRlZC52YWx1ZSwKICAgIC8vICAgc2hhcmVQcmljZQogICAgLy8gXTsKICAgIHVuY292ZXIgMwogICAgaXRvYgogICAgdW5jb3ZlciAzCiAgICBpdG9iCiAgICBjb25jYXQKICAgIHVuY292ZXIgMgogICAgaXRvYgogICAgY29uY2F0CiAgICBkaWcgMwogICAgaXRvYgogICAgY29uY2F0CiAgICBzd2FwCiAgICBpdG9iCiAgICBjb25jYXQKICAgIGRpZyAxCiAgICBpdG9iCiAgICBjb25jYXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ4MwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIGJ5dGVjIDcgLy8gMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmdldFVzZXJBbHBoYUJhbGFuY2Vbcm91dGluZ10oKSAtPiB2b2lkOgpnZXRVc2VyQWxwaGFCYWxhbmNlOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTA4CiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIHB1c2hpbnQgMzIgLy8gMzIKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuc3RhdGljX2FycmF5PGFyYzQudWludDgsIDMyPgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTEwCiAgICAvLyBjb25zdCBzaGFyZXMgPSB0aGlzLnVzZXJTaGFyZXModXNlcikudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjcKICAgIC8vIHVzZXJTaGFyZXMgPSBMb2NhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBVc2VyJ3Mgc2hhcmUgYmFsYW5jZSAocmVwcmVzZW50cyBwcm9wb3J0aW9uYWwgb3duZXJzaGlwKQogICAgYnl0ZWMgNiAvLyAidXNlclNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUxMAogICAgLy8gY29uc3Qgc2hhcmVzID0gdGhpcy51c2VyU2hhcmVzKHVzZXIpLnZhbHVlOwogICAgYXBwX2xvY2FsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIExvY2FsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MTEKICAgIC8vIHJldHVybiB0aGlzLnNoYXJlc1RvQWxwaGEoc2hhcmVzKTsKICAgIGNhbGxzdWIgc2hhcmVzVG9BbHBoYQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTA4CiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgaXRvYgogICAgYnl0ZWMgNyAvLyAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuZ2V0VXNlclNoYXJlc1tyb3V0aW5nXSgpIC0+IHZvaWQ6CmdldFVzZXJTaGFyZXM6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MTcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgcHVzaGludCAzMiAvLyAzMgogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC5zdGF0aWNfYXJyYXk8YXJjNC51aW50OCwgMzI+CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MTkKICAgIC8vIHJldHVybiB0aGlzLnVzZXJTaGFyZXModXNlcikudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjcKICAgIC8vIHVzZXJTaGFyZXMgPSBMb2NhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBVc2VyJ3Mgc2hhcmUgYmFsYW5jZSAocmVwcmVzZW50cyBwcm9wb3J0aW9uYWwgb3duZXJzaGlwKQogICAgYnl0ZWMgNiAvLyAidXNlclNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUxOQogICAgLy8gcmV0dXJuIHRoaXMudXNlclNoYXJlcyh1c2VyKS52YWx1ZTsKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBMb2NhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTE3CiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgaXRvYgogICAgYnl0ZWMgNyAvLyAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQucHJldmlld0RlcG9zaXRbcm91dGluZ10oKSAtPiB2b2lkOgpwcmV2aWV3RGVwb3NpdDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUyNQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUyNwogICAgLy8gcmV0dXJuIHRoaXMuYWxwaGFUb1NoYXJlcyhhbHBoYUFtb3VudCk7CiAgICBjYWxsc3ViIGFscGhhVG9TaGFyZXMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUyNQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIGl0b2IKICAgIGJ5dGVjIDcgLy8gMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LnByZXZpZXdXaXRoZHJhd1tyb3V0aW5nXSgpIC0+IHZvaWQ6CnByZXZpZXdXaXRoZHJhdzoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUzMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUzNQogICAgLy8gcmV0dXJuIHRoaXMuc2hhcmVzVG9BbHBoYShzaGFyZUFtb3VudCk7CiAgICBjYWxsc3ViIHNoYXJlc1RvQWxwaGEKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUzMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIGl0b2IKICAgIGJ5dGVjIDcgLy8gMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmdldENvbXBvdW5kUXVvdGVbcm91dGluZ10oKSAtPiB2b2lkOgpnZXRDb21wb3VuZFF1b3RlOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQ0CiAgICAvLyBjb25zdCBhcHBBZGRyOiBBY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3M7CiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQ1CiAgICAvLyBjb25zdCB1c2RjQmFsYW5jZSA9IEFzc2V0KHRoaXMudXNkY0Fzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQxCiAgICAvLyB1c2RjQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBVU0RDIEFTQSBJRCAoYWlyZHJvcHMgY29tZSBpbiBhcyB0aGlzKQogICAgYnl0ZWMgNCAvLyAidXNkY0Fzc2V0IgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQ1CiAgICAvLyBjb25zdCB1c2RjQmFsYW5jZSA9IEFzc2V0KHRoaXMudXNkY0Fzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGFzc2V0X2hvbGRpbmdfZ2V0IEFzc2V0QmFsYW5jZQogICAgc3dhcAogICAgZHVwCiAgICB1bmNvdmVyIDIKICAgIGFzc2VydCAvLyBhY2NvdW50IG9wdGVkIGludG8gYXNzZXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0NwogICAgLy8gaWYgKHVzZGNCYWxhbmNlID09PSBVaW50NjQoMCkpIHsKICAgIGJueiBnZXRDb21wb3VuZFF1b3RlX2FmdGVyX2lmX2Vsc2VAMwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQ4CiAgICAvLyByZXR1cm4gW1VpbnQ2NCgwKSwgVWludDY0KDApLCBVaW50NjQoMCldOwogICAgcHVzaGJ5dGVzIDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwCgpnZXRDb21wb3VuZFF1b3RlX2FmdGVyX2lubGluZWRfUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5nZXRDb21wb3VuZFF1b3RlQDQ6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NDIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICBieXRlYyA3IC8vIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgpnZXRDb21wb3VuZFF1b3RlX2FmdGVyX2lmX2Vsc2VAMzoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU1MQogICAgLy8gY29uc3QgZXhwZWN0ZWRPdXRwdXQgPSB0aGlzLmdldEV4cGVjdGVkU3dhcE91dHB1dCh1c2RjQmFsYW5jZSk7CiAgICBkdXBuIDIKICAgIGNhbGxzdWIgZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3OAogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KG4xLCBuMik7CiAgICBkdXAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU1MgogICAgLy8gY29uc3QgbWluQXQ1MEJwcyA9IHRoaXMubXVsRGl2Rmxvb3IoZXhwZWN0ZWRPdXRwdXQsIEZFRV9CUFNfQkFTRSAtIFVpbnQ2NCg1MCksIEZFRV9CUFNfQkFTRSk7CiAgICBwdXNoaW50IDk5NTAgLy8gOTk1MAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzgKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgbXVsdwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzkKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTUyCiAgICAvLyBjb25zdCBtaW5BdDUwQnBzID0gdGhpcy5tdWxEaXZGbG9vcihleHBlY3RlZE91dHB1dCwgRkVFX0JQU19CQVNFIC0gVWludDY0KDUwKSwgRkVFX0JQU19CQVNFKTsKICAgIGludGMgNCAvLyAxMDAwMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzkKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBkaXZtb2R3CiAgICBwb3BuIDIKICAgIHN3YXAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjgwCiAgICAvLyBhc3NlcnQocV9oaSA9PT0gVWludDY0KDApLCAnTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3InKTsKICAgICEKICAgIGFzc2VydCAvLyBNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTU0CiAgICAvLyByZXR1cm4gW3VzZGNCYWxhbmNlLCBleHBlY3RlZE91dHB1dCwgbWluQXQ1MEJwc107CiAgICB1bmNvdmVyIDIKICAgIGl0b2IKICAgIHVuY292ZXIgMgogICAgaXRvYgogICAgY29uY2F0CiAgICBzd2FwCiAgICBpdG9iCiAgICBjb25jYXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0MgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIGIgZ2V0Q29tcG91bmRRdW90ZV9hZnRlcl9pbmxpbmVkX1JhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuZ2V0Q29tcG91bmRRdW90ZUA0CgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC51cGRhdGVNaW5Td2FwVGhyZXNob2xkW3JvdXRpbmddKCkgLT4gdm9pZDoKdXBkYXRlTWluU3dhcFRocmVzaG9sZDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU2NAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU2NgogICAgLy8gY29uc3QgaXNDcmVhdG9yID0gVHhuLnNlbmRlciA9PT0gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZTsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NAogICAgLy8gY3JlYXRvckFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgIC8vIFZhdWx0IGNyZWF0b3Igd2hvIHJlY2VpdmVzIGZlZQogICAgYnl0ZWMgNSAvLyAiY3JlYXRvckFkZHJlc3MiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NjYKICAgIC8vIGNvbnN0IGlzQ3JlYXRvciA9IFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU2NwogICAgLy8gY29uc3QgaXNSYXJlZmkgPSBUeG4uc2VuZGVyID09PSB0aGlzLnJhcmVmaUFkZHJlc3MudmFsdWU7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDUKICAgIC8vIHJhcmVmaUFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgICAvLyBSYXJlRmkgcGxhdGZvcm0gYWRkcmVzcyAoY2FuIGFsc28gdHJpZ2dlciBzd2FwcykKICAgIGJ5dGVjIDkgLy8gInJhcmVmaUFkZHJlc3MiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NjcKICAgIC8vIGNvbnN0IGlzUmFyZWZpID0gVHhuLnNlbmRlciA9PT0gdGhpcy5yYXJlZmlBZGRyZXNzLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NjgKICAgIC8vIGFzc2VydChpc0NyZWF0b3IgfHwgaXNSYXJlZmksICdPbmx5IGNyZWF0b3Igb3IgUmFyZUZpIGNhbiB1cGRhdGUnKTsKICAgIHx8CiAgICBhc3NlcnQgLy8gT25seSBjcmVhdG9yIG9yIFJhcmVGaSBjYW4gdXBkYXRlCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NjkKICAgIC8vIGFzc2VydChuZXdUaHJlc2hvbGQgPj0gTUlOX1NXQVBfQU1PVU5ULCAnVGhyZXNob2xkIHRvbyBsb3cnKTsKICAgIGR1cAogICAgaW50YyA1IC8vIDIwMDAwMAogICAgPj0KICAgIGFzc2VydCAvLyBUaHJlc2hvbGQgdG9vIGxvdwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTIKICAgIC8vIG1pblN3YXBUaHJlc2hvbGQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBNaW5pbXVtIFVTREMgYmVmb3JlIHN3YXAgYWxsb3dlZAogICAgYnl0ZWMgMTEgLy8gIm1pblN3YXBUaHJlc2hvbGQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NzAKICAgIC8vIHRoaXMubWluU3dhcFRocmVzaG9sZC52YWx1ZSA9IG5ld1RocmVzaG9sZDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NjQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC51cGRhdGVUaW55bWFuUG9vbFtyb3V0aW5nXSgpIC0+IHZvaWQ6CnVwZGF0ZVRpbnltYW5Qb29sOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTc3CiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgZHVwCiAgICBsZW4KICAgIHB1c2hpbnQgMzIgLy8gMzIKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuc3RhdGljX2FycmF5PGFyYzQudWludDgsIDMyPgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTc5CiAgICAvLyBjb25zdCBpc0NyZWF0b3IgPSBUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0CiAgICAvLyBjcmVhdG9yQWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7ICAgLy8gVmF1bHQgY3JlYXRvciB3aG8gcmVjZWl2ZXMgZmVlCiAgICBieXRlYyA1IC8vICJjcmVhdG9yQWRkcmVzcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU3OQogICAgLy8gY29uc3QgaXNDcmVhdG9yID0gVHhuLnNlbmRlciA9PT0gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTgwCiAgICAvLyBjb25zdCBpc1JhcmVmaSA9IFR4bi5zZW5kZXIgPT09IHRoaXMucmFyZWZpQWRkcmVzcy52YWx1ZTsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NQogICAgLy8gcmFyZWZpQWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7ICAgIC8vIFJhcmVGaSBwbGF0Zm9ybSBhZGRyZXNzIChjYW4gYWxzbyB0cmlnZ2VyIHN3YXBzKQogICAgYnl0ZWMgOSAvLyAicmFyZWZpQWRkcmVzcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU4MAogICAgLy8gY29uc3QgaXNSYXJlZmkgPSBUeG4uc2VuZGVyID09PSB0aGlzLnJhcmVmaUFkZHJlc3MudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU4MQogICAgLy8gYXNzZXJ0KGlzQ3JlYXRvciB8fCBpc1JhcmVmaSwgJ09ubHkgY3JlYXRvciBvciBSYXJlRmkgY2FuIHVwZGF0ZScpOwogICAgfHwKICAgIGFzc2VydCAvLyBPbmx5IGNyZWF0b3Igb3IgUmFyZUZpIGNhbiB1cGRhdGUKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU4MgogICAgLy8gYXNzZXJ0KG5ld1Bvb2xBcHBJZCAhPT0gVWludDY0KDApLCAnSW52YWxpZCBwb29sIGFwcCBJRCcpOwogICAgZGlnIDEKICAgIGFzc2VydCAvLyBJbnZhbGlkIHBvb2wgYXBwIElECiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NgogICAgLy8gdGlueW1hblBvb2xBcHBJZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgIC8vIFRpbnltYW4gVjIgcG9vbCBhcHAgSUQKICAgIGJ5dGVjIDEzIC8vICJ0aW55bWFuUG9vbEFwcElkIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTgzCiAgICAvLyB0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUgPSBuZXdQb29sQXBwSWQ7CiAgICB1bmNvdmVyIDIKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NwogICAgLy8gdGlueW1hblBvb2xBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgLy8gVGlueW1hbiBwb29sIGFkZHJlc3MKICAgIGJ5dGVjIDE0IC8vICJ0aW55bWFuUG9vbEFkZHJlc3MiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1ODQKICAgIC8vIHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlID0gbmV3UG9vbEFkZHJlc3M7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTc3CiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuY29udHJpYnV0ZUZhcm1bcm91dGluZ10oKSAtPiB2b2lkOgpjb250cmlidXRlRmFybToKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYwMAogICAgLy8gY29uc3QgYXBwQWRkcjogQWNjb3VudCA9IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzOwogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYwMQogICAgLy8gY29uc3QgY3VycmVudEluZGV4ID0gVHhuLmdyb3VwSW5kZXg7CiAgICB0eG4gR3JvdXBJbmRleAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjAyCiAgICAvLyBhc3NlcnQoY3VycmVudEluZGV4ID49IFVpbnQ2NCgxKSwgJ0FwcCBjYWxsIG11c3QgZm9sbG93IGFzc2V0IHRyYW5zZmVyJyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBBcHAgY2FsbCBtdXN0IGZvbGxvdyBhc3NldCB0cmFuc2ZlcgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjA1CiAgICAvLyBjb25zdCBmYXJtVHJhbnNmZXIgPSBndHhuLkFzc2V0VHJhbnNmZXJUeG4oY3VycmVudEluZGV4IC0gVWludDY0KDEpKTsKICAgIGludGNfMSAvLyAxCiAgICAtCiAgICBkdXAKICAgIGd0eG5zIFR5cGVFbnVtCiAgICBpbnRjXzMgLy8gYXhmZXIKICAgID09CiAgICBhc3NlcnQgLy8gdHJhbnNhY3Rpb24gdHlwZSBpcyBheGZlcgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjA2CiAgICAvLyBhc3NlcnQoZmFybVRyYW5zZmVyLnhmZXJBc3NldCA9PT0gQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwgJ011c3QgdHJhbnNmZXIgQWxwaGEgYXNzZXQnKTsKICAgIGR1cAogICAgZ3R4bnMgWGZlckFzc2V0CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDAKICAgIC8vIGFscGhhQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIEFscGhhIEFTQSBJRCAoZGVwb3NpdCAmIHlpZWxkIGFzc2V0KQogICAgYnl0ZWNfMyAvLyAiYWxwaGFBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYwNgogICAgLy8gYXNzZXJ0KGZhcm1UcmFuc2Zlci54ZmVyQXNzZXQgPT09IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksICdNdXN0IHRyYW5zZmVyIEFscGhhIGFzc2V0Jyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBNdXN0IHRyYW5zZmVyIEFscGhhIGFzc2V0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MDcKICAgIC8vIGFzc2VydChmYXJtVHJhbnNmZXIuYXNzZXRSZWNlaXZlciA9PT0gYXBwQWRkciwgJ011c3Qgc2VuZCB0byBjb250cmFjdCcpOwogICAgZHVwCiAgICBndHhucyBBc3NldFJlY2VpdmVyCiAgICB1bmNvdmVyIDIKICAgID09CiAgICBhc3NlcnQgLy8gTXVzdCBzZW5kIHRvIGNvbnRyYWN0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MDkKICAgIC8vIGNvbnN0IGFtb3VudCA9IGZhcm1UcmFuc2Zlci5hc3NldEFtb3VudDsKICAgIGd0eG5zIEFzc2V0QW1vdW50CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MTAKICAgIC8vIGFzc2VydChhbW91bnQgPiBVaW50NjQoMCksICdDb250cmlidXRpb24gbXVzdCBiZSBwb3NpdGl2ZScpOwogICAgZHVwCiAgICBhc3NlcnQgLy8gQ29udHJpYnV0aW9uIG11c3QgYmUgcG9zaXRpdmUKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYxMwogICAgLy8gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA9IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgKyBhbW91bnQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjAKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIEFscGhhIGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMiAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MTMKICAgIC8vIHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPSB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlICsgYW1vdW50OwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgICsKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYwCiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBBbHBoYSBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzIgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjEzCiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSArIGFtb3VudDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1OTgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5zZXRGYXJtRW1pc3Npb25SYXRlW3JvdXRpbmddKCkgLT4gdm9pZDoKc2V0RmFybUVtaXNzaW9uUmF0ZToKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYyMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYyNQogICAgLy8gY29uc3QgaXNDcmVhdG9yID0gVHhuLnNlbmRlciA9PT0gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZTsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NAogICAgLy8gY3JlYXRvckFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgIC8vIFZhdWx0IGNyZWF0b3Igd2hvIHJlY2VpdmVzIGZlZQogICAgYnl0ZWMgNSAvLyAiY3JlYXRvckFkZHJlc3MiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MjUKICAgIC8vIGNvbnN0IGlzQ3JlYXRvciA9IFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYyNgogICAgLy8gY29uc3QgaXNSYXJlZmkgPSBUeG4uc2VuZGVyID09PSB0aGlzLnJhcmVmaUFkZHJlc3MudmFsdWU7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDUKICAgIC8vIHJhcmVmaUFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgICAvLyBSYXJlRmkgcGxhdGZvcm0gYWRkcmVzcyAoY2FuIGFsc28gdHJpZ2dlciBzd2FwcykKICAgIGJ5dGVjIDkgLy8gInJhcmVmaUFkZHJlc3MiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MjYKICAgIC8vIGNvbnN0IGlzUmFyZWZpID0gVHhuLnNlbmRlciA9PT0gdGhpcy5yYXJlZmlBZGRyZXNzLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MjcKICAgIC8vIGFzc2VydChpc0NyZWF0b3IgfHwgaXNSYXJlZmksICdPbmx5IGNyZWF0b3Igb3IgUmFyZUZpIGNhbiBzZXQgZmFybSByYXRlJyk7CiAgICB8fAogICAgYXNzZXJ0IC8vIE9ubHkgY3JlYXRvciBvciBSYXJlRmkgY2FuIHNldCBmYXJtIHJhdGUKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYyOAogICAgLy8gYXNzZXJ0KGVtaXNzaW9uUmF0ZUJwcyA8PSBNQVhfRkFSTV9FTUlTU0lPTl9CUFMsICdFbWlzc2lvbiByYXRlIHRvbyBoaWdoIChtYXggMTAwJSknKTsKICAgIGR1cAogICAgaW50YyA0IC8vIDEwMDAwCiAgICA8PQogICAgYXNzZXJ0IC8vIEVtaXNzaW9uIHJhdGUgdG9vIGhpZ2ggKG1heCAxMDAlKQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjEKICAgIC8vIGZhcm1FbWlzc2lvblJhdGUgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIEJhc2lzIHBvaW50cyBvZiBjb21wb3VuZCBvdXRwdXQgdG8gYWRkIGZyb20gZmFybSAoZS5nLiwgMTAwMCA9IDEwJSkKICAgIGJ5dGVjIDEwIC8vICJmYXJtRW1pc3Npb25SYXRlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjMwCiAgICAvLyB0aGlzLmZhcm1FbWlzc2lvblJhdGUudmFsdWUgPSBlbWlzc2lvblJhdGVCcHM7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjIzCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQud2l0aGRyYXdGYXJtW3JvdXRpbmddKCkgLT4gdm9pZDoKd2l0aGRyYXdGYXJtOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjM5CiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgZHVwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NDEKICAgIC8vIGFzc2VydChUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlLCAnT25seSBjcmVhdG9yIGNhbiB3aXRoZHJhdyBmYXJtJyk7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDQKICAgIC8vIGNyZWF0b3JBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAvLyBWYXVsdCBjcmVhdG9yIHdobyByZWNlaXZlcyBmZWUKICAgIGJ5dGVjIDUgLy8gImNyZWF0b3JBZGRyZXNzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjQxCiAgICAvLyBhc3NlcnQoVHhuLnNlbmRlciA9PT0gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZSwgJ09ubHkgY3JlYXRvciBjYW4gd2l0aGRyYXcgZmFybScpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBhc3NlcnQgLy8gT25seSBjcmVhdG9yIGNhbiB3aXRoZHJhdyBmYXJtCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NDQKICAgIC8vIGlmICh3aXRoZHJhd0Ftb3VudCA9PT0gVWludDY0KDApKSB7CiAgICBieiB3aXRoZHJhd0Zhcm1faWZfYm9keUAyCiAgICBkdXAKCndpdGhkcmF3RmFybV9hZnRlcl9pZl9lbHNlQDM6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NDgKICAgIC8vIGFzc2VydCh3aXRoZHJhd0Ftb3VudCA+IFVpbnQ2NCgwKSwgJ05vdGhpbmcgdG8gd2l0aGRyYXcnKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIE5vdGhpbmcgdG8gd2l0aGRyYXcKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY0OQogICAgLy8gYXNzZXJ0KHdpdGhkcmF3QW1vdW50IDw9IHRoaXMuZmFybUJhbGFuY2UudmFsdWUsICdJbnN1ZmZpY2llbnQgZmFybSBiYWxhbmNlJyk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjAKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIEFscGhhIGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMiAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NDkKICAgIC8vIGFzc2VydCh3aXRoZHJhd0Ftb3VudCA8PSB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlLCAnSW5zdWZmaWNpZW50IGZhcm0gYmFsYW5jZScpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGR1cDIKICAgIDw9CiAgICBhc3NlcnQgLy8gSW5zdWZmaWNpZW50IGZhcm0gYmFsYW5jZQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjUyCiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSAtIHdpdGhkcmF3QW1vdW50OwogICAgZGlnIDEKICAgIC0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYwCiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBBbHBoYSBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzIgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjUyCiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSAtIHdpdGhkcmF3QW1vdW50OwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY1NS02NjAKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IHdpdGhkcmF3QW1vdW50LAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjU2CiAgICAvLyBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgdHhuIFNlbmRlcgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjU3CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDAKICAgIC8vIGFscGhhQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIEFscGhhIEFTQSBJRCAoZGVwb3NpdCAmIHlpZWxkIGFzc2V0KQogICAgYnl0ZWNfMyAvLyAiYWxwaGFBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY1NwogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIHVuY292ZXIgMgogICAgaXR4bl9maWVsZCBBc3NldEFtb3VudAogICAgaXR4bl9maWVsZCBYZmVyQXNzZXQKICAgIGl0eG5fZmllbGQgQXNzZXRSZWNlaXZlcgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjU1LTY2MAogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogd2l0aGRyYXdBbW91bnQsCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpbnRjXzMgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjU5CiAgICAvLyBmZWU6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjU1LTY2MAogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogd2l0aGRyYXdBbW91bnQsCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjM5CiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKd2l0aGRyYXdGYXJtX2lmX2JvZHlAMjoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY0NQogICAgLy8gd2l0aGRyYXdBbW91bnQgPSB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYwCiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBBbHBoYSBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzIgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjQ1CiAgICAvLyB3aXRoZHJhd0Ftb3VudCA9IHRoaXMuZmFybUJhbGFuY2UudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYiB3aXRoZHJhd0Zhcm1fYWZ0ZXJfaWZfZWxzZUAzCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5nZXRGYXJtU3RhdHNbcm91dGluZ10oKSAtPiB2b2lkOgpnZXRGYXJtU3RhdHM6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NjkKICAgIC8vIHJldHVybiBbdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSwgdGhpcy5mYXJtRW1pc3Npb25SYXRlLnZhbHVlXTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgQWxwaGEgYXZhaWxhYmxlIGZvciBmYXJtIGJvbnVzCiAgICBieXRlY18yIC8vICJmYXJtQmFsYW5jZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY2OQogICAgLy8gcmV0dXJuIFt0aGlzLmZhcm1CYWxhbmNlLnZhbHVlLCB0aGlzLmZhcm1FbWlzc2lvblJhdGUudmFsdWVdOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MQogICAgLy8gZmFybUVtaXNzaW9uUmF0ZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gQmFzaXMgcG9pbnRzIG9mIGNvbXBvdW5kIG91dHB1dCB0byBhZGQgZnJvbSBmYXJtIChlLmcuLCAxMDAwID0gMTAlKQogICAgYnl0ZWMgMTAgLy8gImZhcm1FbWlzc2lvblJhdGUiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NjkKICAgIC8vIHJldHVybiBbdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSwgdGhpcy5mYXJtRW1pc3Npb25SYXRlLnZhbHVlXTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBzd2FwCiAgICBpdG9iCiAgICBzd2FwCiAgICBpdG9iCiAgICBjb25jYXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY2NwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIGJ5dGVjIDcgLy8gMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFscGhhVG9TaGFyZXMoYWxwaGFBbW91bnQ6IHVpbnQ2NCkgLT4gdWludDY0OgphbHBoYVRvU2hhcmVzOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODkKICAgIC8vIHByaXZhdGUgYWxwaGFUb1NoYXJlcyhhbHBoYUFtb3VudDogdWludDY0KTogdWludDY0IHsKICAgIHByb3RvIDEgMQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OTAKICAgIC8vIGlmICh0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID09PSBVaW50NjQoMCkpIHsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MAogICAgLy8gdG90YWxTaGFyZXMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIFRvdGFsIHNoYXJlcyBpc3N1ZWQgdG8gYWxsIGRlcG9zaXRvcnMKICAgIGJ5dGVjXzAgLy8gInRvdGFsU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OTAKICAgIC8vIGlmICh0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID09PSBVaW50NjQoMCkpIHsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBibnogYWxwaGFUb1NoYXJlc19hZnRlcl9pZl9lbHNlQDIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjkyCiAgICAvLyByZXR1cm4gYWxwaGFBbW91bnQ7CiAgICBmcmFtZV9kaWcgLTEKICAgIHJldHN1YgoKYWxwaGFUb1NoYXJlc19hZnRlcl9pZl9lbHNlQDI6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo5NAogICAgLy8gcmV0dXJuIHRoaXMubXVsRGl2Rmxvb3IoYWxwaGFBbW91bnQsIHRoaXMudG90YWxTaGFyZXMudmFsdWUsIHRoaXMudG90YWxBbHBoYS52YWx1ZSk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTAKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjk0CiAgICAvLyByZXR1cm4gdGhpcy5tdWxEaXZGbG9vcihhbHBoYUFtb3VudCwgdGhpcy50b3RhbFNoYXJlcy52YWx1ZSwgdGhpcy50b3RhbEFscGhhLnZhbHVlKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTEKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OTQKICAgIC8vIHJldHVybiB0aGlzLm11bERpdkZsb29yKGFscGhhQW1vdW50LCB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlLCB0aGlzLnRvdGFsQWxwaGEudmFsdWUpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjc4CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGZyYW1lX2RpZyAtMQogICAgdW5jb3ZlciAyCiAgICBtdWx3CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3OQogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICB1bmNvdmVyIDMKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODAKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo5NAogICAgLy8gcmV0dXJuIHRoaXMubXVsRGl2Rmxvb3IoYWxwaGFBbW91bnQsIHRoaXMudG90YWxTaGFyZXMudmFsdWUsIHRoaXMudG90YWxBbHBoYS52YWx1ZSk7CiAgICByZXRzdWIKCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LnNoYXJlc1RvQWxwaGEoc2hhcmVzOiB1aW50NjQpIC0+IHVpbnQ2NDoKc2hhcmVzVG9BbHBoYToKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEwMQogICAgLy8gcHJpdmF0ZSBzaGFyZXNUb0FscGhhKHNoYXJlczogdWludDY0KTogdWludDY0IHsKICAgIHByb3RvIDEgMQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTAyCiAgICAvLyBpZiAodGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9PT0gVWludDY0KDApKSB7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTAKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEwMgogICAgLy8gaWYgKHRoaXMudG90YWxTaGFyZXMudmFsdWUgPT09IFVpbnQ2NCgwKSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJueiBzaGFyZXNUb0FscGhhX2FmdGVyX2lmX2Vsc2VAMgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTAzCiAgICAvLyByZXR1cm4gVWludDY0KDApOwogICAgaW50Y18wIC8vIDAKICAgIHJldHN1YgoKc2hhcmVzVG9BbHBoYV9hZnRlcl9pZl9lbHNlQDI6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMDUKICAgIC8vIHJldHVybiB0aGlzLm11bERpdkZsb29yKHNoYXJlcywgdGhpcy50b3RhbEFscGhhLnZhbHVlLCB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MQogICAgLy8gdG90YWxBbHBoYSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFRvdGFsIEFscGhhIGhlbGQgKGRlcG9zaXRzICsgY29tcG91bmRlZCB5aWVsZCkKICAgIGJ5dGVjXzEgLy8gInRvdGFsQWxwaGEiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMDUKICAgIC8vIHJldHVybiB0aGlzLm11bERpdkZsb29yKHNoYXJlcywgdGhpcy50b3RhbEFscGhhLnZhbHVlLCB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTAKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEwNQogICAgLy8gcmV0dXJuIHRoaXMubXVsRGl2Rmxvb3Ioc2hhcmVzLCB0aGlzLnRvdGFsQWxwaGEudmFsdWUsIHRoaXMudG90YWxTaGFyZXMudmFsdWUpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjc4CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGZyYW1lX2RpZyAtMQogICAgdW5jb3ZlciAyCiAgICBtdWx3CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3OQogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICB1bmNvdmVyIDMKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODAKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMDUKICAgIC8vIHJldHVybiB0aGlzLm11bERpdkZsb29yKHNoYXJlcywgdGhpcy50b3RhbEFscGhhLnZhbHVlLCB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlKTsKICAgIHJldHN1YgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0KGlucHV0QW1vdW50OiB1aW50NjQpIC0+IHVpbnQ2NDoKZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTEyCiAgICAvLyBwcml2YXRlIGdldEV4cGVjdGVkU3dhcE91dHB1dChpbnB1dEFtb3VudDogdWludDY0KTogdWludDY0IHsKICAgIHByb3RvIDEgMQogICAgcHVzaGJ5dGVzICIiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMTMKICAgIC8vIGNvbnN0IHBvb2xBcHAgPSB0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTYKICAgIC8vIHRpbnltYW5Qb29sQXBwSWQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBUaW55bWFuIFYyIHBvb2wgYXBwIElECiAgICBieXRlYyAxMyAvLyAidGlueW1hblBvb2xBcHBJZCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjExMwogICAgLy8gY29uc3QgcG9vbEFwcCA9IHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMTQKICAgIC8vIGNvbnN0IHBvb2xBZGRyID0gdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTcKICAgIC8vIHRpbnltYW5Qb29sQWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7IC8vIFRpbnltYW4gcG9vbCBhZGRyZXNzCiAgICBieXRlYyAxNCAvLyAidGlueW1hblBvb2xBZGRyZXNzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTE0CiAgICAvLyBjb25zdCBwb29sQWRkciA9IHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjExNwogICAgLy8gY29uc3QgW2Fzc2V0MUlkLCBoYXNBc3NldDFJZF0gPSBBcHBMb2NhbC5nZXRFeFVpbnQ2NChwb29sQWRkciwgcG9vbEFwcCwgQnl0ZXMoJ2Fzc2V0XzFfaWQnKSk7CiAgICBkdXAKICAgIGRpZyAyCiAgICBwdXNoYnl0ZXMgImFzc2V0XzFfaWQiCiAgICBhcHBfbG9jYWxfZ2V0X2V4CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMTgKICAgIC8vIGFzc2VydChoYXNBc3NldDFJZCwgJ0Nhbm5vdCByZWFkIHBvb2wgYXNzZXRfMV9pZCcpOwogICAgYXNzZXJ0IC8vIENhbm5vdCByZWFkIHBvb2wgYXNzZXRfMV9pZAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTIwCiAgICAvLyBjb25zdCBbYXNzZXQxUmVzZXJ2ZXMsIGhhc0Fzc2V0MVJlc2VydmVzXSA9IEFwcExvY2FsLmdldEV4VWludDY0KHBvb2xBZGRyLCBwb29sQXBwLCBCeXRlcygnYXNzZXRfMV9yZXNlcnZlcycpKTsKICAgIGRpZyAxCiAgICBkaWcgMwogICAgcHVzaGJ5dGVzICJhc3NldF8xX3Jlc2VydmVzIgogICAgYXBwX2xvY2FsX2dldF9leAogICAgc3dhcAogICAgY292ZXIgNAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTIxCiAgICAvLyBhc3NlcnQoaGFzQXNzZXQxUmVzZXJ2ZXMsICdDYW5ub3QgcmVhZCBwb29sIGFzc2V0XzFfcmVzZXJ2ZXMnKTsKICAgIGFzc2VydCAvLyBDYW5ub3QgcmVhZCBwb29sIGFzc2V0XzFfcmVzZXJ2ZXMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEyMwogICAgLy8gY29uc3QgW2Fzc2V0MlJlc2VydmVzLCBoYXNBc3NldDJSZXNlcnZlc10gPSBBcHBMb2NhbC5nZXRFeFVpbnQ2NChwb29sQWRkciwgcG9vbEFwcCwgQnl0ZXMoJ2Fzc2V0XzJfcmVzZXJ2ZXMnKSk7CiAgICBkaWcgMQogICAgZGlnIDMKICAgIHB1c2hieXRlcyAiYXNzZXRfMl9yZXNlcnZlcyIKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGNvdmVyIDQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEyNAogICAgLy8gYXNzZXJ0KGhhc0Fzc2V0MlJlc2VydmVzLCAnQ2Fubm90IHJlYWQgcG9vbCBhc3NldF8yX3Jlc2VydmVzJyk7CiAgICBhc3NlcnQgLy8gQ2Fubm90IHJlYWQgcG9vbCBhc3NldF8yX3Jlc2VydmVzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMjYKICAgIC8vIGNvbnN0IFt0b3RhbEZlZVNoYXJlLCBoYXNUb3RhbEZlZVNoYXJlXSA9IEFwcExvY2FsLmdldEV4VWludDY0KHBvb2xBZGRyLCBwb29sQXBwLCBCeXRlcygndG90YWxfZmVlX3NoYXJlJykpOwogICAgc3dhcAogICAgdW5jb3ZlciAyCiAgICBwdXNoYnl0ZXMgInRvdGFsX2ZlZV9zaGFyZSIKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGNvdmVyIDMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEyNwogICAgLy8gYXNzZXJ0KGhhc1RvdGFsRmVlU2hhcmUsICdDYW5ub3QgcmVhZCBwb29sIHRvdGFsX2ZlZV9zaGFyZScpOwogICAgYXNzZXJ0IC8vIENhbm5vdCByZWFkIHBvb2wgdG90YWxfZmVlX3NoYXJlCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMzMKICAgIC8vIGlmIChhc3NldDFJZCA9PT0gdGhpcy51c2RjQXNzZXQudmFsdWUpIHsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MQogICAgLy8gdXNkY0Fzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKGFpcmRyb3BzIGNvbWUgaW4gYXMgdGhpcykKICAgIGJ5dGVjIDQgLy8gInVzZGNBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEzMwogICAgLy8gaWYgKGFzc2V0MUlkID09PSB0aGlzLnVzZGNBc3NldC52YWx1ZSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBieiBnZXRFeHBlY3RlZFN3YXBPdXRwdXRfZWxzZV9ib2R5QDIKICAgIGZyYW1lX2RpZyAxCiAgICBmcmFtZV9idXJ5IDAKCmdldEV4cGVjdGVkU3dhcE91dHB1dF9hZnRlcl9pZl9lbHNlQDM6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNDUKICAgIC8vIGNvbnN0IG5ldElucHV0ID0gdGhpcy5tdWxEaXZGbG9vcihpbnB1dEFtb3VudCwgRkVFX0JQU19CQVNFIC0gZmVlQnBzLCBGRUVfQlBTX0JBU0UpOwogICAgaW50YyA0IC8vIDEwMDAwCiAgICBmcmFtZV9kaWcgMgogICAgLQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzgKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgZnJhbWVfZGlnIC0xCiAgICBtdWx3CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3OQogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNDUKICAgIC8vIGNvbnN0IG5ldElucHV0ID0gdGhpcy5tdWxEaXZGbG9vcihpbnB1dEFtb3VudCwgRkVFX0JQU19CQVNFIC0gZmVlQnBzLCBGRUVfQlBTX0JBU0UpOwogICAgaW50YyA0IC8vIDEwMDAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3OQogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODAKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNDgKICAgIC8vIGNvbnN0IGV4cGVjdGVkT3V0cHV0ID0gdGhpcy5tdWxEaXZGbG9vcihvdXRwdXRSZXNlcnZlcywgbmV0SW5wdXQsIGlucHV0UmVzZXJ2ZXMgKyBuZXRJbnB1dCk7CiAgICBmcmFtZV9kaWcgMAogICAgZGlnIDEKICAgICsKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjc4CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGNvdmVyIDIKICAgIG11bHcKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjc5CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIHVuY292ZXIgMwogICAgZGl2bW9kdwogICAgcG9wbiAyCiAgICBzd2FwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4MAogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE1MAogICAgLy8gcmV0dXJuIGV4cGVjdGVkT3V0cHV0OwogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCmdldEV4cGVjdGVkU3dhcE91dHB1dF9lbHNlX2JvZHlAMjoKICAgIGZyYW1lX2J1cnkgMAogICAgZnJhbWVfZGlnIDEKICAgIGIgZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0X2FmdGVyX2lmX2Vsc2VAMwo=",
        "clear": "I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYmFzZS1jb250cmFjdC5kLnRzOjpCYXNlQ29udHJhY3QuY2xlYXJTdGF0ZVByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBwdXNoaW50IDEgLy8gMQogICAgcmV0dXJuCg=="
    },
    "state": {
        "global": {
            "num_byte_slices": 3,
            "num_uints": 11
        },
        "local": {
            "num_byte_slices": 0,
            "num_uints": 1
        }
    },
    "schema": {
        "global": {
            "declared": {
                "alphaAsset": {
                    "type": "uint64",
                    "key": "alphaAsset"
                },
                "creatorAddress": {
                    "type": "bytes",
                    "key": "creatorAddress"
                },
                "creatorFeeRate": {
                    "type": "uint64",
                    "key": "creatorFeeRate"
                },
                "creatorUnclaimedAlpha": {
                    "type": "uint64",
                    "key": "creatorUnclaimedAlpha"
                },
                "farmBalance": {
                    "type": "uint64",
                    "key": "farmBalance"
                },
                "farmEmissionRate": {
                    "type": "uint64",
                    "key": "farmEmissionRate"
                },
                "minSwapThreshold": {
                    "type": "uint64",
                    "key": "minSwapThreshold"
                },
                "rarefiAddress": {
                    "type": "bytes",
                    "key": "rarefiAddress"
                },
                "tinymanPoolAddress": {
                    "type": "bytes",
                    "key": "tinymanPoolAddress"
                },
                "tinymanPoolAppId": {
                    "type": "uint64",
                    "key": "tinymanPoolAppId"
                },
                "totalAlpha": {
                    "type": "uint64",
                    "key": "totalAlpha"
                },
                "totalShares": {
                    "type": "uint64",
                    "key": "totalShares"
                },
                "totalYieldCompounded": {
                    "type": "uint64",
                    "key": "totalYieldCompounded"
                },
                "usdcAsset": {
                    "type": "uint64",
                    "key": "usdcAsset"
                }
            },
            "reserved": {}
        },
        "local": {
            "declared": {
                "userShares": {
                    "type": "uint64",
                    "key": "userShares"
                }
            },
            "reserved": {}
        }
    },
    "contract": {
        "name": "RareFiAlphaCompoundingVault",
        "methods": [
            {
                "name": "createVault",
                "args": [
                    {
                        "type": "uint64",
                        "name": "alphaAssetId"
                    },
                    {
                        "type": "uint64",
                        "name": "usdcAssetId"
                    },
                    {
                        "type": "uint64",
                        "name": "creatorFeeRate"
                    },
                    {
                        "type": "uint64",
                        "name": "minSwapThreshold"
                    },
                    {
                        "type": "uint64",
                        "name": "tinymanPoolAppId"
                    },
                    {
                        "type": "address",
                        "name": "tinymanPoolAddress"
                    },
                    {
                        "type": "address",
                        "name": "rarefiAddress"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Create and initialize the vault\r\nCalled once at deployment"
            },
            {
                "name": "optInAssets",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Opt the contract into required assets\r\nMust be called by creator after deployment with:\r\n- 5.4 ALGO payment (stays in contract for MBR and operational fees)"
            },
            {
                "name": "optIn",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "User opts into the contract to enable local storage"
            },
            {
                "name": "closeOut",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "User closes out - withdraws all Alpha (deposit + yield)"
            },
            {
                "name": "deposit",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "User deposits Alpha into the vault\r\nReceives shares proportional to their deposit\r\n\r\nNOTE: Deposits are paused when USDC balance >= minSwapThreshold to prevent\r\nflash deposit attacks where users deposit right before yield is compounded."
            },
            {
                "name": "withdraw",
                "args": [
                    {
                        "type": "uint64",
                        "name": "shareAmount",
                        "desc": "- Shares to redeem (0 = withdraw all)"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "User withdraws Alpha from the vault\r\nReceives proportional share of vault's Alpha (original deposit + compounded yield)"
            },
            {
                "name": "claimCreator",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Creator claims their accumulated Alpha from fees"
            },
            {
                "name": "compoundYield",
                "args": [
                    {
                        "type": "uint64",
                        "name": "slippageBps",
                        "desc": "- Slippage tolerance in basis points (e.g., 50 = 0.5%, 100 = 1%)"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Swaps accumulated USDC to Alpha and compounds into vault\r\nThe Alpha is added to totalAlpha, increasing the value of all shares\r\nOnly callable by creator or RareFi platform to prevent sandwich attacks"
            },
            {
                "name": "getVaultStats",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "(uint64,uint64,uint64,uint64,uint64,uint64)",
                    "desc": "[totalShares, totalAlpha, creatorUnclaimedAlpha, usdcBalance, totalYieldCompounded, sharePrice]\r\nNote: sharePrice is scaled by SCALE (1e12) for precision"
                },
                "desc": "Get vault statistics"
            },
            {
                "name": "getUserAlphaBalance",
                "args": [
                    {
                        "type": "address",
                        "name": "user"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Get user's current Alpha balance (shares converted to Alpha)\r\nThis includes their original deposit + all compounded yield"
            },
            {
                "name": "getUserShares",
                "args": [
                    {
                        "type": "address",
                        "name": "user"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Get user's share balance"
            },
            {
                "name": "previewDeposit",
                "args": [
                    {
                        "type": "uint64",
                        "name": "alphaAmount"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Preview how many shares a deposit would receive"
            },
            {
                "name": "previewWithdraw",
                "args": [
                    {
                        "type": "uint64",
                        "name": "shareAmount"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Preview how much Alpha a share redemption would receive"
            },
            {
                "name": "getCompoundQuote",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "(uint64,uint64,uint64)",
                    "desc": "[usdcBalance, expectedAlphaOutput, minOutputAt50bps]"
                },
                "desc": "Preview compound - shows expected Alpha for current USDC balance"
            },
            {
                "name": "updateMinSwapThreshold",
                "args": [
                    {
                        "type": "uint64",
                        "name": "newThreshold"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Update the minimum swap threshold"
            },
            {
                "name": "updateTinymanPool",
                "args": [
                    {
                        "type": "uint64",
                        "name": "newPoolAppId"
                    },
                    {
                        "type": "address",
                        "name": "newPoolAddress"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Update Tinyman pool configuration\r\nUse only if the pool needs to be changed (e.g., migration)"
            },
            {
                "name": "contributeFarm",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Anyone can contribute to the farm by sending Alpha\r\nFarm bonus is distributed proportionally during yield compounds\r\nThis allows projects/sponsors to boost yield for depositors\r\n\r\nExpects an asset transfer of alphaAsset before this call"
            },
            {
                "name": "setFarmEmissionRate",
                "args": [
                    {
                        "type": "uint64",
                        "name": "emissionRateBps",
                        "desc": "- Emission rate in basis points (e.g., 1000 = 10%, 5000 = 50%)\r\n  Maximum 10000 (100%) - matches compound output 1:1"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Set the farm emission rate (percentage of compound output to add from farm)\r\nOnly callable by creator or RareFi"
            },
            {
                "name": "withdrawFarm",
                "args": [
                    {
                        "type": "uint64",
                        "name": "amount",
                        "desc": "- Amount to withdraw (0 = withdraw all)"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Withdraw remaining farm balance (emergency/cleanup)\r\nOnly callable by creator"
            },
            {
                "name": "getFarmStats",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "(uint64,uint64)",
                    "desc": "[farmBalance, farmEmissionRate]"
                },
                "desc": "Get farm statistics"
            }
        ],
        "networks": {}
    },
    "bare_call_config": {
        "update_application": "CALL",
        "delete_application": "CALL"
    }
}