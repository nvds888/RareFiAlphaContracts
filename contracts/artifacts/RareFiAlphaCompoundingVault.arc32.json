{
    "hints": {
        "createVault(uint64,uint64,uint64,uint64,uint64,uint64,address,address)void": {
            "call_config": {
                "no_op": "CREATE"
            }
        },
        "optInAssets()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "optIn()void": {
            "call_config": {
                "opt_in": "CALL"
            }
        },
        "closeOut()void": {
            "call_config": {
                "close_out": "CALL"
            }
        },
        "deposit(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "withdraw(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "claimCreator()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "compoundYield(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getVaultStats()(uint64,uint64,uint64,uint64,uint64,uint64)": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getUserAlphaBalance(address)uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getUserShares(address)uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "previewDeposit(uint64)uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "previewWithdraw(uint64)uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getCompoundQuote()(uint64,uint64,uint64)": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "updateMinSwapThreshold(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "updateMaxSlippage(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "updateCreatorFeeRate(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "contributeFarm()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "setEmissionRatio(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getFarmStats()(uint64,uint64,uint64)": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        }
    },
    "source": {
        "approval": "I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYXJjNC9pbmRleC5kLnRzOjpDb250cmFjdC5hcHByb3ZhbFByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBpbnRjYmxvY2sgMCAxIDggNCAxMDAwMCAyMDAwMDAgNTAwMDAwMDAgMTAwMDAwMDAwMDAwMAogICAgYnl0ZWNibG9jayAidG90YWxTaGFyZXMiICJ0b3RhbEFscGhhIiAiZmFybUJhbGFuY2UiICJhbHBoYUFzc2V0IiAidXNkY0Fzc2V0IiAidXNlclNoYXJlcyIgImNyZWF0b3JBZGRyZXNzIiAweDE1MWY3Yzc1ICJjcmVhdG9yVW5jbGFpbWVkQWxwaGEiICJlbWlzc2lvblJhdGlvIiAibWluU3dhcFRocmVzaG9sZCIgIm1heFNsaXBwYWdlQnBzIiAidG90YWxZaWVsZENvbXBvdW5kZWQiICJyYXJlZmlBZGRyZXNzIiAiY3JlYXRvckZlZVJhdGUiICJ0aW55bWFuUG9vbEFwcElkIiAidGlueW1hblBvb2xBZGRyZXNzIiAiYXNzZXRzT3B0ZWRJbiIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM3CiAgICAvLyBleHBvcnQgY2xhc3MgUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0IGV4dGVuZHMgYXJjNC5Db250cmFjdCB7CiAgICB0eG4gTnVtQXBwQXJncwogICAgYnogbWFpbl9iYXJlX3JvdXRpbmdAMjkKICAgIHB1c2hieXRlc3MgMHgyOTMxNGQ5NSAweDZhNjkxZmUyIC8vIG1ldGhvZCAib3B0SW4oKXZvaWQiLCBtZXRob2QgImNsb3NlT3V0KCl2b2lkIgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAogICAgbWF0Y2ggbWFpbl9vcHRJbl9yb3V0ZUAzIG1haW5fY2xvc2VPdXRfcm91dGVANAoKbWFpbl9zd2l0Y2hfY2FzZV9uZXh0QDU6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNwogICAgLy8gZXhwb3J0IGNsYXNzIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdCBleHRlbmRzIGFyYzQuQ29udHJhY3QgewogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBtdXN0IGJlIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBieiBtYWluX2NyZWF0ZV9Ob09wQDI1CiAgICBwdXNoYnl0ZXNzIDB4NDE0ZTQxYjUgMHg2ZTJlYmM5YiAweDIxZjFkZGZmIDB4YmM5OTQ0OWUgMHhjOGIzYzBmMCAweDAwMzU5N2EyIDB4YzdkNGRiZjMgMHgzZTJmN2NiNyAweDNmZDc5ODU2IDB4OTczNjU0YmYgMHgwYzc5M2IxOCAweGFiNmVmNzNiIDB4YWFlMmNhZDIgMHhiYzVlMzhjNiAweGFmZWJmY2FjIDB4ZDA1NGMxOWYgMHgxNzBlNzI5MiAvLyBtZXRob2QgIm9wdEluQXNzZXRzKCl2b2lkIiwgbWV0aG9kICJkZXBvc2l0KHVpbnQ2NCl2b2lkIiwgbWV0aG9kICJ3aXRoZHJhdyh1aW50NjQpdm9pZCIsIG1ldGhvZCAiY2xhaW1DcmVhdG9yKCl2b2lkIiwgbWV0aG9kICJjb21wb3VuZFlpZWxkKHVpbnQ2NCl2b2lkIiwgbWV0aG9kICJnZXRWYXVsdFN0YXRzKCkodWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQpIiwgbWV0aG9kICJnZXRVc2VyQWxwaGFCYWxhbmNlKGFkZHJlc3MpdWludDY0IiwgbWV0aG9kICJnZXRVc2VyU2hhcmVzKGFkZHJlc3MpdWludDY0IiwgbWV0aG9kICJwcmV2aWV3RGVwb3NpdCh1aW50NjQpdWludDY0IiwgbWV0aG9kICJwcmV2aWV3V2l0aGRyYXcodWludDY0KXVpbnQ2NCIsIG1ldGhvZCAiZ2V0Q29tcG91bmRRdW90ZSgpKHVpbnQ2NCx1aW50NjQsdWludDY0KSIsIG1ldGhvZCAidXBkYXRlTWluU3dhcFRocmVzaG9sZCh1aW50NjQpdm9pZCIsIG1ldGhvZCAidXBkYXRlTWF4U2xpcHBhZ2UodWludDY0KXZvaWQiLCBtZXRob2QgInVwZGF0ZUNyZWF0b3JGZWVSYXRlKHVpbnQ2NCl2b2lkIiwgbWV0aG9kICJjb250cmlidXRlRmFybSgpdm9pZCIsIG1ldGhvZCAic2V0RW1pc3Npb25SYXRpbyh1aW50NjQpdm9pZCIsIG1ldGhvZCAiZ2V0RmFybVN0YXRzKCkodWludDY0LHVpbnQ2NCx1aW50NjQpIgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAogICAgbWF0Y2ggb3B0SW5Bc3NldHMgZGVwb3NpdCB3aXRoZHJhdyBjbGFpbUNyZWF0b3IgY29tcG91bmRZaWVsZCBnZXRWYXVsdFN0YXRzIGdldFVzZXJBbHBoYUJhbGFuY2UgZ2V0VXNlclNoYXJlcyBwcmV2aWV3RGVwb3NpdCBwcmV2aWV3V2l0aGRyYXcgZ2V0Q29tcG91bmRRdW90ZSB1cGRhdGVNaW5Td2FwVGhyZXNob2xkIHVwZGF0ZU1heFNsaXBwYWdlIHVwZGF0ZUNyZWF0b3JGZWVSYXRlIGNvbnRyaWJ1dGVGYXJtIHNldEVtaXNzaW9uUmF0aW8gZ2V0RmFybVN0YXRzCiAgICBlcnIKCm1haW5fY3JlYXRlX05vT3BAMjU6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNwogICAgLy8gZXhwb3J0IGNsYXNzIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdCBleHRlbmRzIGFyYzQuQ29udHJhY3QgewogICAgcHVzaGJ5dGVzIDB4NGQwM2NiMjkgLy8gbWV0aG9kICJjcmVhdGVWYXVsdCh1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCxhZGRyZXNzLGFkZHJlc3Mpdm9pZCIKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDAKICAgIG1hdGNoIGNyZWF0ZVZhdWx0CiAgICBlcnIKCm1haW5fY2xvc2VPdXRfcm91dGVANDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM2NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAnQ2xvc2VPdXQnIH0pCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBwdXNoaW50IDIgLy8gQ2xvc2VPdXQKICAgID09CiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgJiYKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gbXVzdCBiZSBDbG9zZU91dCAmJiBjYW4gb25seSBjYWxsIHdoZW4gbm90IGNyZWF0aW5nCiAgICBiIGNsb3NlT3V0CgptYWluX29wdEluX3JvdXRlQDM6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNTYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IGFsbG93QWN0aW9uczogJ09wdEluJyB9KQogICAgdHhuIE9uQ29tcGxldGlvbgogICAgaW50Y18xIC8vIE9wdEluCiAgICA9PQogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgICYmCiAgICBhc3NlcnQgLy8gT25Db21wbGV0aW9uIG11c3QgYmUgT3B0SW4gJiYgY2FuIG9ubHkgY2FsbCB3aGVuIG5vdCBjcmVhdGluZwogICAgYiBvcHRJbgoKbWFpbl9iYXJlX3JvdXRpbmdAMjk6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNwogICAgLy8gZXhwb3J0IGNsYXNzIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdCBleHRlbmRzIGFyYzQuQ29udHJhY3QgewogICAgaW50Y18zIC8vIFVwZGF0ZUFwcGxpY2F0aW9uCiAgICBwdXNoaW50IDUgLy8gRGVsZXRlQXBwbGljYXRpb24KICAgIHR4biBPbkNvbXBsZXRpb24KICAgIG1hdGNoIG1haW5fdXBkYXRlQXBwbGljYXRpb25AMzAgbWFpbl9kZWxldGVBcHBsaWNhdGlvbkAzMQogICAgZXJyCgptYWluX2RlbGV0ZUFwcGxpY2F0aW9uQDMxOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzMzCiAgICAvLyBAYmFyZW1ldGhvZCh7IGFsbG93QWN0aW9uczogJ0RlbGV0ZUFwcGxpY2F0aW9uJyB9KQogICAgdHhuIEFwcGxpY2F0aW9uSUQKICAgIGFzc2VydCAvLyBjYW4gb25seSBjYWxsIHdoZW4gbm90IGNyZWF0aW5nCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3MzUKICAgIC8vIGFzc2VydChmYWxzZSwgJ0NvbnRyYWN0IGRlbGV0aW9uIGRpc2FibGVkJyk7CiAgICBlcnIgLy8gQ29udHJhY3QgZGVsZXRpb24gZGlzYWJsZWQKCm1haW5fdXBkYXRlQXBwbGljYXRpb25AMzA6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3MjgKICAgIC8vIEBiYXJlbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAnVXBkYXRlQXBwbGljYXRpb24nIH0pCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGNhbiBvbmx5IGNhbGwgd2hlbiBub3QgY3JlYXRpbmcKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjczMAogICAgLy8gYXNzZXJ0KGZhbHNlLCAnQ29udHJhY3QgdXBkYXRlcyBkaXNhYmxlZCcpOwogICAgZXJyIC8vIENvbnRyYWN0IHVwZGF0ZXMgZGlzYWJsZWQKCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmNyZWF0ZVZhdWx0W3JvdXRpbmddKCkgLT4gdm9pZDoKY3JlYXRlVmF1bHQ6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyNDkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IG9uQ3JlYXRlOiAncmVxdWlyZScgfSkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDIKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDMKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDQKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDUKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDYKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDcKICAgIGR1cAogICAgbGVuCiAgICBwdXNoaW50IDMyIC8vIDMyCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnN0YXRpY19hcnJheTxhcmM0LnVpbnQ4LCAzMj4KICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDgKICAgIGR1cAogICAgbGVuCiAgICBwdXNoaW50IDMyIC8vIDMyCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnN0YXRpY19hcnJheTxhcmM0LnVpbnQ4LCAzMj4KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI2MQogICAgLy8gYXNzZXJ0KFR4bi5yZWtleVRvID09PSBHbG9iYWwuemVyb0FkZHJlc3MsICdyZWtleVRvIG11c3QgYmUgemVybycpOwogICAgdHhuIFJla2V5VG8KICAgIGdsb2JhbCBaZXJvQWRkcmVzcwogICAgPT0KICAgIGFzc2VydCAvLyByZWtleVRvIG11c3QgYmUgemVybwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjY0CiAgICAvLyBhc3NlcnQoY3JlYXRvckZlZVJhdGUgPD0gTUFYX0ZFRV9SQVRFLCAnQ3JlYXRvciBmZWUgcmF0ZSBleGNlZWRzIG1heGltdW0gKDYlKScpOwogICAgZGlnIDUKICAgIHB1c2hpbnQgNiAvLyA2CiAgICA8PQogICAgYXNzZXJ0IC8vIENyZWF0b3IgZmVlIHJhdGUgZXhjZWVkcyBtYXhpbXVtICg2JSkKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI2NQogICAgLy8gYXNzZXJ0KG1pblN3YXBUaHJlc2hvbGQgPj0gTUlOX1NXQVBfQU1PVU5ULCAnU3dhcCB0aHJlc2hvbGQgdG9vIGxvdycpOwogICAgZGlnIDQKICAgIGludGMgNSAvLyAyMDAwMDAKICAgID49CiAgICBhc3NlcnQgLy8gU3dhcCB0aHJlc2hvbGQgdG9vIGxvdwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjY2CiAgICAvLyBhc3NlcnQobWluU3dhcFRocmVzaG9sZCA8PSBNQVhfU1dBUF9USFJFU0hPTEQsICdTd2FwIHRocmVzaG9sZCB0b28gaGlnaCAobWF4IDUwIFVTREMpJyk7CiAgICBkaWcgNAogICAgaW50YyA2IC8vIDUwMDAwMDAwCiAgICA8PQogICAgYXNzZXJ0IC8vIFN3YXAgdGhyZXNob2xkIHRvbyBoaWdoIChtYXggNTAgVVNEQykKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI2NwogICAgLy8gYXNzZXJ0KG1heFNsaXBwYWdlQnBzID49IE1JTl9NQVhfU0xJUFBBR0VfQlBTLCAnTWF4IHNsaXBwYWdlIHRvbyBsb3cgKG1pbiA1JSknKTsKICAgIGRpZyAzCiAgICBwdXNoaW50IDUwMCAvLyA1MDAKICAgID49CiAgICBhc3NlcnQgLy8gTWF4IHNsaXBwYWdlIHRvbyBsb3cgKG1pbiA1JSkKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI2OAogICAgLy8gYXNzZXJ0KG1heFNsaXBwYWdlQnBzIDw9IE1BWF9TTElQUEFHRV9CUFMsICdNYXggc2xpcHBhZ2UgdG9vIGhpZ2gnKTsKICAgIGRpZyAzCiAgICBpbnRjIDQgLy8gMTAwMDAKICAgIDw9CiAgICBhc3NlcnQgLy8gTWF4IHNsaXBwYWdlIHRvbyBoaWdoCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyNjkKICAgIC8vIGFzc2VydChhbHBoYUFzc2V0SWQgIT09IFVpbnQ2NCgwKSwgJ0ludmFsaWQgQWxwaGEgYXNzZXQnKTsKICAgIGRpZyA3CiAgICBhc3NlcnQgLy8gSW52YWxpZCBBbHBoYSBhc3NldAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjcwCiAgICAvLyBhc3NlcnQodXNkY0Fzc2V0SWQgIT09IFVpbnQ2NCgwKSwgJ0ludmFsaWQgVVNEQyBhc3NldCcpOwogICAgZGlnIDYKICAgIGFzc2VydCAvLyBJbnZhbGlkIFVTREMgYXNzZXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI3MQogICAgLy8gYXNzZXJ0KGFscGhhQXNzZXRJZCAhPT0gdXNkY0Fzc2V0SWQsICdBbHBoYSBhbmQgVVNEQyBtdXN0IGJlIGRpZmZlcmVudCcpOwogICAgZGlnIDcKICAgIGRpZyA3CiAgICAhPQogICAgYXNzZXJ0IC8vIEFscGhhIGFuZCBVU0RDIG11c3QgYmUgZGlmZmVyZW50CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyNzIKICAgIC8vIGFzc2VydCh0aW55bWFuUG9vbEFwcElkICE9PSBVaW50NjQoMCksICdJbnZhbGlkIFRpbnltYW4gcG9vbCBhcHAgSUQnKTsKICAgIGRpZyAyCiAgICBhc3NlcnQgLy8gSW52YWxpZCBUaW55bWFuIHBvb2wgYXBwIElECiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MwogICAgLy8gYWxwaGFBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gQWxwaGEgQVNBIElEIChkZXBvc2l0ICYgeWllbGQgYXNzZXQpCiAgICBieXRlY18zIC8vICJhbHBoYUFzc2V0IgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mjc1CiAgICAvLyB0aGlzLmFscGhhQXNzZXQudmFsdWUgPSBhbHBoYUFzc2V0SWQ7CiAgICB1bmNvdmVyIDgKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NAogICAgLy8gdXNkY0Fzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKGFpcmRyb3BzIGNvbWUgaW4gYXMgdGhpcykKICAgIGJ5dGVjIDQgLy8gInVzZGNBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI3NgogICAgLy8gdGhpcy51c2RjQXNzZXQudmFsdWUgPSB1c2RjQXNzZXRJZDsKICAgIHVuY292ZXIgNwogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3CiAgICAvLyBjcmVhdG9yQWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7ICAgLy8gVmF1bHQgY3JlYXRvciB3aG8gcmVjZWl2ZXMgZmVlCiAgICBieXRlYyA2IC8vICJjcmVhdG9yQWRkcmVzcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI3OQogICAgLy8gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZSA9IFR4bi5zZW5kZXI7CiAgICB0eG4gU2VuZGVyCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDgKICAgIC8vIHJhcmVmaUFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgICAvLyBSYXJlRmkgcGxhdGZvcm0gYWRkcmVzcyAoY2FuIGFsc28gdHJpZ2dlciBzd2FwcykKICAgIGJ5dGVjIDEzIC8vICJyYXJlZmlBZGRyZXNzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjgwCiAgICAvLyB0aGlzLnJhcmVmaUFkZHJlc3MudmFsdWUgPSByYXJlZmlBZGRyZXNzOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ5CiAgICAvLyBjcmVhdG9yRmVlUmF0ZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gMC0xMDAsIHBlcmNlbnRhZ2Ugb2YgeWllbGQgdG8gY3JlYXRvcgogICAgYnl0ZWMgMTQgLy8gImNyZWF0b3JGZWVSYXRlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjgxCiAgICAvLyB0aGlzLmNyZWF0b3JGZWVSYXRlLnZhbHVlID0gY3JlYXRvckZlZVJhdGU7CiAgICB1bmNvdmVyIDUKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MAogICAgLy8gY3JlYXRvclVuY2xhaW1lZEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBBY2N1bXVsYXRlZCBBbHBoYSBmb3IgY3JlYXRvciB0byBjbGFpbQogICAgYnl0ZWMgOCAvLyAiY3JlYXRvclVuY2xhaW1lZEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjgyCiAgICAvLyB0aGlzLmNyZWF0b3JVbmNsYWltZWRBbHBoYS52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTMKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI4NQogICAgLy8gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mjg2CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU1CiAgICAvLyBtaW5Td2FwVGhyZXNob2xkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgLy8gTWluaW11bSBVU0RDIGJlZm9yZSBzd2FwIGFsbG93ZWQKICAgIGJ5dGVjIDEwIC8vICJtaW5Td2FwVGhyZXNob2xkIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mjg3CiAgICAvLyB0aGlzLm1pblN3YXBUaHJlc2hvbGQudmFsdWUgPSBtaW5Td2FwVGhyZXNob2xkOwogICAgdW5jb3ZlciA0CiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTYKICAgIC8vIG1heFNsaXBwYWdlQnBzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyBNYXhpbXVtIHNsaXBwYWdlIHRvbGVyYW5jZSBpbiBiYXNpcyBwb2ludHMKICAgIGJ5dGVjIDExIC8vICJtYXhTbGlwcGFnZUJwcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI4OAogICAgLy8gdGhpcy5tYXhTbGlwcGFnZUJwcy52YWx1ZSA9IG1heFNsaXBwYWdlQnBzOwogICAgdW5jb3ZlciAzCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTcKICAgIC8vIHRvdGFsWWllbGRDb21wb3VuZGVkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBUb3RhbCB5aWVsZCBjb21wb3VuZGVkIChmb3Igc3RhdHMpCiAgICBieXRlYyAxMiAvLyAidG90YWxZaWVsZENvbXBvdW5kZWQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyODkKICAgIC8vIHRoaXMudG90YWxZaWVsZENvbXBvdW5kZWQudmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYwCiAgICAvLyB0aW55bWFuUG9vbEFwcElkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgLy8gVGlueW1hbiBWMiBwb29sIGFwcCBJRAogICAgYnl0ZWMgMTUgLy8gInRpbnltYW5Qb29sQXBwSWQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyOTIKICAgIC8vIHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZSA9IHRpbnltYW5Qb29sQXBwSWQ7CiAgICB1bmNvdmVyIDIKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MQogICAgLy8gdGlueW1hblBvb2xBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgLy8gVGlueW1hbiBwb29sIGFkZHJlc3MKICAgIGJ5dGVjIDE2IC8vICJ0aW55bWFuUG9vbEFkZHJlc3MiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyOTMKICAgIC8vIHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlID0gdGlueW1hblBvb2xBZGRyZXNzOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY0CiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBBbHBoYSBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzIgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mjk2CiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gVWludDY0KDApOwogICAgaW50Y18wIC8vIDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NQogICAgLy8gZW1pc3Npb25SYXRpbyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gTXVsdGlwbGllciBmb3IgZHluYW1pYyByYXRlOiByYXRlID0gZmFybUJhbGFuY2UgKiBlbWlzc2lvblJhdGlvIC8gdG90YWxBbHBoYQogICAgYnl0ZWMgOSAvLyAiZW1pc3Npb25SYXRpbyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI5NwogICAgLy8gdGhpcy5lbWlzc2lvblJhdGlvLnZhbHVlID0gVWludDY0KDApOyAvLyBEaXNhYmxlZCBieSBkZWZhdWx0LCBjcmVhdG9yIHNldHMgdmlhIHNldEVtaXNzaW9uUmF0aW8KICAgIGludGNfMCAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjgKICAgIC8vIGFzc2V0c09wdGVkSW4gPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgLy8gMSBpZiBhc3NldHMgYXJlIG9wdGVkIGluLCAwIG90aGVyd2lzZQogICAgYnl0ZWMgMTcgLy8gImFzc2V0c09wdGVkSW4iCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMDAKICAgIC8vIHRoaXMuYXNzZXRzT3B0ZWRJbi52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjQ5CiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyBvbkNyZWF0ZTogJ3JlcXVpcmUnIH0pCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5vcHRJbkFzc2V0c1tyb3V0aW5nXSgpIC0+IHZvaWQ6Cm9wdEluQXNzZXRzOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzEwCiAgICAvLyBhc3NlcnQoVHhuLnJla2V5VG8gPT09IEdsb2JhbC56ZXJvQWRkcmVzcywgJ3Jla2V5VG8gbXVzdCBiZSB6ZXJvJyk7CiAgICB0eG4gUmVrZXlUbwogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIHJla2V5VG8gbXVzdCBiZSB6ZXJvCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMTEKICAgIC8vIGFzc2VydChUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlLCAnT25seSBjcmVhdG9yIGNhbiBvcHQtaW4gYXNzZXRzJyk7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDcKICAgIC8vIGNyZWF0b3JBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAvLyBWYXVsdCBjcmVhdG9yIHdobyByZWNlaXZlcyBmZWUKICAgIGJ5dGVjIDYgLy8gImNyZWF0b3JBZGRyZXNzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzExCiAgICAvLyBhc3NlcnQoVHhuLnNlbmRlciA9PT0gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZSwgJ09ubHkgY3JlYXRvciBjYW4gb3B0LWluIGFzc2V0cycpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBhc3NlcnQgLy8gT25seSBjcmVhdG9yIGNhbiBvcHQtaW4gYXNzZXRzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMTIKICAgIC8vIGFzc2VydCh0aGlzLmFzc2V0c09wdGVkSW4udmFsdWUgPT09IFVpbnQ2NCgwKSwgJ0Fzc2V0cyBhbHJlYWR5IG9wdGVkIGluJyk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjgKICAgIC8vIGFzc2V0c09wdGVkSW4gPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgLy8gMSBpZiBhc3NldHMgYXJlIG9wdGVkIGluLCAwIG90aGVyd2lzZQogICAgYnl0ZWMgMTcgLy8gImFzc2V0c09wdGVkSW4iCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMTIKICAgIC8vIGFzc2VydCh0aGlzLmFzc2V0c09wdGVkSW4udmFsdWUgPT09IFVpbnQ2NCgwKSwgJ0Fzc2V0cyBhbHJlYWR5IG9wdGVkIGluJyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgIQogICAgYXNzZXJ0IC8vIEFzc2V0cyBhbHJlYWR5IG9wdGVkIGluCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMTQKICAgIC8vIGNvbnN0IGFwcEFkZHI6IEFjY291bnQgPSBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzczsKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMTgKICAgIC8vIGNvbnN0IGN1cnJlbnRJbmRleCA9IFR4bi5ncm91cEluZGV4OwogICAgdHhuIEdyb3VwSW5kZXgKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMxOQogICAgLy8gYXNzZXJ0KGN1cnJlbnRJbmRleCA+PSBVaW50NjQoMSksICdBcHAgY2FsbCBtdXN0IGZvbGxvdyBwYXltZW50Jyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBBcHAgY2FsbCBtdXN0IGZvbGxvdyBwYXltZW50CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMjEKICAgIC8vIGNvbnN0IGFsZ29QYXltZW50ID0gZ3R4bi5QYXltZW50VHhuKGN1cnJlbnRJbmRleCAtIFVpbnQ2NCgxKSk7CiAgICBpbnRjXzEgLy8gMQogICAgLQogICAgZHVwCiAgICBndHhucyBUeXBlRW51bQogICAgaW50Y18xIC8vIHBheQogICAgPT0KICAgIGFzc2VydCAvLyB0cmFuc2FjdGlvbiB0eXBlIGlzIHBheQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzIyCiAgICAvLyBhc3NlcnQoYWxnb1BheW1lbnQucmVjZWl2ZXIgPT09IGFwcEFkZHIsICdQYXltZW50IG11c3QgYmUgdG8gYXBwJyk7CiAgICBkdXAKICAgIGd0eG5zIFJlY2VpdmVyCiAgICBkaWcgMgogICAgPT0KICAgIGFzc2VydCAvLyBQYXltZW50IG11c3QgYmUgdG8gYXBwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMjMKICAgIC8vIGFzc2VydChhbGdvUGF5bWVudC5hbW91bnQgPj0gdG90YWxSZXF1aXJlZCwgJ0luc3VmZmljaWVudCBBTEdPIChuZWVkIDUuNCBBTEdPKScpOwogICAgZHVwCiAgICBndHhucyBBbW91bnQKICAgIHB1c2hpbnQgNTQwMDAwMCAvLyA1NDAwMDAwCiAgICA+PQogICAgYXNzZXJ0IC8vIEluc3VmZmljaWVudCBBTEdPIChuZWVkIDUuNCBBTEdPKQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzI0CiAgICAvLyBhc3NlcnQoYWxnb1BheW1lbnQuc2VuZGVyID09PSBUeG4uc2VuZGVyLCAnUGF5bWVudCBtdXN0IGJlIGZyb20gY2FsbGVyJyk7CiAgICBkdXAKICAgIGd0eG5zIFNlbmRlcgogICAgdHhuIFNlbmRlcgogICAgPT0KICAgIGFzc2VydCAvLyBQYXltZW50IG11c3QgYmUgZnJvbSBjYWxsZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMyNwogICAgLy8gYXNzZXJ0KGFsZ29QYXltZW50LnJla2V5VG8gPT09IEdsb2JhbC56ZXJvQWRkcmVzcywgJ3Jla2V5VG8gbXVzdCBiZSB6ZXJvJyk7CiAgICBkdXAKICAgIGd0eG5zIFJla2V5VG8KICAgIGdsb2JhbCBaZXJvQWRkcmVzcwogICAgPT0KICAgIGFzc2VydCAvLyByZWtleVRvIG11c3QgYmUgemVybwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzI4CiAgICAvLyBhc3NlcnQoYWxnb1BheW1lbnQuY2xvc2VSZW1haW5kZXJUbyA9PT0gR2xvYmFsLnplcm9BZGRyZXNzLCAnY2xvc2VSZW1haW5kZXJUbyBtdXN0IGJlIHplcm8nKTsKICAgIGd0eG5zIENsb3NlUmVtYWluZGVyVG8KICAgIGdsb2JhbCBaZXJvQWRkcmVzcwogICAgPT0KICAgIGFzc2VydCAvLyBjbG9zZVJlbWFpbmRlclRvIG11c3QgYmUgemVybwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzMxLTMzNgogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogYXBwQWRkciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzMzCiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDMKICAgIC8vIGFscGhhQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIEFscGhhIEFTQSBJRCAoZGVwb3NpdCAmIHlpZWxkIGFzc2V0KQogICAgYnl0ZWNfMyAvLyAiYWxwaGFBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMzMwogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMzNAogICAgLy8gYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgZHVwCiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMzMS0zMzYKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IGFwcEFkZHIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGludGNfMyAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMzUKICAgIC8vIGZlZTogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMzEtMzM2CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBhcHBBZGRyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBVaW50NjQoMCksCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzM5LTM0NAogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogYXBwQWRkciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBVaW50NjQoMCksCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNDEKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0CiAgICAvLyB1c2RjQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBVU0RDIEFTQSBJRCAoYWlyZHJvcHMgY29tZSBpbiBhcyB0aGlzKQogICAgYnl0ZWMgNCAvLyAidXNkY0Fzc2V0IgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzQxCiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMudXNkY0Fzc2V0LnZhbHVlKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNDIKICAgIC8vIGFzc2V0QW1vdW50OiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBBc3NldEFtb3VudAogICAgaXR4bl9maWVsZCBYZmVyQXNzZXQKICAgIGl0eG5fZmllbGQgQXNzZXRSZWNlaXZlcgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzM5LTM0NAogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogYXBwQWRkciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBVaW50NjQoMCksCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpbnRjXzMgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzQzCiAgICAvLyBmZWU6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzM5LTM0NAogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogYXBwQWRkciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBVaW50NjQoMCksCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjgKICAgIC8vIGFzc2V0c09wdGVkSW4gPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgLy8gMSBpZiBhc3NldHMgYXJlIG9wdGVkIGluLCAwIG90aGVyd2lzZQogICAgYnl0ZWMgMTcgLy8gImFzc2V0c09wdGVkSW4iCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNDYKICAgIC8vIHRoaXMuYXNzZXRzT3B0ZWRJbi52YWx1ZSA9IFVpbnQ2NCgxKTsKICAgIGludGNfMSAvLyAxCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzA4CiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQub3B0SW5bcm91dGluZ10oKSAtPiB2b2lkOgpvcHRJbjoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM1OAogICAgLy8gYXNzZXJ0KFR4bi5yZWtleVRvID09PSBHbG9iYWwuemVyb0FkZHJlc3MsICdyZWtleVRvIG11c3QgYmUgemVybycpOwogICAgdHhuIFJla2V5VG8KICAgIGdsb2JhbCBaZXJvQWRkcmVzcwogICAgPT0KICAgIGFzc2VydCAvLyByZWtleVRvIG11c3QgYmUgemVybwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzYwCiAgICAvLyB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWUgPSBVaW50NjQoMCk7CiAgICB0eG4gU2VuZGVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3NAogICAgLy8gdXNlclNoYXJlcyA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFVzZXIncyBzaGFyZSBiYWxhbmNlIChyZXByZXNlbnRzIHByb3BvcnRpb25hbCBvd25lcnNoaXApCiAgICBieXRlYyA1IC8vICJ1c2VyU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzYwCiAgICAvLyB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2xvY2FsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzU2CiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyBhbGxvd0FjdGlvbnM6ICdPcHRJbicgfSkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmNsb3NlT3V0W3JvdXRpbmddKCkgLT4gdm9pZDoKY2xvc2VPdXQ6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNjgKICAgIC8vIGFzc2VydChUeG4ucmVrZXlUbyA9PT0gR2xvYmFsLnplcm9BZGRyZXNzLCAncmVrZXlUbyBtdXN0IGJlIHplcm8nKTsKICAgIHR4biBSZWtleVRvCiAgICBnbG9iYWwgWmVyb0FkZHJlc3MKICAgID09CiAgICBhc3NlcnQgLy8gcmVrZXlUbyBtdXN0IGJlIHplcm8KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM2OQogICAgLy8gY29uc3Qgc2hhcmVzID0gdGhpcy51c2VyU2hhcmVzKFR4bi5zZW5kZXIpLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjc0CiAgICAvLyB1c2VyU2hhcmVzID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVXNlcidzIHNoYXJlIGJhbGFuY2UgKHJlcHJlc2VudHMgcHJvcG9ydGlvbmFsIG93bmVyc2hpcCkKICAgIGJ5dGVjIDUgLy8gInVzZXJTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNjkKICAgIC8vIGNvbnN0IHNoYXJlcyA9IHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZTsKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICBhc3NlcnQgLy8gY2hlY2sgTG9jYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM3MQogICAgLy8gaWYgKHNoYXJlcyA+IFVpbnQ2NCgwKSkgewogICAgYnogY2xvc2VPdXRfYWZ0ZXJfaWZfZWxzZUA0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNzMKICAgIC8vIGNvbnN0IGFscGhhQW1vdW50ID0gdGhpcy5zaGFyZXNUb0FscGhhKHNoYXJlcyk7CiAgICBkdXBuIDIKICAgIGNhbGxzdWIgc2hhcmVzVG9BbHBoYQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mzc2CiAgICAvLyB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID0gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSAtIHNoYXJlczsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MwogICAgLy8gdG90YWxTaGFyZXMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIFRvdGFsIHNoYXJlcyBpc3N1ZWQgdG8gYWxsIGRlcG9zaXRvcnMKICAgIGJ5dGVjXzAgLy8gInRvdGFsU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mzc2CiAgICAvLyB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID0gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSAtIHNoYXJlczsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICB1bmNvdmVyIDIKICAgIC0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUzCiAgICAvLyB0b3RhbFNoYXJlcyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gVG90YWwgc2hhcmVzIGlzc3VlZCB0byBhbGwgZGVwb3NpdG9ycwogICAgYnl0ZWNfMCAvLyAidG90YWxTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNzYKICAgIC8vIHRoaXMudG90YWxTaGFyZXMudmFsdWUgPSB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlIC0gc2hhcmVzOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM3NwogICAgLy8gdGhpcy50b3RhbEFscGhhLnZhbHVlID0gdGhpcy50b3RhbEFscGhhLnZhbHVlIC0gYWxwaGFBbW91bnQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mzc3CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgLSBhbHBoYUFtb3VudDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBkaWcgMQogICAgLQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mzc3CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgLSBhbHBoYUFtb3VudDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozODAtMzg1CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBhbHBoYUFtb3VudCwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM4MQogICAgLy8gYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM4MgogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQzCiAgICAvLyBhbHBoYUFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBBbHBoYSBBU0EgSUQgKGRlcG9zaXQgJiB5aWVsZCBhc3NldCkKICAgIGJ5dGVjXzMgLy8gImFscGhhQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozODIKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICB1bmNvdmVyIDIKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM4MC0zODUKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IGFscGhhQW1vdW50LAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaW50Y18zIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM4NAogICAgLy8gZmVlOiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM4MC0zODUKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IGFscGhhQW1vdW50LAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKCmNsb3NlT3V0X2FmdGVyX2lmX2Vsc2VANDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM2NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAnQ2xvc2VPdXQnIH0pCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5kZXBvc2l0W3JvdXRpbmddKCkgLT4gdm9pZDoKZGVwb3NpdDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQwMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIGR1cAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDA1CiAgICAvLyBhc3NlcnQoVHhuLnJla2V5VG8gPT09IEdsb2JhbC56ZXJvQWRkcmVzcywgJ3Jla2V5VG8gbXVzdCBiZSB6ZXJvJyk7CiAgICB0eG4gUmVrZXlUbwogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIHJla2V5VG8gbXVzdCBiZSB6ZXJvCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MDYKICAgIC8vIGFzc2VydChzbGlwcGFnZUJwcyA8PSB0aGlzLm1heFNsaXBwYWdlQnBzLnZhbHVlLCAnU2xpcHBhZ2UgZXhjZWVkcyBtYXhpbXVtIGFsbG93ZWQnKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NgogICAgLy8gbWF4U2xpcHBhZ2VCcHMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIE1heGltdW0gc2xpcHBhZ2UgdG9sZXJhbmNlIGluIGJhc2lzIHBvaW50cwogICAgYnl0ZWMgMTEgLy8gIm1heFNsaXBwYWdlQnBzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDA2CiAgICAvLyBhc3NlcnQoc2xpcHBhZ2VCcHMgPD0gdGhpcy5tYXhTbGlwcGFnZUJwcy52YWx1ZSwgJ1NsaXBwYWdlIGV4Y2VlZHMgbWF4aW11bSBhbGxvd2VkJyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPD0KICAgIGFzc2VydCAvLyBTbGlwcGFnZSBleGNlZWRzIG1heGltdW0gYWxsb3dlZAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDA4CiAgICAvLyBjb25zdCBhcHBBZGRyOiBBY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3M7CiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgZHVwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MDkKICAgIC8vIGNvbnN0IHVzZGNCYWxhbmNlID0gQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDQKICAgIC8vIHVzZGNBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFVTREMgQVNBIElEIChhaXJkcm9wcyBjb21lIGluIGFzIHRoaXMpCiAgICBieXRlYyA0IC8vICJ1c2RjQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MDkKICAgIC8vIGNvbnN0IHVzZGNCYWxhbmNlID0gQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCiAgICBzd2FwCiAgICBkdXAKICAgIHVuY292ZXIgMgogICAgYXNzZXJ0IC8vIGFjY291bnQgb3B0ZWQgaW50byBhc3NldAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDEzCiAgICAvLyBpZiAodXNkY0JhbGFuY2UgPj0gdGhpcy5taW5Td2FwVGhyZXNob2xkLnZhbHVlICYmIHRoaXMudG90YWxTaGFyZXMudmFsdWUgPiBVaW50NjQoMCkpIHsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NQogICAgLy8gbWluU3dhcFRocmVzaG9sZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgIC8vIE1pbmltdW0gVVNEQyBiZWZvcmUgc3dhcCBhbGxvd2VkCiAgICBieXRlYyAxMCAvLyAibWluU3dhcFRocmVzaG9sZCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQxMwogICAgLy8gaWYgKHVzZGNCYWxhbmNlID49IHRoaXMubWluU3dhcFRocmVzaG9sZC52YWx1ZSAmJiB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPj0KICAgIGJ6IGRlcG9zaXRfYWZ0ZXJfaWZfZWxzZUA0CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTMKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQxMwogICAgLy8gaWYgKHVzZGNCYWxhbmNlID49IHRoaXMubWluU3dhcFRocmVzaG9sZC52YWx1ZSAmJiB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnogZGVwb3NpdF9hZnRlcl9pZl9lbHNlQDQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQxNAogICAgLy8gdGhpcy5leGVjdXRlQ29tcG91bmQodXNkY0JhbGFuY2UsIHNsaXBwYWdlQnBzKTsKICAgIGR1cAogICAgZGlnIDMKICAgIGNhbGxzdWIgZXhlY3V0ZUNvbXBvdW5kCgpkZXBvc2l0X2FmdGVyX2lmX2Vsc2VANDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQxOAogICAgLy8gY29uc3QgY3VycmVudEluZGV4ID0gVHhuLmdyb3VwSW5kZXg7CiAgICB0eG4gR3JvdXBJbmRleAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDE5CiAgICAvLyBhc3NlcnQoY3VycmVudEluZGV4ID49IFVpbnQ2NCgxKSwgJ0FwcCBjYWxsIG11c3QgZm9sbG93IGFzc2V0IHRyYW5zZmVyJyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBBcHAgY2FsbCBtdXN0IGZvbGxvdyBhc3NldCB0cmFuc2ZlcgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDIxCiAgICAvLyBjb25zdCBkZXBvc2l0VHJhbnNmZXIgPSBndHhuLkFzc2V0VHJhbnNmZXJUeG4oY3VycmVudEluZGV4IC0gVWludDY0KDEpKTsKICAgIGludGNfMSAvLyAxCiAgICAtCiAgICBkdXAKICAgIGd0eG5zIFR5cGVFbnVtCiAgICBpbnRjXzMgLy8gYXhmZXIKICAgID09CiAgICBhc3NlcnQgLy8gdHJhbnNhY3Rpb24gdHlwZSBpcyBheGZlcgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDIyCiAgICAvLyBhc3NlcnQoZGVwb3NpdFRyYW5zZmVyLnhmZXJBc3NldCA9PT0gQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwgJ011c3QgdHJhbnNmZXIgQWxwaGEgYXNzZXQnKTsKICAgIGR1cAogICAgZ3R4bnMgWGZlckFzc2V0CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDMKICAgIC8vIGFscGhhQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIEFscGhhIEFTQSBJRCAoZGVwb3NpdCAmIHlpZWxkIGFzc2V0KQogICAgYnl0ZWNfMyAvLyAiYWxwaGFBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQyMgogICAgLy8gYXNzZXJ0KGRlcG9zaXRUcmFuc2Zlci54ZmVyQXNzZXQgPT09IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksICdNdXN0IHRyYW5zZmVyIEFscGhhIGFzc2V0Jyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBNdXN0IHRyYW5zZmVyIEFscGhhIGFzc2V0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MjMKICAgIC8vIGFzc2VydChkZXBvc2l0VHJhbnNmZXIuYXNzZXRSZWNlaXZlciA9PT0gYXBwQWRkciwgJ011c3Qgc2VuZCB0byBjb250cmFjdCcpOwogICAgZHVwCiAgICBndHhucyBBc3NldFJlY2VpdmVyCiAgICBkaWcgMwogICAgPT0KICAgIGFzc2VydCAvLyBNdXN0IHNlbmQgdG8gY29udHJhY3QKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQyNAogICAgLy8gYXNzZXJ0KGRlcG9zaXRUcmFuc2Zlci5zZW5kZXIgPT09IFR4bi5zZW5kZXIsICdUcmFuc2ZlciBtdXN0IGJlIGZyb20gY2FsbGVyJyk7CiAgICBkdXAKICAgIGd0eG5zIFNlbmRlcgogICAgdHhuIFNlbmRlcgogICAgPT0KICAgIGFzc2VydCAvLyBUcmFuc2ZlciBtdXN0IGJlIGZyb20gY2FsbGVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MjcKICAgIC8vIGFzc2VydChkZXBvc2l0VHJhbnNmZXIucmVrZXlUbyA9PT0gR2xvYmFsLnplcm9BZGRyZXNzLCAncmVrZXlUbyBtdXN0IGJlIHplcm8nKTsKICAgIGR1cAogICAgZ3R4bnMgUmVrZXlUbwogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIHJla2V5VG8gbXVzdCBiZSB6ZXJvCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MjgKICAgIC8vIGFzc2VydChkZXBvc2l0VHJhbnNmZXIuYXNzZXRDbG9zZVRvID09PSBHbG9iYWwuemVyb0FkZHJlc3MsICdhc3NldENsb3NlVG8gbXVzdCBiZSB6ZXJvJyk7CiAgICBkdXAKICAgIGd0eG5zIEFzc2V0Q2xvc2VUbwogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIGFzc2V0Q2xvc2VUbyBtdXN0IGJlIHplcm8KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQzMAogICAgLy8gY29uc3QgYW1vdW50ID0gZGVwb3NpdFRyYW5zZmVyLmFzc2V0QW1vdW50OwogICAgZ3R4bnMgQXNzZXRBbW91bnQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQzMQogICAgLy8gYXNzZXJ0KGFtb3VudCA+PSBNSU5fREVQT1NJVF9BTU9VTlQsICdEZXBvc2l0IHRvbyBzbWFsbCcpOwogICAgZHVwCiAgICBwdXNoaW50IDEwMDAwMDAgLy8gMTAwMDAwMAogICAgPj0KICAgIGFzc2VydCAvLyBEZXBvc2l0IHRvbyBzbWFsbAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDM0CiAgICAvLyBjb25zdCBzaGFyZXNUb01pbnQgPSB0aGlzLmFscGhhVG9TaGFyZXMoYW1vdW50KTsKICAgIGR1cAogICAgY2FsbHN1YiBhbHBoYVRvU2hhcmVzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MzUKICAgIC8vIGFzc2VydChzaGFyZXNUb01pbnQgPiBVaW50NjQoMCksICdTaGFyZXMgdG8gbWludCBpcyB6ZXJvJyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBTaGFyZXMgdG8gbWludCBpcyB6ZXJvCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MzgKICAgIC8vIHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZSA9IHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZSArIHNoYXJlc1RvTWludDsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3NAogICAgLy8gdXNlclNoYXJlcyA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFVzZXIncyBzaGFyZSBiYWxhbmNlIChyZXByZXNlbnRzIHByb3BvcnRpb25hbCBvd25lcnNoaXApCiAgICBieXRlYyA1IC8vICJ1c2VyU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDM4CiAgICAvLyB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWUgPSB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWUgKyBzaGFyZXNUb01pbnQ7CiAgICBhcHBfbG9jYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgTG9jYWxTdGF0ZSBleGlzdHMKICAgIGRpZyAxCiAgICArCiAgICB0eG4gU2VuZGVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3NAogICAgLy8gdXNlclNoYXJlcyA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFVzZXIncyBzaGFyZSBiYWxhbmNlIChyZXByZXNlbnRzIHByb3BvcnRpb25hbCBvd25lcnNoaXApCiAgICBieXRlYyA1IC8vICJ1c2VyU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDM4CiAgICAvLyB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWUgPSB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWUgKyBzaGFyZXNUb01pbnQ7CiAgICB1bmNvdmVyIDIKICAgIGFwcF9sb2NhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQzOQogICAgLy8gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9IHRoaXMudG90YWxTaGFyZXMudmFsdWUgKyBzaGFyZXNUb01pbnQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTMKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQzOQogICAgLy8gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9IHRoaXMudG90YWxTaGFyZXMudmFsdWUgKyBzaGFyZXNUb01pbnQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgKwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTMKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQzOQogICAgLy8gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9IHRoaXMudG90YWxTaGFyZXMudmFsdWUgKyBzaGFyZXNUb01pbnQ7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDQwCiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgKyBhbW91bnQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDQwCiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgKyBhbW91bnQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgKwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDQwCiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgKyBhbW91bnQ7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDAzCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQud2l0aGRyYXdbcm91dGluZ10oKSAtPiB2b2lkOgp3aXRoZHJhdzoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0OAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIGR1cAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDUwCiAgICAvLyBhc3NlcnQoVHhuLnJla2V5VG8gPT09IEdsb2JhbC56ZXJvQWRkcmVzcywgJ3Jla2V5VG8gbXVzdCBiZSB6ZXJvJyk7CiAgICB0eG4gUmVrZXlUbwogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIHJla2V5VG8gbXVzdCBiZSB6ZXJvCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NTEKICAgIC8vIGNvbnN0IHVzZXJTaGFyZUJhbGFuY2UgPSB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWU7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzQKICAgIC8vIHVzZXJTaGFyZXMgPSBMb2NhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBVc2VyJ3Mgc2hhcmUgYmFsYW5jZSAocmVwcmVzZW50cyBwcm9wb3J0aW9uYWwgb3duZXJzaGlwKQogICAgYnl0ZWMgNSAvLyAidXNlclNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ1MQogICAgLy8gY29uc3QgdXNlclNoYXJlQmFsYW5jZSA9IHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZTsKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGNvdmVyIDIKICAgIGFzc2VydCAvLyBjaGVjayBMb2NhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDU1CiAgICAvLyBpZiAoc2hhcmVzVG9SZWRlZW0gPT09IFVpbnQ2NCgwKSkgewogICAgYnogd2l0aGRyYXdfaWZfYm9keUAyCiAgICBkaWcgMQoKd2l0aGRyYXdfYWZ0ZXJfaWZfZWxzZUAzOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDU5CiAgICAvLyBhc3NlcnQoc2hhcmVzVG9SZWRlZW0gPiBVaW50NjQoMCksICdOb3RoaW5nIHRvIHdpdGhkcmF3Jyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBOb3RoaW5nIHRvIHdpdGhkcmF3CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NjAKICAgIC8vIGFzc2VydChzaGFyZXNUb1JlZGVlbSA8PSB1c2VyU2hhcmVCYWxhbmNlLCAnSW5zdWZmaWNpZW50IHNoYXJlcycpOwogICAgZHVwCiAgICBkaWcgMgogICAgZHVwCiAgICBjb3ZlciAzCiAgICA8PQogICAgYXNzZXJ0IC8vIEluc3VmZmljaWVudCBzaGFyZXMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ2MwogICAgLy8gY29uc3QgYWxwaGFBbW91bnQgPSB0aGlzLnNoYXJlc1RvQWxwaGEoc2hhcmVzVG9SZWRlZW0pOwogICAgZHVwCiAgICBjYWxsc3ViIHNoYXJlc1RvQWxwaGEKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ2NAogICAgLy8gYXNzZXJ0KGFscGhhQW1vdW50ID4gVWludDY0KDApLCAnQWxwaGEgYW1vdW50IGlzIHplcm8nKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIEFscGhhIGFtb3VudCBpcyB6ZXJvCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NjcKICAgIC8vIHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZSA9IHVzZXJTaGFyZUJhbGFuY2UgLSBzaGFyZXNUb1JlZGVlbTsKICAgIHVuY292ZXIgMgogICAgZGlnIDIKICAgIC0KICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjc0CiAgICAvLyB1c2VyU2hhcmVzID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVXNlcidzIHNoYXJlIGJhbGFuY2UgKHJlcHJlc2VudHMgcHJvcG9ydGlvbmFsIG93bmVyc2hpcCkKICAgIGJ5dGVjIDUgLy8gInVzZXJTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NjcKICAgIC8vIHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZSA9IHVzZXJTaGFyZUJhbGFuY2UgLSBzaGFyZXNUb1JlZGVlbTsKICAgIHVuY292ZXIgMgogICAgYXBwX2xvY2FsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDY4CiAgICAvLyB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID0gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSAtIHNoYXJlc1RvUmVkZWVtOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUzCiAgICAvLyB0b3RhbFNoYXJlcyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gVG90YWwgc2hhcmVzIGlzc3VlZCB0byBhbGwgZGVwb3NpdG9ycwogICAgYnl0ZWNfMCAvLyAidG90YWxTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NjgKICAgIC8vIHRoaXMudG90YWxTaGFyZXMudmFsdWUgPSB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlIC0gc2hhcmVzVG9SZWRlZW07CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgdW5jb3ZlciAyCiAgICAtCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MwogICAgLy8gdG90YWxTaGFyZXMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIFRvdGFsIHNoYXJlcyBpc3N1ZWQgdG8gYWxsIGRlcG9zaXRvcnMKICAgIGJ5dGVjXzAgLy8gInRvdGFsU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDY4CiAgICAvLyB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID0gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSAtIHNoYXJlc1RvUmVkZWVtOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ2OQogICAgLy8gdGhpcy50b3RhbEFscGhhLnZhbHVlID0gdGhpcy50b3RhbEFscGhhLnZhbHVlIC0gYWxwaGFBbW91bnQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDY5CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgLSBhbHBoYUFtb3VudDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBkaWcgMQogICAgLQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDY5CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgLSBhbHBoYUFtb3VudDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NzItNDc3CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBhbHBoYUFtb3VudCwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3MwogICAgLy8gYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3NAogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQzCiAgICAvLyBhbHBoYUFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBBbHBoYSBBU0EgSUQgKGRlcG9zaXQgJiB5aWVsZCBhc3NldCkKICAgIGJ5dGVjXzMgLy8gImFscGhhQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NzQKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICB1bmNvdmVyIDIKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3Mi00NzcKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IGFscGhhQW1vdW50LAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaW50Y18zIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3NgogICAgLy8gZmVlOiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3Mi00NzcKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IGFscGhhQW1vdW50LAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0OAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCndpdGhkcmF3X2lmX2JvZHlAMjoKICAgIGR1cAogICAgYiB3aXRoZHJhd19hZnRlcl9pZl9lbHNlQDMKCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmNsYWltQ3JlYXRvcltyb3V0aW5nXSgpIC0+IHZvaWQ6CmNsYWltQ3JlYXRvcjoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ4OQogICAgLy8gYXNzZXJ0KFR4bi5yZWtleVRvID09PSBHbG9iYWwuemVyb0FkZHJlc3MsICdyZWtleVRvIG11c3QgYmUgemVybycpOwogICAgdHhuIFJla2V5VG8KICAgIGdsb2JhbCBaZXJvQWRkcmVzcwogICAgPT0KICAgIGFzc2VydCAvLyByZWtleVRvIG11c3QgYmUgemVybwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDkwCiAgICAvLyBhc3NlcnQoVHhuLnNlbmRlciA9PT0gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZSwgJ09ubHkgY3JlYXRvciBjYW4gY2xhaW0nKTsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NwogICAgLy8gY3JlYXRvckFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgIC8vIFZhdWx0IGNyZWF0b3Igd2hvIHJlY2VpdmVzIGZlZQogICAgYnl0ZWMgNiAvLyAiY3JlYXRvckFkZHJlc3MiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0OTAKICAgIC8vIGFzc2VydChUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlLCAnT25seSBjcmVhdG9yIGNhbiBjbGFpbScpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBhc3NlcnQgLy8gT25seSBjcmVhdG9yIGNhbiBjbGFpbQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDkyCiAgICAvLyBjb25zdCBjbGFpbWFibGUgPSB0aGlzLmNyZWF0b3JVbmNsYWltZWRBbHBoYS52YWx1ZTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MAogICAgLy8gY3JlYXRvclVuY2xhaW1lZEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBBY2N1bXVsYXRlZCBBbHBoYSBmb3IgY3JlYXRvciB0byBjbGFpbQogICAgYnl0ZWMgOCAvLyAiY3JlYXRvclVuY2xhaW1lZEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDkyCiAgICAvLyBjb25zdCBjbGFpbWFibGUgPSB0aGlzLmNyZWF0b3JVbmNsYWltZWRBbHBoYS52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0OTMKICAgIC8vIGFzc2VydChjbGFpbWFibGUgPiBVaW50NjQoMCksICdOb3RoaW5nIHRvIGNsYWltJyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBOb3RoaW5nIHRvIGNsYWltCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MAogICAgLy8gY3JlYXRvclVuY2xhaW1lZEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBBY2N1bXVsYXRlZCBBbHBoYSBmb3IgY3JlYXRvciB0byBjbGFpbQogICAgYnl0ZWMgOCAvLyAiY3JlYXRvclVuY2xhaW1lZEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDk2CiAgICAvLyB0aGlzLmNyZWF0b3JVbmNsYWltZWRBbHBoYS52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDk5LTUwNAogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogY2xhaW1hYmxlLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTAwCiAgICAvLyBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgdHhuIFNlbmRlcgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTAxCiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDMKICAgIC8vIGFscGhhQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIEFscGhhIEFTQSBJRCAoZGVwb3NpdCAmIHlpZWxkIGFzc2V0KQogICAgYnl0ZWNfMyAvLyAiYWxwaGFBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUwMQogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIHVuY292ZXIgMgogICAgaXR4bl9maWVsZCBBc3NldEFtb3VudAogICAgaXR4bl9maWVsZCBYZmVyQXNzZXQKICAgIGl0eG5fZmllbGQgQXNzZXRSZWNlaXZlcgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDk5LTUwNAogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogY2xhaW1hYmxlLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaW50Y18zIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUwMwogICAgLy8gZmVlOiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ5OS01MDQKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IGNsYWltYWJsZSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0ODcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5jb21wb3VuZFlpZWxkW3JvdXRpbmddKCkgLT4gdm9pZDoKY29tcG91bmRZaWVsZDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUxOAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUyMAogICAgLy8gYXNzZXJ0KFR4bi5yZWtleVRvID09PSBHbG9iYWwuemVyb0FkZHJlc3MsICdyZWtleVRvIG11c3QgYmUgemVybycpOwogICAgdHhuIFJla2V5VG8KICAgIGdsb2JhbCBaZXJvQWRkcmVzcwogICAgPT0KICAgIGFzc2VydCAvLyByZWtleVRvIG11c3QgYmUgemVybwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTIxCiAgICAvLyBhc3NlcnQoc2xpcHBhZ2VCcHMgPD0gdGhpcy5tYXhTbGlwcGFnZUJwcy52YWx1ZSwgJ1NsaXBwYWdlIGV4Y2VlZHMgbWF4aW11bSBhbGxvd2VkJyk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTYKICAgIC8vIG1heFNsaXBwYWdlQnBzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyBNYXhpbXVtIHNsaXBwYWdlIHRvbGVyYW5jZSBpbiBiYXNpcyBwb2ludHMKICAgIGJ5dGVjIDExIC8vICJtYXhTbGlwcGFnZUJwcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUyMQogICAgLy8gYXNzZXJ0KHNsaXBwYWdlQnBzIDw9IHRoaXMubWF4U2xpcHBhZ2VCcHMudmFsdWUsICdTbGlwcGFnZSBleGNlZWRzIG1heGltdW0gYWxsb3dlZCcpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGRpZyAxCiAgICA+PQogICAgYXNzZXJ0IC8vIFNsaXBwYWdlIGV4Y2VlZHMgbWF4aW11bSBhbGxvd2VkCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MjMKICAgIC8vIGNvbnN0IGFwcEFkZHI6IEFjY291bnQgPSBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzczsKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MjQKICAgIC8vIGNvbnN0IHVzZGNCYWxhbmNlID0gQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDQKICAgIC8vIHVzZGNBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFVTREMgQVNBIElEIChhaXJkcm9wcyBjb21lIGluIGFzIHRoaXMpCiAgICBieXRlYyA0IC8vICJ1c2RjQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MjQKICAgIC8vIGNvbnN0IHVzZGNCYWxhbmNlID0gQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCiAgICBhc3NlcnQgLy8gYWNjb3VudCBvcHRlZCBpbnRvIGFzc2V0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MjYKICAgIC8vIGFzc2VydCh1c2RjQmFsYW5jZSA+PSB0aGlzLm1pblN3YXBUaHJlc2hvbGQudmFsdWUsICdCZWxvdyBtaW5pbXVtIHN3YXAgdGhyZXNob2xkJyk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTUKICAgIC8vIG1pblN3YXBUaHJlc2hvbGQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBNaW5pbXVtIFVTREMgYmVmb3JlIHN3YXAgYWxsb3dlZAogICAgYnl0ZWMgMTAgLy8gIm1pblN3YXBUaHJlc2hvbGQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MjYKICAgIC8vIGFzc2VydCh1c2RjQmFsYW5jZSA+PSB0aGlzLm1pblN3YXBUaHJlc2hvbGQudmFsdWUsICdCZWxvdyBtaW5pbXVtIHN3YXAgdGhyZXNob2xkJyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZGlnIDEKICAgIDw9CiAgICBhc3NlcnQgLy8gQmVsb3cgbWluaW11bSBzd2FwIHRocmVzaG9sZAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTI3CiAgICAvLyBhc3NlcnQodGhpcy50b3RhbFNoYXJlcy52YWx1ZSA+IFVpbnQ2NCgwKSwgJ05vIGRlcG9zaXRvcnMgdG8gY29tcG91bmQgZm9yJyk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTMKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUyNwogICAgLy8gYXNzZXJ0KHRoaXMudG90YWxTaGFyZXMudmFsdWUgPiBVaW50NjQoMCksICdObyBkZXBvc2l0b3JzIHRvIGNvbXBvdW5kIGZvcicpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGFzc2VydCAvLyBObyBkZXBvc2l0b3JzIHRvIGNvbXBvdW5kIGZvcgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTI5CiAgICAvLyB0aGlzLmV4ZWN1dGVDb21wb3VuZCh1c2RjQmFsYW5jZSwgc2xpcHBhZ2VCcHMpOwogICAgc3dhcAogICAgY2FsbHN1YiBleGVjdXRlQ29tcG91bmQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUxOAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmdldFZhdWx0U3RhdHNbcm91dGluZ10oKSAtPiB2b2lkOgpnZXRWYXVsdFN0YXRzOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQzCiAgICAvLyBjb25zdCBhcHBBZGRyOiBBY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3M7CiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQ0CiAgICAvLyBjb25zdCB1c2RjQmFsYW5jZSA9IEFzc2V0KHRoaXMudXNkY0Fzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0CiAgICAvLyB1c2RjQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBVU0RDIEFTQSBJRCAoYWlyZHJvcHMgY29tZSBpbiBhcyB0aGlzKQogICAgYnl0ZWMgNCAvLyAidXNkY0Fzc2V0IgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQ0CiAgICAvLyBjb25zdCB1c2RjQmFsYW5jZSA9IEFzc2V0KHRoaXMudXNkY0Fzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGFzc2V0X2hvbGRpbmdfZ2V0IEFzc2V0QmFsYW5jZQogICAgYXNzZXJ0IC8vIGFjY291bnQgb3B0ZWQgaW50byBhc3NldAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQ3CiAgICAvLyBsZXQgc2hhcmVQcmljZTogdWludDY0ID0gU0NBTEU7IC8vIERlZmF1bHQgMToxIGlmIG5vIHNoYXJlcwogICAgaW50YyA3IC8vIDEwMDAwMDAwMDAwMDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0OAogICAgLy8gaWYgKHRoaXMudG90YWxTaGFyZXMudmFsdWUgPiBVaW50NjQoMCkpIHsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MwogICAgLy8gdG90YWxTaGFyZXMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIFRvdGFsIHNoYXJlcyBpc3N1ZWQgdG8gYWxsIGRlcG9zaXRvcnMKICAgIGJ5dGVjXzAgLy8gInRvdGFsU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQ4CiAgICAvLyBpZiAodGhpcy50b3RhbFNoYXJlcy52YWx1ZSA+IFVpbnQ2NCgwKSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ6IGdldFZhdWx0U3RhdHNfYWZ0ZXJfaWZfZWxzZUAzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NDkKICAgIC8vIHNoYXJlUHJpY2UgPSB0aGlzLm11bERpdkZsb29yKHRoaXMudG90YWxBbHBoYS52YWx1ZSwgU0NBTEUsIHRoaXMudG90YWxTaGFyZXMudmFsdWUpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0CiAgICAvLyB0b3RhbEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVG90YWwgQWxwaGEgaGVsZCAoZGVwb3NpdHMgKyBjb21wb3VuZGVkIHlpZWxkKQogICAgYnl0ZWNfMSAvLyAidG90YWxBbHBoYSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0OQogICAgLy8gc2hhcmVQcmljZSA9IHRoaXMubXVsRGl2Rmxvb3IodGhpcy50b3RhbEFscGhhLnZhbHVlLCBTQ0FMRSwgdGhpcy50b3RhbFNoYXJlcy52YWx1ZSk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUzCiAgICAvLyB0b3RhbFNoYXJlcyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gVG90YWwgc2hhcmVzIGlzc3VlZCB0byBhbGwgZGVwb3NpdG9ycwogICAgYnl0ZWNfMCAvLyAidG90YWxTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NDkKICAgIC8vIHNoYXJlUHJpY2UgPSB0aGlzLm11bERpdkZsb29yKHRoaXMudG90YWxBbHBoYS52YWx1ZSwgU0NBTEUsIHRoaXMudG90YWxTaGFyZXMudmFsdWUpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg1CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIHN3YXAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0OQogICAgLy8gc2hhcmVQcmljZSA9IHRoaXMubXVsRGl2Rmxvb3IodGhpcy50b3RhbEFscGhhLnZhbHVlLCBTQ0FMRSwgdGhpcy50b3RhbFNoYXJlcy52YWx1ZSk7CiAgICBpbnRjIDcgLy8gMTAwMDAwMDAwMDAwMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODUKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgbXVsdwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODYKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBpbnRjXzAgLy8gMAogICAgdW5jb3ZlciAzCiAgICBkaXZtb2R3CiAgICBwb3BuIDIKICAgIHN3YXAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg3CiAgICAvLyBhc3NlcnQocV9oaSA9PT0gVWludDY0KDApLCAnTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3InKTsKICAgICEKICAgIGFzc2VydCAvLyBNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcgogICAgYnVyeSAxCgpnZXRWYXVsdFN0YXRzX2FmdGVyX2lmX2Vsc2VAMzoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU1MwogICAgLy8gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MwogICAgLy8gdG90YWxTaGFyZXMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIFRvdGFsIHNoYXJlcyBpc3N1ZWQgdG8gYWxsIGRlcG9zaXRvcnMKICAgIGJ5dGVjXzAgLy8gInRvdGFsU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTUzCiAgICAvLyB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU1NAogICAgLy8gdGhpcy50b3RhbEFscGhhLnZhbHVlLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0CiAgICAvLyB0b3RhbEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVG90YWwgQWxwaGEgaGVsZCAoZGVwb3NpdHMgKyBjb21wb3VuZGVkIHlpZWxkKQogICAgYnl0ZWNfMSAvLyAidG90YWxBbHBoYSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU1NAogICAgLy8gdGhpcy50b3RhbEFscGhhLnZhbHVlLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU1NQogICAgLy8gdGhpcy5jcmVhdG9yVW5jbGFpbWVkQWxwaGEudmFsdWUsCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTAKICAgIC8vIGNyZWF0b3JVbmNsYWltZWRBbHBoYSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgLy8gQWNjdW11bGF0ZWQgQWxwaGEgZm9yIGNyZWF0b3IgdG8gY2xhaW0KICAgIGJ5dGVjIDggLy8gImNyZWF0b3JVbmNsYWltZWRBbHBoYSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU1NQogICAgLy8gdGhpcy5jcmVhdG9yVW5jbGFpbWVkQWxwaGEudmFsdWUsCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTU3CiAgICAvLyB0aGlzLnRvdGFsWWllbGRDb21wb3VuZGVkLnZhbHVlLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU3CiAgICAvLyB0b3RhbFlpZWxkQ29tcG91bmRlZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgLy8gVG90YWwgeWllbGQgY29tcG91bmRlZCAoZm9yIHN0YXRzKQogICAgYnl0ZWMgMTIgLy8gInRvdGFsWWllbGRDb21wb3VuZGVkIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTU3CiAgICAvLyB0aGlzLnRvdGFsWWllbGRDb21wb3VuZGVkLnZhbHVlLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU1Mi01NTkKICAgIC8vIHJldHVybiBbCiAgICAvLyAgIHRoaXMudG90YWxTaGFyZXMudmFsdWUsCiAgICAvLyAgIHRoaXMudG90YWxBbHBoYS52YWx1ZSwKICAgIC8vICAgdGhpcy5jcmVhdG9yVW5jbGFpbWVkQWxwaGEudmFsdWUsCiAgICAvLyAgIHVzZGNCYWxhbmNlLAogICAgLy8gICB0aGlzLnRvdGFsWWllbGRDb21wb3VuZGVkLnZhbHVlLAogICAgLy8gICBzaGFyZVByaWNlCiAgICAvLyBdOwogICAgdW5jb3ZlciAzCiAgICBpdG9iCiAgICB1bmNvdmVyIDMKICAgIGl0b2IKICAgIGNvbmNhdAogICAgdW5jb3ZlciAyCiAgICBpdG9iCiAgICBjb25jYXQKICAgIGRpZyAzCiAgICBpdG9iCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGl0b2IKICAgIGNvbmNhdAogICAgZGlnIDEKICAgIGl0b2IKICAgIGNvbmNhdAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQxCiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgYnl0ZWMgNyAvLyAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuZ2V0VXNlckFscGhhQmFsYW5jZVtyb3V0aW5nXSgpIC0+IHZvaWQ6CmdldFVzZXJBbHBoYUJhbGFuY2U6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NjYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgcHVzaGludCAzMiAvLyAzMgogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC5zdGF0aWNfYXJyYXk8YXJjNC51aW50OCwgMzI+CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NjgKICAgIC8vIGNvbnN0IHNoYXJlcyA9IHRoaXMudXNlclNoYXJlcyh1c2VyKS52YWx1ZTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3NAogICAgLy8gdXNlclNoYXJlcyA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFVzZXIncyBzaGFyZSBiYWxhbmNlIChyZXByZXNlbnRzIHByb3BvcnRpb25hbCBvd25lcnNoaXApCiAgICBieXRlYyA1IC8vICJ1c2VyU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTY4CiAgICAvLyBjb25zdCBzaGFyZXMgPSB0aGlzLnVzZXJTaGFyZXModXNlcikudmFsdWU7CiAgICBhcHBfbG9jYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgTG9jYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU2OQogICAgLy8gcmV0dXJuIHRoaXMuc2hhcmVzVG9BbHBoYShzaGFyZXMpOwogICAgY2FsbHN1YiBzaGFyZXNUb0FscGhhCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NjYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICBpdG9iCiAgICBieXRlYyA3IC8vIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5nZXRVc2VyU2hhcmVzW3JvdXRpbmddKCkgLT4gdm9pZDoKZ2V0VXNlclNoYXJlczoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU3NQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBwdXNoaW50IDMyIC8vIDMyCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnN0YXRpY19hcnJheTxhcmM0LnVpbnQ4LCAzMj4KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU3NwogICAgLy8gcmV0dXJuIHRoaXMudXNlclNoYXJlcyh1c2VyKS52YWx1ZTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3NAogICAgLy8gdXNlclNoYXJlcyA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFVzZXIncyBzaGFyZSBiYWxhbmNlIChyZXByZXNlbnRzIHByb3BvcnRpb25hbCBvd25lcnNoaXApCiAgICBieXRlYyA1IC8vICJ1c2VyU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTc3CiAgICAvLyByZXR1cm4gdGhpcy51c2VyU2hhcmVzKHVzZXIpLnZhbHVlOwogICAgYXBwX2xvY2FsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIExvY2FsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NzUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICBpdG9iCiAgICBieXRlYyA3IC8vIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5wcmV2aWV3RGVwb3NpdFtyb3V0aW5nXSgpIC0+IHZvaWQ6CnByZXZpZXdEZXBvc2l0OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTgzCiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTg1CiAgICAvLyByZXR1cm4gdGhpcy5hbHBoYVRvU2hhcmVzKGFscGhhQW1vdW50KTsKICAgIGNhbGxzdWIgYWxwaGFUb1NoYXJlcwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTgzCiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgaXRvYgogICAgYnl0ZWMgNyAvLyAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQucHJldmlld1dpdGhkcmF3W3JvdXRpbmddKCkgLT4gdm9pZDoKcHJldmlld1dpdGhkcmF3OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTkxCiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTkzCiAgICAvLyByZXR1cm4gdGhpcy5zaGFyZXNUb0FscGhhKHNoYXJlQW1vdW50KTsKICAgIGNhbGxzdWIgc2hhcmVzVG9BbHBoYQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTkxCiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgaXRvYgogICAgYnl0ZWMgNyAvLyAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuZ2V0Q29tcG91bmRRdW90ZVtyb3V0aW5nXSgpIC0+IHZvaWQ6CmdldENvbXBvdW5kUXVvdGU6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MDIKICAgIC8vIGNvbnN0IGFwcEFkZHI6IEFjY291bnQgPSBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzczsKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MDMKICAgIC8vIGNvbnN0IHVzZGNCYWxhbmNlID0gQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDQKICAgIC8vIHVzZGNBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFVTREMgQVNBIElEIChhaXJkcm9wcyBjb21lIGluIGFzIHRoaXMpCiAgICBieXRlYyA0IC8vICJ1c2RjQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MDMKICAgIC8vIGNvbnN0IHVzZGNCYWxhbmNlID0gQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCiAgICBzd2FwCiAgICBkdXAKICAgIHVuY292ZXIgMgogICAgYXNzZXJ0IC8vIGFjY291bnQgb3B0ZWQgaW50byBhc3NldAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjA1CiAgICAvLyBpZiAodXNkY0JhbGFuY2UgPT09IFVpbnQ2NCgwKSkgewogICAgYm56IGdldENvbXBvdW5kUXVvdGVfYWZ0ZXJfaWZfZWxzZUAzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MDYKICAgIC8vIHJldHVybiBbVWludDY0KDApLCBVaW50NjQoMCksIFVpbnQ2NCgwKV07CiAgICBwdXNoYnl0ZXMgMHgwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAKCmdldENvbXBvdW5kUXVvdGVfYWZ0ZXJfaW5saW5lZF9SYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmdldENvbXBvdW5kUXVvdGVANDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYwMAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIGJ5dGVjIDcgLy8gMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCmdldENvbXBvdW5kUXVvdGVfYWZ0ZXJfaWZfZWxzZUAzOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjA5CiAgICAvLyBjb25zdCBleHBlY3RlZE91dHB1dCA9IHRoaXMuZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0KHVzZGNCYWxhbmNlKTsKICAgIGR1cG4gMgogICAgY2FsbHN1YiBnZXRFeHBlY3RlZFN3YXBPdXRwdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg1CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGR1cAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjEwCiAgICAvLyBjb25zdCBtaW5BdDUwQnBzID0gdGhpcy5tdWxEaXZGbG9vcihleHBlY3RlZE91dHB1dCwgRkVFX0JQU19CQVNFIC0gVWludDY0KDUwKSwgRkVFX0JQU19CQVNFKTsKICAgIHB1c2hpbnQgOTk1MCAvLyA5OTUwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NQogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KG4xLCBuMik7CiAgICBtdWx3CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NgogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MTAKICAgIC8vIGNvbnN0IG1pbkF0NTBCcHMgPSB0aGlzLm11bERpdkZsb29yKGV4cGVjdGVkT3V0cHV0LCBGRUVfQlBTX0JBU0UgLSBVaW50NjQoNTApLCBGRUVfQlBTX0JBU0UpOwogICAgaW50YyA0IC8vIDEwMDAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NgogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODcKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MTIKICAgIC8vIHJldHVybiBbdXNkY0JhbGFuY2UsIGV4cGVjdGVkT3V0cHV0LCBtaW5BdDUwQnBzXTsKICAgIHVuY292ZXIgMgogICAgaXRvYgogICAgdW5jb3ZlciAyCiAgICBpdG9iCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGl0b2IKICAgIGNvbmNhdAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjAwCiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgYiBnZXRDb21wb3VuZFF1b3RlX2FmdGVyX2lubGluZWRfUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5nZXRDb21wb3VuZFF1b3RlQDQKCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LnVwZGF0ZU1pblN3YXBUaHJlc2hvbGRbcm91dGluZ10oKSAtPiB2b2lkOgp1cGRhdGVNaW5Td2FwVGhyZXNob2xkOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjIyCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjI0CiAgICAvLyBhc3NlcnQoVHhuLnJla2V5VG8gPT09IEdsb2JhbC56ZXJvQWRkcmVzcywgJ3Jla2V5VG8gbXVzdCBiZSB6ZXJvJyk7CiAgICB0eG4gUmVrZXlUbwogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIHJla2V5VG8gbXVzdCBiZSB6ZXJvCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MjUKICAgIC8vIGNvbnN0IGlzQ3JlYXRvciA9IFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWU7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDcKICAgIC8vIGNyZWF0b3JBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAvLyBWYXVsdCBjcmVhdG9yIHdobyByZWNlaXZlcyBmZWUKICAgIGJ5dGVjIDYgLy8gImNyZWF0b3JBZGRyZXNzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjI1CiAgICAvLyBjb25zdCBpc0NyZWF0b3IgPSBUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MjYKICAgIC8vIGNvbnN0IGlzUmFyZWZpID0gVHhuLnNlbmRlciA9PT0gdGhpcy5yYXJlZmlBZGRyZXNzLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ4CiAgICAvLyByYXJlZmlBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAgLy8gUmFyZUZpIHBsYXRmb3JtIGFkZHJlc3MgKGNhbiBhbHNvIHRyaWdnZXIgc3dhcHMpCiAgICBieXRlYyAxMyAvLyAicmFyZWZpQWRkcmVzcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYyNgogICAgLy8gY29uc3QgaXNSYXJlZmkgPSBUeG4uc2VuZGVyID09PSB0aGlzLnJhcmVmaUFkZHJlc3MudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYyNwogICAgLy8gYXNzZXJ0KGlzQ3JlYXRvciB8fCBpc1JhcmVmaSwgJ09ubHkgY3JlYXRvciBvciBSYXJlRmkgY2FuIHVwZGF0ZScpOwogICAgfHwKICAgIGFzc2VydCAvLyBPbmx5IGNyZWF0b3Igb3IgUmFyZUZpIGNhbiB1cGRhdGUKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYyOAogICAgLy8gYXNzZXJ0KG5ld1RocmVzaG9sZCA+PSBNSU5fU1dBUF9BTU9VTlQsICdUaHJlc2hvbGQgdG9vIGxvdycpOwogICAgZHVwCiAgICBpbnRjIDUgLy8gMjAwMDAwCiAgICA+PQogICAgYXNzZXJ0IC8vIFRocmVzaG9sZCB0b28gbG93CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MjkKICAgIC8vIGFzc2VydChuZXdUaHJlc2hvbGQgPD0gTUFYX1NXQVBfVEhSRVNIT0xELCAnVGhyZXNob2xkIHRvbyBoaWdoIChtYXggNTAgVVNEQyknKTsKICAgIGR1cAogICAgaW50YyA2IC8vIDUwMDAwMDAwCiAgICA8PQogICAgYXNzZXJ0IC8vIFRocmVzaG9sZCB0b28gaGlnaCAobWF4IDUwIFVTREMpCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NQogICAgLy8gbWluU3dhcFRocmVzaG9sZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgIC8vIE1pbmltdW0gVVNEQyBiZWZvcmUgc3dhcCBhbGxvd2VkCiAgICBieXRlYyAxMCAvLyAibWluU3dhcFRocmVzaG9sZCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYzMAogICAgLy8gdGhpcy5taW5Td2FwVGhyZXNob2xkLnZhbHVlID0gbmV3VGhyZXNob2xkOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYyMgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LnVwZGF0ZU1heFNsaXBwYWdlW3JvdXRpbmddKCkgLT4gdm9pZDoKdXBkYXRlTWF4U2xpcHBhZ2U6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MzcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MzkKICAgIC8vIGFzc2VydChUeG4ucmVrZXlUbyA9PT0gR2xvYmFsLnplcm9BZGRyZXNzLCAncmVrZXlUbyBtdXN0IGJlIHplcm8nKTsKICAgIHR4biBSZWtleVRvCiAgICBnbG9iYWwgWmVyb0FkZHJlc3MKICAgID09CiAgICBhc3NlcnQgLy8gcmVrZXlUbyBtdXN0IGJlIHplcm8KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY0MAogICAgLy8gYXNzZXJ0KFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWUsICdPbmx5IGNyZWF0b3IgY2FuIHVwZGF0ZSBtYXggc2xpcHBhZ2UnKTsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NwogICAgLy8gY3JlYXRvckFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgIC8vIFZhdWx0IGNyZWF0b3Igd2hvIHJlY2VpdmVzIGZlZQogICAgYnl0ZWMgNiAvLyAiY3JlYXRvckFkZHJlc3MiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NDAKICAgIC8vIGFzc2VydChUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlLCAnT25seSBjcmVhdG9yIGNhbiB1cGRhdGUgbWF4IHNsaXBwYWdlJyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBPbmx5IGNyZWF0b3IgY2FuIHVwZGF0ZSBtYXggc2xpcHBhZ2UKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY0MQogICAgLy8gYXNzZXJ0KG5ld01heFNsaXBwYWdlQnBzID49IE1JTl9NQVhfU0xJUFBBR0VfQlBTLCAnTWF4IHNsaXBwYWdlIHRvbyBsb3cgKG1pbiA1JSknKTsKICAgIGR1cAogICAgcHVzaGludCA1MDAgLy8gNTAwCiAgICA+PQogICAgYXNzZXJ0IC8vIE1heCBzbGlwcGFnZSB0b28gbG93IChtaW4gNSUpCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NDIKICAgIC8vIGFzc2VydChuZXdNYXhTbGlwcGFnZUJwcyA8PSBNQVhfU0xJUFBBR0VfQlBTLCAnTWF4IHNsaXBwYWdlIHRvbyBoaWdoJyk7CiAgICBkdXAKICAgIGludGMgNCAvLyAxMDAwMAogICAgPD0KICAgIGFzc2VydCAvLyBNYXggc2xpcHBhZ2UgdG9vIGhpZ2gKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU2CiAgICAvLyBtYXhTbGlwcGFnZUJwcyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gTWF4aW11bSBzbGlwcGFnZSB0b2xlcmFuY2UgaW4gYmFzaXMgcG9pbnRzCiAgICBieXRlYyAxMSAvLyAibWF4U2xpcHBhZ2VCcHMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NDMKICAgIC8vIHRoaXMubWF4U2xpcHBhZ2VCcHMudmFsdWUgPSBuZXdNYXhTbGlwcGFnZUJwczsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MzcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC51cGRhdGVDcmVhdG9yRmVlUmF0ZVtyb3V0aW5nXSgpIC0+IHZvaWQ6CnVwZGF0ZUNyZWF0b3JGZWVSYXRlOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjUwCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjUyCiAgICAvLyBhc3NlcnQoVHhuLnJla2V5VG8gPT09IEdsb2JhbC56ZXJvQWRkcmVzcywgJ3Jla2V5VG8gbXVzdCBiZSB6ZXJvJyk7CiAgICB0eG4gUmVrZXlUbwogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIHJla2V5VG8gbXVzdCBiZSB6ZXJvCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NTMKICAgIC8vIGFzc2VydChUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlLCAnT25seSBjcmVhdG9yIGNhbiB1cGRhdGUgZmVlIHJhdGUnKTsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NwogICAgLy8gY3JlYXRvckFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgIC8vIFZhdWx0IGNyZWF0b3Igd2hvIHJlY2VpdmVzIGZlZQogICAgYnl0ZWMgNiAvLyAiY3JlYXRvckFkZHJlc3MiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NTMKICAgIC8vIGFzc2VydChUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlLCAnT25seSBjcmVhdG9yIGNhbiB1cGRhdGUgZmVlIHJhdGUnKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIE9ubHkgY3JlYXRvciBjYW4gdXBkYXRlIGZlZSByYXRlCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NTQKICAgIC8vIGFzc2VydChuZXdGZWVSYXRlIDw9IE1BWF9GRUVfUkFURSwgJ0ZlZSByYXRlIGV4Y2VlZHMgbWF4aW11bSAoNiUpJyk7CiAgICBkdXAKICAgIHB1c2hpbnQgNiAvLyA2CiAgICA8PQogICAgYXNzZXJ0IC8vIEZlZSByYXRlIGV4Y2VlZHMgbWF4aW11bSAoNiUpCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0OQogICAgLy8gY3JlYXRvckZlZVJhdGUgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIDAtMTAwLCBwZXJjZW50YWdlIG9mIHlpZWxkIHRvIGNyZWF0b3IKICAgIGJ5dGVjIDE0IC8vICJjcmVhdG9yRmVlUmF0ZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY1NQogICAgLy8gdGhpcy5jcmVhdG9yRmVlUmF0ZS52YWx1ZSA9IG5ld0ZlZVJhdGU7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjUwCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuY29udHJpYnV0ZUZhcm1bcm91dGluZ10oKSAtPiB2b2lkOgpjb250cmlidXRlRmFybToKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY3MQogICAgLy8gYXNzZXJ0KFR4bi5yZWtleVRvID09PSBHbG9iYWwuemVyb0FkZHJlc3MsICdyZWtleVRvIG11c3QgYmUgemVybycpOwogICAgdHhuIFJla2V5VG8KICAgIGdsb2JhbCBaZXJvQWRkcmVzcwogICAgPT0KICAgIGFzc2VydCAvLyByZWtleVRvIG11c3QgYmUgemVybwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjcyCiAgICAvLyBjb25zdCBhcHBBZGRyOiBBY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3M7CiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjczCiAgICAvLyBjb25zdCBjdXJyZW50SW5kZXggPSBUeG4uZ3JvdXBJbmRleDsKICAgIHR4biBHcm91cEluZGV4CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NzQKICAgIC8vIGFzc2VydChjdXJyZW50SW5kZXggPj0gVWludDY0KDEpLCAnQXBwIGNhbGwgbXVzdCBmb2xsb3cgYXNzZXQgdHJhbnNmZXInKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIEFwcCBjYWxsIG11c3QgZm9sbG93IGFzc2V0IHRyYW5zZmVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NzcKICAgIC8vIGNvbnN0IGZhcm1UcmFuc2ZlciA9IGd0eG4uQXNzZXRUcmFuc2ZlclR4bihjdXJyZW50SW5kZXggLSBVaW50NjQoMSkpOwogICAgaW50Y18xIC8vIDEKICAgIC0KICAgIGR1cAogICAgZ3R4bnMgVHlwZUVudW0KICAgIGludGNfMyAvLyBheGZlcgogICAgPT0KICAgIGFzc2VydCAvLyB0cmFuc2FjdGlvbiB0eXBlIGlzIGF4ZmVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NzgKICAgIC8vIGFzc2VydChmYXJtVHJhbnNmZXIueGZlckFzc2V0ID09PSBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLCAnTXVzdCB0cmFuc2ZlciBBbHBoYSBhc3NldCcpOwogICAgZHVwCiAgICBndHhucyBYZmVyQXNzZXQKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MwogICAgLy8gYWxwaGFBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gQWxwaGEgQVNBIElEIChkZXBvc2l0ICYgeWllbGQgYXNzZXQpCiAgICBieXRlY18zIC8vICJhbHBoYUFzc2V0IgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Njc4CiAgICAvLyBhc3NlcnQoZmFybVRyYW5zZmVyLnhmZXJBc3NldCA9PT0gQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwgJ011c3QgdHJhbnNmZXIgQWxwaGEgYXNzZXQnKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIE11c3QgdHJhbnNmZXIgQWxwaGEgYXNzZXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY3OQogICAgLy8gYXNzZXJ0KGZhcm1UcmFuc2Zlci5hc3NldFJlY2VpdmVyID09PSBhcHBBZGRyLCAnTXVzdCBzZW5kIHRvIGNvbnRyYWN0Jyk7CiAgICBkdXAKICAgIGd0eG5zIEFzc2V0UmVjZWl2ZXIKICAgIHVuY292ZXIgMgogICAgPT0KICAgIGFzc2VydCAvLyBNdXN0IHNlbmQgdG8gY29udHJhY3QKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY4MAogICAgLy8gYXNzZXJ0KGZhcm1UcmFuc2Zlci5zZW5kZXIgPT09IFR4bi5zZW5kZXIsICdUcmFuc2ZlciBtdXN0IGJlIGZyb20gY2FsbGVyJyk7CiAgICBkdXAKICAgIGd0eG5zIFNlbmRlcgogICAgdHhuIFNlbmRlcgogICAgPT0KICAgIGFzc2VydCAvLyBUcmFuc2ZlciBtdXN0IGJlIGZyb20gY2FsbGVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2ODMKICAgIC8vIGFzc2VydChmYXJtVHJhbnNmZXIucmVrZXlUbyA9PT0gR2xvYmFsLnplcm9BZGRyZXNzLCAncmVrZXlUbyBtdXN0IGJlIHplcm8nKTsKICAgIGR1cAogICAgZ3R4bnMgUmVrZXlUbwogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIHJla2V5VG8gbXVzdCBiZSB6ZXJvCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2ODQKICAgIC8vIGFzc2VydChmYXJtVHJhbnNmZXIuYXNzZXRDbG9zZVRvID09PSBHbG9iYWwuemVyb0FkZHJlc3MsICdhc3NldENsb3NlVG8gbXVzdCBiZSB6ZXJvJyk7CiAgICBkdXAKICAgIGd0eG5zIEFzc2V0Q2xvc2VUbwogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIGFzc2V0Q2xvc2VUbyBtdXN0IGJlIHplcm8KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY4NgogICAgLy8gY29uc3QgYW1vdW50ID0gZmFybVRyYW5zZmVyLmFzc2V0QW1vdW50OwogICAgZ3R4bnMgQXNzZXRBbW91bnQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY4NwogICAgLy8gYXNzZXJ0KGFtb3VudCA+IFVpbnQ2NCgwKSwgJ0NvbnRyaWJ1dGlvbiBtdXN0IGJlIHBvc2l0aXZlJyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBDb250cmlidXRpb24gbXVzdCBiZSBwb3NpdGl2ZQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjkwCiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSArIGFtb3VudDsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgQWxwaGEgYXZhaWxhYmxlIGZvciBmYXJtIGJvbnVzCiAgICBieXRlY18yIC8vICJmYXJtQmFsYW5jZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY5MAogICAgLy8gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA9IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgKyBhbW91bnQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgKwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjQKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIEFscGhhIGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMiAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2OTAKICAgIC8vIHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPSB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlICsgYW1vdW50OwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY2OQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LnNldEVtaXNzaW9uUmF0aW9bcm91dGluZ10oKSAtPiB2b2lkOgpzZXRFbWlzc2lvblJhdGlvOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzAwCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzAyCiAgICAvLyBhc3NlcnQoVHhuLnJla2V5VG8gPT09IEdsb2JhbC56ZXJvQWRkcmVzcywgJ3Jla2V5VG8gbXVzdCBiZSB6ZXJvJyk7CiAgICB0eG4gUmVrZXlUbwogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIHJla2V5VG8gbXVzdCBiZSB6ZXJvCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3MDMKICAgIC8vIGNvbnN0IGlzQ3JlYXRvciA9IFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWU7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDcKICAgIC8vIGNyZWF0b3JBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAvLyBWYXVsdCBjcmVhdG9yIHdobyByZWNlaXZlcyBmZWUKICAgIGJ5dGVjIDYgLy8gImNyZWF0b3JBZGRyZXNzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzAzCiAgICAvLyBjb25zdCBpc0NyZWF0b3IgPSBUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3MDQKICAgIC8vIGNvbnN0IGlzUmFyZWZpID0gVHhuLnNlbmRlciA9PT0gdGhpcy5yYXJlZmlBZGRyZXNzLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ4CiAgICAvLyByYXJlZmlBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAgLy8gUmFyZUZpIHBsYXRmb3JtIGFkZHJlc3MgKGNhbiBhbHNvIHRyaWdnZXIgc3dhcHMpCiAgICBieXRlYyAxMyAvLyAicmFyZWZpQWRkcmVzcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjcwNAogICAgLy8gY29uc3QgaXNSYXJlZmkgPSBUeG4uc2VuZGVyID09PSB0aGlzLnJhcmVmaUFkZHJlc3MudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjcwNQogICAgLy8gYXNzZXJ0KGlzQ3JlYXRvciB8fCBpc1JhcmVmaSwgJ09ubHkgY3JlYXRvciBvciBSYXJlRmkgY2FuIHNldCBlbWlzc2lvbiByYXRpbycpOwogICAgfHwKICAgIGFzc2VydCAvLyBPbmx5IGNyZWF0b3Igb3IgUmFyZUZpIGNhbiBzZXQgZW1pc3Npb24gcmF0aW8KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjcwNgogICAgLy8gYXNzZXJ0KG5ld1JhdGlvID4gVWludDY0KDApLCAnRW1pc3Npb24gcmF0aW8gbXVzdCBiZSBwb3NpdGl2ZScpOwogICAgZHVwCiAgICBhc3NlcnQgLy8gRW1pc3Npb24gcmF0aW8gbXVzdCBiZSBwb3NpdGl2ZQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjUKICAgIC8vIGVtaXNzaW9uUmF0aW8gPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIE11bHRpcGxpZXIgZm9yIGR5bmFtaWMgcmF0ZTogcmF0ZSA9IGZhcm1CYWxhbmNlICogZW1pc3Npb25SYXRpbyAvIHRvdGFsQWxwaGEKICAgIGJ5dGVjIDkgLy8gImVtaXNzaW9uUmF0aW8iCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3MDgKICAgIC8vIHRoaXMuZW1pc3Npb25SYXRpby52YWx1ZSA9IG5ld1JhdGlvOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjcwMAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmdldEZhcm1TdGF0c1tyb3V0aW5nXSgpIC0+IHZvaWQ6CmdldEZhcm1TdGF0czoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjcxNwogICAgLy8gbGV0IGN1cnJlbnRSYXRlOiB1aW50NjQgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzE4CiAgICAvLyBpZiAodGhpcy5lbWlzc2lvblJhdGlvLnZhbHVlID4gVWludDY0KDApICYmIHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPiBVaW50NjQoMCkpIHsKICAgIGR1cAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjUKICAgIC8vIGVtaXNzaW9uUmF0aW8gPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIE11bHRpcGxpZXIgZm9yIGR5bmFtaWMgcmF0ZTogcmF0ZSA9IGZhcm1CYWxhbmNlICogZW1pc3Npb25SYXRpbyAvIHRvdGFsQWxwaGEKICAgIGJ5dGVjIDkgLy8gImVtaXNzaW9uUmF0aW8iCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3MTgKICAgIC8vIGlmICh0aGlzLmVtaXNzaW9uUmF0aW8udmFsdWUgPiBVaW50NjQoMCkgJiYgdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA+IFVpbnQ2NCgwKSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ6IGdldEZhcm1TdGF0c19hZnRlcl9pZl9lbHNlQDQKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgQWxwaGEgYXZhaWxhYmxlIGZvciBmYXJtIGJvbnVzCiAgICBieXRlY18yIC8vICJmYXJtQmFsYW5jZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjcxOAogICAgLy8gaWYgKHRoaXMuZW1pc3Npb25SYXRpby52YWx1ZSA+IFVpbnQ2NCgwKSAmJiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnogZ2V0RmFybVN0YXRzX2FmdGVyX2lmX2Vsc2VANAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzE5CiAgICAvLyBjdXJyZW50UmF0ZSA9IHRoaXMuY2FsY3VsYXRlRHluYW1pY0VtaXNzaW9uUmF0ZSgpOwogICAgY2FsbHN1YiBjYWxjdWxhdGVEeW5hbWljRW1pc3Npb25SYXRlCiAgICBidXJ5IDEKCmdldEZhcm1TdGF0c19hZnRlcl9pZl9lbHNlQDQ6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3MjEKICAgIC8vIHJldHVybiBbdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSwgdGhpcy5lbWlzc2lvblJhdGlvLnZhbHVlLCBjdXJyZW50UmF0ZV07CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjQKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIEFscGhhIGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMiAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3MjEKICAgIC8vIHJldHVybiBbdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSwgdGhpcy5lbWlzc2lvblJhdGlvLnZhbHVlLCBjdXJyZW50UmF0ZV07CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY1CiAgICAvLyBlbWlzc2lvblJhdGlvID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBNdWx0aXBsaWVyIGZvciBkeW5hbWljIHJhdGU6IHJhdGUgPSBmYXJtQmFsYW5jZSAqIGVtaXNzaW9uUmF0aW8gLyB0b3RhbEFscGhhCiAgICBieXRlYyA5IC8vICJlbWlzc2lvblJhdGlvIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzIxCiAgICAvLyByZXR1cm4gW3RoaXMuZmFybUJhbGFuY2UudmFsdWUsIHRoaXMuZW1pc3Npb25SYXRpby52YWx1ZSwgY3VycmVudFJhdGVdOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIHN3YXAKICAgIGl0b2IKICAgIHN3YXAKICAgIGl0b2IKICAgIGNvbmNhdAogICAgZGlnIDEKICAgIGl0b2IKICAgIGNvbmNhdAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzE1CiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgYnl0ZWMgNyAvLyAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuY2FsY3VsYXRlRHluYW1pY0VtaXNzaW9uUmF0ZSgpIC0+IHVpbnQ2NDoKY2FsY3VsYXRlRHluYW1pY0VtaXNzaW9uUmF0ZToKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjk1CiAgICAvLyBwcml2YXRlIGNhbGN1bGF0ZUR5bmFtaWNFbWlzc2lvblJhdGUoKTogdWludDY0IHsKICAgIHByb3RvIDAgMQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OTYKICAgIC8vIGNvbnN0IHRvdGFsRGVwb3NpdGVkID0gdGhpcy50b3RhbEFscGhhLnZhbHVlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0CiAgICAvLyB0b3RhbEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVG90YWwgQWxwaGEgaGVsZCAoZGVwb3NpdHMgKyBjb21wb3VuZGVkIHlpZWxkKQogICAgYnl0ZWNfMSAvLyAidG90YWxBbHBoYSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjk2CiAgICAvLyBjb25zdCB0b3RhbERlcG9zaXRlZCA9IHRoaXMudG90YWxBbHBoYS52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBzd2FwCiAgICBkdXAKICAgIHVuY292ZXIgMgogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OTgKICAgIC8vIGlmICh0b3RhbERlcG9zaXRlZCA9PT0gVWludDY0KDApIHx8IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPT09IFVpbnQ2NCgwKSkgewogICAgYnogY2FsY3VsYXRlRHluYW1pY0VtaXNzaW9uUmF0ZV9pZl9ib2R5QDIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgQWxwaGEgYXZhaWxhYmxlIGZvciBmYXJtIGJvbnVzCiAgICBieXRlY18yIC8vICJmYXJtQmFsYW5jZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjk4CiAgICAvLyBpZiAodG90YWxEZXBvc2l0ZWQgPT09IFVpbnQ2NCgwKSB8fCB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID09PSBVaW50NjQoMCkpIHsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBibnogY2FsY3VsYXRlRHluYW1pY0VtaXNzaW9uUmF0ZV9hZnRlcl9pZl9lbHNlQDMKCmNhbGN1bGF0ZUR5bmFtaWNFbWlzc2lvblJhdGVfaWZfYm9keUAyOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OTkKICAgIC8vIHJldHVybiBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgc3dhcAogICAgcmV0c3ViCgpjYWxjdWxhdGVEeW5hbWljRW1pc3Npb25SYXRlX2FmdGVyX2lmX2Vsc2VAMzoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEwMgogICAgLy8gY29uc3QgZHluYW1pY1JhdGUgPSB0aGlzLm11bERpdkZsb29yKHRoaXMuZmFybUJhbGFuY2UudmFsdWUsIHRoaXMuZW1pc3Npb25SYXRpby52YWx1ZSwgdG90YWxEZXBvc2l0ZWQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY0CiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBBbHBoYSBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzIgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTAyCiAgICAvLyBjb25zdCBkeW5hbWljUmF0ZSA9IHRoaXMubXVsRGl2Rmxvb3IodGhpcy5mYXJtQmFsYW5jZS52YWx1ZSwgdGhpcy5lbWlzc2lvblJhdGlvLnZhbHVlLCB0b3RhbERlcG9zaXRlZCk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY1CiAgICAvLyBlbWlzc2lvblJhdGlvID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBNdWx0aXBsaWVyIGZvciBkeW5hbWljIHJhdGU6IHJhdGUgPSBmYXJtQmFsYW5jZSAqIGVtaXNzaW9uUmF0aW8gLyB0b3RhbEFscGhhCiAgICBieXRlYyA5IC8vICJlbWlzc2lvblJhdGlvIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTAyCiAgICAvLyBjb25zdCBkeW5hbWljUmF0ZSA9IHRoaXMubXVsRGl2Rmxvb3IodGhpcy5mYXJtQmFsYW5jZS52YWx1ZSwgdGhpcy5lbWlzc2lvblJhdGlvLnZhbHVlLCB0b3RhbERlcG9zaXRlZCk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODUKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgbXVsdwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODYKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBpbnRjXzAgLy8gMAogICAgZnJhbWVfZGlnIDAKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODcKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMDQKICAgIC8vIHJldHVybiBkeW5hbWljUmF0ZSA8IE1JTl9GQVJNX0VNSVNTSU9OX0JQUyA/IE1JTl9GQVJNX0VNSVNTSU9OX0JQUyA6IGR5bmFtaWNSYXRlOwogICAgZHVwCiAgICBwdXNoaW50IDEwMDAgLy8gMTAwMAogICAgPAogICAgcHVzaGludCAxMDAwIC8vIDEwMDAKICAgIHN3YXAKICAgIHNlbGVjdAogICAgc3dhcAogICAgcmV0c3ViCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbHBoYVRvU2hhcmVzKGFscGhhQW1vdW50OiB1aW50NjQpIC0+IHVpbnQ2NDoKYWxwaGFUb1NoYXJlczoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjExMgogICAgLy8gcHJpdmF0ZSBhbHBoYVRvU2hhcmVzKGFscGhhQW1vdW50OiB1aW50NjQpOiB1aW50NjQgewogICAgcHJvdG8gMSAxCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMTMKICAgIC8vIGlmICh0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID09PSBVaW50NjQoMCkpIHsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MwogICAgLy8gdG90YWxTaGFyZXMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIFRvdGFsIHNoYXJlcyBpc3N1ZWQgdG8gYWxsIGRlcG9zaXRvcnMKICAgIGJ5dGVjXzAgLy8gInRvdGFsU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTEzCiAgICAvLyBpZiAodGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9PT0gVWludDY0KDApKSB7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYm56IGFscGhhVG9TaGFyZXNfYWZ0ZXJfaWZfZWxzZUAyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMTUKICAgIC8vIHJldHVybiBhbHBoYUFtb3VudDsKICAgIGZyYW1lX2RpZyAtMQogICAgcmV0c3ViCgphbHBoYVRvU2hhcmVzX2FmdGVyX2lmX2Vsc2VAMjoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjExNwogICAgLy8gcmV0dXJuIHRoaXMubXVsRGl2Rmxvb3IoYWxwaGFBbW91bnQsIHRoaXMudG90YWxTaGFyZXMudmFsdWUsIHRoaXMudG90YWxBbHBoYS52YWx1ZSk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTMKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjExNwogICAgLy8gcmV0dXJuIHRoaXMubXVsRGl2Rmxvb3IoYWxwaGFBbW91bnQsIHRoaXMudG90YWxTaGFyZXMudmFsdWUsIHRoaXMudG90YWxBbHBoYS52YWx1ZSk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0CiAgICAvLyB0b3RhbEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVG90YWwgQWxwaGEgaGVsZCAoZGVwb3NpdHMgKyBjb21wb3VuZGVkIHlpZWxkKQogICAgYnl0ZWNfMSAvLyAidG90YWxBbHBoYSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjExNwogICAgLy8gcmV0dXJuIHRoaXMubXVsRGl2Rmxvb3IoYWxwaGFBbW91bnQsIHRoaXMudG90YWxTaGFyZXMudmFsdWUsIHRoaXMudG90YWxBbHBoYS52YWx1ZSk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODUKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgZnJhbWVfZGlnIC0xCiAgICB1bmNvdmVyIDIKICAgIG11bHcKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg2CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIHVuY292ZXIgMwogICAgZGl2bW9kdwogICAgcG9wbiAyCiAgICBzd2FwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NwogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjExNwogICAgLy8gcmV0dXJuIHRoaXMubXVsRGl2Rmxvb3IoYWxwaGFBbW91bnQsIHRoaXMudG90YWxTaGFyZXMudmFsdWUsIHRoaXMudG90YWxBbHBoYS52YWx1ZSk7CiAgICByZXRzdWIKCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LnNoYXJlc1RvQWxwaGEoc2hhcmVzOiB1aW50NjQpIC0+IHVpbnQ2NDoKc2hhcmVzVG9BbHBoYToKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEyNAogICAgLy8gcHJpdmF0ZSBzaGFyZXNUb0FscGhhKHNoYXJlczogdWludDY0KTogdWludDY0IHsKICAgIHByb3RvIDEgMQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTI1CiAgICAvLyBpZiAodGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9PT0gVWludDY0KDApKSB7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTMKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEyNQogICAgLy8gaWYgKHRoaXMudG90YWxTaGFyZXMudmFsdWUgPT09IFVpbnQ2NCgwKSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJueiBzaGFyZXNUb0FscGhhX2FmdGVyX2lmX2Vsc2VAMgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTI2CiAgICAvLyByZXR1cm4gVWludDY0KDApOwogICAgaW50Y18wIC8vIDAKICAgIHJldHN1YgoKc2hhcmVzVG9BbHBoYV9hZnRlcl9pZl9lbHNlQDI6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMjgKICAgIC8vIHJldHVybiB0aGlzLm11bERpdkZsb29yKHNoYXJlcywgdGhpcy50b3RhbEFscGhhLnZhbHVlLCB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NAogICAgLy8gdG90YWxBbHBoYSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFRvdGFsIEFscGhhIGhlbGQgKGRlcG9zaXRzICsgY29tcG91bmRlZCB5aWVsZCkKICAgIGJ5dGVjXzEgLy8gInRvdGFsQWxwaGEiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMjgKICAgIC8vIHJldHVybiB0aGlzLm11bERpdkZsb29yKHNoYXJlcywgdGhpcy50b3RhbEFscGhhLnZhbHVlLCB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTMKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEyOAogICAgLy8gcmV0dXJuIHRoaXMubXVsRGl2Rmxvb3Ioc2hhcmVzLCB0aGlzLnRvdGFsQWxwaGEudmFsdWUsIHRoaXMudG90YWxTaGFyZXMudmFsdWUpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg1CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGZyYW1lX2RpZyAtMQogICAgdW5jb3ZlciAyCiAgICBtdWx3CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NgogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICB1bmNvdmVyIDMKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODcKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMjgKICAgIC8vIHJldHVybiB0aGlzLm11bERpdkZsb29yKHNoYXJlcywgdGhpcy50b3RhbEFscGhhLnZhbHVlLCB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlKTsKICAgIHJldHN1YgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0KGlucHV0QW1vdW50OiB1aW50NjQpIC0+IHVpbnQ2NDoKZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTM1CiAgICAvLyBwcml2YXRlIGdldEV4cGVjdGVkU3dhcE91dHB1dChpbnB1dEFtb3VudDogdWludDY0KTogdWludDY0IHsKICAgIHByb3RvIDEgMQogICAgcHVzaGJ5dGVzICIiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMzYKICAgIC8vIGNvbnN0IHBvb2xBcHAgPSB0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjAKICAgIC8vIHRpbnltYW5Qb29sQXBwSWQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBUaW55bWFuIFYyIHBvb2wgYXBwIElECiAgICBieXRlYyAxNSAvLyAidGlueW1hblBvb2xBcHBJZCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEzNgogICAgLy8gY29uc3QgcG9vbEFwcCA9IHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMzcKICAgIC8vIGNvbnN0IHBvb2xBZGRyID0gdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjEKICAgIC8vIHRpbnltYW5Qb29sQWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7IC8vIFRpbnltYW4gcG9vbCBhZGRyZXNzCiAgICBieXRlYyAxNiAvLyAidGlueW1hblBvb2xBZGRyZXNzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTM3CiAgICAvLyBjb25zdCBwb29sQWRkciA9IHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE0MAogICAgLy8gY29uc3QgW2Fzc2V0MUlkLCBoYXNBc3NldDFJZF0gPSBBcHBMb2NhbC5nZXRFeFVpbnQ2NChwb29sQWRkciwgcG9vbEFwcCwgQnl0ZXMoJ2Fzc2V0XzFfaWQnKSk7CiAgICBkdXAKICAgIGRpZyAyCiAgICBwdXNoYnl0ZXMgImFzc2V0XzFfaWQiCiAgICBhcHBfbG9jYWxfZ2V0X2V4CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNDEKICAgIC8vIGFzc2VydChoYXNBc3NldDFJZCwgJ0Nhbm5vdCByZWFkIHBvb2wgYXNzZXRfMV9pZCcpOwogICAgYXNzZXJ0IC8vIENhbm5vdCByZWFkIHBvb2wgYXNzZXRfMV9pZAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTQzCiAgICAvLyBjb25zdCBbYXNzZXQxUmVzZXJ2ZXMsIGhhc0Fzc2V0MVJlc2VydmVzXSA9IEFwcExvY2FsLmdldEV4VWludDY0KHBvb2xBZGRyLCBwb29sQXBwLCBCeXRlcygnYXNzZXRfMV9yZXNlcnZlcycpKTsKICAgIGRpZyAxCiAgICBkaWcgMwogICAgcHVzaGJ5dGVzICJhc3NldF8xX3Jlc2VydmVzIgogICAgYXBwX2xvY2FsX2dldF9leAogICAgc3dhcAogICAgY292ZXIgNAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTQ0CiAgICAvLyBhc3NlcnQoaGFzQXNzZXQxUmVzZXJ2ZXMsICdDYW5ub3QgcmVhZCBwb29sIGFzc2V0XzFfcmVzZXJ2ZXMnKTsKICAgIGFzc2VydCAvLyBDYW5ub3QgcmVhZCBwb29sIGFzc2V0XzFfcmVzZXJ2ZXMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE0NgogICAgLy8gY29uc3QgW2Fzc2V0MlJlc2VydmVzLCBoYXNBc3NldDJSZXNlcnZlc10gPSBBcHBMb2NhbC5nZXRFeFVpbnQ2NChwb29sQWRkciwgcG9vbEFwcCwgQnl0ZXMoJ2Fzc2V0XzJfcmVzZXJ2ZXMnKSk7CiAgICBkaWcgMQogICAgZGlnIDMKICAgIHB1c2hieXRlcyAiYXNzZXRfMl9yZXNlcnZlcyIKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGNvdmVyIDQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE0NwogICAgLy8gYXNzZXJ0KGhhc0Fzc2V0MlJlc2VydmVzLCAnQ2Fubm90IHJlYWQgcG9vbCBhc3NldF8yX3Jlc2VydmVzJyk7CiAgICBhc3NlcnQgLy8gQ2Fubm90IHJlYWQgcG9vbCBhc3NldF8yX3Jlc2VydmVzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNDkKICAgIC8vIGNvbnN0IFt0b3RhbEZlZVNoYXJlLCBoYXNUb3RhbEZlZVNoYXJlXSA9IEFwcExvY2FsLmdldEV4VWludDY0KHBvb2xBZGRyLCBwb29sQXBwLCBCeXRlcygndG90YWxfZmVlX3NoYXJlJykpOwogICAgc3dhcAogICAgdW5jb3ZlciAyCiAgICBwdXNoYnl0ZXMgInRvdGFsX2ZlZV9zaGFyZSIKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGNvdmVyIDMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE1MAogICAgLy8gYXNzZXJ0KGhhc1RvdGFsRmVlU2hhcmUsICdDYW5ub3QgcmVhZCBwb29sIHRvdGFsX2ZlZV9zaGFyZScpOwogICAgYXNzZXJ0IC8vIENhbm5vdCByZWFkIHBvb2wgdG90YWxfZmVlX3NoYXJlCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNTYKICAgIC8vIGlmIChhc3NldDFJZCA9PT0gdGhpcy51c2RjQXNzZXQudmFsdWUpIHsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NAogICAgLy8gdXNkY0Fzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKGFpcmRyb3BzIGNvbWUgaW4gYXMgdGhpcykKICAgIGJ5dGVjIDQgLy8gInVzZGNBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE1NgogICAgLy8gaWYgKGFzc2V0MUlkID09PSB0aGlzLnVzZGNBc3NldC52YWx1ZSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBieiBnZXRFeHBlY3RlZFN3YXBPdXRwdXRfZWxzZV9ib2R5QDIKICAgIGZyYW1lX2RpZyAxCiAgICBmcmFtZV9idXJ5IDAKCmdldEV4cGVjdGVkU3dhcE91dHB1dF9hZnRlcl9pZl9lbHNlQDM6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNjgKICAgIC8vIGNvbnN0IG5ldElucHV0ID0gdGhpcy5tdWxEaXZGbG9vcihpbnB1dEFtb3VudCwgRkVFX0JQU19CQVNFIC0gZmVlQnBzLCBGRUVfQlBTX0JBU0UpOwogICAgaW50YyA0IC8vIDEwMDAwCiAgICBmcmFtZV9kaWcgMgogICAgLQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODUKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgZnJhbWVfZGlnIC0xCiAgICBtdWx3CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NgogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNjgKICAgIC8vIGNvbnN0IG5ldElucHV0ID0gdGhpcy5tdWxEaXZGbG9vcihpbnB1dEFtb3VudCwgRkVFX0JQU19CQVNFIC0gZmVlQnBzLCBGRUVfQlBTX0JBU0UpOwogICAgaW50YyA0IC8vIDEwMDAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NgogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODcKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNzEKICAgIC8vIGNvbnN0IGV4cGVjdGVkT3V0cHV0ID0gdGhpcy5tdWxEaXZGbG9vcihvdXRwdXRSZXNlcnZlcywgbmV0SW5wdXQsIGlucHV0UmVzZXJ2ZXMgKyBuZXRJbnB1dCk7CiAgICBmcmFtZV9kaWcgMAogICAgZGlnIDEKICAgICsKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg1CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGNvdmVyIDIKICAgIG11bHcKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg2CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIHVuY292ZXIgMwogICAgZGl2bW9kdwogICAgcG9wbiAyCiAgICBzd2FwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NwogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE3MwogICAgLy8gcmV0dXJuIGV4cGVjdGVkT3V0cHV0OwogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCmdldEV4cGVjdGVkU3dhcE91dHB1dF9lbHNlX2JvZHlAMjoKICAgIGZyYW1lX2J1cnkgMAogICAgZnJhbWVfZGlnIDEKICAgIGIgZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0X2FmdGVyX2lmX2Vsc2VAMwoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuZXhlY3V0ZUNvbXBvdW5kKHVzZGNCYWxhbmNlOiB1aW50NjQsIHNsaXBwYWdlQnBzOiB1aW50NjQpIC0+IHZvaWQ6CmV4ZWN1dGVDb21wb3VuZDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE4MAogICAgLy8gcHJpdmF0ZSBleGVjdXRlQ29tcG91bmQodXNkY0JhbGFuY2U6IHVpbnQ2NCwgc2xpcHBhZ2VCcHM6IHVpbnQ2NCk6IHZvaWQgewogICAgcHJvdG8gMiAwCiAgICBwdXNoYnl0ZXMgIiIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE4MQogICAgLy8gY29uc3QgYXBwQWRkcjogQWNjb3VudCA9IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzOwogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE4NAogICAgLy8gY29uc3QgZXhwZWN0ZWRPdXRwdXQgPSB0aGlzLmdldEV4cGVjdGVkU3dhcE91dHB1dCh1c2RjQmFsYW5jZSk7CiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxODUKICAgIC8vIGFzc2VydChleHBlY3RlZE91dHB1dCA+IFVpbnQ2NCgwKSwgJ0V4cGVjdGVkIG91dHB1dCBpcyB6ZXJvJyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBFeHBlY3RlZCBvdXRwdXQgaXMgemVybwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTg4CiAgICAvLyBjb25zdCBtaW5BbW91bnRPdXQgPSB0aGlzLm11bERpdkZsb29yKGV4cGVjdGVkT3V0cHV0LCBGRUVfQlBTX0JBU0UgLSBzbGlwcGFnZUJwcywgRkVFX0JQU19CQVNFKTsKICAgIGludGMgNCAvLyAxMDAwMAogICAgZnJhbWVfZGlnIC0xCiAgICAtCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NQogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KG4xLCBuMik7CiAgICBtdWx3CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NgogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxODgKICAgIC8vIGNvbnN0IG1pbkFtb3VudE91dCA9IHRoaXMubXVsRGl2Rmxvb3IoZXhwZWN0ZWRPdXRwdXQsIEZFRV9CUFNfQkFTRSAtIHNsaXBwYWdlQnBzLCBGRUVfQlBTX0JBU0UpOwogICAgaW50YyA0IC8vIDEwMDAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NgogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgY292ZXIgMgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODcKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxOTEKICAgIC8vIGNvbnN0IGFscGhhQmVmb3JlID0gQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQzCiAgICAvLyBhbHBoYUFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBBbHBoYSBBU0EgSUQgKGRlcG9zaXQgJiB5aWVsZCBhc3NldCkKICAgIGJ5dGVjXzMgLy8gImFscGhhQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxOTEKICAgIC8vIGNvbnN0IGFscGhhQmVmb3JlID0gQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGR1cDIKICAgIGFzc2V0X2hvbGRpbmdfZ2V0IEFzc2V0QmFsYW5jZQogICAgYXNzZXJ0IC8vIGFjY291bnQgb3B0ZWQgaW50byBhc3NldAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTk0LTIwOAogICAgLy8gaXR4bi5zdWJtaXRHcm91cCgKICAgIC8vICAgaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiB0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZSwKICAgIC8vICAgICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMudXNkY0Fzc2V0LnZhbHVlKSwKICAgIC8vICAgICBhc3NldEFtb3VudDogdXNkY0JhbGFuY2UsCiAgICAvLyAgICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyAgIH0pLAogICAgLy8gICBpdHhuLmFwcGxpY2F0aW9uQ2FsbCh7CiAgICAvLyAgICAgYXBwSWQ6IEFwcGxpY2F0aW9uKHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZSksCiAgICAvLyAgICAgYXBwQXJnczogW0J5dGVzKCdzd2FwJyksIEJ5dGVzKCdmaXhlZC1pbnB1dCcpLCBpdG9iKG1pbkFtb3VudE91dCldLAogICAgLy8gICAgIGFzc2V0czogW0Fzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSldLAogICAgLy8gICAgIGFjY291bnRzOiBbdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWVdLAogICAgLy8gICAgIGZlZTogVWludDY0KDApLAogICAgLy8gICB9KSwKICAgIC8vICk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxOTYKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYxCiAgICAvLyB0aW55bWFuUG9vbEFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAvLyBUaW55bWFuIHBvb2wgYWRkcmVzcwogICAgYnl0ZWMgMTYgLy8gInRpbnltYW5Qb29sQWRkcmVzcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE5NgogICAgLy8gYXNzZXRSZWNlaXZlcjogdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWUsCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTk3CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMudXNkY0Fzc2V0LnZhbHVlKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NAogICAgLy8gdXNkY0Fzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKGFpcmRyb3BzIGNvbWUgaW4gYXMgdGhpcykKICAgIGJ5dGVjIDQgLy8gInVzZGNBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE5NwogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZnJhbWVfZGlnIC0yCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgZHVwCiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE5NS0yMDAKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMudXNkY0Fzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IHVzZGNCYWxhbmNlLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLAogICAgaW50Y18zIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE5OQogICAgLy8gZmVlOiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIwMS0yMDcKICAgIC8vIGl0eG4uYXBwbGljYXRpb25DYWxsKHsKICAgIC8vICAgYXBwSWQ6IEFwcGxpY2F0aW9uKHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZSksCiAgICAvLyAgIGFwcEFyZ3M6IFtCeXRlcygnc3dhcCcpLCBCeXRlcygnZml4ZWQtaW5wdXQnKSwgaXRvYihtaW5BbW91bnRPdXQpXSwKICAgIC8vICAgYXNzZXRzOiBbQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKV0sCiAgICAvLyAgIGFjY291bnRzOiBbdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWVdLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLAogICAgaXR4bl9uZXh0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMDIKICAgIC8vIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYwCiAgICAvLyB0aW55bWFuUG9vbEFwcElkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgLy8gVGlueW1hbiBWMiBwb29sIGFwcCBJRAogICAgYnl0ZWMgMTUgLy8gInRpbnltYW5Qb29sQXBwSWQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMDIKICAgIC8vIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIwMwogICAgLy8gYXBwQXJnczogW0J5dGVzKCdzd2FwJyksIEJ5dGVzKCdmaXhlZC1pbnB1dCcpLCBpdG9iKG1pbkFtb3VudE91dCldLAogICAgZGlnIDUKICAgIGl0b2IKICAgIHVuY292ZXIgMgogICAgaXR4bl9maWVsZCBBY2NvdW50cwogICAgZGlnIDMKICAgIGl0eG5fZmllbGQgQXNzZXRzCiAgICBwdXNoYnl0ZXMgInN3YXAiCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgcHVzaGJ5dGVzICJmaXhlZC1pbnB1dCIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMDEtMjA3CiAgICAvLyBpdHhuLmFwcGxpY2F0aW9uQ2FsbCh7CiAgICAvLyAgIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgLy8gICBhcHBBcmdzOiBbQnl0ZXMoJ3N3YXAnKSwgQnl0ZXMoJ2ZpeGVkLWlucHV0JyksIGl0b2IobWluQW1vdW50T3V0KV0sCiAgICAvLyAgIGFzc2V0czogW0Fzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSldLAogICAgLy8gICBhY2NvdW50czogW3RoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlXSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KSwKICAgIHB1c2hpbnQgNiAvLyA2CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMDYKICAgIC8vIGZlZTogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxOTQtMjA4CiAgICAvLyBpdHhuLnN1Ym1pdEdyb3VwKAogICAgLy8gICBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlLAogICAgLy8gICAgIHhmZXJBc3NldDogQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiB1c2RjQmFsYW5jZSwKICAgIC8vICAgICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vICAgfSksCiAgICAvLyAgIGl0eG4uYXBwbGljYXRpb25DYWxsKHsKICAgIC8vICAgICBhcHBJZDogQXBwbGljYXRpb24odGhpcy50aW55bWFuUG9vbEFwcElkLnZhbHVlKSwKICAgIC8vICAgICBhcHBBcmdzOiBbQnl0ZXMoJ3N3YXAnKSwgQnl0ZXMoJ2ZpeGVkLWlucHV0JyksIGl0b2IobWluQW1vdW50T3V0KV0sCiAgICAvLyAgICAgYXNzZXRzOiBbQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKV0sCiAgICAvLyAgICAgYWNjb3VudHM6IFt0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZV0sCiAgICAvLyAgICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyAgIH0pLAogICAgLy8gKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMTEKICAgIC8vIGNvbnN0IGFscGhhQWZ0ZXI6IHVpbnQ2NCA9IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGNvdmVyIDIKICAgIGFzc2V0X2hvbGRpbmdfZ2V0IEFzc2V0QmFsYW5jZQogICAgYXNzZXJ0IC8vIGFjY291bnQgb3B0ZWQgaW50byBhc3NldAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjEyCiAgICAvLyBjb25zdCBzd2FwT3V0cHV0OiB1aW50NjQgPSBhbHBoYUFmdGVyIC0gYWxwaGFCZWZvcmU7CiAgICBzd2FwCiAgICAtCiAgICBkdXAKICAgIHVuY292ZXIgMgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjEzCiAgICAvLyBhc3NlcnQoc3dhcE91dHB1dCA+PSBtaW5BbW91bnRPdXQsICdTd2FwIG91dHB1dCBiZWxvdyBtaW5pbXVtJyk7CiAgICA+PQogICAgYXNzZXJ0IC8vIFN3YXAgb3V0cHV0IGJlbG93IG1pbmltdW0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIxNgogICAgLy8gbGV0IGZhcm1Cb251czogdWludDY0ID0gVWludDY0KDApOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIxNwogICAgLy8gaWYgKHRoaXMuZW1pc3Npb25SYXRpby52YWx1ZSA+IFVpbnQ2NCgwKSAmJiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBkdXAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY1CiAgICAvLyBlbWlzc2lvblJhdGlvID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBNdWx0aXBsaWVyIGZvciBkeW5hbWljIHJhdGU6IHJhdGUgPSBmYXJtQmFsYW5jZSAqIGVtaXNzaW9uUmF0aW8gLyB0b3RhbEFscGhhCiAgICBieXRlYyA5IC8vICJlbWlzc2lvblJhdGlvIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjE3CiAgICAvLyBpZiAodGhpcy5lbWlzc2lvblJhdGlvLnZhbHVlID4gVWludDY0KDApICYmIHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPiBVaW50NjQoMCkpIHsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBieiBleGVjdXRlQ29tcG91bmRfYWZ0ZXJfaWZfZWxzZUA4CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjQKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIEFscGhhIGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMiAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMTcKICAgIC8vIGlmICh0aGlzLmVtaXNzaW9uUmF0aW8udmFsdWUgPiBVaW50NjQoMCkgJiYgdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA+IFVpbnQ2NCgwKSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ6IGV4ZWN1dGVDb21wb3VuZF9hZnRlcl9pZl9lbHNlQDgKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIxOAogICAgLy8gY29uc3QgY3VycmVudFJhdGUgPSB0aGlzLmNhbGN1bGF0ZUR5bmFtaWNFbWlzc2lvblJhdGUoKTsKICAgIGNhbGxzdWIgY2FsY3VsYXRlRHluYW1pY0VtaXNzaW9uUmF0ZQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODUKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgZnJhbWVfZGlnIDEKICAgIG11bHcKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg2CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIxOQogICAgLy8gY29uc3QgcmVxdWVzdGVkQm9udXMgPSB0aGlzLm11bERpdkZsb29yKHN3YXBPdXRwdXQsIGN1cnJlbnRSYXRlLCBGRUVfQlBTX0JBU0UpOwogICAgaW50YyA0IC8vIDEwMDAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NgogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgZHVwCiAgICBjb3ZlciAyCiAgICBmcmFtZV9idXJ5IDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg3CiAgICAvLyBhc3NlcnQocV9oaSA9PT0gVWludDY0KDApLCAnTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3InKTsKICAgICEKICAgIGFzc2VydCAvLyBNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjIwCiAgICAvLyBmYXJtQm9udXMgPSByZXF1ZXN0ZWRCb251cyA8IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPyByZXF1ZXN0ZWRCb251cyA6IHRoaXMuZmFybUJhbGFuY2UudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjQKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIEFscGhhIGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMiAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMjAKICAgIC8vIGZhcm1Cb251cyA9IHJlcXVlc3RlZEJvbnVzIDwgdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA/IHJlcXVlc3RlZEJvbnVzIDogdGhpcy5mYXJtQmFsYW5jZS52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA8CiAgICBieiBleGVjdXRlQ29tcG91bmRfdGVybmFyeV9mYWxzZUA2CiAgICBmcmFtZV9kaWcgMAogICAgZnJhbWVfYnVyeSAyCgpleGVjdXRlQ29tcG91bmRfdGVybmFyeV9tZXJnZUA3OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjIxCiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSAtIGZhcm1Cb251czsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgQWxwaGEgYXZhaWxhYmxlIGZvciBmYXJtIGJvbnVzCiAgICBieXRlY18yIC8vICJmYXJtQmFsYW5jZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIyMQogICAgLy8gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA9IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgLSBmYXJtQm9udXM7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZnJhbWVfZGlnIDIKICAgIC0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY0CiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBBbHBoYSBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzIgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjIxCiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSAtIGZhcm1Cb251czsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CgpleGVjdXRlQ29tcG91bmRfYWZ0ZXJfaWZfZWxzZUA4OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjI1CiAgICAvLyBjb25zdCB0b3RhbE91dHB1dDogdWludDY0ID0gc3dhcE91dHB1dCArIGZhcm1Cb251czsKICAgIGZyYW1lX2RpZyAxCiAgICBmcmFtZV9kaWcgMgogICAgKwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjI4CiAgICAvLyBjb25zdCBjcmVhdG9yQ3V0OiB1aW50NjQgPSB0aGlzLm11bERpdkZsb29yKHRvdGFsT3V0cHV0LCB0aGlzLmNyZWF0b3JGZWVSYXRlLnZhbHVlLCBGRUVfUEVSQ0VOVF9CQVNFKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0OQogICAgLy8gY3JlYXRvckZlZVJhdGUgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIDAtMTAwLCBwZXJjZW50YWdlIG9mIHlpZWxkIHRvIGNyZWF0b3IKICAgIGJ5dGVjIDE0IC8vICJjcmVhdG9yRmVlUmF0ZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIyOAogICAgLy8gY29uc3QgY3JlYXRvckN1dDogdWludDY0ID0gdGhpcy5tdWxEaXZGbG9vcih0b3RhbE91dHB1dCwgdGhpcy5jcmVhdG9yRmVlUmF0ZS52YWx1ZSwgRkVFX1BFUkNFTlRfQkFTRSk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODUKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgZGlnIDEKICAgIG11bHcKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg2CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIyOAogICAgLy8gY29uc3QgY3JlYXRvckN1dDogdWludDY0ID0gdGhpcy5tdWxEaXZGbG9vcih0b3RhbE91dHB1dCwgdGhpcy5jcmVhdG9yRmVlUmF0ZS52YWx1ZSwgRkVFX1BFUkNFTlRfQkFTRSk7CiAgICBwdXNoaW50IDEwMCAvLyAxMDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg2CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgZGl2bW9kdwogICAgcG9wbiAyCiAgICBzd2FwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NwogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIyOQogICAgLy8gY29uc3QgdmF1bHRDdXQ6IHVpbnQ2NCA9IHRvdGFsT3V0cHV0IC0gY3JlYXRvckN1dDsKICAgIGR1cDIKICAgIC0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIzMgogICAgLy8gdGhpcy5jcmVhdG9yVW5jbGFpbWVkQWxwaGEudmFsdWUgPSB0aGlzLmNyZWF0b3JVbmNsYWltZWRBbHBoYS52YWx1ZSArIGNyZWF0b3JDdXQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTAKICAgIC8vIGNyZWF0b3JVbmNsYWltZWRBbHBoYSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgLy8gQWNjdW11bGF0ZWQgQWxwaGEgZm9yIGNyZWF0b3IgdG8gY2xhaW0KICAgIGJ5dGVjIDggLy8gImNyZWF0b3JVbmNsYWltZWRBbHBoYSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIzMgogICAgLy8gdGhpcy5jcmVhdG9yVW5jbGFpbWVkQWxwaGEudmFsdWUgPSB0aGlzLmNyZWF0b3JVbmNsYWltZWRBbHBoYS52YWx1ZSArIGNyZWF0b3JDdXQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgdW5jb3ZlciAyCiAgICArCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MAogICAgLy8gY3JlYXRvclVuY2xhaW1lZEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBBY2N1bXVsYXRlZCBBbHBoYSBmb3IgY3JlYXRvciB0byBjbGFpbQogICAgYnl0ZWMgOCAvLyAiY3JlYXRvclVuY2xhaW1lZEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjMyCiAgICAvLyB0aGlzLmNyZWF0b3JVbmNsYWltZWRBbHBoYS52YWx1ZSA9IHRoaXMuY3JlYXRvclVuY2xhaW1lZEFscGhhLnZhbHVlICsgY3JlYXRvckN1dDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMzUKICAgIC8vIHRoaXMudG90YWxBbHBoYS52YWx1ZSA9IHRoaXMudG90YWxBbHBoYS52YWx1ZSArIHZhdWx0Q3V0OwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0CiAgICAvLyB0b3RhbEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVG90YWwgQWxwaGEgaGVsZCAoZGVwb3NpdHMgKyBjb21wb3VuZGVkIHlpZWxkKQogICAgYnl0ZWNfMSAvLyAidG90YWxBbHBoYSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIzNQogICAgLy8gdGhpcy50b3RhbEFscGhhLnZhbHVlID0gdGhpcy50b3RhbEFscGhhLnZhbHVlICsgdmF1bHRDdXQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgKwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjM1CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgKyB2YXVsdEN1dDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMzgKICAgIC8vIHRoaXMudG90YWxZaWVsZENvbXBvdW5kZWQudmFsdWUgPSB0aGlzLnRvdGFsWWllbGRDb21wb3VuZGVkLnZhbHVlICsgdG90YWxPdXRwdXQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTcKICAgIC8vIHRvdGFsWWllbGRDb21wb3VuZGVkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBUb3RhbCB5aWVsZCBjb21wb3VuZGVkIChmb3Igc3RhdHMpCiAgICBieXRlYyAxMiAvLyAidG90YWxZaWVsZENvbXBvdW5kZWQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMzgKICAgIC8vIHRoaXMudG90YWxZaWVsZENvbXBvdW5kZWQudmFsdWUgPSB0aGlzLnRvdGFsWWllbGRDb21wb3VuZGVkLnZhbHVlICsgdG90YWxPdXRwdXQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgKwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTcKICAgIC8vIHRvdGFsWWllbGRDb21wb3VuZGVkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBUb3RhbCB5aWVsZCBjb21wb3VuZGVkIChmb3Igc3RhdHMpCiAgICBieXRlYyAxMiAvLyAidG90YWxZaWVsZENvbXBvdW5kZWQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMzgKICAgIC8vIHRoaXMudG90YWxZaWVsZENvbXBvdW5kZWQudmFsdWUgPSB0aGlzLnRvdGFsWWllbGRDb21wb3VuZGVkLnZhbHVlICsgdG90YWxPdXRwdXQ7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCgpleGVjdXRlQ29tcG91bmRfdGVybmFyeV9mYWxzZUA2OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjIwCiAgICAvLyBmYXJtQm9udXMgPSByZXF1ZXN0ZWRCb251cyA8IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPyByZXF1ZXN0ZWRCb251cyA6IHRoaXMuZmFybUJhbGFuY2UudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjQKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIEFscGhhIGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMiAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMjAKICAgIC8vIGZhcm1Cb251cyA9IHJlcXVlc3RlZEJvbnVzIDwgdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA/IHJlcXVlc3RlZEJvbnVzIDogdGhpcy5mYXJtQmFsYW5jZS52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBmcmFtZV9idXJ5IDIKICAgIGIgZXhlY3V0ZUNvbXBvdW5kX3Rlcm5hcnlfbWVyZ2VANwo=",
        "clear": "I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYmFzZS1jb250cmFjdC5kLnRzOjpCYXNlQ29udHJhY3QuY2xlYXJTdGF0ZVByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBwdXNoaW50IDEgLy8gMQogICAgcmV0dXJuCg=="
    },
    "state": {
        "global": {
            "num_byte_slices": 3,
            "num_uints": 13
        },
        "local": {
            "num_byte_slices": 0,
            "num_uints": 1
        }
    },
    "schema": {
        "global": {
            "declared": {
                "alphaAsset": {
                    "type": "uint64",
                    "key": "alphaAsset"
                },
                "assetsOptedIn": {
                    "type": "uint64",
                    "key": "assetsOptedIn"
                },
                "creatorAddress": {
                    "type": "bytes",
                    "key": "creatorAddress"
                },
                "creatorFeeRate": {
                    "type": "uint64",
                    "key": "creatorFeeRate"
                },
                "creatorUnclaimedAlpha": {
                    "type": "uint64",
                    "key": "creatorUnclaimedAlpha"
                },
                "emissionRatio": {
                    "type": "uint64",
                    "key": "emissionRatio"
                },
                "farmBalance": {
                    "type": "uint64",
                    "key": "farmBalance"
                },
                "maxSlippageBps": {
                    "type": "uint64",
                    "key": "maxSlippageBps"
                },
                "minSwapThreshold": {
                    "type": "uint64",
                    "key": "minSwapThreshold"
                },
                "rarefiAddress": {
                    "type": "bytes",
                    "key": "rarefiAddress"
                },
                "tinymanPoolAddress": {
                    "type": "bytes",
                    "key": "tinymanPoolAddress"
                },
                "tinymanPoolAppId": {
                    "type": "uint64",
                    "key": "tinymanPoolAppId"
                },
                "totalAlpha": {
                    "type": "uint64",
                    "key": "totalAlpha"
                },
                "totalShares": {
                    "type": "uint64",
                    "key": "totalShares"
                },
                "totalYieldCompounded": {
                    "type": "uint64",
                    "key": "totalYieldCompounded"
                },
                "usdcAsset": {
                    "type": "uint64",
                    "key": "usdcAsset"
                }
            },
            "reserved": {}
        },
        "local": {
            "declared": {
                "userShares": {
                    "type": "uint64",
                    "key": "userShares"
                }
            },
            "reserved": {}
        }
    },
    "contract": {
        "name": "RareFiAlphaCompoundingVault",
        "methods": [
            {
                "name": "createVault",
                "args": [
                    {
                        "type": "uint64",
                        "name": "alphaAssetId"
                    },
                    {
                        "type": "uint64",
                        "name": "usdcAssetId"
                    },
                    {
                        "type": "uint64",
                        "name": "creatorFeeRate"
                    },
                    {
                        "type": "uint64",
                        "name": "minSwapThreshold"
                    },
                    {
                        "type": "uint64",
                        "name": "maxSlippageBps"
                    },
                    {
                        "type": "uint64",
                        "name": "tinymanPoolAppId"
                    },
                    {
                        "type": "address",
                        "name": "tinymanPoolAddress"
                    },
                    {
                        "type": "address",
                        "name": "rarefiAddress"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Create and initialize the vault\r\nCalled once at deployment"
            },
            {
                "name": "optInAssets",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Opt the contract into required assets\r\nMust be called by creator after deployment with:\r\n- 5.4 ALGO payment (stays in contract for MBR and operational fees)"
            },
            {
                "name": "optIn",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "User opts into the contract to enable local storage"
            },
            {
                "name": "closeOut",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "User closes out - withdraws all Alpha (deposit + yield)"
            },
            {
                "name": "deposit",
                "args": [
                    {
                        "type": "uint64",
                        "name": "slippageBps",
                        "desc": "- Slippage tolerance for auto-compound (ignored if no compound needed)"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "User deposits Alpha into the vault\r\nReceives shares proportional to their deposit\r\n\r\nIf USDC balance >= threshold and has existing depositors, automatically\r\ncompounds yield BEFORE processing deposit. This ensures yield goes to\r\nexisting depositors, not the new one."
            },
            {
                "name": "withdraw",
                "args": [
                    {
                        "type": "uint64",
                        "name": "shareAmount",
                        "desc": "- Shares to redeem (0 = withdraw all)"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "User withdraws Alpha from the vault\r\nReceives proportional share of vault's Alpha (original deposit + compounded yield)"
            },
            {
                "name": "claimCreator",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Creator claims their accumulated Alpha from fees"
            },
            {
                "name": "compoundYield",
                "args": [
                    {
                        "type": "uint64",
                        "name": "slippageBps",
                        "desc": "- Slippage tolerance in basis points (e.g., 50 = 0.5%, 100 = 1%)"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Swaps accumulated USDC to Alpha and compounds into vault\r\nThe Alpha is added to totalAlpha, increasing the value of all shares\r\nPermissionless - anyone can trigger, slippage capped by maxSlippageBps"
            },
            {
                "name": "getVaultStats",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "(uint64,uint64,uint64,uint64,uint64,uint64)",
                    "desc": "[totalShares, totalAlpha, creatorUnclaimedAlpha, usdcBalance, totalYieldCompounded, sharePrice]\r\nNote: sharePrice is scaled by SCALE (1e12) for precision"
                },
                "desc": "Get vault statistics"
            },
            {
                "name": "getUserAlphaBalance",
                "args": [
                    {
                        "type": "address",
                        "name": "user"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Get user's current Alpha balance (shares converted to Alpha)\r\nThis includes their original deposit + all compounded yield"
            },
            {
                "name": "getUserShares",
                "args": [
                    {
                        "type": "address",
                        "name": "user"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Get user's share balance"
            },
            {
                "name": "previewDeposit",
                "args": [
                    {
                        "type": "uint64",
                        "name": "alphaAmount"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Preview how many shares a deposit would receive"
            },
            {
                "name": "previewWithdraw",
                "args": [
                    {
                        "type": "uint64",
                        "name": "shareAmount"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Preview how much Alpha a share redemption would receive"
            },
            {
                "name": "getCompoundQuote",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "(uint64,uint64,uint64)",
                    "desc": "[usdcBalance, expectedAlphaOutput, minOutputAt50bps]"
                },
                "desc": "Preview compound - shows expected Alpha for current USDC balance"
            },
            {
                "name": "updateMinSwapThreshold",
                "args": [
                    {
                        "type": "uint64",
                        "name": "newThreshold"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Update the minimum swap threshold"
            },
            {
                "name": "updateMaxSlippage",
                "args": [
                    {
                        "type": "uint64",
                        "name": "newMaxSlippageBps"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Update the maximum slippage tolerance for swaps\r\nOnly callable by creator"
            },
            {
                "name": "updateCreatorFeeRate",
                "args": [
                    {
                        "type": "uint64",
                        "name": "newFeeRate"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Update the creator fee rate\r\nOnly callable by creator, constrained to 0-6% range"
            },
            {
                "name": "contributeFarm",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Anyone can contribute to the farm by sending Alpha\r\nFarm bonus is distributed proportionally during yield compounds\r\nThis allows projects/sponsors to boost yield for depositors\r\n\r\nExpects an asset transfer of alphaAsset before this call"
            },
            {
                "name": "setEmissionRatio",
                "args": [
                    {
                        "type": "uint64",
                        "name": "newRatio",
                        "desc": "- The emission ratio multiplier (e.g., 4000000 for aggressive distribution)"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Set the emission ratio (multiplier for dynamic farm rate calculation)\r\nOnly callable by creator or RareFi\r\nDynamic rate = farmBalance * emissionRatio / totalAlpha"
            },
            {
                "name": "getFarmStats",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "(uint64,uint64,uint64)",
                    "desc": "[farmBalance, emissionRatio, currentDynamicRate]"
                },
                "desc": "Get farm statistics including dynamic emission rate"
            }
        ],
        "networks": {}
    },
    "bare_call_config": {
        "update_application": "CALL",
        "delete_application": "CALL"
    }
}