{
    "hints": {
        "createVault(uint64,uint64,uint64,uint64,uint64,uint64,address,address)void": {
            "call_config": {
                "no_op": "CREATE"
            }
        },
        "optInAssets()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "optIn()void": {
            "call_config": {
                "opt_in": "CALL"
            }
        },
        "closeOut()void": {
            "call_config": {
                "close_out": "CALL"
            }
        },
        "deposit(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "withdraw(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "claim()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "claimCreator()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "swapYield(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getVaultStats()(uint64,uint64,uint64,uint64,uint64,uint64)": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getPendingYield(address)uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getUserDeposit(address)uint64": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getSwapQuote()(uint64,uint64,uint64)": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        },
        "updateMinSwapThreshold(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "updateTinymanPool(uint64,address)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "contributeFarm()void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "setFarmEmissionRate(uint64)void": {
            "call_config": {
                "no_op": "CALL"
            }
        },
        "getFarmStats()(uint64,uint64)": {
            "read_only": true,
            "call_config": {
                "no_op": "CALL"
            }
        }
    },
    "source": {
        "approval": "I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYXJjNC9pbmRleC5kLnRzOjpDb250cmFjdC5hcHByb3ZhbFByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBpbnRjYmxvY2sgMCAxIDQgOCAxMDAwMCAxMDAwMDAwMDAwIDIwMDAwMAogICAgYnl0ZWNibG9jayAiZmFybUJhbGFuY2UiICJ0b3RhbERlcG9zaXRzIiAieWllbGRBc3NldCIgInN3YXBBc3NldCIgInlpZWxkUGVyVG9rZW4iICJkZXBvc2l0ZWRBbW91bnQiICJjcmVhdG9yVW5jbGFpbWVkWWllbGQiICJmYXJtRW1pc3Npb25SYXRlIiAiZWFybmVkWWllbGQiICJjcmVhdG9yQWRkcmVzcyIgInRvdGFsWWllbGRHZW5lcmF0ZWQiICJkZXBvc2l0QXNzZXQiICJ0aW55bWFuUG9vbEFwcElkIiAidGlueW1hblBvb2xBZGRyZXNzIiAweDE1MWY3Yzc1ICJyYXJlZmlBZGRyZXNzIiAibWluU3dhcFRocmVzaG9sZCIgInVzZXJZaWVsZFBlclRva2VuIiAiY3JlYXRvckZlZVJhdGUiICJzd2FwIiAiZml4ZWQtaW5wdXQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMzCiAgICAvLyBleHBvcnQgY2xhc3MgUmFyZUZpVmF1bHQgZXh0ZW5kcyBhcmM0LkNvbnRyYWN0IHsKICAgIHR4biBOdW1BcHBBcmdzCiAgICBieiBtYWluX2JhcmVfcm91dGluZ0AyNwogICAgcHVzaGJ5dGVzcyAweDI5MzE0ZDk1IDB4NmE2OTFmZTIgLy8gbWV0aG9kICJvcHRJbigpdm9pZCIsIG1ldGhvZCAiY2xvc2VPdXQoKXZvaWQiCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAwCiAgICBtYXRjaCBtYWluX29wdEluX3JvdXRlQDMgbWFpbl9jbG9zZU91dF9yb3V0ZUA0CgptYWluX3N3aXRjaF9jYXNlX25leHRANToKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzMKICAgIC8vIGV4cG9ydCBjbGFzcyBSYXJlRmlWYXVsdCBleHRlbmRzIGFyYzQuQ29udHJhY3QgewogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBtdXN0IGJlIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBieiBtYWluX2NyZWF0ZV9Ob09wQDIzCiAgICBwdXNoYnl0ZXNzIDB4NDE0ZTQxYjUgMHg2ZTJlYmM5YiAweDIxZjFkZGZmIDB4ZjE1Nzc3MjYgMHhiYzk5NDQ5ZSAweDM2ZjNiMmY0IDB4MDAzNTk3YTIgMHhiMGRmNWMwZiAweDNmYjhhOTI3IDB4ZjQxZGEzNWQgMHhhYjZlZjczYiAweDFlZjdiNTg2IDB4YWZlYmZjYWMgMHgxMjc4NTA2NSAweDM4NDVhNzFkIC8vIG1ldGhvZCAib3B0SW5Bc3NldHMoKXZvaWQiLCBtZXRob2QgImRlcG9zaXQodWludDY0KXZvaWQiLCBtZXRob2QgIndpdGhkcmF3KHVpbnQ2NCl2b2lkIiwgbWV0aG9kICJjbGFpbSgpdm9pZCIsIG1ldGhvZCAiY2xhaW1DcmVhdG9yKCl2b2lkIiwgbWV0aG9kICJzd2FwWWllbGQodWludDY0KXZvaWQiLCBtZXRob2QgImdldFZhdWx0U3RhdHMoKSh1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCkiLCBtZXRob2QgImdldFBlbmRpbmdZaWVsZChhZGRyZXNzKXVpbnQ2NCIsIG1ldGhvZCAiZ2V0VXNlckRlcG9zaXQoYWRkcmVzcyl1aW50NjQiLCBtZXRob2QgImdldFN3YXBRdW90ZSgpKHVpbnQ2NCx1aW50NjQsdWludDY0KSIsIG1ldGhvZCAidXBkYXRlTWluU3dhcFRocmVzaG9sZCh1aW50NjQpdm9pZCIsIG1ldGhvZCAidXBkYXRlVGlueW1hblBvb2wodWludDY0LGFkZHJlc3Mpdm9pZCIsIG1ldGhvZCAiY29udHJpYnV0ZUZhcm0oKXZvaWQiLCBtZXRob2QgInNldEZhcm1FbWlzc2lvblJhdGUodWludDY0KXZvaWQiLCBtZXRob2QgImdldEZhcm1TdGF0cygpKHVpbnQ2NCx1aW50NjQpIgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAogICAgbWF0Y2ggb3B0SW5Bc3NldHMgZGVwb3NpdCB3aXRoZHJhdyBjbGFpbSBjbGFpbUNyZWF0b3Igc3dhcFlpZWxkIGdldFZhdWx0U3RhdHMgZ2V0UGVuZGluZ1lpZWxkIGdldFVzZXJEZXBvc2l0IGdldFN3YXBRdW90ZSB1cGRhdGVNaW5Td2FwVGhyZXNob2xkIHVwZGF0ZVRpbnltYW5Qb29sIGNvbnRyaWJ1dGVGYXJtIHNldEZhcm1FbWlzc2lvblJhdGUgZ2V0RmFybVN0YXRzCiAgICBlcnIKCm1haW5fY3JlYXRlX05vT3BAMjM6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMzCiAgICAvLyBleHBvcnQgY2xhc3MgUmFyZUZpVmF1bHQgZXh0ZW5kcyBhcmM0LkNvbnRyYWN0IHsKICAgIHB1c2hieXRlcyAweDRkMDNjYjI5IC8vIG1ldGhvZCAiY3JlYXRlVmF1bHQodWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQsYWRkcmVzcyxhZGRyZXNzKXZvaWQiCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAwCiAgICBtYXRjaCBjcmVhdGVWYXVsdAogICAgZXJyCgptYWluX2Nsb3NlT3V0X3JvdXRlQDQ6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI4OQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAnQ2xvc2VPdXQnIH0pCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBwdXNoaW50IDIgLy8gQ2xvc2VPdXQKICAgID09CiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgJiYKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gbXVzdCBiZSBDbG9zZU91dCAmJiBjYW4gb25seSBjYWxsIHdoZW4gbm90IGNyZWF0aW5nCiAgICBiIGNsb3NlT3V0CgptYWluX29wdEluX3JvdXRlQDM6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI3OAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAnT3B0SW4nIH0pCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnRjXzEgLy8gT3B0SW4KICAgID09CiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgJiYKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gbXVzdCBiZSBPcHRJbiAmJiBjYW4gb25seSBjYWxsIHdoZW4gbm90IGNyZWF0aW5nCiAgICBiIG9wdEluCgptYWluX2JhcmVfcm91dGluZ0AyNzoKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzMKICAgIC8vIGV4cG9ydCBjbGFzcyBSYXJlRmlWYXVsdCBleHRlbmRzIGFyYzQuQ29udHJhY3QgewogICAgaW50Y18yIC8vIFVwZGF0ZUFwcGxpY2F0aW9uCiAgICBwdXNoaW50IDUgLy8gRGVsZXRlQXBwbGljYXRpb24KICAgIHR4biBPbkNvbXBsZXRpb24KICAgIG1hdGNoIG1haW5fdXBkYXRlQXBwbGljYXRpb25AMjggbWFpbl9kZWxldGVBcHBsaWNhdGlvbkAyOQogICAgZXJyCgptYWluX2RlbGV0ZUFwcGxpY2F0aW9uQDI5OgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NjkKICAgIC8vIEBiYXJlbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAnRGVsZXRlQXBwbGljYXRpb24nIH0pCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGNhbiBvbmx5IGNhbGwgd2hlbiBub3QgY3JlYXRpbmcKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzcxCiAgICAvLyBhc3NlcnQoZmFsc2UsICdDb250cmFjdCBkZWxldGlvbiBkaXNhYmxlZCcpOwogICAgZXJyIC8vIENvbnRyYWN0IGRlbGV0aW9uIGRpc2FibGVkCgptYWluX3VwZGF0ZUFwcGxpY2F0aW9uQDI4OgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NjQKICAgIC8vIEBiYXJlbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAnVXBkYXRlQXBwbGljYXRpb24nIH0pCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGNhbiBvbmx5IGNhbGwgd2hlbiBub3QgY3JlYXRpbmcKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzY2CiAgICAvLyBhc3NlcnQoZmFsc2UsICdDb250cmFjdCB1cGRhdGVzIGRpc2FibGVkJyk7CiAgICBlcnIgLy8gQ29udHJhY3QgdXBkYXRlcyBkaXNhYmxlZAoKCi8vIFJhcmVGaVZhdWx0LmFsZ28udHM6OlJhcmVGaVZhdWx0LmNyZWF0ZVZhdWx0W3JvdXRpbmddKCkgLT4gdm9pZDoKY3JlYXRlVmF1bHQ6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjE3NQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgb25DcmVhdGU6ICdyZXF1aXJlJyB9KQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMyAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgZHVwCiAgICBsZW4KICAgIGludGNfMyAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwogICAgZHVwCiAgICBsZW4KICAgIGludGNfMyAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNAogICAgZHVwCiAgICBsZW4KICAgIGludGNfMyAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMyAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNgogICAgZHVwCiAgICBsZW4KICAgIGludGNfMyAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNwogICAgZHVwCiAgICBsZW4KICAgIHB1c2hpbnQgMzIgLy8gMzIKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuc3RhdGljX2FycmF5PGFyYzQudWludDgsIDMyPgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgOAogICAgZHVwCiAgICBsZW4KICAgIHB1c2hpbnQgMzIgLy8gMzIKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuc3RhdGljX2FycmF5PGFyYzQudWludDgsIDMyPgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxODcKICAgIC8vIGFzc2VydChjcmVhdG9yRmVlUmF0ZSA8PSBNQVhfRkVFX1JBVEUsICdDcmVhdG9yIGZlZSByYXRlIGV4Y2VlZHMgbWF4aW11bSAoMTAwJSknKTsKICAgIGRpZyA0CiAgICBwdXNoaW50IDEwMCAvLyAxMDAKICAgIDw9CiAgICBhc3NlcnQgLy8gQ3JlYXRvciBmZWUgcmF0ZSBleGNlZWRzIG1heGltdW0gKDEwMCUpCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjE4OAogICAgLy8gYXNzZXJ0KG1pblN3YXBUaHJlc2hvbGQgPj0gTUlOX1NXQVBfQU1PVU5ULCAnU3dhcCB0aHJlc2hvbGQgdG9vIGxvdycpOwogICAgZGlnIDMKICAgIGludGMgNiAvLyAyMDAwMDAKICAgID49CiAgICBhc3NlcnQgLy8gU3dhcCB0aHJlc2hvbGQgdG9vIGxvdwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxODkKICAgIC8vIGFzc2VydChkZXBvc2l0QXNzZXRJZCAhPT0gVWludDY0KDApLCAnSW52YWxpZCBkZXBvc2l0IGFzc2V0Jyk7CiAgICBkaWcgNwogICAgYXNzZXJ0IC8vIEludmFsaWQgZGVwb3NpdCBhc3NldAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxOTAKICAgIC8vIGFzc2VydCh5aWVsZEFzc2V0SWQgIT09IFVpbnQ2NCgwKSwgJ0ludmFsaWQgeWllbGQgYXNzZXQnKTsKICAgIGRpZyA2CiAgICBhc3NlcnQgLy8gSW52YWxpZCB5aWVsZCBhc3NldAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxOTEKICAgIC8vIGFzc2VydChzd2FwQXNzZXRJZCAhPT0gVWludDY0KDApLCAnSW52YWxpZCBzd2FwIGFzc2V0Jyk7CiAgICBkaWcgNQogICAgYXNzZXJ0IC8vIEludmFsaWQgc3dhcCBhc3NldAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxOTIKICAgIC8vIGFzc2VydCh0aW55bWFuUG9vbEFwcElkICE9PSBVaW50NjQoMCksICdJbnZhbGlkIFRpbnltYW4gcG9vbCBhcHAgSUQnKTsKICAgIGRpZyAyCiAgICBhc3NlcnQgLy8gSW52YWxpZCBUaW55bWFuIHBvb2wgYXBwIElECiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjE5NQogICAgLy8gYXNzZXJ0KGRlcG9zaXRBc3NldElkICE9PSB5aWVsZEFzc2V0SWQsICdEZXBvc2l0IGFuZCB5aWVsZCBhc3NldHMgbXVzdCBiZSBkaWZmZXJlbnQnKTsKICAgIGRpZyA3CiAgICBkaWcgNwogICAgIT0KICAgIGFzc2VydCAvLyBEZXBvc2l0IGFuZCB5aWVsZCBhc3NldHMgbXVzdCBiZSBkaWZmZXJlbnQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTk2CiAgICAvLyBhc3NlcnQoZGVwb3NpdEFzc2V0SWQgIT09IHN3YXBBc3NldElkLCAnRGVwb3NpdCBhbmQgc3dhcCBhc3NldHMgbXVzdCBiZSBkaWZmZXJlbnQnKTsKICAgIGRpZyA3CiAgICBkaWcgNgogICAgIT0KICAgIGFzc2VydCAvLyBEZXBvc2l0IGFuZCBzd2FwIGFzc2V0cyBtdXN0IGJlIGRpZmZlcmVudAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxOTcKICAgIC8vIGFzc2VydCh5aWVsZEFzc2V0SWQgIT09IHN3YXBBc3NldElkLCAnWWllbGQgYW5kIHN3YXAgYXNzZXRzIG11c3QgYmUgZGlmZmVyZW50Jyk7CiAgICBkaWcgNgogICAgZGlnIDYKICAgICE9CiAgICBhc3NlcnQgLy8gWWllbGQgYW5kIHN3YXAgYXNzZXRzIG11c3QgYmUgZGlmZmVyZW50CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM5CiAgICAvLyBkZXBvc2l0QXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgLy8gQWxwaGEgQVNBIElEICh3aGF0IHVzZXJzIGRlcG9zaXQpCiAgICBieXRlYyAxMSAvLyAiZGVwb3NpdEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyMDAKICAgIC8vIHRoaXMuZGVwb3NpdEFzc2V0LnZhbHVlID0gZGVwb3NpdEFzc2V0SWQ7CiAgICB1bmNvdmVyIDgKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQwCiAgICAvLyB5aWVsZEFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKHdoYXQgYWlyZHJvcHMgY29tZSBpbiBhcykKICAgIGJ5dGVjXzIgLy8gInlpZWxkQXNzZXQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIwMQogICAgLy8gdGhpcy55aWVsZEFzc2V0LnZhbHVlID0geWllbGRBc3NldElkOwogICAgdW5jb3ZlciA3CiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MQogICAgLy8gc3dhcEFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFByb2plY3QncyBBU0EgSUQgKHdoYXQgeWllbGQgaXMgc3dhcHBlZCB0bykKICAgIGJ5dGVjXzMgLy8gInN3YXBBc3NldCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjAyCiAgICAvLyB0aGlzLnN3YXBBc3NldC52YWx1ZSA9IHN3YXBBc3NldElkOwogICAgdW5jb3ZlciA2CiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NAogICAgLy8gY3JlYXRvckFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgIC8vIFZhdWx0IGNyZWF0b3Igd2hvIHJlY2VpdmVzIGZlZQogICAgYnl0ZWMgOSAvLyAiY3JlYXRvckFkZHJlc3MiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIwNQogICAgLy8gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZSA9IFR4bi5zZW5kZXI7CiAgICB0eG4gU2VuZGVyCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NQogICAgLy8gcmFyZWZpQWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7ICAgIC8vIFJhcmVGaSBwbGF0Zm9ybSBhZGRyZXNzIChjYW4gYWxzbyB0cmlnZ2VyIHN3YXBzKQogICAgYnl0ZWMgMTUgLy8gInJhcmVmaUFkZHJlc3MiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIwNgogICAgLy8gdGhpcy5yYXJlZmlBZGRyZXNzLnZhbHVlID0gcmFyZWZpQWRkcmVzczsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ2CiAgICAvLyBjcmVhdG9yRmVlUmF0ZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gMC0xMDAsIHBlcmNlbnRhZ2Ugb2YgeWllbGQgdG8gY3JlYXRvcgogICAgYnl0ZWMgMTggLy8gImNyZWF0b3JGZWVSYXRlIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyMDcKICAgIC8vIHRoaXMuY3JlYXRvckZlZVJhdGUudmFsdWUgPSBjcmVhdG9yRmVlUmF0ZTsKICAgIHVuY292ZXIgNAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDcKICAgIC8vIGNyZWF0b3JVbmNsYWltZWRZaWVsZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgLy8gQWNjdW11bGF0ZWQgeWllbGQgZm9yIGNyZWF0b3IgdG8gY2xhaW0KICAgIGJ5dGVjIDYgLy8gImNyZWF0b3JVbmNsYWltZWRZaWVsZCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjA4CiAgICAvLyB0aGlzLmNyZWF0b3JVbmNsYWltZWRZaWVsZC52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MAogICAgLy8gdG90YWxEZXBvc2l0cyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIFRvdGFsIEFscGhhIGRlcG9zaXRlZCBpbiB2YXVsdAogICAgYnl0ZWNfMSAvLyAidG90YWxEZXBvc2l0cyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjExCiAgICAvLyB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTEKICAgIC8vIHlpZWxkUGVyVG9rZW4gPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAvLyBBY2N1bXVsYXRvciBmb3IgeWllbGQgZGlzdHJpYnV0aW9uIChzY2FsZWQgYnkgU0NBTEUpCiAgICBieXRlYyA0IC8vICJ5aWVsZFBlclRva2VuIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyMTIKICAgIC8vIHRoaXMueWllbGRQZXJUb2tlbi52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MgogICAgLy8gbWluU3dhcFRocmVzaG9sZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgIC8vIE1pbmltdW0gVVNEQyBiZWZvcmUgc3dhcCBhbGxvd2VkCiAgICBieXRlYyAxNiAvLyAibWluU3dhcFRocmVzaG9sZCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjEzCiAgICAvLyB0aGlzLm1pblN3YXBUaHJlc2hvbGQudmFsdWUgPSBtaW5Td2FwVGhyZXNob2xkOwogICAgdW5jb3ZlciAzCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MwogICAgLy8gdG90YWxZaWVsZEdlbmVyYXRlZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgLy8gVG90YWwgeWllbGQgZ2VuZXJhdGVkIGZyb20gc3dhcHMgKHN3YXAgb3V0cHV0IGluIHN3YXBBc3NldCkKICAgIGJ5dGVjIDEwIC8vICJ0b3RhbFlpZWxkR2VuZXJhdGVkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyMTQKICAgIC8vIHRoaXMudG90YWxZaWVsZEdlbmVyYXRlZC52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NgogICAgLy8gdGlueW1hblBvb2xBcHBJZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgIC8vIFRpbnltYW4gVjIgcG9vbCBhcHAgSUQgKFVTREMvc3dhcEFzc2V0KQogICAgYnl0ZWMgMTIgLy8gInRpbnltYW5Qb29sQXBwSWQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIxNwogICAgLy8gdGhpcy50aW55bWFuUG9vbEFwcElkLnZhbHVlID0gdGlueW1hblBvb2xBcHBJZDsKICAgIHVuY292ZXIgMgogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTcKICAgIC8vIHRpbnltYW5Qb29sQWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7IC8vIFRpbnltYW4gcG9vbCBhZGRyZXNzCiAgICBieXRlYyAxMyAvLyAidGlueW1hblBvb2xBZGRyZXNzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyMTgKICAgIC8vIHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlID0gdGlueW1hblBvb2xBZGRyZXNzOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjAKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIHN3YXBBc3NldCBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzAgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyMjEKICAgIC8vIHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjEKICAgIC8vIGZhcm1FbWlzc2lvblJhdGUgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIEJhc2lzIHBvaW50cyBvZiBzd2FwIG91dHB1dCB0byBhZGQgZnJvbSBmYXJtIChlLmcuLCAxMDAwID0gMTAlKQogICAgYnl0ZWMgNyAvLyAiZmFybUVtaXNzaW9uUmF0ZSIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjIyCiAgICAvLyB0aGlzLmZhcm1FbWlzc2lvblJhdGUudmFsdWUgPSBVaW50NjQoMCk7IC8vIERpc2FibGVkIGJ5IGRlZmF1bHQKICAgIGludGNfMCAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxNzUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IG9uQ3JlYXRlOiAncmVxdWlyZScgfSkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjpSYXJlRmlWYXVsdC5vcHRJbkFzc2V0c1tyb3V0aW5nXSgpIC0+IHZvaWQ6Cm9wdEluQXNzZXRzOgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyMzIKICAgIC8vIGFzc2VydChUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlLCAnT25seSBjcmVhdG9yIGNhbiBvcHQtaW4gYXNzZXRzJyk7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NAogICAgLy8gY3JlYXRvckFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgIC8vIFZhdWx0IGNyZWF0b3Igd2hvIHJlY2VpdmVzIGZlZQogICAgYnl0ZWMgOSAvLyAiY3JlYXRvckFkZHJlc3MiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIzMgogICAgLy8gYXNzZXJ0KFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWUsICdPbmx5IGNyZWF0b3IgY2FuIG9wdC1pbiBhc3NldHMnKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIE9ubHkgY3JlYXRvciBjYW4gb3B0LWluIGFzc2V0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyMzQKICAgIC8vIGNvbnN0IGFwcEFkZHI6IEFjY291bnQgPSBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzczsKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIzOAogICAgLy8gY29uc3QgY3VycmVudEluZGV4ID0gVHhuLmdyb3VwSW5kZXg7CiAgICB0eG4gR3JvdXBJbmRleAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyMzkKICAgIC8vIGFzc2VydChjdXJyZW50SW5kZXggPj0gVWludDY0KDEpLCAnQXBwIGNhbGwgbXVzdCBmb2xsb3cgcGF5bWVudCcpOwogICAgZHVwCiAgICBhc3NlcnQgLy8gQXBwIGNhbGwgbXVzdCBmb2xsb3cgcGF5bWVudAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyNDEKICAgIC8vIGNvbnN0IGFsZ29QYXltZW50ID0gZ3R4bi5QYXltZW50VHhuKGN1cnJlbnRJbmRleCAtIFVpbnQ2NCgxKSk7CiAgICBpbnRjXzEgLy8gMQogICAgLQogICAgZHVwCiAgICBndHhucyBUeXBlRW51bQogICAgaW50Y18xIC8vIHBheQogICAgPT0KICAgIGFzc2VydCAvLyB0cmFuc2FjdGlvbiB0eXBlIGlzIHBheQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyNDIKICAgIC8vIGFzc2VydChhbGdvUGF5bWVudC5yZWNlaXZlciA9PT0gYXBwQWRkciwgJ1BheW1lbnQgbXVzdCBiZSB0byBhcHAnKTsKICAgIGR1cAogICAgZ3R4bnMgUmVjZWl2ZXIKICAgIGRpZyAyCiAgICA9PQogICAgYXNzZXJ0IC8vIFBheW1lbnQgbXVzdCBiZSB0byBhcHAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjQzCiAgICAvLyBhc3NlcnQoYWxnb1BheW1lbnQuYW1vdW50ID49IHRvdGFsUmVxdWlyZWQsICdJbnN1ZmZpY2llbnQgQUxHTyAobmVlZCA1LjUgQUxHTyknKTsKICAgIGR1cAogICAgZ3R4bnMgQW1vdW50CiAgICBwdXNoaW50IDU1MDAwMDAgLy8gNTUwMDAwMAogICAgPj0KICAgIGFzc2VydCAvLyBJbnN1ZmZpY2llbnQgQUxHTyAobmVlZCA1LjUgQUxHTykKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjQ0CiAgICAvLyBhc3NlcnQoYWxnb1BheW1lbnQuc2VuZGVyID09PSBUeG4uc2VuZGVyLCAnUGF5bWVudCBtdXN0IGJlIGZyb20gY2FsbGVyJyk7CiAgICBndHhucyBTZW5kZXIKICAgIHR4biBTZW5kZXIKICAgID09CiAgICBhc3NlcnQgLy8gUGF5bWVudCBtdXN0IGJlIGZyb20gY2FsbGVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI0Ny0yNTIKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IGFwcEFkZHIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5kZXBvc2l0QXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyNDkKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5kZXBvc2l0QXNzZXQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzkKICAgIC8vIGRlcG9zaXRBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAvLyBBbHBoYSBBU0EgSUQgKHdoYXQgdXNlcnMgZGVwb3NpdCkKICAgIGJ5dGVjIDExIC8vICJkZXBvc2l0QXNzZXQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI0OQogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLmRlcG9zaXRBc3NldC52YWx1ZSksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyNTAKICAgIC8vIGFzc2V0QW1vdW50OiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBBc3NldEFtb3VudAogICAgaXR4bl9maWVsZCBYZmVyQXNzZXQKICAgIGR1cAogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI0Ny0yNTIKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IGFwcEFkZHIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5kZXBvc2l0QXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaW50Y18yIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjUxCiAgICAvLyBmZWU6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyNDctMjUyCiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBhcHBBZGRyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuZGVwb3NpdEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI1NS0yNjAKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IGFwcEFkZHIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy55aWVsZEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjU3CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMueWllbGRBc3NldC52YWx1ZSksCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MAogICAgLy8geWllbGRBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFVTREMgQVNBIElEICh3aGF0IGFpcmRyb3BzIGNvbWUgaW4gYXMpCiAgICBieXRlY18yIC8vICJ5aWVsZEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyNTcKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy55aWVsZEFzc2V0LnZhbHVlKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI1OAogICAgLy8gYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgZHVwCiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjU1LTI2MAogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogYXBwQWRkciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnlpZWxkQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaW50Y18yIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjU5CiAgICAvLyBmZWU6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyNTUtMjYwCiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBhcHBBZGRyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMueWllbGRBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBVaW50NjQoMCksCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyNjMtMjY4CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBhcHBBZGRyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjY1CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQxCiAgICAvLyBzd2FwQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gUHJvamVjdCdzIEFTQSBJRCAod2hhdCB5aWVsZCBpcyBzd2FwcGVkIHRvKQogICAgYnl0ZWNfMyAvLyAic3dhcEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyNjUKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjY2CiAgICAvLyBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjYzLTI2OAogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogYXBwQWRkciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBVaW50NjQoMCksCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpbnRjXzIgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyNjcKICAgIC8vIGZlZTogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI2My0yNjgKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IGFwcEFkZHIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjMwCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaVZhdWx0LmFsZ28udHM6OlJhcmVGaVZhdWx0Lm9wdEluW3JvdXRpbmddKCkgLT4gdm9pZDoKb3B0SW46CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI4MQogICAgLy8gdGhpcy5kZXBvc2l0ZWRBbW91bnQoVHhuLnNlbmRlcikudmFsdWUgPSBVaW50NjQoMCk7CiAgICB0eG4gU2VuZGVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY3CiAgICAvLyBkZXBvc2l0ZWRBbW91bnQgPSBMb2NhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gVXNlcidzIEFscGhhIGJhbGFuY2UgaW4gdmF1bHQKICAgIGJ5dGVjIDUgLy8gImRlcG9zaXRlZEFtb3VudCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjgxCiAgICAvLyB0aGlzLmRlcG9zaXRlZEFtb3VudChUeG4uc2VuZGVyKS52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBhcHBfbG9jYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI4MgogICAgLy8gdGhpcy51c2VyWWllbGRQZXJUb2tlbihUeG4uc2VuZGVyKS52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjgKICAgIC8vIHVzZXJZaWVsZFBlclRva2VuID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBTbmFwc2hvdCBvZiB5aWVsZFBlclRva2VuIGF0IGxhc3QgYWN0aW9uCiAgICBieXRlYyAxNyAvLyAidXNlcllpZWxkUGVyVG9rZW4iCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI4MgogICAgLy8gdGhpcy51c2VyWWllbGRQZXJUb2tlbihUeG4uc2VuZGVyKS52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBhcHBfbG9jYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI4MwogICAgLy8gdGhpcy5lYXJuZWRZaWVsZChUeG4uc2VuZGVyKS52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjkKICAgIC8vIGVhcm5lZFlpZWxkID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBBY2N1bXVsYXRlZCB5aWVsZCBub3QgeWV0IGNsYWltZWQKICAgIGJ5dGVjIDggLy8gImVhcm5lZFlpZWxkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyODMKICAgIC8vIHRoaXMuZWFybmVkWWllbGQoVHhuLnNlbmRlcikudmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2xvY2FsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyNzgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IGFsbG93QWN0aW9uczogJ09wdEluJyB9KQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaVZhdWx0LmFsZ28udHM6OlJhcmVGaVZhdWx0LmNsb3NlT3V0W3JvdXRpbmddKCkgLT4gdm9pZDoKY2xvc2VPdXQ6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI5MgogICAgLy8gdGhpcy51cGRhdGVFYXJuZWRZaWVsZChUeG4uc2VuZGVyKTsKICAgIHR4biBTZW5kZXIKICAgIGNhbGxzdWIgdXBkYXRlRWFybmVkWWllbGQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mjk0CiAgICAvLyBjb25zdCB1c2VyRGVwb3NpdCA9IHRoaXMuZGVwb3NpdGVkQW1vdW50KFR4bi5zZW5kZXIpLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjcKICAgIC8vIGRlcG9zaXRlZEFtb3VudCA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAvLyBVc2VyJ3MgQWxwaGEgYmFsYW5jZSBpbiB2YXVsdAogICAgYnl0ZWMgNSAvLyAiZGVwb3NpdGVkQW1vdW50IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyOTQKICAgIC8vIGNvbnN0IHVzZXJEZXBvc2l0ID0gdGhpcy5kZXBvc2l0ZWRBbW91bnQoVHhuLnNlbmRlcikudmFsdWU7CiAgICBhcHBfbG9jYWxfZ2V0X2V4CiAgICBzd2FwCiAgICBkdXAKICAgIHVuY292ZXIgMgogICAgYXNzZXJ0IC8vIGNoZWNrIExvY2FsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI5NQogICAgLy8gY29uc3QgdXNlcllpZWxkID0gdGhpcy5lYXJuZWRZaWVsZChUeG4uc2VuZGVyKS52YWx1ZTsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY5CiAgICAvLyBlYXJuZWRZaWVsZCA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gQWNjdW11bGF0ZWQgeWllbGQgbm90IHlldCBjbGFpbWVkCiAgICBieXRlYyA4IC8vICJlYXJuZWRZaWVsZCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mjk1CiAgICAvLyBjb25zdCB1c2VyWWllbGQgPSB0aGlzLmVhcm5lZFlpZWxkKFR4bi5zZW5kZXIpLnZhbHVlOwogICAgYXBwX2xvY2FsX2dldF9leAogICAgc3dhcAogICAgY292ZXIgMgogICAgYXNzZXJ0IC8vIGNoZWNrIExvY2FsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI5OAogICAgLy8gaWYgKHVzZXJEZXBvc2l0ID4gVWludDY0KDApKSB7CiAgICBieiBjbG9zZU91dF9hZnRlcl9pZl9lbHNlQDQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mjk5CiAgICAvLyB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgPSB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgLSB1c2VyRGVwb3NpdDsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUwCiAgICAvLyB0b3RhbERlcG9zaXRzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgLy8gVG90YWwgQWxwaGEgZGVwb3NpdGVkIGluIHZhdWx0CiAgICBieXRlY18xIC8vICJ0b3RhbERlcG9zaXRzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyOTkKICAgIC8vIHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSA9IHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSAtIHVzZXJEZXBvc2l0OwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGRpZyAyCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIC0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTAKICAgIC8vIHRvdGFsRGVwb3NpdHMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAvLyBUb3RhbCBBbHBoYSBkZXBvc2l0ZWQgaW4gdmF1bHQKICAgIGJ5dGVjXzEgLy8gInRvdGFsRGVwb3NpdHMiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI5OQogICAgLy8gdGhpcy50b3RhbERlcG9zaXRzLnZhbHVlID0gdGhpcy50b3RhbERlcG9zaXRzLnZhbHVlIC0gdXNlckRlcG9zaXQ7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMDEtMzA2CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuZGVwb3NpdEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IHVzZXJEZXBvc2l0LAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMDIKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICB0eG4gU2VuZGVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMwMwogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLmRlcG9zaXRBc3NldC52YWx1ZSksCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozOQogICAgLy8gZGVwb3NpdEFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgIC8vIEFscGhhIEFTQSBJRCAod2hhdCB1c2VycyBkZXBvc2l0KQogICAgYnl0ZWMgMTEgLy8gImRlcG9zaXRBc3NldCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzAzCiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuZGVwb3NpdEFzc2V0LnZhbHVlKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICB1bmNvdmVyIDIKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzAxLTMwNgogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLmRlcG9zaXRBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiB1c2VyRGVwb3NpdCwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGludGNfMiAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMwNQogICAgLy8gZmVlOiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzAxLTMwNgogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLmRlcG9zaXRBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiB1c2VyRGVwb3NpdCwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CgpjbG9zZU91dF9hZnRlcl9pZl9lbHNlQDQ6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMxMAogICAgLy8gaWYgKHVzZXJZaWVsZCA+IFVpbnQ2NCgwKSkgewogICAgZHVwCiAgICBieiBjbG9zZU91dF9hZnRlcl9pZl9lbHNlQDcKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzExLTMxNgogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiB1c2VyWWllbGQsCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMxMgogICAgLy8gYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzEzCiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQxCiAgICAvLyBzd2FwQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gUHJvamVjdCdzIEFTQSBJRCAod2hhdCB5aWVsZCBpcyBzd2FwcGVkIHRvKQogICAgYnl0ZWNfMyAvLyAic3dhcEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMTMKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGRpZyAyCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMxMS0zMTYKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogdXNlcllpZWxkLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaW50Y18yIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzE1CiAgICAvLyBmZWU6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMTEtMzE2CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IHVzZXJZaWVsZCwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CgpjbG9zZU91dF9hZnRlcl9pZl9lbHNlQDc6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI4OQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAnQ2xvc2VPdXQnIH0pCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQuZGVwb3NpdFtyb3V0aW5nXSgpIC0+IHZvaWQ6CmRlcG9zaXQ6CiAgICBwdXNoYnl0ZXMgIiIKICAgIGR1cG4gMwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMzQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18zIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICBkdXAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzM2CiAgICAvLyBhc3NlcnQoc2xpcHBhZ2VCcHMgPD0gTUFYX1NMSVBQQUdFX0JQUywgJ1NsaXBwYWdlIHRvbyBoaWdoJyk7CiAgICBpbnRjIDQgLy8gMTAwMDAKICAgIDw9CiAgICBhc3NlcnQgLy8gU2xpcHBhZ2UgdG9vIGhpZ2gKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzM4CiAgICAvLyBjb25zdCBhcHBBZGRyOiBBY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3M7CiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgZHVwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMzOQogICAgLy8gY29uc3QgdXNkY0JhbGFuY2UgPSBBc3NldCh0aGlzLnlpZWxkQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MAogICAgLy8geWllbGRBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFVTREMgQVNBIElEICh3aGF0IGFpcmRyb3BzIGNvbWUgaW4gYXMpCiAgICBieXRlY18yIC8vICJ5aWVsZEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMzkKICAgIC8vIGNvbnN0IHVzZGNCYWxhbmNlID0gQXNzZXQodGhpcy55aWVsZEFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGFzc2V0X2hvbGRpbmdfZ2V0IEFzc2V0QmFsYW5jZQogICAgc3dhcAogICAgZHVwCiAgICB1bmNvdmVyIDIKICAgIGFzc2VydCAvLyBhY2NvdW50IG9wdGVkIGludG8gYXNzZXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzQzCiAgICAvLyBpZiAodXNkY0JhbGFuY2UgPj0gdGhpcy5taW5Td2FwVGhyZXNob2xkLnZhbHVlICYmIHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSA+IFVpbnQ2NCgwKSkgewogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTIKICAgIC8vIG1pblN3YXBUaHJlc2hvbGQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBNaW5pbXVtIFVTREMgYmVmb3JlIHN3YXAgYWxsb3dlZAogICAgYnl0ZWMgMTYgLy8gIm1pblN3YXBUaHJlc2hvbGQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM0MwogICAgLy8gaWYgKHVzZGNCYWxhbmNlID49IHRoaXMubWluU3dhcFRocmVzaG9sZC52YWx1ZSAmJiB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgPiBVaW50NjQoMCkpIHsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA+PQogICAgYnogZGVwb3NpdF9hZnRlcl9pZl9lbHNlQDE0CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MAogICAgLy8gdG90YWxEZXBvc2l0cyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIFRvdGFsIEFscGhhIGRlcG9zaXRlZCBpbiB2YXVsdAogICAgYnl0ZWNfMSAvLyAidG90YWxEZXBvc2l0cyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzQzCiAgICAvLyBpZiAodXNkY0JhbGFuY2UgPj0gdGhpcy5taW5Td2FwVGhyZXNob2xkLnZhbHVlICYmIHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSA+IFVpbnQ2NCgwKSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ6IGRlcG9zaXRfYWZ0ZXJfaWZfZWxzZUAxNAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNDUKICAgIC8vIGNvbnN0IGV4cGVjdGVkT3V0cHV0ID0gdGhpcy5nZXRFeHBlY3RlZFN3YXBPdXRwdXQodXNkY0JhbGFuY2UpOwogICAgZHVwbiAyCiAgICBjYWxsc3ViIGdldEV4cGVjdGVkU3dhcE91dHB1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNDYKICAgIC8vIGFzc2VydChleHBlY3RlZE91dHB1dCA+IFVpbnQ2NCgwKSwgJ0V4cGVjdGVkIG91dHB1dCBpcyB6ZXJvJyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBFeHBlY3RlZCBvdXRwdXQgaXMgemVybwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNDkKICAgIC8vIGNvbnN0IG1pbkFtb3VudE91dCA9IHRoaXMubXVsRGl2Rmxvb3IoZXhwZWN0ZWRPdXRwdXQsIEZFRV9CUFNfQkFTRSAtIHNsaXBwYWdlQnBzLCBGRUVfQlBTX0JBU0UpOwogICAgaW50YyA0IC8vIDEwMDAwCiAgICBkaWcgNQogICAgLQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4MAogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KG4xLCBuMik7CiAgICBtdWx3CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgxCiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzQ5CiAgICAvLyBjb25zdCBtaW5BbW91bnRPdXQgPSB0aGlzLm11bERpdkZsb29yKGV4cGVjdGVkT3V0cHV0LCBGRUVfQlBTX0JBU0UgLSBzbGlwcGFnZUJwcywgRkVFX0JQU19CQVNFKTsKICAgIGludGMgNCAvLyAxMDAwMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4MQogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4MgogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzUyCiAgICAvLyBjb25zdCBzd2FwQXNzZXRCZWZvcmUgPSBBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQxCiAgICAvLyBzd2FwQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gUHJvamVjdCdzIEFTQSBJRCAod2hhdCB5aWVsZCBpcyBzd2FwcGVkIHRvKQogICAgYnl0ZWNfMyAvLyAic3dhcEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNTIKICAgIC8vIGNvbnN0IHN3YXBBc3NldEJlZm9yZSA9IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGRpZyA0CiAgICBkdXAKICAgIGNvdmVyIDQKICAgIGRpZyAxCiAgICBhc3NldF9ob2xkaW5nX2dldCBBc3NldEJhbGFuY2UKICAgIGFzc2VydCAvLyBhY2NvdW50IG9wdGVkIGludG8gYXNzZXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzU1LTM2OQogICAgLy8gaXR4bi5zdWJtaXRHcm91cCgKICAgIC8vICAgaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiB0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZSwKICAgIC8vICAgICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMueWllbGRBc3NldC52YWx1ZSksCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IHVzZGNCYWxhbmNlLAogICAgLy8gICAgIGZlZTogVWludDY0KDApLAogICAgLy8gICB9KSwKICAgIC8vICAgaXR4bi5hcHBsaWNhdGlvbkNhbGwoewogICAgLy8gICAgIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgLy8gICAgIGFwcEFyZ3M6IFtCeXRlcygnc3dhcCcpLCBCeXRlcygnZml4ZWQtaW5wdXQnKSwgaXRvYihtaW5BbW91bnRPdXQpXSwKICAgIC8vICAgICBhc3NldHM6IFtBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSldLAogICAgLy8gICAgIGFjY291bnRzOiBbdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWVdLAogICAgLy8gICAgIGZlZTogVWludDY0KDApLAogICAgLy8gICB9KSwKICAgIC8vICk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM1NwogICAgLy8gYXNzZXRSZWNlaXZlcjogdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWUsCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NwogICAgLy8gdGlueW1hblBvb2xBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgLy8gVGlueW1hbiBwb29sIGFkZHJlc3MKICAgIGJ5dGVjIDEzIC8vICJ0aW55bWFuUG9vbEFkZHJlc3MiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM1NwogICAgLy8gYXNzZXRSZWNlaXZlcjogdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWUsCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNTgKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy55aWVsZEFzc2V0LnZhbHVlKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQwCiAgICAvLyB5aWVsZEFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKHdoYXQgYWlyZHJvcHMgY29tZSBpbiBhcykKICAgIGJ5dGVjXzIgLy8gInlpZWxkQXNzZXQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM1OAogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLnlpZWxkQXNzZXQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIHVuY292ZXIgNQogICAgaXR4bl9maWVsZCBBc3NldEFtb3VudAogICAgaXR4bl9maWVsZCBYZmVyQXNzZXQKICAgIGR1cAogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM1Ni0zNjEKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMueWllbGRBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiB1c2RjQmFsYW5jZSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KSwKICAgIGludGNfMiAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM2MAogICAgLy8gZmVlOiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzYyLTM2OAogICAgLy8gaXR4bi5hcHBsaWNhdGlvbkNhbGwoewogICAgLy8gICBhcHBJZDogQXBwbGljYXRpb24odGhpcy50aW55bWFuUG9vbEFwcElkLnZhbHVlKSwKICAgIC8vICAgYXBwQXJnczogW0J5dGVzKCdzd2FwJyksIEJ5dGVzKCdmaXhlZC1pbnB1dCcpLCBpdG9iKG1pbkFtb3VudE91dCldLAogICAgLy8gICBhc3NldHM6IFtBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSldLAogICAgLy8gICBhY2NvdW50czogW3RoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlXSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KSwKICAgIGl0eG5fbmV4dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNjMKICAgIC8vIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTYKICAgIC8vIHRpbnltYW5Qb29sQXBwSWQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBUaW55bWFuIFYyIHBvb2wgYXBwIElEIChVU0RDL3N3YXBBc3NldCkKICAgIGJ5dGVjIDEyIC8vICJ0aW55bWFuUG9vbEFwcElkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNjMKICAgIC8vIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzY0CiAgICAvLyBhcHBBcmdzOiBbQnl0ZXMoJ3N3YXAnKSwgQnl0ZXMoJ2ZpeGVkLWlucHV0JyksIGl0b2IobWluQW1vdW50T3V0KV0sCiAgICBkaWcgNAogICAgaXRvYgogICAgdW5jb3ZlciAyCiAgICBpdHhuX2ZpZWxkIEFjY291bnRzCiAgICBkaWcgMwogICAgaXR4bl9maWVsZCBBc3NldHMKICAgIGJ5dGVjIDE5IC8vICJzd2FwIgogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGJ5dGVjIDIwIC8vICJmaXhlZC1pbnB1dCIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM2Mi0zNjgKICAgIC8vIGl0eG4uYXBwbGljYXRpb25DYWxsKHsKICAgIC8vICAgYXBwSWQ6IEFwcGxpY2F0aW9uKHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZSksCiAgICAvLyAgIGFwcEFyZ3M6IFtCeXRlcygnc3dhcCcpLCBCeXRlcygnZml4ZWQtaW5wdXQnKSwgaXRvYihtaW5BbW91bnRPdXQpXSwKICAgIC8vICAgYXNzZXRzOiBbQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpXSwKICAgIC8vICAgYWNjb3VudHM6IFt0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZV0sCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSksCiAgICBwdXNoaW50IDYgLy8gNgogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNjcKICAgIC8vIGZlZTogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM1NS0zNjkKICAgIC8vIGl0eG4uc3VibWl0R3JvdXAoCiAgICAvLyAgIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWUsCiAgICAvLyAgICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnlpZWxkQXNzZXQudmFsdWUpLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiB1c2RjQmFsYW5jZSwKICAgIC8vICAgICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vICAgfSksCiAgICAvLyAgIGl0eG4uYXBwbGljYXRpb25DYWxsKHsKICAgIC8vICAgICBhcHBJZDogQXBwbGljYXRpb24odGhpcy50aW55bWFuUG9vbEFwcElkLnZhbHVlKSwKICAgIC8vICAgICBhcHBBcmdzOiBbQnl0ZXMoJ3N3YXAnKSwgQnl0ZXMoJ2ZpeGVkLWlucHV0JyksIGl0b2IobWluQW1vdW50T3V0KV0sCiAgICAvLyAgICAgYXNzZXRzOiBbQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpXSwKICAgIC8vICAgICBhY2NvdW50czogW3RoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlXSwKICAgIC8vICAgICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vICAgfSksCiAgICAvLyApOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzcyCiAgICAvLyBjb25zdCBzd2FwQXNzZXRBZnRlcjogdWludDY0ID0gQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICB1bmNvdmVyIDMKICAgIHVuY292ZXIgMgogICAgYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCiAgICBhc3NlcnQgLy8gYWNjb3VudCBvcHRlZCBpbnRvIGFzc2V0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM3MwogICAgLy8gY29uc3Qgc3dhcE91dHB1dDogdWludDY0ID0gc3dhcEFzc2V0QWZ0ZXIgLSBzd2FwQXNzZXRCZWZvcmU7CiAgICBzd2FwCiAgICAtCiAgICBkdXAKICAgIGJ1cnkgNwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNzQKICAgIC8vIGFzc2VydChzd2FwT3V0cHV0ID49IG1pbkFtb3VudE91dCwgJ1N3YXAgb3V0cHV0IGJlbG93IG1pbmltdW0nKTsKICAgIDw9CiAgICBhc3NlcnQgLy8gU3dhcCBvdXRwdXQgYmVsb3cgbWluaW11bQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNzcKICAgIC8vIGxldCBmYXJtQm9udXM6IHVpbnQ2NCA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBidXJ5IDcKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mzc4CiAgICAvLyBpZiAodGhpcy5mYXJtRW1pc3Npb25SYXRlLnZhbHVlID4gVWludDY0KDApICYmIHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPiBVaW50NjQoMCkpIHsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYxCiAgICAvLyBmYXJtRW1pc3Npb25SYXRlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyBCYXNpcyBwb2ludHMgb2Ygc3dhcCBvdXRwdXQgdG8gYWRkIGZyb20gZmFybSAoZS5nLiwgMTAwMCA9IDEwJSkKICAgIGJ5dGVjIDcgLy8gImZhcm1FbWlzc2lvblJhdGUiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM3OAogICAgLy8gaWYgKHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSA+IFVpbnQ2NCgwKSAmJiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnogZGVwb3NpdF9hZnRlcl9pZl9lbHNlQDExCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgc3dhcEFzc2V0IGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMCAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM3OAogICAgLy8gaWYgKHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSA+IFVpbnQ2NCgwKSAmJiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnogZGVwb3NpdF9hZnRlcl9pZl9lbHNlQDExCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM3OQogICAgLy8gY29uc3QgcmVxdWVzdGVkQm9udXMgPSB0aGlzLm11bERpdkZsb29yKHN3YXBPdXRwdXQsIHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSwgRkVFX0JQU19CQVNFKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYxCiAgICAvLyBmYXJtRW1pc3Npb25SYXRlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyBCYXNpcyBwb2ludHMgb2Ygc3dhcCBvdXRwdXQgdG8gYWRkIGZyb20gZmFybSAoZS5nLiwgMTAwMCA9IDEwJSkKICAgIGJ5dGVjIDcgLy8gImZhcm1FbWlzc2lvblJhdGUiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM3OQogICAgLy8gY29uc3QgcmVxdWVzdGVkQm9udXMgPSB0aGlzLm11bERpdkZsb29yKHN3YXBPdXRwdXQsIHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSwgRkVFX0JQU19CQVNFKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgwCiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGRpZyA1CiAgICBtdWx3CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgxCiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mzc5CiAgICAvLyBjb25zdCByZXF1ZXN0ZWRCb251cyA9IHRoaXMubXVsRGl2Rmxvb3Ioc3dhcE91dHB1dCwgdGhpcy5mYXJtRW1pc3Npb25SYXRlLnZhbHVlLCBGRUVfQlBTX0JBU0UpOwogICAgaW50YyA0IC8vIDEwMDAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgxCiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgZGl2bW9kdwogICAgcG9wbiAyCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGJ1cnkgOAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4MgogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzgwCiAgICAvLyBmYXJtQm9udXMgPSByZXF1ZXN0ZWRCb251cyA8IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPyByZXF1ZXN0ZWRCb251cyA6IHRoaXMuZmFybUJhbGFuY2UudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgc3dhcEFzc2V0IGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMCAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM4MAogICAgLy8gZmFybUJvbnVzID0gcmVxdWVzdGVkQm9udXMgPCB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID8gcmVxdWVzdGVkQm9udXMgOiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIDwKICAgIGJ6IGRlcG9zaXRfdGVybmFyeV9mYWxzZUA5CiAgICBkaWcgNQogICAgYnVyeSA3CgpkZXBvc2l0X3Rlcm5hcnlfbWVyZ2VAMTA6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM4MQogICAgLy8gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA9IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgLSBmYXJtQm9udXM7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgc3dhcEFzc2V0IGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMCAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM4MQogICAgLy8gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA9IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgLSBmYXJtQm9udXM7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZGlnIDcKICAgIC0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjAKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIHN3YXBBc3NldCBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzAgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozODEKICAgIC8vIHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPSB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlIC0gZmFybUJvbnVzOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKCmRlcG9zaXRfYWZ0ZXJfaWZfZWxzZUAxMToKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mzg1CiAgICAvLyBjb25zdCB0b3RhbE91dHB1dDogdWludDY0ID0gc3dhcE91dHB1dCArIGZhcm1Cb251czsKICAgIGRpZyA0CiAgICBkaWcgNwogICAgKwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozODgKICAgIC8vIHRoaXMudG90YWxZaWVsZEdlbmVyYXRlZC52YWx1ZSA9IHRoaXMudG90YWxZaWVsZEdlbmVyYXRlZC52YWx1ZSArIHRvdGFsT3V0cHV0OwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTMKICAgIC8vIHRvdGFsWWllbGRHZW5lcmF0ZWQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIFRvdGFsIHlpZWxkIGdlbmVyYXRlZCBmcm9tIHN3YXBzIChzd2FwIG91dHB1dCBpbiBzd2FwQXNzZXQpCiAgICBieXRlYyAxMCAvLyAidG90YWxZaWVsZEdlbmVyYXRlZCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mzg4CiAgICAvLyB0aGlzLnRvdGFsWWllbGRHZW5lcmF0ZWQudmFsdWUgPSB0aGlzLnRvdGFsWWllbGRHZW5lcmF0ZWQudmFsdWUgKyB0b3RhbE91dHB1dDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBkaWcgMQogICAgKwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MwogICAgLy8gdG90YWxZaWVsZEdlbmVyYXRlZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgLy8gVG90YWwgeWllbGQgZ2VuZXJhdGVkIGZyb20gc3dhcHMgKHN3YXAgb3V0cHV0IGluIHN3YXBBc3NldCkKICAgIGJ5dGVjIDEwIC8vICJ0b3RhbFlpZWxkR2VuZXJhdGVkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozODgKICAgIC8vIHRoaXMudG90YWxZaWVsZEdlbmVyYXRlZC52YWx1ZSA9IHRoaXMudG90YWxZaWVsZEdlbmVyYXRlZC52YWx1ZSArIHRvdGFsT3V0cHV0OwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzkxCiAgICAvLyBjb25zdCBjcmVhdG9yQ3V0OiB1aW50NjQgPSB0aGlzLm11bERpdkZsb29yKHRvdGFsT3V0cHV0LCB0aGlzLmNyZWF0b3JGZWVSYXRlLnZhbHVlLCBNQVhfRkVFX1JBVEUpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDYKICAgIC8vIGNyZWF0b3JGZWVSYXRlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyAwLTEwMCwgcGVyY2VudGFnZSBvZiB5aWVsZCB0byBjcmVhdG9yCiAgICBieXRlYyAxOCAvLyAiY3JlYXRvckZlZVJhdGUiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM5MQogICAgLy8gY29uc3QgY3JlYXRvckN1dDogdWludDY0ID0gdGhpcy5tdWxEaXZGbG9vcih0b3RhbE91dHB1dCwgdGhpcy5jcmVhdG9yRmVlUmF0ZS52YWx1ZSwgTUFYX0ZFRV9SQVRFKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgwCiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGRpZyAxCiAgICBtdWx3CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgxCiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzkxCiAgICAvLyBjb25zdCBjcmVhdG9yQ3V0OiB1aW50NjQgPSB0aGlzLm11bERpdkZsb29yKHRvdGFsT3V0cHV0LCB0aGlzLmNyZWF0b3JGZWVSYXRlLnZhbHVlLCBNQVhfRkVFX1JBVEUpOwogICAgcHVzaGludCAxMDAgLy8gMTAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgxCiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgZGl2bW9kdwogICAgcG9wbiAyCiAgICBzd2FwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgyCiAgICAvLyBhc3NlcnQocV9oaSA9PT0gVWludDY0KDApLCAnTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3InKTsKICAgICEKICAgIGFzc2VydCAvLyBNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozOTIKICAgIC8vIGNvbnN0IHVzZXJDdXQ6IHVpbnQ2NCA9IHRvdGFsT3V0cHV0IC0gY3JlYXRvckN1dDsKICAgIHN3YXAKICAgIGRpZyAxCiAgICAtCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGJ1cnkgNgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozOTUKICAgIC8vIHRoaXMuY3JlYXRvclVuY2xhaW1lZFlpZWxkLnZhbHVlID0gdGhpcy5jcmVhdG9yVW5jbGFpbWVkWWllbGQudmFsdWUgKyBjcmVhdG9yQ3V0OwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDcKICAgIC8vIGNyZWF0b3JVbmNsYWltZWRZaWVsZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgLy8gQWNjdW11bGF0ZWQgeWllbGQgZm9yIGNyZWF0b3IgdG8gY2xhaW0KICAgIGJ5dGVjIDYgLy8gImNyZWF0b3JVbmNsYWltZWRZaWVsZCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mzk1CiAgICAvLyB0aGlzLmNyZWF0b3JVbmNsYWltZWRZaWVsZC52YWx1ZSA9IHRoaXMuY3JlYXRvclVuY2xhaW1lZFlpZWxkLnZhbHVlICsgY3JlYXRvckN1dDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICArCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ3CiAgICAvLyBjcmVhdG9yVW5jbGFpbWVkWWllbGQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIEFjY3VtdWxhdGVkIHlpZWxkIGZvciBjcmVhdG9yIHRvIGNsYWltCiAgICBieXRlYyA2IC8vICJjcmVhdG9yVW5jbGFpbWVkWWllbGQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM5NQogICAgLy8gdGhpcy5jcmVhdG9yVW5jbGFpbWVkWWllbGQudmFsdWUgPSB0aGlzLmNyZWF0b3JVbmNsYWltZWRZaWVsZC52YWx1ZSArIGNyZWF0b3JDdXQ7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozOTgKICAgIC8vIGlmICh1c2VyQ3V0ID4gVWludDY0KDApKSB7CiAgICBieiBkZXBvc2l0X2FmdGVyX2lmX2Vsc2VAMTQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mzk5CiAgICAvLyBjb25zdCB5aWVsZEluY3JlYXNlOiB1aW50NjQgPSB0aGlzLm11bERpdkZsb29yKHVzZXJDdXQsIFNDQUxFLCB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTAKICAgIC8vIHRvdGFsRGVwb3NpdHMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAvLyBUb3RhbCBBbHBoYSBkZXBvc2l0ZWQgaW4gdmF1bHQKICAgIGJ5dGVjXzEgLy8gInRvdGFsRGVwb3NpdHMiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM5OQogICAgLy8gY29uc3QgeWllbGRJbmNyZWFzZTogdWludDY0ID0gdGhpcy5tdWxEaXZGbG9vcih1c2VyQ3V0LCBTQ0FMRSwgdGhpcy50b3RhbERlcG9zaXRzLnZhbHVlKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgwCiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGRpZyA0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM5OQogICAgLy8gY29uc3QgeWllbGRJbmNyZWFzZTogdWludDY0ID0gdGhpcy5tdWxEaXZGbG9vcih1c2VyQ3V0LCBTQ0FMRSwgdGhpcy50b3RhbERlcG9zaXRzLnZhbHVlKTsKICAgIGludGMgNSAvLyAxMDAwMDAwMDAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgwCiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIG11bHcKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODEKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBpbnRjXzAgLy8gMAogICAgdW5jb3ZlciAzCiAgICBkaXZtb2R3CiAgICBwb3BuIDIKICAgIHN3YXAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODIKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQwMAogICAgLy8gdGhpcy55aWVsZFBlclRva2VuLnZhbHVlID0gdGhpcy55aWVsZFBlclRva2VuLnZhbHVlICsgeWllbGRJbmNyZWFzZTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUxCiAgICAvLyB5aWVsZFBlclRva2VuID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgLy8gQWNjdW11bGF0b3IgZm9yIHlpZWxkIGRpc3RyaWJ1dGlvbiAoc2NhbGVkIGJ5IFNDQUxFKQogICAgYnl0ZWMgNCAvLyAieWllbGRQZXJUb2tlbiIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDAwCiAgICAvLyB0aGlzLnlpZWxkUGVyVG9rZW4udmFsdWUgPSB0aGlzLnlpZWxkUGVyVG9rZW4udmFsdWUgKyB5aWVsZEluY3JlYXNlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgICsKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTEKICAgIC8vIHlpZWxkUGVyVG9rZW4gPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAvLyBBY2N1bXVsYXRvciBmb3IgeWllbGQgZGlzdHJpYnV0aW9uIChzY2FsZWQgYnkgU0NBTEUpCiAgICBieXRlYyA0IC8vICJ5aWVsZFBlclRva2VuIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MDAKICAgIC8vIHRoaXMueWllbGRQZXJUb2tlbi52YWx1ZSA9IHRoaXMueWllbGRQZXJUb2tlbi52YWx1ZSArIHlpZWxkSW5jcmVhc2U7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAoKZGVwb3NpdF9hZnRlcl9pZl9lbHNlQDE0OgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MDUKICAgIC8vIGNvbnN0IGN1cnJlbnRJbmRleCA9IFR4bi5ncm91cEluZGV4OwogICAgdHhuIEdyb3VwSW5kZXgKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDA2CiAgICAvLyBhc3NlcnQoY3VycmVudEluZGV4ID49IFVpbnQ2NCgxKSwgJ0FwcCBjYWxsIG11c3QgZm9sbG93IGFzc2V0IHRyYW5zZmVyJyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBBcHAgY2FsbCBtdXN0IGZvbGxvdyBhc3NldCB0cmFuc2ZlcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MDgKICAgIC8vIGNvbnN0IGRlcG9zaXRUcmFuc2ZlciA9IGd0eG4uQXNzZXRUcmFuc2ZlclR4bihjdXJyZW50SW5kZXggLSBVaW50NjQoMSkpOwogICAgaW50Y18xIC8vIDEKICAgIC0KICAgIGR1cAogICAgZ3R4bnMgVHlwZUVudW0KICAgIGludGNfMiAvLyBheGZlcgogICAgPT0KICAgIGFzc2VydCAvLyB0cmFuc2FjdGlvbiB0eXBlIGlzIGF4ZmVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQwOQogICAgLy8gYXNzZXJ0KGRlcG9zaXRUcmFuc2Zlci54ZmVyQXNzZXQgPT09IEFzc2V0KHRoaXMuZGVwb3NpdEFzc2V0LnZhbHVlKSwgJ011c3QgdHJhbnNmZXIgZGVwb3NpdCBhc3NldCcpOwogICAgZHVwCiAgICBndHhucyBYZmVyQXNzZXQKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM5CiAgICAvLyBkZXBvc2l0QXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgLy8gQWxwaGEgQVNBIElEICh3aGF0IHVzZXJzIGRlcG9zaXQpCiAgICBieXRlYyAxMSAvLyAiZGVwb3NpdEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MDkKICAgIC8vIGFzc2VydChkZXBvc2l0VHJhbnNmZXIueGZlckFzc2V0ID09PSBBc3NldCh0aGlzLmRlcG9zaXRBc3NldC52YWx1ZSksICdNdXN0IHRyYW5zZmVyIGRlcG9zaXQgYXNzZXQnKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIE11c3QgdHJhbnNmZXIgZGVwb3NpdCBhc3NldAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MTAKICAgIC8vIGFzc2VydChkZXBvc2l0VHJhbnNmZXIuYXNzZXRSZWNlaXZlciA9PT0gYXBwQWRkciwgJ011c3Qgc2VuZCB0byBjb250cmFjdCcpOwogICAgZHVwCiAgICBndHhucyBBc3NldFJlY2VpdmVyCiAgICBkaWcgMwogICAgPT0KICAgIGFzc2VydCAvLyBNdXN0IHNlbmQgdG8gY29udHJhY3QKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDExCiAgICAvLyBhc3NlcnQoZGVwb3NpdFRyYW5zZmVyLnNlbmRlciA9PT0gVHhuLnNlbmRlciwgJ1RyYW5zZmVyIG11c3QgYmUgZnJvbSBjYWxsZXInKTsKICAgIGR1cAogICAgZ3R4bnMgU2VuZGVyCiAgICB0eG4gU2VuZGVyCiAgICA9PQogICAgYXNzZXJ0IC8vIFRyYW5zZmVyIG11c3QgYmUgZnJvbSBjYWxsZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDEzCiAgICAvLyBjb25zdCBhbW91bnQgPSBkZXBvc2l0VHJhbnNmZXIuYXNzZXRBbW91bnQ7CiAgICBndHhucyBBc3NldEFtb3VudAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MTQKICAgIC8vIGFzc2VydChhbW91bnQgPj0gTUlOX0RFUE9TSVRfQU1PVU5ULCAnRGVwb3NpdCB0b28gc21hbGwnKTsKICAgIGR1cAogICAgcHVzaGludCAxMDAwMDAwIC8vIDEwMDAwMDAKICAgID49CiAgICBhc3NlcnQgLy8gRGVwb3NpdCB0b28gc21hbGwKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDE3CiAgICAvLyB0aGlzLnVwZGF0ZUVhcm5lZFlpZWxkKFR4bi5zZW5kZXIpOwogICAgdHhuIFNlbmRlcgogICAgY2FsbHN1YiB1cGRhdGVFYXJuZWRZaWVsZAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MjAKICAgIC8vIHRoaXMuZGVwb3NpdGVkQW1vdW50KFR4bi5zZW5kZXIpLnZhbHVlID0gdGhpcy5kZXBvc2l0ZWRBbW91bnQoVHhuLnNlbmRlcikudmFsdWUgKyBhbW91bnQ7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NwogICAgLy8gZGVwb3NpdGVkQW1vdW50ID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIFVzZXIncyBBbHBoYSBiYWxhbmNlIGluIHZhdWx0CiAgICBieXRlYyA1IC8vICJkZXBvc2l0ZWRBbW91bnQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQyMAogICAgLy8gdGhpcy5kZXBvc2l0ZWRBbW91bnQoVHhuLnNlbmRlcikudmFsdWUgPSB0aGlzLmRlcG9zaXRlZEFtb3VudChUeG4uc2VuZGVyKS52YWx1ZSArIGFtb3VudDsKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBMb2NhbFN0YXRlIGV4aXN0cwogICAgZGlnIDEKICAgICsKICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjcKICAgIC8vIGRlcG9zaXRlZEFtb3VudCA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAvLyBVc2VyJ3MgQWxwaGEgYmFsYW5jZSBpbiB2YXVsdAogICAgYnl0ZWMgNSAvLyAiZGVwb3NpdGVkQW1vdW50IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MjAKICAgIC8vIHRoaXMuZGVwb3NpdGVkQW1vdW50KFR4bi5zZW5kZXIpLnZhbHVlID0gdGhpcy5kZXBvc2l0ZWRBbW91bnQoVHhuLnNlbmRlcikudmFsdWUgKyBhbW91bnQ7CiAgICB1bmNvdmVyIDIKICAgIGFwcF9sb2NhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDIxCiAgICAvLyB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgPSB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgKyBhbW91bnQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MAogICAgLy8gdG90YWxEZXBvc2l0cyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIFRvdGFsIEFscGhhIGRlcG9zaXRlZCBpbiB2YXVsdAogICAgYnl0ZWNfMSAvLyAidG90YWxEZXBvc2l0cyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDIxCiAgICAvLyB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgPSB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgKyBhbW91bnQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgKwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MAogICAgLy8gdG90YWxEZXBvc2l0cyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIFRvdGFsIEFscGhhIGRlcG9zaXRlZCBpbiB2YXVsdAogICAgYnl0ZWNfMSAvLyAidG90YWxEZXBvc2l0cyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDIxCiAgICAvLyB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgPSB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgKyBhbW91bnQ7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMzQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgpkZXBvc2l0X3Rlcm5hcnlfZmFsc2VAOToKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzgwCiAgICAvLyBmYXJtQm9udXMgPSByZXF1ZXN0ZWRCb251cyA8IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPyByZXF1ZXN0ZWRCb251cyA6IHRoaXMuZmFybUJhbGFuY2UudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgc3dhcEFzc2V0IGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMCAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM4MAogICAgLy8gZmFybUJvbnVzID0gcmVxdWVzdGVkQm9udXMgPCB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID8gcmVxdWVzdGVkQm9udXMgOiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ1cnkgNwogICAgYiBkZXBvc2l0X3Rlcm5hcnlfbWVyZ2VAMTAKCgovLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjpSYXJlRmlWYXVsdC53aXRoZHJhd1tyb3V0aW5nXSgpIC0+IHZvaWQ6CndpdGhkcmF3OgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MjgKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18zIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICBkdXAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDMwCiAgICAvLyBjb25zdCB1c2VyQmFsYW5jZSA9IHRoaXMuZGVwb3NpdGVkQW1vdW50KFR4bi5zZW5kZXIpLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjcKICAgIC8vIGRlcG9zaXRlZEFtb3VudCA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAvLyBVc2VyJ3MgQWxwaGEgYmFsYW5jZSBpbiB2YXVsdAogICAgYnl0ZWMgNSAvLyAiZGVwb3NpdGVkQW1vdW50IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MzAKICAgIC8vIGNvbnN0IHVzZXJCYWxhbmNlID0gdGhpcy5kZXBvc2l0ZWRBbW91bnQoVHhuLnNlbmRlcikudmFsdWU7CiAgICBhcHBfbG9jYWxfZ2V0X2V4CiAgICBzd2FwCiAgICBjb3ZlciAyCiAgICBhc3NlcnQgLy8gY2hlY2sgTG9jYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDM0CiAgICAvLyBpZiAod2l0aGRyYXdBbW91bnQgPT09IFVpbnQ2NCgwKSkgewogICAgYnogd2l0aGRyYXdfaWZfYm9keUAyCiAgICBkaWcgMQoKd2l0aGRyYXdfYWZ0ZXJfaWZfZWxzZUAzOgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MzgKICAgIC8vIGFzc2VydCh3aXRoZHJhd0Ftb3VudCA+IFVpbnQ2NCgwKSwgJ05vdGhpbmcgdG8gd2l0aGRyYXcnKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIE5vdGhpbmcgdG8gd2l0aGRyYXcKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDM5CiAgICAvLyBhc3NlcnQod2l0aGRyYXdBbW91bnQgPD0gdXNlckJhbGFuY2UsICdJbnN1ZmZpY2llbnQgYmFsYW5jZScpOwogICAgZHVwCiAgICBkaWcgMgogICAgZHVwCiAgICBjb3ZlciAyCiAgICA8PQogICAgYXNzZXJ0IC8vIEluc3VmZmljaWVudCBiYWxhbmNlCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ0MgogICAgLy8gdGhpcy51cGRhdGVFYXJuZWRZaWVsZChUeG4uc2VuZGVyKTsKICAgIHR4biBTZW5kZXIKICAgIGNhbGxzdWIgdXBkYXRlRWFybmVkWWllbGQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDQ1CiAgICAvLyB0aGlzLmRlcG9zaXRlZEFtb3VudChUeG4uc2VuZGVyKS52YWx1ZSA9IHVzZXJCYWxhbmNlIC0gd2l0aGRyYXdBbW91bnQ7CiAgICBkaWcgMQogICAgLQogICAgdHhuIFNlbmRlcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NwogICAgLy8gZGVwb3NpdGVkQW1vdW50ID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIFVzZXIncyBBbHBoYSBiYWxhbmNlIGluIHZhdWx0CiAgICBieXRlYyA1IC8vICJkZXBvc2l0ZWRBbW91bnQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ0NQogICAgLy8gdGhpcy5kZXBvc2l0ZWRBbW91bnQoVHhuLnNlbmRlcikudmFsdWUgPSB1c2VyQmFsYW5jZSAtIHdpdGhkcmF3QW1vdW50OwogICAgdW5jb3ZlciAyCiAgICBhcHBfbG9jYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ0NgogICAgLy8gdGhpcy50b3RhbERlcG9zaXRzLnZhbHVlID0gdGhpcy50b3RhbERlcG9zaXRzLnZhbHVlIC0gd2l0aGRyYXdBbW91bnQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MAogICAgLy8gdG90YWxEZXBvc2l0cyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIFRvdGFsIEFscGhhIGRlcG9zaXRlZCBpbiB2YXVsdAogICAgYnl0ZWNfMSAvLyAidG90YWxEZXBvc2l0cyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDQ2CiAgICAvLyB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgPSB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgLSB3aXRoZHJhd0Ftb3VudDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBkaWcgMQogICAgLQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MAogICAgLy8gdG90YWxEZXBvc2l0cyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIFRvdGFsIEFscGhhIGRlcG9zaXRlZCBpbiB2YXVsdAogICAgYnl0ZWNfMSAvLyAidG90YWxEZXBvc2l0cyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDQ2CiAgICAvLyB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgPSB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgLSB3aXRoZHJhd0Ftb3VudDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ0OS00NTQKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5kZXBvc2l0QXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogd2l0aGRyYXdBbW91bnQsCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ1MAogICAgLy8gYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDUxCiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuZGVwb3NpdEFzc2V0LnZhbHVlKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM5CiAgICAvLyBkZXBvc2l0QXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgLy8gQWxwaGEgQVNBIElEICh3aGF0IHVzZXJzIGRlcG9zaXQpCiAgICBieXRlYyAxMSAvLyAiZGVwb3NpdEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NTEKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5kZXBvc2l0QXNzZXQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIHVuY292ZXIgMgogICAgaXR4bl9maWVsZCBBc3NldEFtb3VudAogICAgaXR4bl9maWVsZCBYZmVyQXNzZXQKICAgIGl0eG5fZmllbGQgQXNzZXRSZWNlaXZlcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NDktNDU0CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuZGVwb3NpdEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IHdpdGhkcmF3QW1vdW50LAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaW50Y18yIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDUzCiAgICAvLyBmZWU6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NDktNDU0CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuZGVwb3NpdEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IHdpdGhkcmF3QW1vdW50LAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDI4CiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKd2l0aGRyYXdfaWZfYm9keUAyOgogICAgZHVwCiAgICBiIHdpdGhkcmF3X2FmdGVyX2lmX2Vsc2VAMwoKCi8vIFJhcmVGaVZhdWx0LmFsZ28udHM6OlJhcmVGaVZhdWx0LmNsYWltW3JvdXRpbmddKCkgLT4gdm9pZDoKY2xhaW06CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ2NwogICAgLy8gdGhpcy51cGRhdGVFYXJuZWRZaWVsZChUeG4uc2VuZGVyKTsKICAgIHR4biBTZW5kZXIKICAgIGNhbGxzdWIgdXBkYXRlRWFybmVkWWllbGQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDY5CiAgICAvLyBjb25zdCBjbGFpbWFibGUgPSB0aGlzLmVhcm5lZFlpZWxkKFR4bi5zZW5kZXIpLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjkKICAgIC8vIGVhcm5lZFlpZWxkID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBBY2N1bXVsYXRlZCB5aWVsZCBub3QgeWV0IGNsYWltZWQKICAgIGJ5dGVjIDggLy8gImVhcm5lZFlpZWxkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NjkKICAgIC8vIGNvbnN0IGNsYWltYWJsZSA9IHRoaXMuZWFybmVkWWllbGQoVHhuLnNlbmRlcikudmFsdWU7CiAgICBhcHBfbG9jYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgTG9jYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDcwCiAgICAvLyBhc3NlcnQoY2xhaW1hYmxlID4gVWludDY0KDApLCAnTm90aGluZyB0byBjbGFpbScpOwogICAgZHVwCiAgICBhc3NlcnQgLy8gTm90aGluZyB0byBjbGFpbQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NzMKICAgIC8vIHRoaXMuZWFybmVkWWllbGQoVHhuLnNlbmRlcikudmFsdWUgPSBVaW50NjQoMCk7CiAgICB0eG4gU2VuZGVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY5CiAgICAvLyBlYXJuZWRZaWVsZCA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gQWNjdW11bGF0ZWQgeWllbGQgbm90IHlldCBjbGFpbWVkCiAgICBieXRlYyA4IC8vICJlYXJuZWRZaWVsZCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDczCiAgICAvLyB0aGlzLmVhcm5lZFlpZWxkKFR4bi5zZW5kZXIpLnZhbHVlID0gVWludDY0KDApOwogICAgaW50Y18wIC8vIDAKICAgIGFwcF9sb2NhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDc2LTQ4MQogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBjbGFpbWFibGUsCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ3NwogICAgLy8gYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDc4CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQxCiAgICAvLyBzd2FwQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gUHJvamVjdCdzIEFTQSBJRCAod2hhdCB5aWVsZCBpcyBzd2FwcGVkIHRvKQogICAgYnl0ZWNfMyAvLyAic3dhcEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NzgKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIHVuY292ZXIgMgogICAgaXR4bl9maWVsZCBBc3NldEFtb3VudAogICAgaXR4bl9maWVsZCBYZmVyQXNzZXQKICAgIGl0eG5fZmllbGQgQXNzZXRSZWNlaXZlcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NzYtNDgxCiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IGNsYWltYWJsZSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGludGNfMiAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ4MAogICAgLy8gZmVlOiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDc2LTQ4MQogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBjbGFpbWFibGUsCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NjQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQuY2xhaW1DcmVhdG9yW3JvdXRpbmddKCkgLT4gdm9pZDoKY2xhaW1DcmVhdG9yOgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0ODkKICAgIC8vIGFzc2VydChUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlLCAnT25seSBjcmVhdG9yIGNhbiBjbGFpbScpOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDQKICAgIC8vIGNyZWF0b3JBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAvLyBWYXVsdCBjcmVhdG9yIHdobyByZWNlaXZlcyBmZWUKICAgIGJ5dGVjIDkgLy8gImNyZWF0b3JBZGRyZXNzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0ODkKICAgIC8vIGFzc2VydChUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlLCAnT25seSBjcmVhdG9yIGNhbiBjbGFpbScpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBhc3NlcnQgLy8gT25seSBjcmVhdG9yIGNhbiBjbGFpbQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0OTEKICAgIC8vIGNvbnN0IGNsYWltYWJsZSA9IHRoaXMuY3JlYXRvclVuY2xhaW1lZFlpZWxkLnZhbHVlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDcKICAgIC8vIGNyZWF0b3JVbmNsYWltZWRZaWVsZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgLy8gQWNjdW11bGF0ZWQgeWllbGQgZm9yIGNyZWF0b3IgdG8gY2xhaW0KICAgIGJ5dGVjIDYgLy8gImNyZWF0b3JVbmNsYWltZWRZaWVsZCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDkxCiAgICAvLyBjb25zdCBjbGFpbWFibGUgPSB0aGlzLmNyZWF0b3JVbmNsYWltZWRZaWVsZC52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ5MgogICAgLy8gYXNzZXJ0KGNsYWltYWJsZSA+IFVpbnQ2NCgwKSwgJ05vdGhpbmcgdG8gY2xhaW0nKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIE5vdGhpbmcgdG8gY2xhaW0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDcKICAgIC8vIGNyZWF0b3JVbmNsYWltZWRZaWVsZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgLy8gQWNjdW11bGF0ZWQgeWllbGQgZm9yIGNyZWF0b3IgdG8gY2xhaW0KICAgIGJ5dGVjIDYgLy8gImNyZWF0b3JVbmNsYWltZWRZaWVsZCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDk1CiAgICAvLyB0aGlzLmNyZWF0b3JVbmNsYWltZWRZaWVsZC52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0OTgtNTAzCiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IGNsYWltYWJsZSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDk5CiAgICAvLyBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgdHhuIFNlbmRlcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MDAKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDEKICAgIC8vIHN3YXBBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBQcm9qZWN0J3MgQVNBIElEICh3aGF0IHlpZWxkIGlzIHN3YXBwZWQgdG8pCiAgICBieXRlY18zIC8vICJzd2FwQXNzZXQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUwMAogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgdW5jb3ZlciAyCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ5OC01MDMKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogY2xhaW1hYmxlLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaW50Y18yIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTAyCiAgICAvLyBmZWU6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0OTgtNTAzCiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IGNsYWltYWJsZSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ4NwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjpSYXJlRmlWYXVsdC5zd2FwWWllbGRbcm91dGluZ10oKSAtPiB2b2lkOgpzd2FwWWllbGQ6CiAgICBwdXNoYnl0ZXMgIiIKICAgIGR1cAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MjEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18zIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUyMwogICAgLy8gYXNzZXJ0KHNsaXBwYWdlQnBzIDw9IE1BWF9TTElQUEFHRV9CUFMsICdTbGlwcGFnZSB0b28gaGlnaCcpOwogICAgZHVwCiAgICBpbnRjIDQgLy8gMTAwMDAKICAgIDw9CiAgICBhc3NlcnQgLy8gU2xpcHBhZ2UgdG9vIGhpZ2gKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTI1CiAgICAvLyBjb25zdCBhcHBBZGRyOiBBY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3M7CiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MjYKICAgIC8vIGNvbnN0IHVzZGNCYWxhbmNlID0gQXNzZXQodGhpcy55aWVsZEFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDAKICAgIC8vIHlpZWxkQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBVU0RDIEFTQSBJRCAod2hhdCBhaXJkcm9wcyBjb21lIGluIGFzKQogICAgYnl0ZWNfMiAvLyAieWllbGRBc3NldCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTI2CiAgICAvLyBjb25zdCB1c2RjQmFsYW5jZSA9IEFzc2V0KHRoaXMueWllbGRBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBkaWcgMQogICAgc3dhcAogICAgYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCiAgICBhc3NlcnQgLy8gYWNjb3VudCBvcHRlZCBpbnRvIGFzc2V0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUyOAogICAgLy8gYXNzZXJ0KHVzZGNCYWxhbmNlID49IHRoaXMubWluU3dhcFRocmVzaG9sZC52YWx1ZSwgJ0JlbG93IG1pbmltdW0gc3dhcCB0aHJlc2hvbGQnKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUyCiAgICAvLyBtaW5Td2FwVGhyZXNob2xkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgLy8gTWluaW11bSBVU0RDIGJlZm9yZSBzd2FwIGFsbG93ZWQKICAgIGJ5dGVjIDE2IC8vICJtaW5Td2FwVGhyZXNob2xkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MjgKICAgIC8vIGFzc2VydCh1c2RjQmFsYW5jZSA+PSB0aGlzLm1pblN3YXBUaHJlc2hvbGQudmFsdWUsICdCZWxvdyBtaW5pbXVtIHN3YXAgdGhyZXNob2xkJyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZGlnIDEKICAgIDw9CiAgICBhc3NlcnQgLy8gQmVsb3cgbWluaW11bSBzd2FwIHRocmVzaG9sZAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MjkKICAgIC8vIGFzc2VydCh0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgPiBVaW50NjQoMCksICdObyBkZXBvc2l0b3JzIHRvIGRpc3RyaWJ1dGUgdG8nKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUwCiAgICAvLyB0b3RhbERlcG9zaXRzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgLy8gVG90YWwgQWxwaGEgZGVwb3NpdGVkIGluIHZhdWx0CiAgICBieXRlY18xIC8vICJ0b3RhbERlcG9zaXRzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MjkKICAgIC8vIGFzc2VydCh0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgPiBVaW50NjQoMCksICdObyBkZXBvc2l0b3JzIHRvIGRpc3RyaWJ1dGUgdG8nKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBhc3NlcnQgLy8gTm8gZGVwb3NpdG9ycyB0byBkaXN0cmlidXRlIHRvCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUzMgogICAgLy8gY29uc3QgZXhwZWN0ZWRPdXRwdXQgPSB0aGlzLmdldEV4cGVjdGVkU3dhcE91dHB1dCh1c2RjQmFsYW5jZSk7CiAgICBkdXAKICAgIGNhbGxzdWIgZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUzMwogICAgLy8gYXNzZXJ0KGV4cGVjdGVkT3V0cHV0ID4gVWludDY0KDApLCAnRXhwZWN0ZWQgb3V0cHV0IGlzIHplcm8nKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIEV4cGVjdGVkIG91dHB1dCBpcyB6ZXJvCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUzNgogICAgLy8gY29uc3QgbWluQW1vdW50T3V0ID0gdGhpcy5tdWxEaXZGbG9vcihleHBlY3RlZE91dHB1dCwgRkVFX0JQU19CQVNFIC0gc2xpcHBhZ2VCcHMsIEZFRV9CUFNfQkFTRSk7CiAgICBpbnRjIDQgLy8gMTAwMDAKICAgIHVuY292ZXIgNAogICAgLQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4MAogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KG4xLCBuMik7CiAgICBtdWx3CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgxCiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTM2CiAgICAvLyBjb25zdCBtaW5BbW91bnRPdXQgPSB0aGlzLm11bERpdkZsb29yKGV4cGVjdGVkT3V0cHV0LCBGRUVfQlBTX0JBU0UgLSBzbGlwcGFnZUJwcywgRkVFX0JQU19CQVNFKTsKICAgIGludGMgNCAvLyAxMDAwMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4MQogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4MgogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTM5CiAgICAvLyBjb25zdCBzd2FwQXNzZXRCZWZvcmUgPSBBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQxCiAgICAvLyBzd2FwQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gUHJvamVjdCdzIEFTQSBJRCAod2hhdCB5aWVsZCBpcyBzd2FwcGVkIHRvKQogICAgYnl0ZWNfMyAvLyAic3dhcEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MzkKICAgIC8vIGNvbnN0IHN3YXBBc3NldEJlZm9yZSA9IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGRpZyAzCiAgICBkaWcgMQogICAgYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCiAgICBhc3NlcnQgLy8gYWNjb3VudCBvcHRlZCBpbnRvIGFzc2V0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU0My01NjMKICAgIC8vIGl0eG4uc3VibWl0R3JvdXAoCiAgICAvLyAgIC8vIFRyYW5zYWN0aW9uIDE6IFNlbmQgVVNEQyB0byBwb29sCiAgICAvLyAgIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgICAgYXNzZXRSZWNlaXZlcjogdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWUsCiAgICAvLyAgICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnlpZWxkQXNzZXQudmFsdWUpLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiB1c2RjQmFsYW5jZSwKICAgIC8vICAgICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vICAgfSksCiAgICAvLyAgIC8vIFRyYW5zYWN0aW9uIDI6IENhbGwgVGlueW1hbiBwb29sIHRvIGV4ZWN1dGUgc3dhcAogICAgLy8gICBpdHhuLmFwcGxpY2F0aW9uQ2FsbCh7CiAgICAvLyAgICAgYXBwSWQ6IEFwcGxpY2F0aW9uKHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZSksCiAgICAvLyAgICAgYXBwQXJnczogWwogICAgLy8gICAgICAgQnl0ZXMoJ3N3YXAnKSwKICAgIC8vICAgICAgIEJ5dGVzKCdmaXhlZC1pbnB1dCcpLAogICAgLy8gICAgICAgaXRvYihtaW5BbW91bnRPdXQpLAogICAgLy8gICAgIF0sCiAgICAvLyAgICAgYXNzZXRzOiBbQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpXSwgIC8vIE9ubHkgb3V0cHV0IGFzc2V0IG5lZWRlZAogICAgLy8gICAgIGFjY291bnRzOiBbdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWVdLAogICAgLy8gICAgIGZlZTogVWludDY0KDApLCAgLy8gVXNlIGZlZSBwb29saW5nIC0gb3V0ZXIgdHhuIGNvdmVycyBmZWVzCiAgICAvLyAgIH0pLAogICAgLy8gKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTQ2CiAgICAvLyBhc3NldFJlY2VpdmVyOiB0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU3CiAgICAvLyB0aW55bWFuUG9vbEFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAvLyBUaW55bWFuIHBvb2wgYWRkcmVzcwogICAgYnl0ZWMgMTMgLy8gInRpbnltYW5Qb29sQWRkcmVzcyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTQ2CiAgICAvLyBhc3NldFJlY2VpdmVyOiB0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU0NwogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLnlpZWxkQXNzZXQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDAKICAgIC8vIHlpZWxkQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBVU0RDIEFTQSBJRCAod2hhdCBhaXJkcm9wcyBjb21lIGluIGFzKQogICAgYnl0ZWNfMiAvLyAieWllbGRBc3NldCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTQ3CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMueWllbGRBc3NldC52YWx1ZSksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgdW5jb3ZlciA1CiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgZHVwCiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTQ1LTU1MAogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWUsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy55aWVsZEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IHVzZGNCYWxhbmNlLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLAogICAgaW50Y18yIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTQ5CiAgICAvLyBmZWU6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NTItNTYyCiAgICAvLyBpdHhuLmFwcGxpY2F0aW9uQ2FsbCh7CiAgICAvLyAgIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgLy8gICBhcHBBcmdzOiBbCiAgICAvLyAgICAgQnl0ZXMoJ3N3YXAnKSwKICAgIC8vICAgICBCeXRlcygnZml4ZWQtaW5wdXQnKSwKICAgIC8vICAgICBpdG9iKG1pbkFtb3VudE91dCksCiAgICAvLyAgIF0sCiAgICAvLyAgIGFzc2V0czogW0Fzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKV0sICAvLyBPbmx5IG91dHB1dCBhc3NldCBuZWVkZWQKICAgIC8vICAgYWNjb3VudHM6IFt0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZV0sCiAgICAvLyAgIGZlZTogVWludDY0KDApLCAgLy8gVXNlIGZlZSBwb29saW5nIC0gb3V0ZXIgdHhuIGNvdmVycyBmZWVzCiAgICAvLyB9KSwKICAgIGl0eG5fbmV4dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NTMKICAgIC8vIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTYKICAgIC8vIHRpbnltYW5Qb29sQXBwSWQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBUaW55bWFuIFYyIHBvb2wgYXBwIElEIChVU0RDL3N3YXBBc3NldCkKICAgIGJ5dGVjIDEyIC8vICJ0aW55bWFuUG9vbEFwcElkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NTMKICAgIC8vIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTU3CiAgICAvLyBpdG9iKG1pbkFtb3VudE91dCksCiAgICBkaWcgNAogICAgaXRvYgogICAgdW5jb3ZlciAyCiAgICBpdHhuX2ZpZWxkIEFjY291bnRzCiAgICBkaWcgMwogICAgaXR4bl9maWVsZCBBc3NldHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTU1CiAgICAvLyBCeXRlcygnc3dhcCcpLAogICAgYnl0ZWMgMTkgLy8gInN3YXAiCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NTYKICAgIC8vIEJ5dGVzKCdmaXhlZC1pbnB1dCcpLAogICAgYnl0ZWMgMjAgLy8gImZpeGVkLWlucHV0IgogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uSUQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTUyLTU2MgogICAgLy8gaXR4bi5hcHBsaWNhdGlvbkNhbGwoewogICAgLy8gICBhcHBJZDogQXBwbGljYXRpb24odGhpcy50aW55bWFuUG9vbEFwcElkLnZhbHVlKSwKICAgIC8vICAgYXBwQXJnczogWwogICAgLy8gICAgIEJ5dGVzKCdzd2FwJyksCiAgICAvLyAgICAgQnl0ZXMoJ2ZpeGVkLWlucHV0JyksCiAgICAvLyAgICAgaXRvYihtaW5BbW91bnRPdXQpLAogICAgLy8gICBdLAogICAgLy8gICBhc3NldHM6IFtBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSldLCAgLy8gT25seSBvdXRwdXQgYXNzZXQgbmVlZGVkCiAgICAvLyAgIGFjY291bnRzOiBbdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWVdLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwgIC8vIFVzZSBmZWUgcG9vbGluZyAtIG91dGVyIHR4biBjb3ZlcnMgZmVlcwogICAgLy8gfSksCiAgICBwdXNoaW50IDYgLy8gNgogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NjEKICAgIC8vIGZlZTogVWludDY0KDApLCAgLy8gVXNlIGZlZSBwb29saW5nIC0gb3V0ZXIgdHhuIGNvdmVycyBmZWVzCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTQzLTU2MwogICAgLy8gaXR4bi5zdWJtaXRHcm91cCgKICAgIC8vICAgLy8gVHJhbnNhY3Rpb24gMTogU2VuZCBVU0RDIHRvIHBvb2wKICAgIC8vICAgaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiB0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZSwKICAgIC8vICAgICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMueWllbGRBc3NldC52YWx1ZSksCiAgICAvLyAgICAgYXNzZXRBbW91bnQ6IHVzZGNCYWxhbmNlLAogICAgLy8gICAgIGZlZTogVWludDY0KDApLAogICAgLy8gICB9KSwKICAgIC8vICAgLy8gVHJhbnNhY3Rpb24gMjogQ2FsbCBUaW55bWFuIHBvb2wgdG8gZXhlY3V0ZSBzd2FwCiAgICAvLyAgIGl0eG4uYXBwbGljYXRpb25DYWxsKHsKICAgIC8vICAgICBhcHBJZDogQXBwbGljYXRpb24odGhpcy50aW55bWFuUG9vbEFwcElkLnZhbHVlKSwKICAgIC8vICAgICBhcHBBcmdzOiBbCiAgICAvLyAgICAgICBCeXRlcygnc3dhcCcpLAogICAgLy8gICAgICAgQnl0ZXMoJ2ZpeGVkLWlucHV0JyksCiAgICAvLyAgICAgICBpdG9iKG1pbkFtb3VudE91dCksCiAgICAvLyAgICAgXSwKICAgIC8vICAgICBhc3NldHM6IFtBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSldLCAgLy8gT25seSBvdXRwdXQgYXNzZXQgbmVlZGVkCiAgICAvLyAgICAgYWNjb3VudHM6IFt0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZV0sCiAgICAvLyAgICAgZmVlOiBVaW50NjQoMCksICAvLyBVc2UgZmVlIHBvb2xpbmcgLSBvdXRlciB0eG4gY292ZXJzIGZlZXMKICAgIC8vICAgfSksCiAgICAvLyApOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTY2CiAgICAvLyBjb25zdCBzd2FwQXNzZXRBZnRlcjogdWludDY0ID0gQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICB1bmNvdmVyIDMKICAgIHVuY292ZXIgMgogICAgYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCiAgICBhc3NlcnQgLy8gYWNjb3VudCBvcHRlZCBpbnRvIGFzc2V0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU2NwogICAgLy8gY29uc3Qgc3dhcE91dHB1dDogdWludDY0ID0gc3dhcEFzc2V0QWZ0ZXIgLSBzd2FwQXNzZXRCZWZvcmU7CiAgICBzd2FwCiAgICAtCiAgICBkdXAKICAgIHVuY292ZXIgMgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NjkKICAgIC8vIGFzc2VydChzd2FwT3V0cHV0ID49IG1pbkFtb3VudE91dCwgJ1N3YXAgb3V0cHV0IGJlbG93IG1pbmltdW0nKTsKICAgID49CiAgICBhc3NlcnQgLy8gU3dhcCBvdXRwdXQgYmVsb3cgbWluaW11bQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NzIKICAgIC8vIGxldCBmYXJtQm9udXM6IHVpbnQ2NCA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU3MwogICAgLy8gaWYgKHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSA+IFVpbnQ2NCgwKSAmJiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBkdXAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjEKICAgIC8vIGZhcm1FbWlzc2lvblJhdGUgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIEJhc2lzIHBvaW50cyBvZiBzd2FwIG91dHB1dCB0byBhZGQgZnJvbSBmYXJtIChlLmcuLCAxMDAwID0gMTAlKQogICAgYnl0ZWMgNyAvLyAiZmFybUVtaXNzaW9uUmF0ZSIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTczCiAgICAvLyBpZiAodGhpcy5mYXJtRW1pc3Npb25SYXRlLnZhbHVlID4gVWludDY0KDApICYmIHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPiBVaW50NjQoMCkpIHsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBieiBzd2FwWWllbGRfYWZ0ZXJfaWZfZWxzZUA5CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgc3dhcEFzc2V0IGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMCAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU3MwogICAgLy8gaWYgKHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSA+IFVpbnQ2NCgwKSAmJiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnogc3dhcFlpZWxkX2FmdGVyX2lmX2Vsc2VAOQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NzQKICAgIC8vIGNvbnN0IHJlcXVlc3RlZEJvbnVzID0gdGhpcy5tdWxEaXZGbG9vcihzd2FwT3V0cHV0LCB0aGlzLmZhcm1FbWlzc2lvblJhdGUudmFsdWUsIEZFRV9CUFNfQkFTRSk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MQogICAgLy8gZmFybUVtaXNzaW9uUmF0ZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gQmFzaXMgcG9pbnRzIG9mIHN3YXAgb3V0cHV0IHRvIGFkZCBmcm9tIGZhcm0gKGUuZy4sIDEwMDAgPSAxMCUpCiAgICBieXRlYyA3IC8vICJmYXJtRW1pc3Npb25SYXRlIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NzQKICAgIC8vIGNvbnN0IHJlcXVlc3RlZEJvbnVzID0gdGhpcy5tdWxEaXZGbG9vcihzd2FwT3V0cHV0LCB0aGlzLmZhcm1FbWlzc2lvblJhdGUudmFsdWUsIEZFRV9CUFNfQkFTRSk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4MAogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KG4xLCBuMik7CiAgICBkaWcgMgogICAgbXVsdwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4MQogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU3NAogICAgLy8gY29uc3QgcmVxdWVzdGVkQm9udXMgPSB0aGlzLm11bERpdkZsb29yKHN3YXBPdXRwdXQsIHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSwgRkVFX0JQU19CQVNFKTsKICAgIGludGMgNCAvLyAxMDAwMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4MQogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgZHVwCiAgICBjb3ZlciAyCiAgICBidXJ5IDYKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODIKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU3NgogICAgLy8gZmFybUJvbnVzID0gcmVxdWVzdGVkQm9udXMgPCB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID8gcmVxdWVzdGVkQm9udXMgOiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjAKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIHN3YXBBc3NldCBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzAgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NzYKICAgIC8vIGZhcm1Cb251cyA9IHJlcXVlc3RlZEJvbnVzIDwgdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA/IHJlcXVlc3RlZEJvbnVzIDogdGhpcy5mYXJtQmFsYW5jZS52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA8CiAgICBieiBzd2FwWWllbGRfdGVybmFyeV9mYWxzZUA3CiAgICBkaWcgMwogICAgYnVyeSAxCgpzd2FwWWllbGRfdGVybmFyeV9tZXJnZUA4OgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NzgKICAgIC8vIHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPSB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlIC0gZmFybUJvbnVzOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjAKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIHN3YXBBc3NldCBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzAgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NzgKICAgIC8vIHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPSB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlIC0gZmFybUJvbnVzOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGRpZyAxCiAgICAtCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYwCiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBzd2FwQXNzZXQgYXZhaWxhYmxlIGZvciBmYXJtIGJvbnVzCiAgICBieXRlY18wIC8vICJmYXJtQmFsYW5jZSIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTc4CiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSAtIGZhcm1Cb251czsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0Cgpzd2FwWWllbGRfYWZ0ZXJfaWZfZWxzZUA5OgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1ODIKICAgIC8vIGNvbnN0IHRvdGFsT3V0cHV0OiB1aW50NjQgPSBzd2FwT3V0cHV0ICsgZmFybUJvbnVzOwogICAgZHVwMgogICAgKwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1ODUKICAgIC8vIHRoaXMudG90YWxZaWVsZEdlbmVyYXRlZC52YWx1ZSA9IHRoaXMudG90YWxZaWVsZEdlbmVyYXRlZC52YWx1ZSArIHRvdGFsT3V0cHV0OwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTMKICAgIC8vIHRvdGFsWWllbGRHZW5lcmF0ZWQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIFRvdGFsIHlpZWxkIGdlbmVyYXRlZCBmcm9tIHN3YXBzIChzd2FwIG91dHB1dCBpbiBzd2FwQXNzZXQpCiAgICBieXRlYyAxMCAvLyAidG90YWxZaWVsZEdlbmVyYXRlZCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTg1CiAgICAvLyB0aGlzLnRvdGFsWWllbGRHZW5lcmF0ZWQudmFsdWUgPSB0aGlzLnRvdGFsWWllbGRHZW5lcmF0ZWQudmFsdWUgKyB0b3RhbE91dHB1dDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBkaWcgMQogICAgKwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MwogICAgLy8gdG90YWxZaWVsZEdlbmVyYXRlZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgLy8gVG90YWwgeWllbGQgZ2VuZXJhdGVkIGZyb20gc3dhcHMgKHN3YXAgb3V0cHV0IGluIHN3YXBBc3NldCkKICAgIGJ5dGVjIDEwIC8vICJ0b3RhbFlpZWxkR2VuZXJhdGVkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1ODUKICAgIC8vIHRoaXMudG90YWxZaWVsZEdlbmVyYXRlZC52YWx1ZSA9IHRoaXMudG90YWxZaWVsZEdlbmVyYXRlZC52YWx1ZSArIHRvdGFsT3V0cHV0OwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTg4CiAgICAvLyBjb25zdCBjcmVhdG9yQ3V0OiB1aW50NjQgPSB0aGlzLm11bERpdkZsb29yKHRvdGFsT3V0cHV0LCB0aGlzLmNyZWF0b3JGZWVSYXRlLnZhbHVlLCBNQVhfRkVFX1JBVEUpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDYKICAgIC8vIGNyZWF0b3JGZWVSYXRlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyAwLTEwMCwgcGVyY2VudGFnZSBvZiB5aWVsZCB0byBjcmVhdG9yCiAgICBieXRlYyAxOCAvLyAiY3JlYXRvckZlZVJhdGUiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU4OAogICAgLy8gY29uc3QgY3JlYXRvckN1dDogdWludDY0ID0gdGhpcy5tdWxEaXZGbG9vcih0b3RhbE91dHB1dCwgdGhpcy5jcmVhdG9yRmVlUmF0ZS52YWx1ZSwgTUFYX0ZFRV9SQVRFKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgwCiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGRpZyAxCiAgICBtdWx3CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgxCiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTg4CiAgICAvLyBjb25zdCBjcmVhdG9yQ3V0OiB1aW50NjQgPSB0aGlzLm11bERpdkZsb29yKHRvdGFsT3V0cHV0LCB0aGlzLmNyZWF0b3JGZWVSYXRlLnZhbHVlLCBNQVhfRkVFX1JBVEUpOwogICAgcHVzaGludCAxMDAgLy8gMTAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgxCiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgZGl2bW9kdwogICAgcG9wbiAyCiAgICBzd2FwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgyCiAgICAvLyBhc3NlcnQocV9oaSA9PT0gVWludDY0KDApLCAnTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3InKTsKICAgICEKICAgIGFzc2VydCAvLyBNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1ODkKICAgIC8vIGNvbnN0IHVzZXJDdXQ6IHVpbnQ2NCA9IHRvdGFsT3V0cHV0IC0gY3JlYXRvckN1dDsKICAgIHN3YXAKICAgIGRpZyAxCiAgICAtCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGJ1cnkgNQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1OTIKICAgIC8vIHRoaXMuY3JlYXRvclVuY2xhaW1lZFlpZWxkLnZhbHVlID0gdGhpcy5jcmVhdG9yVW5jbGFpbWVkWWllbGQudmFsdWUgKyBjcmVhdG9yQ3V0OwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDcKICAgIC8vIGNyZWF0b3JVbmNsYWltZWRZaWVsZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgLy8gQWNjdW11bGF0ZWQgeWllbGQgZm9yIGNyZWF0b3IgdG8gY2xhaW0KICAgIGJ5dGVjIDYgLy8gImNyZWF0b3JVbmNsYWltZWRZaWVsZCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTkyCiAgICAvLyB0aGlzLmNyZWF0b3JVbmNsYWltZWRZaWVsZC52YWx1ZSA9IHRoaXMuY3JlYXRvclVuY2xhaW1lZFlpZWxkLnZhbHVlICsgY3JlYXRvckN1dDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICArCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ3CiAgICAvLyBjcmVhdG9yVW5jbGFpbWVkWWllbGQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIEFjY3VtdWxhdGVkIHlpZWxkIGZvciBjcmVhdG9yIHRvIGNsYWltCiAgICBieXRlYyA2IC8vICJjcmVhdG9yVW5jbGFpbWVkWWllbGQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU5MgogICAgLy8gdGhpcy5jcmVhdG9yVW5jbGFpbWVkWWllbGQudmFsdWUgPSB0aGlzLmNyZWF0b3JVbmNsYWltZWRZaWVsZC52YWx1ZSArIGNyZWF0b3JDdXQ7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1OTYKICAgIC8vIGlmICh1c2VyQ3V0ID4gVWludDY0KDApKSB7CiAgICBieiBzd2FwWWllbGRfYWZ0ZXJfaWZfZWxzZUAxMQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1OTcKICAgIC8vIGNvbnN0IHlpZWxkSW5jcmVhc2U6IHVpbnQ2NCA9IHRoaXMubXVsRGl2Rmxvb3IodXNlckN1dCwgU0NBTEUsIHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MAogICAgLy8gdG90YWxEZXBvc2l0cyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIFRvdGFsIEFscGhhIGRlcG9zaXRlZCBpbiB2YXVsdAogICAgYnl0ZWNfMSAvLyAidG90YWxEZXBvc2l0cyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTk3CiAgICAvLyBjb25zdCB5aWVsZEluY3JlYXNlOiB1aW50NjQgPSB0aGlzLm11bERpdkZsb29yKHVzZXJDdXQsIFNDQUxFLCB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODAKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgZGlnIDMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTk3CiAgICAvLyBjb25zdCB5aWVsZEluY3JlYXNlOiB1aW50NjQgPSB0aGlzLm11bERpdkZsb29yKHVzZXJDdXQsIFNDQUxFLCB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUpOwogICAgaW50YyA1IC8vIDEwMDAwMDAwMDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODAKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgbXVsdwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4MQogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICB1bmNvdmVyIDMKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4MgogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTk4CiAgICAvLyB0aGlzLnlpZWxkUGVyVG9rZW4udmFsdWUgPSB0aGlzLnlpZWxkUGVyVG9rZW4udmFsdWUgKyB5aWVsZEluY3JlYXNlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTEKICAgIC8vIHlpZWxkUGVyVG9rZW4gPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAvLyBBY2N1bXVsYXRvciBmb3IgeWllbGQgZGlzdHJpYnV0aW9uIChzY2FsZWQgYnkgU0NBTEUpCiAgICBieXRlYyA0IC8vICJ5aWVsZFBlclRva2VuIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1OTgKICAgIC8vIHRoaXMueWllbGRQZXJUb2tlbi52YWx1ZSA9IHRoaXMueWllbGRQZXJUb2tlbi52YWx1ZSArIHlpZWxkSW5jcmVhc2U7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgKwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MQogICAgLy8geWllbGRQZXJUb2tlbiA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIEFjY3VtdWxhdG9yIGZvciB5aWVsZCBkaXN0cmlidXRpb24gKHNjYWxlZCBieSBTQ0FMRSkKICAgIGJ5dGVjIDQgLy8gInlpZWxkUGVyVG9rZW4iCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU5OAogICAgLy8gdGhpcy55aWVsZFBlclRva2VuLnZhbHVlID0gdGhpcy55aWVsZFBlclRva2VuLnZhbHVlICsgeWllbGRJbmNyZWFzZTsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0Cgpzd2FwWWllbGRfYWZ0ZXJfaWZfZWxzZUAxMToKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTIxCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKc3dhcFlpZWxkX3Rlcm5hcnlfZmFsc2VANzoKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTc2CiAgICAvLyBmYXJtQm9udXMgPSByZXF1ZXN0ZWRCb251cyA8IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPyByZXF1ZXN0ZWRCb251cyA6IHRoaXMuZmFybUJhbGFuY2UudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgc3dhcEFzc2V0IGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMCAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU3NgogICAgLy8gZmFybUJvbnVzID0gcmVxdWVzdGVkQm9udXMgPCB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID8gcmVxdWVzdGVkQm9udXMgOiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ1cnkgMQogICAgYiBzd2FwWWllbGRfdGVybmFyeV9tZXJnZUA4CgoKLy8gUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQuZ2V0VmF1bHRTdGF0c1tyb3V0aW5nXSgpIC0+IHZvaWQ6CmdldFZhdWx0U3RhdHM6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYxMQogICAgLy8gY29uc3QgYXBwQWRkcjogQWNjb3VudCA9IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzOwogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjEyCiAgICAvLyBjb25zdCB1c2RjQmFsYW5jZSA9IEFzc2V0KHRoaXMueWllbGRBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQwCiAgICAvLyB5aWVsZEFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKHdoYXQgYWlyZHJvcHMgY29tZSBpbiBhcykKICAgIGJ5dGVjXzIgLy8gInlpZWxkQXNzZXQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYxMgogICAgLy8gY29uc3QgdXNkY0JhbGFuY2UgPSBBc3NldCh0aGlzLnlpZWxkQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZGlnIDEKICAgIHN3YXAKICAgIGFzc2V0X2hvbGRpbmdfZ2V0IEFzc2V0QmFsYW5jZQogICAgYXNzZXJ0IC8vIGFjY291bnQgb3B0ZWQgaW50byBhc3NldAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MTMKICAgIC8vIGNvbnN0IHN3YXBBc3NldEJhbGFuY2UgPSBBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQxCiAgICAvLyBzd2FwQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gUHJvamVjdCdzIEFTQSBJRCAod2hhdCB5aWVsZCBpcyBzd2FwcGVkIHRvKQogICAgYnl0ZWNfMyAvLyAic3dhcEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MTMKICAgIC8vIGNvbnN0IHN3YXBBc3NldEJhbGFuY2UgPSBBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICB1bmNvdmVyIDIKICAgIHN3YXAKICAgIGFzc2V0X2hvbGRpbmdfZ2V0IEFzc2V0QmFsYW5jZQogICAgYXNzZXJ0IC8vIGFjY291bnQgb3B0ZWQgaW50byBhc3NldAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MTcKICAgIC8vIHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUwCiAgICAvLyB0b3RhbERlcG9zaXRzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgLy8gVG90YWwgQWxwaGEgZGVwb3NpdGVkIGluIHZhdWx0CiAgICBieXRlY18xIC8vICJ0b3RhbERlcG9zaXRzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MTcKICAgIC8vIHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYxOAogICAgLy8gdGhpcy55aWVsZFBlclRva2VuLnZhbHVlLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTEKICAgIC8vIHlpZWxkUGVyVG9rZW4gPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAvLyBBY2N1bXVsYXRvciBmb3IgeWllbGQgZGlzdHJpYnV0aW9uIChzY2FsZWQgYnkgU0NBTEUpCiAgICBieXRlYyA0IC8vICJ5aWVsZFBlclRva2VuIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MTgKICAgIC8vIHRoaXMueWllbGRQZXJUb2tlbi52YWx1ZSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYxOQogICAgLy8gdGhpcy5jcmVhdG9yVW5jbGFpbWVkWWllbGQudmFsdWUsCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NwogICAgLy8gY3JlYXRvclVuY2xhaW1lZFlpZWxkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBBY2N1bXVsYXRlZCB5aWVsZCBmb3IgY3JlYXRvciB0byBjbGFpbQogICAgYnl0ZWMgNiAvLyAiY3JlYXRvclVuY2xhaW1lZFlpZWxkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MTkKICAgIC8vIHRoaXMuY3JlYXRvclVuY2xhaW1lZFlpZWxkLnZhbHVlLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjIyCiAgICAvLyB0aGlzLnRvdGFsWWllbGRHZW5lcmF0ZWQudmFsdWUKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUzCiAgICAvLyB0b3RhbFlpZWxkR2VuZXJhdGVkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBUb3RhbCB5aWVsZCBnZW5lcmF0ZWQgZnJvbSBzd2FwcyAoc3dhcCBvdXRwdXQgaW4gc3dhcEFzc2V0KQogICAgYnl0ZWMgMTAgLy8gInRvdGFsWWllbGRHZW5lcmF0ZWQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYyMgogICAgLy8gdGhpcy50b3RhbFlpZWxkR2VuZXJhdGVkLnZhbHVlCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MTYtNjIzCiAgICAvLyByZXR1cm4gWwogICAgLy8gICB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUsCiAgICAvLyAgIHRoaXMueWllbGRQZXJUb2tlbi52YWx1ZSwKICAgIC8vICAgdGhpcy5jcmVhdG9yVW5jbGFpbWVkWWllbGQudmFsdWUsCiAgICAvLyAgIHVzZGNCYWxhbmNlLAogICAgLy8gICBzd2FwQXNzZXRCYWxhbmNlLAogICAgLy8gICB0aGlzLnRvdGFsWWllbGRHZW5lcmF0ZWQudmFsdWUKICAgIC8vIF07CiAgICB1bmNvdmVyIDMKICAgIGl0b2IKICAgIHVuY292ZXIgMwogICAgaXRvYgogICAgY29uY2F0CiAgICB1bmNvdmVyIDIKICAgIGl0b2IKICAgIGNvbmNhdAogICAgdW5jb3ZlciAzCiAgICBpdG9iCiAgICBjb25jYXQKICAgIHVuY292ZXIgMgogICAgaXRvYgogICAgY29uY2F0CiAgICBzd2FwCiAgICBpdG9iCiAgICBjb25jYXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjA5CiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgYnl0ZWMgMTQgLy8gMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjpSYXJlRmlWYXVsdC5nZXRQZW5kaW5nWWllbGRbcm91dGluZ10oKSAtPiB2b2lkOgpnZXRQZW5kaW5nWWllbGQ6CiAgICBwdXNoYnl0ZXMgIiIKICAgIGR1cAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MjkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXBuIDIKICAgIGxlbgogICAgcHVzaGludCAzMiAvLyAzMgogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC5zdGF0aWNfYXJyYXk8YXJjNC51aW50OCwgMzI+CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYzMQogICAgLy8gY29uc3QgZGVwb3NpdGVkID0gdGhpcy5kZXBvc2l0ZWRBbW91bnQodXNlcikudmFsdWU7CiAgICBkdXAKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY3CiAgICAvLyBkZXBvc2l0ZWRBbW91bnQgPSBMb2NhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gVXNlcidzIEFscGhhIGJhbGFuY2UgaW4gdmF1bHQKICAgIGJ5dGVjIDUgLy8gImRlcG9zaXRlZEFtb3VudCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjMxCiAgICAvLyBjb25zdCBkZXBvc2l0ZWQgPSB0aGlzLmRlcG9zaXRlZEFtb3VudCh1c2VyKS52YWx1ZTsKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGR1cAogICAgY292ZXIgMwogICAgY292ZXIgMwogICAgYXNzZXJ0IC8vIGNoZWNrIExvY2FsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYzMgogICAgLy8gbGV0IHBlbmRpbmcgPSB0aGlzLmVhcm5lZFlpZWxkKHVzZXIpLnZhbHVlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjkKICAgIC8vIGVhcm5lZFlpZWxkID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBBY2N1bXVsYXRlZCB5aWVsZCBub3QgeWV0IGNsYWltZWQKICAgIGJ5dGVjIDggLy8gImVhcm5lZFlpZWxkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MzIKICAgIC8vIGxldCBwZW5kaW5nID0gdGhpcy5lYXJuZWRZaWVsZCh1c2VyKS52YWx1ZTsKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGNvdmVyIDIKICAgIGFzc2VydCAvLyBjaGVjayBMb2NhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MzQKICAgIC8vIGlmIChkZXBvc2l0ZWQgPiBVaW50NjQoMCkpIHsKICAgIGJ6IGdldFBlbmRpbmdZaWVsZF9hZnRlcl9pZl9lbHNlQDUKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjM1CiAgICAvLyBjb25zdCBjdXJyZW50WVBUID0gdGhpcy55aWVsZFBlclRva2VuLnZhbHVlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTEKICAgIC8vIHlpZWxkUGVyVG9rZW4gPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAvLyBBY2N1bXVsYXRvciBmb3IgeWllbGQgZGlzdHJpYnV0aW9uIChzY2FsZWQgYnkgU0NBTEUpCiAgICBieXRlYyA0IC8vICJ5aWVsZFBlclRva2VuIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MzUKICAgIC8vIGNvbnN0IGN1cnJlbnRZUFQgPSB0aGlzLnlpZWxkUGVyVG9rZW4udmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgc3dhcAogICAgZHVwCiAgICBjb3ZlciAyCiAgICBidXJ5IDcKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjM2CiAgICAvLyBjb25zdCB1c2VyWVBUID0gdGhpcy51c2VyWWllbGRQZXJUb2tlbih1c2VyKS52YWx1ZTsKICAgIGRpZyAzCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2OAogICAgLy8gdXNlcllpZWxkUGVyVG9rZW4gPSBMb2NhbFN0YXRlPHVpbnQ2ND4oKTsgIC8vIFNuYXBzaG90IG9mIHlpZWxkUGVyVG9rZW4gYXQgbGFzdCBhY3Rpb24KICAgIGJ5dGVjIDE3IC8vICJ1c2VyWWllbGRQZXJUb2tlbiIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjM2CiAgICAvLyBjb25zdCB1c2VyWVBUID0gdGhpcy51c2VyWWllbGRQZXJUb2tlbih1c2VyKS52YWx1ZTsKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGR1cAogICAgY292ZXIgMgogICAgYnVyeSA3CiAgICBhc3NlcnQgLy8gY2hlY2sgTG9jYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjM4CiAgICAvLyBpZiAoY3VycmVudFlQVCA+IHVzZXJZUFQpIHsKICAgID4KICAgIGJ6IGdldFBlbmRpbmdZaWVsZF9hZnRlcl9pZl9lbHNlQDUKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjM5CiAgICAvLyBwZW5kaW5nID0gcGVuZGluZyArIHRoaXMubXVsRGl2Rmxvb3IoZGVwb3NpdGVkLCBjdXJyZW50WVBUIC0gdXNlcllQVCwgU0NBTEUpOwogICAgZGlnIDQKICAgIGRpZyA0CiAgICAtCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgwCiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGRpZyAyCiAgICBtdWx3CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgxCiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjM5CiAgICAvLyBwZW5kaW5nID0gcGVuZGluZyArIHRoaXMubXVsRGl2Rmxvb3IoZGVwb3NpdGVkLCBjdXJyZW50WVBUIC0gdXNlcllQVCwgU0NBTEUpOwogICAgaW50YyA1IC8vIDEwMDAwMDAwMDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODEKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBkaXZtb2R3CiAgICBwb3BuIDIKICAgIHN3YXAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODIKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYzOQogICAgLy8gcGVuZGluZyA9IHBlbmRpbmcgKyB0aGlzLm11bERpdkZsb29yKGRlcG9zaXRlZCwgY3VycmVudFlQVCAtIHVzZXJZUFQsIFNDQUxFKTsKICAgIGRpZyAxCiAgICArCiAgICBidXJ5IDEKCmdldFBlbmRpbmdZaWVsZF9hZnRlcl9pZl9lbHNlQDU6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYyOQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIGR1cAogICAgaXRvYgogICAgYnl0ZWMgMTQgLy8gMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjpSYXJlRmlWYXVsdC5nZXRVc2VyRGVwb3NpdFtyb3V0aW5nXSgpIC0+IHZvaWQ6CmdldFVzZXJEZXBvc2l0OgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NDkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgcHVzaGludCAzMiAvLyAzMgogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC5zdGF0aWNfYXJyYXk8YXJjNC51aW50OCwgMzI+CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY1MQogICAgLy8gcmV0dXJuIHRoaXMuZGVwb3NpdGVkQW1vdW50KHVzZXIpLnZhbHVlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjcKICAgIC8vIGRlcG9zaXRlZEFtb3VudCA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAvLyBVc2VyJ3MgQWxwaGEgYmFsYW5jZSBpbiB2YXVsdAogICAgYnl0ZWMgNSAvLyAiZGVwb3NpdGVkQW1vdW50IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NTEKICAgIC8vIHJldHVybiB0aGlzLmRlcG9zaXRlZEFtb3VudCh1c2VyKS52YWx1ZTsKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBMb2NhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NDkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICBpdG9iCiAgICBieXRlYyAxNCAvLyAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaVZhdWx0LmFsZ28udHM6OlJhcmVGaVZhdWx0LmdldFN3YXBRdW90ZVtyb3V0aW5nXSgpIC0+IHZvaWQ6CmdldFN3YXBRdW90ZToKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjYxCiAgICAvLyBjb25zdCBhcHBBZGRyOiBBY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3M7CiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NjIKICAgIC8vIGNvbnN0IHVzZGNCYWxhbmNlID0gQXNzZXQodGhpcy55aWVsZEFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDAKICAgIC8vIHlpZWxkQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBVU0RDIEFTQSBJRCAod2hhdCBhaXJkcm9wcyBjb21lIGluIGFzKQogICAgYnl0ZWNfMiAvLyAieWllbGRBc3NldCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjYyCiAgICAvLyBjb25zdCB1c2RjQmFsYW5jZSA9IEFzc2V0KHRoaXMueWllbGRBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBhc3NldF9ob2xkaW5nX2dldCBBc3NldEJhbGFuY2UKICAgIHN3YXAKICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICBhc3NlcnQgLy8gYWNjb3VudCBvcHRlZCBpbnRvIGFzc2V0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY2NAogICAgLy8gaWYgKHVzZGNCYWxhbmNlID09PSBVaW50NjQoMCkpIHsKICAgIGJueiBnZXRTd2FwUXVvdGVfYWZ0ZXJfaWZfZWxzZUAzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY2NQogICAgLy8gcmV0dXJuIFtVaW50NjQoMCksIFVpbnQ2NCgwKSwgVWludDY0KDApXTsKICAgIHB1c2hieXRlcyAweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAoKZ2V0U3dhcFF1b3RlX2FmdGVyX2lubGluZWRfUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQuZ2V0U3dhcFF1b3RlQDQ6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY1OQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIGJ5dGVjIDE0IC8vIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgpnZXRTd2FwUXVvdGVfYWZ0ZXJfaWZfZWxzZUAzOgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NjgKICAgIC8vIGNvbnN0IGV4cGVjdGVkT3V0cHV0ID0gdGhpcy5nZXRFeHBlY3RlZFN3YXBPdXRwdXQodXNkY0JhbGFuY2UpOwogICAgZHVwbiAyCiAgICBjYWxsc3ViIGdldEV4cGVjdGVkU3dhcE91dHB1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4MAogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KG4xLCBuMik7CiAgICBkdXAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjcwCiAgICAvLyBjb25zdCBtaW5BdDUwQnBzID0gdGhpcy5tdWxEaXZGbG9vcihleHBlY3RlZE91dHB1dCwgRkVFX0JQU19CQVNFIC0gVWludDY0KDUwKSwgRkVFX0JQU19CQVNFKTsKICAgIHB1c2hpbnQgOTk1MCAvLyA5OTUwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgwCiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIG11bHcKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODEKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NzAKICAgIC8vIGNvbnN0IG1pbkF0NTBCcHMgPSB0aGlzLm11bERpdkZsb29yKGV4cGVjdGVkT3V0cHV0LCBGRUVfQlBTX0JBU0UgLSBVaW50NjQoNTApLCBGRUVfQlBTX0JBU0UpOwogICAgaW50YyA0IC8vIDEwMDAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgxCiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgZGl2bW9kdwogICAgcG9wbiAyCiAgICBzd2FwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgyCiAgICAvLyBhc3NlcnQocV9oaSA9PT0gVWludDY0KDApLCAnTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3InKTsKICAgICEKICAgIGFzc2VydCAvLyBNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NzIKICAgIC8vIHJldHVybiBbdXNkY0JhbGFuY2UsIGV4cGVjdGVkT3V0cHV0LCBtaW5BdDUwQnBzXTsKICAgIHVuY292ZXIgMgogICAgaXRvYgogICAgdW5jb3ZlciAyCiAgICBpdG9iCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGl0b2IKICAgIGNvbmNhdAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NTkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICBiIGdldFN3YXBRdW90ZV9hZnRlcl9pbmxpbmVkX1JhcmVGaVZhdWx0LmFsZ28udHM6OlJhcmVGaVZhdWx0LmdldFN3YXBRdW90ZUA0CgoKLy8gUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQudXBkYXRlTWluU3dhcFRocmVzaG9sZFtyb3V0aW5nXSgpIC0+IHZvaWQ6CnVwZGF0ZU1pblN3YXBUaHJlc2hvbGQ6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY4MgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzMgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Njg0CiAgICAvLyBjb25zdCBpc0NyZWF0b3IgPSBUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDQKICAgIC8vIGNyZWF0b3JBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAvLyBWYXVsdCBjcmVhdG9yIHdobyByZWNlaXZlcyBmZWUKICAgIGJ5dGVjIDkgLy8gImNyZWF0b3JBZGRyZXNzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2ODQKICAgIC8vIGNvbnN0IGlzQ3JlYXRvciA9IFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Njg1CiAgICAvLyBjb25zdCBpc1JhcmVmaSA9IFR4bi5zZW5kZXIgPT09IHRoaXMucmFyZWZpQWRkcmVzcy52YWx1ZTsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ1CiAgICAvLyByYXJlZmlBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAgLy8gUmFyZUZpIHBsYXRmb3JtIGFkZHJlc3MgKGNhbiBhbHNvIHRyaWdnZXIgc3dhcHMpCiAgICBieXRlYyAxNSAvLyAicmFyZWZpQWRkcmVzcyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Njg1CiAgICAvLyBjb25zdCBpc1JhcmVmaSA9IFR4bi5zZW5kZXIgPT09IHRoaXMucmFyZWZpQWRkcmVzcy52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2ODYKICAgIC8vIGFzc2VydChpc0NyZWF0b3IgfHwgaXNSYXJlZmksICdPbmx5IGNyZWF0b3Igb3IgUmFyZUZpIGNhbiB1cGRhdGUnKTsKICAgIHx8CiAgICBhc3NlcnQgLy8gT25seSBjcmVhdG9yIG9yIFJhcmVGaSBjYW4gdXBkYXRlCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY4NwogICAgLy8gYXNzZXJ0KG5ld1RocmVzaG9sZCA+PSBNSU5fU1dBUF9BTU9VTlQsICdUaHJlc2hvbGQgdG9vIGxvdycpOwogICAgZHVwCiAgICBpbnRjIDYgLy8gMjAwMDAwCiAgICA+PQogICAgYXNzZXJ0IC8vIFRocmVzaG9sZCB0b28gbG93CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUyCiAgICAvLyBtaW5Td2FwVGhyZXNob2xkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgLy8gTWluaW11bSBVU0RDIGJlZm9yZSBzd2FwIGFsbG93ZWQKICAgIGJ5dGVjIDE2IC8vICJtaW5Td2FwVGhyZXNob2xkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2ODgKICAgIC8vIHRoaXMubWluU3dhcFRocmVzaG9sZC52YWx1ZSA9IG5ld1RocmVzaG9sZDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY4MgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjpSYXJlRmlWYXVsdC51cGRhdGVUaW55bWFuUG9vbFtyb3V0aW5nXSgpIC0+IHZvaWQ6CnVwZGF0ZVRpbnltYW5Qb29sOgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2OTUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18zIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICBkdXAKICAgIGxlbgogICAgcHVzaGludCAzMiAvLyAzMgogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC5zdGF0aWNfYXJyYXk8YXJjNC51aW50OCwgMzI+CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY5NwogICAgLy8gY29uc3QgaXNDcmVhdG9yID0gVHhuLnNlbmRlciA9PT0gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZTsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ0CiAgICAvLyBjcmVhdG9yQWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7ICAgLy8gVmF1bHQgY3JlYXRvciB3aG8gcmVjZWl2ZXMgZmVlCiAgICBieXRlYyA5IC8vICJjcmVhdG9yQWRkcmVzcyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Njk3CiAgICAvLyBjb25zdCBpc0NyZWF0b3IgPSBUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY5OAogICAgLy8gY29uc3QgaXNSYXJlZmkgPSBUeG4uc2VuZGVyID09PSB0aGlzLnJhcmVmaUFkZHJlc3MudmFsdWU7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NQogICAgLy8gcmFyZWZpQWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7ICAgIC8vIFJhcmVGaSBwbGF0Zm9ybSBhZGRyZXNzIChjYW4gYWxzbyB0cmlnZ2VyIHN3YXBzKQogICAgYnl0ZWMgMTUgLy8gInJhcmVmaUFkZHJlc3MiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY5OAogICAgLy8gY29uc3QgaXNSYXJlZmkgPSBUeG4uc2VuZGVyID09PSB0aGlzLnJhcmVmaUFkZHJlc3MudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Njk5CiAgICAvLyBhc3NlcnQoaXNDcmVhdG9yIHx8IGlzUmFyZWZpLCAnT25seSBjcmVhdG9yIG9yIFJhcmVGaSBjYW4gdXBkYXRlJyk7CiAgICB8fAogICAgYXNzZXJ0IC8vIE9ubHkgY3JlYXRvciBvciBSYXJlRmkgY2FuIHVwZGF0ZQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3MDAKICAgIC8vIGFzc2VydChuZXdQb29sQXBwSWQgIT09IFVpbnQ2NCgwKSwgJ0ludmFsaWQgcG9vbCBhcHAgSUQnKTsKICAgIGRpZyAxCiAgICBhc3NlcnQgLy8gSW52YWxpZCBwb29sIGFwcCBJRAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NgogICAgLy8gdGlueW1hblBvb2xBcHBJZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgIC8vIFRpbnltYW4gVjIgcG9vbCBhcHAgSUQgKFVTREMvc3dhcEFzc2V0KQogICAgYnl0ZWMgMTIgLy8gInRpbnltYW5Qb29sQXBwSWQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjcwMQogICAgLy8gdGhpcy50aW55bWFuUG9vbEFwcElkLnZhbHVlID0gbmV3UG9vbEFwcElkOwogICAgdW5jb3ZlciAyCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NwogICAgLy8gdGlueW1hblBvb2xBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgLy8gVGlueW1hbiBwb29sIGFkZHJlc3MKICAgIGJ5dGVjIDEzIC8vICJ0aW55bWFuUG9vbEFkZHJlc3MiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjcwMgogICAgLy8gdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWUgPSBuZXdQb29sQWRkcmVzczsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY5NQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjpSYXJlRmlWYXVsdC5jb250cmlidXRlRmFybVtyb3V0aW5nXSgpIC0+IHZvaWQ6CmNvbnRyaWJ1dGVGYXJtOgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3MTgKICAgIC8vIGNvbnN0IGFwcEFkZHI6IEFjY291bnQgPSBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzczsKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjcxOQogICAgLy8gY29uc3QgY3VycmVudEluZGV4ID0gVHhuLmdyb3VwSW5kZXg7CiAgICB0eG4gR3JvdXBJbmRleAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3MjAKICAgIC8vIGFzc2VydChjdXJyZW50SW5kZXggPj0gVWludDY0KDEpLCAnQXBwIGNhbGwgbXVzdCBmb2xsb3cgYXNzZXQgdHJhbnNmZXInKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIEFwcCBjYWxsIG11c3QgZm9sbG93IGFzc2V0IHRyYW5zZmVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjcyMwogICAgLy8gY29uc3QgZmFybVRyYW5zZmVyID0gZ3R4bi5Bc3NldFRyYW5zZmVyVHhuKGN1cnJlbnRJbmRleCAtIFVpbnQ2NCgxKSk7CiAgICBpbnRjXzEgLy8gMQogICAgLQogICAgZHVwCiAgICBndHhucyBUeXBlRW51bQogICAgaW50Y18yIC8vIGF4ZmVyCiAgICA9PQogICAgYXNzZXJ0IC8vIHRyYW5zYWN0aW9uIHR5cGUgaXMgYXhmZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzI0CiAgICAvLyBhc3NlcnQoZmFybVRyYW5zZmVyLnhmZXJBc3NldCA9PT0gQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLCAnTXVzdCB0cmFuc2ZlciBzd2FwIGFzc2V0Jyk7CiAgICBkdXAKICAgIGd0eG5zIFhmZXJBc3NldAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDEKICAgIC8vIHN3YXBBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBQcm9qZWN0J3MgQVNBIElEICh3aGF0IHlpZWxkIGlzIHN3YXBwZWQgdG8pCiAgICBieXRlY18zIC8vICJzd2FwQXNzZXQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjcyNAogICAgLy8gYXNzZXJ0KGZhcm1UcmFuc2Zlci54ZmVyQXNzZXQgPT09IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwgJ011c3QgdHJhbnNmZXIgc3dhcCBhc3NldCcpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBhc3NlcnQgLy8gTXVzdCB0cmFuc2ZlciBzd2FwIGFzc2V0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjcyNQogICAgLy8gYXNzZXJ0KGZhcm1UcmFuc2Zlci5hc3NldFJlY2VpdmVyID09PSBhcHBBZGRyLCAnTXVzdCBzZW5kIHRvIGNvbnRyYWN0Jyk7CiAgICBkdXAKICAgIGd0eG5zIEFzc2V0UmVjZWl2ZXIKICAgIHVuY292ZXIgMgogICAgPT0KICAgIGFzc2VydCAvLyBNdXN0IHNlbmQgdG8gY29udHJhY3QKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzI3CiAgICAvLyBjb25zdCBhbW91bnQgPSBmYXJtVHJhbnNmZXIuYXNzZXRBbW91bnQ7CiAgICBndHhucyBBc3NldEFtb3VudAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3MjgKICAgIC8vIGFzc2VydChhbW91bnQgPiBVaW50NjQoMCksICdDb250cmlidXRpb24gbXVzdCBiZSBwb3NpdGl2ZScpOwogICAgZHVwCiAgICBhc3NlcnQgLy8gQ29udHJpYnV0aW9uIG11c3QgYmUgcG9zaXRpdmUKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzMxCiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSArIGFtb3VudDsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYwCiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBzd2FwQXNzZXQgYXZhaWxhYmxlIGZvciBmYXJtIGJvbnVzCiAgICBieXRlY18wIC8vICJmYXJtQmFsYW5jZSIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzMxCiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSArIGFtb3VudDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICArCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYwCiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBzd2FwQXNzZXQgYXZhaWxhYmxlIGZvciBmYXJtIGJvbnVzCiAgICBieXRlY18wIC8vICJmYXJtQmFsYW5jZSIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzMxCiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSArIGFtb3VudDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjcxNgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjpSYXJlRmlWYXVsdC5zZXRGYXJtRW1pc3Npb25SYXRlW3JvdXRpbmddKCkgLT4gdm9pZDoKc2V0RmFybUVtaXNzaW9uUmF0ZToKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzQxCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMyAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NDMKICAgIC8vIGNvbnN0IGlzQ3JlYXRvciA9IFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWU7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NAogICAgLy8gY3JlYXRvckFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgIC8vIFZhdWx0IGNyZWF0b3Igd2hvIHJlY2VpdmVzIGZlZQogICAgYnl0ZWMgOSAvLyAiY3JlYXRvckFkZHJlc3MiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjc0MwogICAgLy8gY29uc3QgaXNDcmVhdG9yID0gVHhuLnNlbmRlciA9PT0gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NDQKICAgIC8vIGNvbnN0IGlzUmFyZWZpID0gVHhuLnNlbmRlciA9PT0gdGhpcy5yYXJlZmlBZGRyZXNzLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDUKICAgIC8vIHJhcmVmaUFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgICAvLyBSYXJlRmkgcGxhdGZvcm0gYWRkcmVzcyAoY2FuIGFsc28gdHJpZ2dlciBzd2FwcykKICAgIGJ5dGVjIDE1IC8vICJyYXJlZmlBZGRyZXNzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NDQKICAgIC8vIGNvbnN0IGlzUmFyZWZpID0gVHhuLnNlbmRlciA9PT0gdGhpcy5yYXJlZmlBZGRyZXNzLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjc0NQogICAgLy8gYXNzZXJ0KGlzQ3JlYXRvciB8fCBpc1JhcmVmaSwgJ09ubHkgY3JlYXRvciBvciBSYXJlRmkgY2FuIHNldCBmYXJtIHJhdGUnKTsKICAgIHx8CiAgICBhc3NlcnQgLy8gT25seSBjcmVhdG9yIG9yIFJhcmVGaSBjYW4gc2V0IGZhcm0gcmF0ZQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NDYKICAgIC8vIGFzc2VydChlbWlzc2lvblJhdGVCcHMgPD0gTUFYX0ZBUk1fRU1JU1NJT05fQlBTLCAnRW1pc3Npb24gcmF0ZSB0b28gaGlnaCAobWF4IDEwMCUpJyk7CiAgICBkdXAKICAgIGludGMgNCAvLyAxMDAwMAogICAgPD0KICAgIGFzc2VydCAvLyBFbWlzc2lvbiByYXRlIHRvbyBoaWdoIChtYXggMTAwJSkKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjEKICAgIC8vIGZhcm1FbWlzc2lvblJhdGUgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIEJhc2lzIHBvaW50cyBvZiBzd2FwIG91dHB1dCB0byBhZGQgZnJvbSBmYXJtIChlLmcuLCAxMDAwID0gMTAlKQogICAgYnl0ZWMgNyAvLyAiZmFybUVtaXNzaW9uUmF0ZSIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzQ4CiAgICAvLyB0aGlzLmZhcm1FbWlzc2lvblJhdGUudmFsdWUgPSBlbWlzc2lvblJhdGVCcHM7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NDEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQuZ2V0RmFybVN0YXRzW3JvdXRpbmddKCkgLT4gdm9pZDoKZ2V0RmFybVN0YXRzOgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NTcKICAgIC8vIHJldHVybiBbdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSwgdGhpcy5mYXJtRW1pc3Npb25SYXRlLnZhbHVlXTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYwCiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBzd2FwQXNzZXQgYXZhaWxhYmxlIGZvciBmYXJtIGJvbnVzCiAgICBieXRlY18wIC8vICJmYXJtQmFsYW5jZSIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzU3CiAgICAvLyByZXR1cm4gW3RoaXMuZmFybUJhbGFuY2UudmFsdWUsIHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZV07CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjEKICAgIC8vIGZhcm1FbWlzc2lvblJhdGUgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIEJhc2lzIHBvaW50cyBvZiBzd2FwIG91dHB1dCB0byBhZGQgZnJvbSBmYXJtIChlLmcuLCAxMDAwID0gMTAlKQogICAgYnl0ZWMgNyAvLyAiZmFybUVtaXNzaW9uUmF0ZSIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzU3CiAgICAvLyByZXR1cm4gW3RoaXMuZmFybUJhbGFuY2UudmFsdWUsIHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZV07CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgc3dhcAogICAgaXRvYgogICAgc3dhcAogICAgaXRvYgogICAgY29uY2F0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjc1NQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIGJ5dGVjIDE0IC8vIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQudXBkYXRlRWFybmVkWWllbGQodXNlcjogYnl0ZXMpIC0+IHZvaWQ6CnVwZGF0ZUVhcm5lZFlpZWxkOgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo5MAogICAgLy8gcHJpdmF0ZSB1cGRhdGVFYXJuZWRZaWVsZCh1c2VyOiBBY2NvdW50KTogdm9pZCB7CiAgICBwcm90byAxIDAKICAgIHB1c2hieXRlcyAiIgogICAgZHVwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjkxCiAgICAvLyBjb25zdCBkZXBvc2l0ZWQgPSB0aGlzLmRlcG9zaXRlZEFtb3VudCh1c2VyKS52YWx1ZTsKICAgIGZyYW1lX2RpZyAtMQogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjcKICAgIC8vIGRlcG9zaXRlZEFtb3VudCA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAvLyBVc2VyJ3MgQWxwaGEgYmFsYW5jZSBpbiB2YXVsdAogICAgYnl0ZWMgNSAvLyAiZGVwb3NpdGVkQW1vdW50IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo5MQogICAgLy8gY29uc3QgZGVwb3NpdGVkID0gdGhpcy5kZXBvc2l0ZWRBbW91bnQodXNlcikudmFsdWU7CiAgICBhcHBfbG9jYWxfZ2V0X2V4CiAgICBzd2FwCiAgICBkdXAKICAgIHVuY292ZXIgMgogICAgYXNzZXJ0IC8vIGNoZWNrIExvY2FsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjkzCiAgICAvLyBpZiAoZGVwb3NpdGVkID4gVWludDY0KDApKSB7CiAgICBieiB1cGRhdGVFYXJuZWRZaWVsZF9hZnRlcl9pZl9lbHNlQDQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6OTUKICAgIC8vIGNvbnN0IGN1cnJlbnRZUFQgPSB0aGlzLnlpZWxkUGVyVG9rZW4udmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MQogICAgLy8geWllbGRQZXJUb2tlbiA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIEFjY3VtdWxhdG9yIGZvciB5aWVsZCBkaXN0cmlidXRpb24gKHNjYWxlZCBieSBTQ0FMRSkKICAgIGJ5dGVjIDQgLy8gInlpZWxkUGVyVG9rZW4iCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjk1CiAgICAvLyBjb25zdCBjdXJyZW50WVBUID0gdGhpcy55aWVsZFBlclRva2VuLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIHN3YXAKICAgIGR1cAogICAgY292ZXIgMgogICAgZnJhbWVfYnVyeSAwCiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjk2CiAgICAvLyBjb25zdCB1c2VyWVBUID0gdGhpcy51c2VyWWllbGRQZXJUb2tlbih1c2VyKS52YWx1ZTsKICAgIGZyYW1lX2RpZyAtMQogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjgKICAgIC8vIHVzZXJZaWVsZFBlclRva2VuID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBTbmFwc2hvdCBvZiB5aWVsZFBlclRva2VuIGF0IGxhc3QgYWN0aW9uCiAgICBieXRlYyAxNyAvLyAidXNlcllpZWxkUGVyVG9rZW4iCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjk2CiAgICAvLyBjb25zdCB1c2VyWVBUID0gdGhpcy51c2VyWWllbGRQZXJUb2tlbih1c2VyKS52YWx1ZTsKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGR1cAogICAgY292ZXIgMgogICAgZnJhbWVfYnVyeSAxCiAgICBhc3NlcnQgLy8gY2hlY2sgTG9jYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6OTgKICAgIC8vIGlmIChjdXJyZW50WVBUID4gdXNlcllQVCkgewogICAgPgogICAgYnogdXBkYXRlRWFybmVkWWllbGRfYWZ0ZXJfaWZfZWxzZUA0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjk5CiAgICAvLyBjb25zdCBwZW5kaW5nID0gdGhpcy5tdWxEaXZGbG9vcihkZXBvc2l0ZWQsIGN1cnJlbnRZUFQgLSB1c2VyWVBULCBTQ0FMRSk7CiAgICBmcmFtZV9kaWcgMAogICAgZnJhbWVfZGlnIDEKICAgIC0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODAKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgZnJhbWVfZGlnIDIKICAgIG11bHcKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODEKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo5OQogICAgLy8gY29uc3QgcGVuZGluZyA9IHRoaXMubXVsRGl2Rmxvb3IoZGVwb3NpdGVkLCBjdXJyZW50WVBUIC0gdXNlcllQVCwgU0NBTEUpOwogICAgaW50YyA1IC8vIDEwMDAwMDAwMDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODEKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBkaXZtb2R3CiAgICBwb3BuIDIKICAgIHN3YXAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODIKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjEwMAogICAgLy8gdGhpcy5lYXJuZWRZaWVsZCh1c2VyKS52YWx1ZSA9IHRoaXMuZWFybmVkWWllbGQodXNlcikudmFsdWUgKyBwZW5kaW5nOwogICAgZnJhbWVfZGlnIC0xCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2OQogICAgLy8gZWFybmVkWWllbGQgPSBMb2NhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIEFjY3VtdWxhdGVkIHlpZWxkIG5vdCB5ZXQgY2xhaW1lZAogICAgYnl0ZWMgOCAvLyAiZWFybmVkWWllbGQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjEwMAogICAgLy8gdGhpcy5lYXJuZWRZaWVsZCh1c2VyKS52YWx1ZSA9IHRoaXMuZWFybmVkWWllbGQodXNlcikudmFsdWUgKyBwZW5kaW5nOwogICAgYXBwX2xvY2FsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIExvY2FsU3RhdGUgZXhpc3RzCiAgICArCiAgICBmcmFtZV9kaWcgLTEKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjkKICAgIC8vIGVhcm5lZFlpZWxkID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBBY2N1bXVsYXRlZCB5aWVsZCBub3QgeWV0IGNsYWltZWQKICAgIGJ5dGVjIDggLy8gImVhcm5lZFlpZWxkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMDAKICAgIC8vIHRoaXMuZWFybmVkWWllbGQodXNlcikudmFsdWUgPSB0aGlzLmVhcm5lZFlpZWxkKHVzZXIpLnZhbHVlICsgcGVuZGluZzsKICAgIHVuY292ZXIgMgogICAgYXBwX2xvY2FsX3B1dAoKdXBkYXRlRWFybmVkWWllbGRfYWZ0ZXJfaWZfZWxzZUA0OgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMDUKICAgIC8vIHRoaXMudXNlcllpZWxkUGVyVG9rZW4odXNlcikudmFsdWUgPSB0aGlzLnlpZWxkUGVyVG9rZW4udmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MQogICAgLy8geWllbGRQZXJUb2tlbiA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIEFjY3VtdWxhdG9yIGZvciB5aWVsZCBkaXN0cmlidXRpb24gKHNjYWxlZCBieSBTQ0FMRSkKICAgIGJ5dGVjIDQgLy8gInlpZWxkUGVyVG9rZW4iCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjEwNQogICAgLy8gdGhpcy51c2VyWWllbGRQZXJUb2tlbih1c2VyKS52YWx1ZSA9IHRoaXMueWllbGRQZXJUb2tlbi52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBmcmFtZV9kaWcgLTEKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjgKICAgIC8vIHVzZXJZaWVsZFBlclRva2VuID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBTbmFwc2hvdCBvZiB5aWVsZFBlclRva2VuIGF0IGxhc3QgYWN0aW9uCiAgICBieXRlYyAxNyAvLyAidXNlcllpZWxkUGVyVG9rZW4iCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjEwNQogICAgLy8gdGhpcy51c2VyWWllbGRQZXJUb2tlbih1c2VyKS52YWx1ZSA9IHRoaXMueWllbGRQZXJUb2tlbi52YWx1ZTsKICAgIHVuY292ZXIgMgogICAgYXBwX2xvY2FsX3B1dAogICAgcmV0c3ViCgoKLy8gUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQuZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0KGlucHV0QW1vdW50OiB1aW50NjQpIC0+IHVpbnQ2NDoKZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0OgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMjQKICAgIC8vIHByaXZhdGUgZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0KGlucHV0QW1vdW50OiB1aW50NjQpOiB1aW50NjQgewogICAgcHJvdG8gMSAxCiAgICBwdXNoYnl0ZXMgIiIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTI1CiAgICAvLyBjb25zdCBwb29sQXBwID0gdGhpcy50aW55bWFuUG9vbEFwcElkLnZhbHVlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTYKICAgIC8vIHRpbnltYW5Qb29sQXBwSWQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBUaW55bWFuIFYyIHBvb2wgYXBwIElEIChVU0RDL3N3YXBBc3NldCkKICAgIGJ5dGVjIDEyIC8vICJ0aW55bWFuUG9vbEFwcElkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMjUKICAgIC8vIGNvbnN0IHBvb2xBcHAgPSB0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMjYKICAgIC8vIGNvbnN0IHBvb2xBZGRyID0gdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NwogICAgLy8gdGlueW1hblBvb2xBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgLy8gVGlueW1hbiBwb29sIGFkZHJlc3MKICAgIGJ5dGVjIDEzIC8vICJ0aW55bWFuUG9vbEFkZHJlc3MiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjEyNgogICAgLy8gY29uc3QgcG9vbEFkZHIgPSB0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjEyOQogICAgLy8gY29uc3QgW2Fzc2V0MUlkLCBoYXNBc3NldDFJZF0gPSBBcHBMb2NhbC5nZXRFeFVpbnQ2NChwb29sQWRkciwgcG9vbEFwcCwgQnl0ZXMoJ2Fzc2V0XzFfaWQnKSk7CiAgICBkdXAKICAgIGRpZyAyCiAgICBwdXNoYnl0ZXMgImFzc2V0XzFfaWQiCiAgICBhcHBfbG9jYWxfZ2V0X2V4CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjEzMAogICAgLy8gYXNzZXJ0KGhhc0Fzc2V0MUlkLCAnQ2Fubm90IHJlYWQgcG9vbCBhc3NldF8xX2lkJyk7CiAgICBhc3NlcnQgLy8gQ2Fubm90IHJlYWQgcG9vbCBhc3NldF8xX2lkCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjEzMgogICAgLy8gY29uc3QgW2Fzc2V0MVJlc2VydmVzLCBoYXNBc3NldDFSZXNlcnZlc10gPSBBcHBMb2NhbC5nZXRFeFVpbnQ2NChwb29sQWRkciwgcG9vbEFwcCwgQnl0ZXMoJ2Fzc2V0XzFfcmVzZXJ2ZXMnKSk7CiAgICBkaWcgMQogICAgZGlnIDMKICAgIHB1c2hieXRlcyAiYXNzZXRfMV9yZXNlcnZlcyIKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGNvdmVyIDQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTMzCiAgICAvLyBhc3NlcnQoaGFzQXNzZXQxUmVzZXJ2ZXMsICdDYW5ub3QgcmVhZCBwb29sIGFzc2V0XzFfcmVzZXJ2ZXMnKTsKICAgIGFzc2VydCAvLyBDYW5ub3QgcmVhZCBwb29sIGFzc2V0XzFfcmVzZXJ2ZXMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTM1CiAgICAvLyBjb25zdCBbYXNzZXQyUmVzZXJ2ZXMsIGhhc0Fzc2V0MlJlc2VydmVzXSA9IEFwcExvY2FsLmdldEV4VWludDY0KHBvb2xBZGRyLCBwb29sQXBwLCBCeXRlcygnYXNzZXRfMl9yZXNlcnZlcycpKTsKICAgIGRpZyAxCiAgICBkaWcgMwogICAgcHVzaGJ5dGVzICJhc3NldF8yX3Jlc2VydmVzIgogICAgYXBwX2xvY2FsX2dldF9leAogICAgc3dhcAogICAgY292ZXIgNAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMzYKICAgIC8vIGFzc2VydChoYXNBc3NldDJSZXNlcnZlcywgJ0Nhbm5vdCByZWFkIHBvb2wgYXNzZXRfMl9yZXNlcnZlcycpOwogICAgYXNzZXJ0IC8vIENhbm5vdCByZWFkIHBvb2wgYXNzZXRfMl9yZXNlcnZlcwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMzgKICAgIC8vIGNvbnN0IFt0b3RhbEZlZVNoYXJlLCBoYXNUb3RhbEZlZVNoYXJlXSA9IEFwcExvY2FsLmdldEV4VWludDY0KHBvb2xBZGRyLCBwb29sQXBwLCBCeXRlcygndG90YWxfZmVlX3NoYXJlJykpOwogICAgc3dhcAogICAgdW5jb3ZlciAyCiAgICBwdXNoYnl0ZXMgInRvdGFsX2ZlZV9zaGFyZSIKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGNvdmVyIDMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTM5CiAgICAvLyBhc3NlcnQoaGFzVG90YWxGZWVTaGFyZSwgJ0Nhbm5vdCByZWFkIHBvb2wgdG90YWxfZmVlX3NoYXJlJyk7CiAgICBhc3NlcnQgLy8gQ2Fubm90IHJlYWQgcG9vbCB0b3RhbF9mZWVfc2hhcmUKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTQ1CiAgICAvLyBpZiAoYXNzZXQxSWQgPT09IHRoaXMueWllbGRBc3NldC52YWx1ZSkgewogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDAKICAgIC8vIHlpZWxkQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBVU0RDIEFTQSBJRCAod2hhdCBhaXJkcm9wcyBjb21lIGluIGFzKQogICAgYnl0ZWNfMiAvLyAieWllbGRBc3NldCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTQ1CiAgICAvLyBpZiAoYXNzZXQxSWQgPT09IHRoaXMueWllbGRBc3NldC52YWx1ZSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBieiBnZXRFeHBlY3RlZFN3YXBPdXRwdXRfZWxzZV9ib2R5QDIKICAgIGZyYW1lX2RpZyAxCiAgICBmcmFtZV9idXJ5IDAKCmdldEV4cGVjdGVkU3dhcE91dHB1dF9hZnRlcl9pZl9lbHNlQDM6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjE1OAogICAgLy8gY29uc3QgbmV0SW5wdXQgPSB0aGlzLm11bERpdkZsb29yKGlucHV0QW1vdW50LCBGRUVfQlBTX0JBU0UgLSBmZWVCcHMsIEZFRV9CUFNfQkFTRSk7CiAgICBpbnRjIDQgLy8gMTAwMDAKICAgIGZyYW1lX2RpZyAyCiAgICAtCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgwCiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGZyYW1lX2RpZyAtMQogICAgbXVsdwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4MQogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjE1OAogICAgLy8gY29uc3QgbmV0SW5wdXQgPSB0aGlzLm11bERpdkZsb29yKGlucHV0QW1vdW50LCBGRUVfQlBTX0JBU0UgLSBmZWVCcHMsIEZFRV9CUFNfQkFTRSk7CiAgICBpbnRjIDQgLy8gMTAwMDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODEKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBkaXZtb2R3CiAgICBwb3BuIDIKICAgIHN3YXAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODIKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjE2MgogICAgLy8gY29uc3QgZXhwZWN0ZWRPdXRwdXQgPSB0aGlzLm11bERpdkZsb29yKG91dHB1dFJlc2VydmVzLCBuZXRJbnB1dCwgaW5wdXRSZXNlcnZlcyArIG5ldElucHV0KTsKICAgIGZyYW1lX2RpZyAwCiAgICBkaWcgMQogICAgKwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4MAogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KG4xLCBuMik7CiAgICBjb3ZlciAyCiAgICBtdWx3CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgxCiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIHVuY292ZXIgMwogICAgZGl2bW9kdwogICAgcG9wbiAyCiAgICBzd2FwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjgyCiAgICAvLyBhc3NlcnQocV9oaSA9PT0gVWludDY0KDApLCAnTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3InKTsKICAgICEKICAgIGFzc2VydCAvLyBNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxNjQKICAgIC8vIHJldHVybiBleHBlY3RlZE91dHB1dDsKICAgIGZyYW1lX2J1cnkgMAogICAgcmV0c3ViCgpnZXRFeHBlY3RlZFN3YXBPdXRwdXRfZWxzZV9ib2R5QDI6CiAgICBmcmFtZV9idXJ5IDAKICAgIGZyYW1lX2RpZyAxCiAgICBiIGdldEV4cGVjdGVkU3dhcE91dHB1dF9hZnRlcl9pZl9lbHNlQDMK",
        "clear": "I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYmFzZS1jb250cmFjdC5kLnRzOjpCYXNlQ29udHJhY3QuY2xlYXJTdGF0ZVByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBwdXNoaW50IDEgLy8gMQogICAgcmV0dXJuCg=="
    },
    "state": {
        "global": {
            "num_byte_slices": 3,
            "num_uints": 12
        },
        "local": {
            "num_byte_slices": 0,
            "num_uints": 3
        }
    },
    "schema": {
        "global": {
            "declared": {
                "creatorAddress": {
                    "type": "bytes",
                    "key": "creatorAddress"
                },
                "creatorFeeRate": {
                    "type": "uint64",
                    "key": "creatorFeeRate"
                },
                "creatorUnclaimedYield": {
                    "type": "uint64",
                    "key": "creatorUnclaimedYield"
                },
                "depositAsset": {
                    "type": "uint64",
                    "key": "depositAsset"
                },
                "farmBalance": {
                    "type": "uint64",
                    "key": "farmBalance"
                },
                "farmEmissionRate": {
                    "type": "uint64",
                    "key": "farmEmissionRate"
                },
                "minSwapThreshold": {
                    "type": "uint64",
                    "key": "minSwapThreshold"
                },
                "rarefiAddress": {
                    "type": "bytes",
                    "key": "rarefiAddress"
                },
                "swapAsset": {
                    "type": "uint64",
                    "key": "swapAsset"
                },
                "tinymanPoolAddress": {
                    "type": "bytes",
                    "key": "tinymanPoolAddress"
                },
                "tinymanPoolAppId": {
                    "type": "uint64",
                    "key": "tinymanPoolAppId"
                },
                "totalDeposits": {
                    "type": "uint64",
                    "key": "totalDeposits"
                },
                "totalYieldGenerated": {
                    "type": "uint64",
                    "key": "totalYieldGenerated"
                },
                "yieldAsset": {
                    "type": "uint64",
                    "key": "yieldAsset"
                },
                "yieldPerToken": {
                    "type": "uint64",
                    "key": "yieldPerToken"
                }
            },
            "reserved": {}
        },
        "local": {
            "declared": {
                "depositedAmount": {
                    "type": "uint64",
                    "key": "depositedAmount"
                },
                "earnedYield": {
                    "type": "uint64",
                    "key": "earnedYield"
                },
                "userYieldPerToken": {
                    "type": "uint64",
                    "key": "userYieldPerToken"
                }
            },
            "reserved": {}
        }
    },
    "contract": {
        "name": "RareFiVault",
        "methods": [
            {
                "name": "createVault",
                "args": [
                    {
                        "type": "uint64",
                        "name": "depositAssetId"
                    },
                    {
                        "type": "uint64",
                        "name": "yieldAssetId"
                    },
                    {
                        "type": "uint64",
                        "name": "swapAssetId"
                    },
                    {
                        "type": "uint64",
                        "name": "creatorFeeRate"
                    },
                    {
                        "type": "uint64",
                        "name": "minSwapThreshold"
                    },
                    {
                        "type": "uint64",
                        "name": "tinymanPoolAppId"
                    },
                    {
                        "type": "address",
                        "name": "tinymanPoolAddress"
                    },
                    {
                        "type": "address",
                        "name": "rarefiAddress"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Create and initialize the vault\r\nCalled once at deployment"
            },
            {
                "name": "optInAssets",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Opt the contract into all required assets\r\nMust be called by creator after deployment with:\r\n- 5.5 ALGO payment (stays in contract for MBR and operational fees)"
            },
            {
                "name": "optIn",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "User opts into the contract to enable local storage"
            },
            {
                "name": "closeOut",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "User closes out - claims all pending yield and withdraws all deposits first"
            },
            {
                "name": "deposit",
                "args": [
                    {
                        "type": "uint64",
                        "name": "slippageBps",
                        "desc": "- Slippage tolerance for auto-swap (ignored if no swap needed)"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "User deposits Alpha into the vault\r\nExpects an asset transfer in the group before this call\r\n\r\nIf USDC balance >= threshold and has existing depositors, automatically\r\nswaps yield BEFORE processing deposit. This ensures yield goes to\r\nexisting depositors, not the new one."
            },
            {
                "name": "withdraw",
                "args": [
                    {
                        "type": "uint64",
                        "name": "amount",
                        "desc": "- Amount to withdraw (0 = withdraw all)"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "User withdraws Alpha from the vault"
            },
            {
                "name": "claim",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "User claims their accumulated yield (in swap_asset)"
            },
            {
                "name": "claimCreator",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Creator claims their accumulated yield"
            },
            {
                "name": "swapYield",
                "args": [
                    {
                        "type": "uint64",
                        "name": "slippageBps",
                        "desc": "- Slippage tolerance in basis points (e.g., 50 = 0.5%, 100 = 1%)"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Swaps accumulated USDC to project ASA via Tinyman V2\r\nUses ON-CHAIN price calculation - reads pool reserves and fee dynamically\r\nOnly callable by creator or RareFi platform to prevent sandwich attacks\r\n\r\nTinyman V2 swap requires:\r\n- Inner txn 1: Asset transfer to pool address\r\n- Inner txn 2: App call to pool with \"swap\" method"
            },
            {
                "name": "getVaultStats",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "(uint64,uint64,uint64,uint64,uint64,uint64)"
                },
                "desc": "Get vault statistics"
            },
            {
                "name": "getPendingYield",
                "args": [
                    {
                        "type": "address",
                        "name": "user"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Get user's pending yield (without claiming)"
            },
            {
                "name": "getUserDeposit",
                "args": [
                    {
                        "type": "address",
                        "name": "user"
                    }
                ],
                "readonly": true,
                "returns": {
                    "type": "uint64"
                },
                "desc": "Get user's deposit balance"
            },
            {
                "name": "getSwapQuote",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "(uint64,uint64,uint64)",
                    "desc": "[usdcBalance, expectedOutput, minOutputAt50bps]"
                },
                "desc": "Preview swap output - shows expected ASA for current USDC balance\r\nReads pool state on-chain to calculate expected output"
            },
            {
                "name": "updateMinSwapThreshold",
                "args": [
                    {
                        "type": "uint64",
                        "name": "newThreshold"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Update the minimum swap threshold"
            },
            {
                "name": "updateTinymanPool",
                "args": [
                    {
                        "type": "uint64",
                        "name": "newPoolAppId"
                    },
                    {
                        "type": "address",
                        "name": "newPoolAddress"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Update Tinyman pool configuration\r\nUse only if the pool needs to be changed (e.g., migration)"
            },
            {
                "name": "contributeFarm",
                "args": [],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Anyone can contribute to the farm by sending swapAsset\r\nFarm bonus is distributed proportionally during yield swaps\r\nThis allows projects/sponsors to boost yield for depositors\r\n\r\nExpects an asset transfer of swapAsset before this call"
            },
            {
                "name": "setFarmEmissionRate",
                "args": [
                    {
                        "type": "uint64",
                        "name": "emissionRateBps",
                        "desc": "- Emission rate in basis points (e.g., 1000 = 10%, 5000 = 50%)\r\n  Maximum 10000 (100%) - matches swap output 1:1"
                    }
                ],
                "readonly": false,
                "returns": {
                    "type": "void"
                },
                "desc": "Set the farm emission rate (percentage of swap output to add from farm)\r\nOnly callable by creator or RareFi"
            },
            {
                "name": "getFarmStats",
                "args": [],
                "readonly": true,
                "returns": {
                    "type": "(uint64,uint64)",
                    "desc": "[farmBalance, farmEmissionRate]"
                },
                "desc": "Get farm statistics"
            }
        ],
        "networks": {}
    },
    "bare_call_config": {
        "update_application": "CALL",
        "delete_application": "CALL"
    }
}