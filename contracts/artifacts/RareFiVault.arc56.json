{
    "name": "RareFiVault",
    "structs": {},
    "methods": [
        {
            "name": "createVault",
            "args": [
                {
                    "type": "uint64",
                    "name": "depositAssetId"
                },
                {
                    "type": "uint64",
                    "name": "yieldAssetId"
                },
                {
                    "type": "uint64",
                    "name": "swapAssetId"
                },
                {
                    "type": "uint64",
                    "name": "creatorFeeRate"
                },
                {
                    "type": "uint64",
                    "name": "minSwapThreshold"
                },
                {
                    "type": "uint64",
                    "name": "maxSlippageBps"
                },
                {
                    "type": "uint64",
                    "name": "tinymanPoolAppId"
                },
                {
                    "type": "address",
                    "name": "tinymanPoolAddress"
                },
                {
                    "type": "address",
                    "name": "rarefiAddress"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [
                    "NoOp"
                ],
                "call": []
            },
            "readonly": false,
            "desc": "Create and initialize the vault\r\nCalled once at deployment",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "optInAssets",
            "args": [],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Opt the contract into all required assets\r\nMust be called by creator after deployment with:\r\n- 5.5 ALGO payment (stays in contract for MBR and operational fees)",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "optIn",
            "args": [],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "OptIn"
                ]
            },
            "readonly": false,
            "desc": "User opts into the contract to enable local storage",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "closeOut",
            "args": [],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "CloseOut"
                ]
            },
            "readonly": false,
            "desc": "User closes out - claims all pending yield and withdraws all deposits first",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "deposit",
            "args": [
                {
                    "type": "uint64",
                    "name": "slippageBps",
                    "desc": "- Slippage tolerance for auto-swap (ignored if no swap needed)"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "User deposits Alpha into the vault\r\nExpects an asset transfer in the group before this call\r\n\r\nIf USDC balance >= threshold and has existing depositors, automatically\r\nswaps yield BEFORE processing deposit. This ensures yield goes to\r\nexisting depositors, not the new one.",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "withdraw",
            "args": [
                {
                    "type": "uint64",
                    "name": "amount",
                    "desc": "- Amount to withdraw (0 = withdraw all)"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "User withdraws Alpha from the vault",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "claim",
            "args": [],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "User claims their accumulated yield (in swap_asset)",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "claimCreator",
            "args": [],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Creator claims their accumulated yield",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "swapYield",
            "args": [
                {
                    "type": "uint64",
                    "name": "slippageBps",
                    "desc": "- Slippage tolerance in basis points (e.g., 50 = 0.5%, 100 = 1%)"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Swaps accumulated USDC to project ASA via Tinyman V2\r\nUses ON-CHAIN price calculation - reads pool reserves and fee dynamically\r\nPermissionless - anyone can trigger, slippage capped by maxSlippageBps",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "getVaultStats",
            "args": [],
            "returns": {
                "type": "(uint64,uint64,uint64,uint64,uint64,uint64)"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": true,
            "desc": "Get vault statistics",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "getPendingYield",
            "args": [
                {
                    "type": "address",
                    "name": "user"
                }
            ],
            "returns": {
                "type": "uint64"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": true,
            "desc": "Get user's pending yield (without claiming)",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "getUserDeposit",
            "args": [
                {
                    "type": "address",
                    "name": "user"
                }
            ],
            "returns": {
                "type": "uint64"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": true,
            "desc": "Get user's deposit balance",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "getSwapQuote",
            "args": [],
            "returns": {
                "type": "(uint64,uint64,uint64)",
                "desc": "[usdcBalance, expectedOutput, minOutputAt50bps]"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": true,
            "desc": "Preview swap output - shows expected ASA for current USDC balance\r\nReads pool state on-chain to calculate expected output",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "updateMinSwapThreshold",
            "args": [
                {
                    "type": "uint64",
                    "name": "newThreshold"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Update the minimum swap threshold",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "updateMaxSlippage",
            "args": [
                {
                    "type": "uint64",
                    "name": "newMaxSlippageBps"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Update the maximum slippage tolerance for swaps\r\nOnly callable by creator",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "updateTinymanPool",
            "args": [
                {
                    "type": "uint64",
                    "name": "newPoolAppId"
                },
                {
                    "type": "address",
                    "name": "newPoolAddress"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Update Tinyman pool configuration\r\nUse only if the pool needs to be changed (e.g., migration)\r\nValidates that the new pool contains the correct asset pair (yieldAsset/swapAsset)",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "updateCreatorFeeRate",
            "args": [
                {
                    "type": "uint64",
                    "name": "newFeeRate"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Update the creator fee rate\r\nOnly callable by creator, constrained to 0-6% range",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "contributeFarm",
            "args": [],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Anyone can contribute to the farm by sending swapAsset\r\nFarm bonus is distributed proportionally during yield swaps\r\nThis allows projects/sponsors to boost yield for depositors\r\n\r\nExpects an asset transfer of swapAsset before this call",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "setFarmEmissionRate",
            "args": [
                {
                    "type": "uint64",
                    "name": "emissionRateBps",
                    "desc": "- Emission rate in basis points (e.g., 1000 = 10%, 5000 = 50%)\r\n  Maximum 10000 (100%) - matches swap output 1:1\r\n  Minimum 1000 (10%) when farm has balance (to protect contributors)"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Set the farm emission rate (percentage of swap output to add from farm)\r\nOnly callable by creator or RareFi",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "getFarmStats",
            "args": [],
            "returns": {
                "type": "(uint64,uint64)",
                "desc": "[farmBalance, farmEmissionRate]"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": true,
            "desc": "Get farm statistics",
            "events": [],
            "recommendations": {}
        }
    ],
    "arcs": [
        22,
        28
    ],
    "networks": {},
    "state": {
        "schema": {
            "global": {
                "ints": 14,
                "bytes": 3
            },
            "local": {
                "ints": 3,
                "bytes": 0
            }
        },
        "keys": {
            "global": {
                "depositAsset": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "ZGVwb3NpdEFzc2V0"
                },
                "yieldAsset": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "eWllbGRBc3NldA=="
                },
                "swapAsset": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "c3dhcEFzc2V0"
                },
                "creatorAddress": {
                    "keyType": "AVMString",
                    "valueType": "address",
                    "key": "Y3JlYXRvckFkZHJlc3M="
                },
                "rarefiAddress": {
                    "keyType": "AVMString",
                    "valueType": "address",
                    "key": "cmFyZWZpQWRkcmVzcw=="
                },
                "creatorFeeRate": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "Y3JlYXRvckZlZVJhdGU="
                },
                "creatorUnclaimedYield": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "Y3JlYXRvclVuY2xhaW1lZFlpZWxk"
                },
                "totalDeposits": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "dG90YWxEZXBvc2l0cw=="
                },
                "yieldPerToken": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "eWllbGRQZXJUb2tlbg=="
                },
                "minSwapThreshold": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "bWluU3dhcFRocmVzaG9sZA=="
                },
                "maxSlippageBps": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "bWF4U2xpcHBhZ2VCcHM="
                },
                "totalYieldGenerated": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "dG90YWxZaWVsZEdlbmVyYXRlZA=="
                },
                "tinymanPoolAppId": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "dGlueW1hblBvb2xBcHBJZA=="
                },
                "tinymanPoolAddress": {
                    "keyType": "AVMString",
                    "valueType": "address",
                    "key": "dGlueW1hblBvb2xBZGRyZXNz"
                },
                "farmBalance": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "ZmFybUJhbGFuY2U="
                },
                "farmEmissionRate": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "ZmFybUVtaXNzaW9uUmF0ZQ=="
                },
                "assetsOptedIn": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "YXNzZXRzT3B0ZWRJbg=="
                }
            },
            "local": {
                "depositedAmount": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "ZGVwb3NpdGVkQW1vdW50"
                },
                "userYieldPerToken": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "dXNlcllpZWxkUGVyVG9rZW4="
                },
                "earnedYield": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "ZWFybmVkWWllbGQ="
                }
            },
            "box": {}
        },
        "maps": {
            "global": {},
            "local": {},
            "box": {}
        }
    },
    "bareActions": {
        "create": [],
        "call": [
            "DeleteApplication",
            "UpdateApplication"
        ]
    },
    "sourceInfo": {
        "approval": {
            "sourceInfo": [
                {
                    "pc": [
                        1058,
                        1876
                    ],
                    "errorMessage": "App call must follow asset transfer"
                },
                {
                    "pc": [
                        791
                    ],
                    "errorMessage": "App call must follow payment"
                },
                {
                    "pc": [
                        785
                    ],
                    "errorMessage": "Assets already opted in"
                },
                {
                    "pc": [
                        1344
                    ],
                    "errorMessage": "Below minimum swap threshold"
                },
                {
                    "pc": [
                        2109
                    ],
                    "errorMessage": "Cannot read pool asset_1_id"
                },
                {
                    "pc": [
                        2136
                    ],
                    "errorMessage": "Cannot read pool asset_1_reserves"
                },
                {
                    "pc": [
                        2163
                    ],
                    "errorMessage": "Cannot read pool asset_2_reserves"
                },
                {
                    "pc": [
                        1773
                    ],
                    "errorMessage": "Cannot read pool assets"
                },
                {
                    "pc": [
                        2188
                    ],
                    "errorMessage": "Cannot read pool total_fee_share"
                },
                {
                    "pc": [
                        555
                    ],
                    "errorMessage": "Contract deletion disabled"
                },
                {
                    "pc": [
                        559
                    ],
                    "errorMessage": "Contract updates disabled"
                },
                {
                    "pc": [
                        1911
                    ],
                    "errorMessage": "Contribution must be positive"
                },
                {
                    "pc": [
                        646
                    ],
                    "errorMessage": "Creator fee rate exceeds maximum (6%)"
                },
                {
                    "pc": [
                        689
                    ],
                    "errorMessage": "Deposit and swap assets must be different"
                },
                {
                    "pc": [
                        683
                    ],
                    "errorMessage": "Deposit and yield assets must be different"
                },
                {
                    "pc": [
                        1099
                    ],
                    "errorMessage": "Deposit too small"
                },
                {
                    "pc": [
                        1953
                    ],
                    "errorMessage": "Emission rate too high (max 100%)"
                },
                {
                    "pc": [
                        1966
                    ],
                    "errorMessage": "Emission rate too low (min 10% when farm has balance)"
                },
                {
                    "pc": [
                        2259
                    ],
                    "errorMessage": "Expected output is zero"
                },
                {
                    "pc": [
                        1864
                    ],
                    "errorMessage": "Fee rate exceeds maximum (6%)"
                },
                {
                    "pc": [
                        816
                    ],
                    "errorMessage": "Insufficient ALGO (need 5.5 ALGO)"
                },
                {
                    "pc": [
                        1166
                    ],
                    "errorMessage": "Insufficient balance"
                },
                {
                    "pc": [
                        677
                    ],
                    "errorMessage": "Invalid Tinyman pool app ID"
                },
                {
                    "pc": [
                        668
                    ],
                    "errorMessage": "Invalid deposit asset"
                },
                {
                    "pc": [
                        1741
                    ],
                    "errorMessage": "Invalid pool app ID"
                },
                {
                    "pc": [
                        674
                    ],
                    "errorMessage": "Invalid swap asset"
                },
                {
                    "pc": [
                        671
                    ],
                    "errorMessage": "Invalid yield asset"
                },
                {
                    "pc": [
                        665,
                        1690
                    ],
                    "errorMessage": "Max slippage too high"
                },
                {
                    "pc": [
                        659,
                        1685
                    ],
                    "errorMessage": "Max slippage too low (min 5%)"
                },
                {
                    "pc": [
                        1506,
                        1610,
                        2059,
                        2217,
                        2234,
                        2275,
                        2409,
                        2465,
                        2505
                    ],
                    "errorMessage": "Multiplication overflow in mulDivFloor"
                },
                {
                    "pc": [
                        1083,
                        1900
                    ],
                    "errorMessage": "Must send to contract"
                },
                {
                    "pc": [
                        1076
                    ],
                    "errorMessage": "Must transfer deposit asset"
                },
                {
                    "pc": [
                        1893
                    ],
                    "errorMessage": "Must transfer swap asset"
                },
                {
                    "pc": [
                        1349
                    ],
                    "errorMessage": "No depositors to distribute to"
                },
                {
                    "pc": [
                        1234,
                        1280
                    ],
                    "errorMessage": "Nothing to claim"
                },
                {
                    "pc": [
                        1158
                    ],
                    "errorMessage": "Nothing to withdraw"
                },
                {
                    "pc": [
                        525
                    ],
                    "errorMessage": "OnCompletion must be CloseOut && can only call when not creating"
                },
                {
                    "pc": [
                        370
                    ],
                    "errorMessage": "OnCompletion must be NoOp"
                },
                {
                    "pc": [
                        536
                    ],
                    "errorMessage": "OnCompletion must be OptIn && can only call when not creating"
                },
                {
                    "pc": [
                        1273
                    ],
                    "errorMessage": "Only creator can claim"
                },
                {
                    "pc": [
                        778
                    ],
                    "errorMessage": "Only creator can opt-in assets"
                },
                {
                    "pc": [
                        1859
                    ],
                    "errorMessage": "Only creator can update fee rate"
                },
                {
                    "pc": [
                        1679
                    ],
                    "errorMessage": "Only creator can update max slippage"
                },
                {
                    "pc": [
                        1949
                    ],
                    "errorMessage": "Only creator or RareFi can set farm rate"
                },
                {
                    "pc": [
                        1650,
                        1738
                    ],
                    "errorMessage": "Only creator or RareFi can update"
                },
                {
                    "pc": [
                        822
                    ],
                    "errorMessage": "Payment must be from caller"
                },
                {
                    "pc": [
                        806
                    ],
                    "errorMessage": "Payment must be to app"
                },
                {
                    "pc": [
                        1819
                    ],
                    "errorMessage": "Pool must contain yield and swap assets"
                },
                {
                    "pc": [
                        1018,
                        1326
                    ],
                    "errorMessage": "Slippage exceeds maximum allowed"
                },
                {
                    "pc": [
                        2372
                    ],
                    "errorMessage": "Swap output below minimum"
                },
                {
                    "pc": [
                        652
                    ],
                    "errorMessage": "Swap threshold too low"
                },
                {
                    "pc": [
                        1655
                    ],
                    "errorMessage": "Threshold too low"
                },
                {
                    "pc": [
                        1090,
                        1907
                    ],
                    "errorMessage": "Transfer must be from caller"
                },
                {
                    "pc": [
                        695
                    ],
                    "errorMessage": "Yield and swap assets must be different"
                },
                {
                    "pc": [
                        1032,
                        1335,
                        1367,
                        1377,
                        1555,
                        2283,
                        2365
                    ],
                    "errorMessage": "account opted into asset"
                },
                {
                    "pc": [
                        554,
                        558
                    ],
                    "errorMessage": "can only call when not creating"
                },
                {
                    "pc": [
                        776,
                        783,
                        828,
                        848,
                        868,
                        941,
                        958,
                        984,
                        1016,
                        1025,
                        1037,
                        1045,
                        1074,
                        1125,
                        1185,
                        1199,
                        1247,
                        1271,
                        1278,
                        1291,
                        1322,
                        1332,
                        1340,
                        1348,
                        1361,
                        1371,
                        1381,
                        1386,
                        1391,
                        1396,
                        1472,
                        1548,
                        1639,
                        1647,
                        1677,
                        1727,
                        1735,
                        1777,
                        1785,
                        1798,
                        1808,
                        1857,
                        1891,
                        1915,
                        1938,
                        1946,
                        1957,
                        1977,
                        1982,
                        2025,
                        2079,
                        2097,
                        2102,
                        2192,
                        2279,
                        2289,
                        2293,
                        2314,
                        2378,
                        2385,
                        2393,
                        2413,
                        2425,
                        2441,
                        2453,
                        2479,
                        2491,
                        2510,
                        2520
                    ],
                    "errorMessage": "check GlobalState exists"
                },
                {
                    "pc": [
                        924,
                        934,
                        1111,
                        1151,
                        1232,
                        1450,
                        1458,
                        1485,
                        1534,
                        2011,
                        2038,
                        2066
                    ],
                    "errorMessage": "check LocalState exists"
                },
                {
                    "pc": [
                        631,
                        640,
                        1438,
                        1529,
                        1720
                    ],
                    "errorMessage": "invalid number of bytes for arc4.static_array<arc4.uint8, 32>"
                },
                {
                    "pc": [
                        567,
                        576,
                        585,
                        594,
                        603,
                        612,
                        621,
                        1009,
                        1139,
                        1316,
                        1631,
                        1669,
                        1706,
                        1849,
                        1929
                    ],
                    "errorMessage": "invalid number of bytes for arc4.uint64"
                },
                {
                    "pc": [
                        1066,
                        1884
                    ],
                    "errorMessage": "transaction type is axfer"
                },
                {
                    "pc": [
                        799
                    ],
                    "errorMessage": "transaction type is pay"
                }
            ],
            "pcOffsetMethod": "none"
        },
        "clear": {
            "sourceInfo": [],
            "pcOffsetMethod": "none"
        }
    },
    "source": {
        "approval": "I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYXJjNC9pbmRleC5kLnRzOjpDb250cmFjdC5hcHByb3ZhbFByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBpbnRjYmxvY2sgMCAxIDggNCAxMDAwMCAxMDAwMDAwMDAwMDAwIDIwMDAwMAogICAgYnl0ZWNibG9jayAidG90YWxEZXBvc2l0cyIgInlpZWxkQXNzZXQiICJzd2FwQXNzZXQiICJmYXJtQmFsYW5jZSIgImRlcG9zaXRlZEFtb3VudCIgImNyZWF0b3JBZGRyZXNzIiAieWllbGRQZXJUb2tlbiIgImVhcm5lZFlpZWxkIiAiY3JlYXRvclVuY2xhaW1lZFlpZWxkIiAiZGVwb3NpdEFzc2V0IiAiZmFybUVtaXNzaW9uUmF0ZSIgMHgxNTFmN2M3NSAicmFyZWZpQWRkcmVzcyIgIm1pblN3YXBUaHJlc2hvbGQiICJtYXhTbGlwcGFnZUJwcyIgInRvdGFsWWllbGRHZW5lcmF0ZWQiICJ0aW55bWFuUG9vbEFwcElkIiAidGlueW1hblBvb2xBZGRyZXNzIiAidXNlcllpZWxkUGVyVG9rZW4iICJjcmVhdG9yRmVlUmF0ZSIgImFzc2V0c09wdGVkSW4iICJhc3NldF8xX2lkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNgogICAgLy8gZXhwb3J0IGNsYXNzIFJhcmVGaVZhdWx0IGV4dGVuZHMgYXJjNC5Db250cmFjdCB7CiAgICB0eG4gTnVtQXBwQXJncwogICAgYnogbWFpbl9iYXJlX3JvdXRpbmdAMjkKICAgIHB1c2hieXRlc3MgMHgyOTMxNGQ5NSAweDZhNjkxZmUyIC8vIG1ldGhvZCAib3B0SW4oKXZvaWQiLCBtZXRob2QgImNsb3NlT3V0KCl2b2lkIgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAogICAgbWF0Y2ggbWFpbl9vcHRJbl9yb3V0ZUAzIG1haW5fY2xvc2VPdXRfcm91dGVANAoKbWFpbl9zd2l0Y2hfY2FzZV9uZXh0QDU6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM2CiAgICAvLyBleHBvcnQgY2xhc3MgUmFyZUZpVmF1bHQgZXh0ZW5kcyBhcmM0LkNvbnRyYWN0IHsKICAgIHR4biBPbkNvbXBsZXRpb24KICAgICEKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gbXVzdCBiZSBOb09wCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYnogbWFpbl9jcmVhdGVfTm9PcEAyNQogICAgcHVzaGJ5dGVzcyAweDQxNGU0MWI1IDB4NmUyZWJjOWIgMHgyMWYxZGRmZiAweGYxNTc3NzI2IDB4YmM5OTQ0OWUgMHgzNmYzYjJmNCAweDAwMzU5N2EyIDB4YjBkZjVjMGYgMHgzZmI4YTkyNyAweGY0MWRhMzVkIDB4YWI2ZWY3M2IgMHhhYWUyY2FkMiAweDFlZjdiNTg2IDB4YmM1ZTM4YzYgMHhhZmViZmNhYyAweDEyNzg1MDY1IDB4Mzg0NWE3MWQgLy8gbWV0aG9kICJvcHRJbkFzc2V0cygpdm9pZCIsIG1ldGhvZCAiZGVwb3NpdCh1aW50NjQpdm9pZCIsIG1ldGhvZCAid2l0aGRyYXcodWludDY0KXZvaWQiLCBtZXRob2QgImNsYWltKCl2b2lkIiwgbWV0aG9kICJjbGFpbUNyZWF0b3IoKXZvaWQiLCBtZXRob2QgInN3YXBZaWVsZCh1aW50NjQpdm9pZCIsIG1ldGhvZCAiZ2V0VmF1bHRTdGF0cygpKHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0KSIsIG1ldGhvZCAiZ2V0UGVuZGluZ1lpZWxkKGFkZHJlc3MpdWludDY0IiwgbWV0aG9kICJnZXRVc2VyRGVwb3NpdChhZGRyZXNzKXVpbnQ2NCIsIG1ldGhvZCAiZ2V0U3dhcFF1b3RlKCkodWludDY0LHVpbnQ2NCx1aW50NjQpIiwgbWV0aG9kICJ1cGRhdGVNaW5Td2FwVGhyZXNob2xkKHVpbnQ2NCl2b2lkIiwgbWV0aG9kICJ1cGRhdGVNYXhTbGlwcGFnZSh1aW50NjQpdm9pZCIsIG1ldGhvZCAidXBkYXRlVGlueW1hblBvb2wodWludDY0LGFkZHJlc3Mpdm9pZCIsIG1ldGhvZCAidXBkYXRlQ3JlYXRvckZlZVJhdGUodWludDY0KXZvaWQiLCBtZXRob2QgImNvbnRyaWJ1dGVGYXJtKCl2b2lkIiwgbWV0aG9kICJzZXRGYXJtRW1pc3Npb25SYXRlKHVpbnQ2NCl2b2lkIiwgbWV0aG9kICJnZXRGYXJtU3RhdHMoKSh1aW50NjQsdWludDY0KSIKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDAKICAgIG1hdGNoIG9wdEluQXNzZXRzIGRlcG9zaXQgd2l0aGRyYXcgY2xhaW0gY2xhaW1DcmVhdG9yIHN3YXBZaWVsZCBnZXRWYXVsdFN0YXRzIGdldFBlbmRpbmdZaWVsZCBnZXRVc2VyRGVwb3NpdCBnZXRTd2FwUXVvdGUgdXBkYXRlTWluU3dhcFRocmVzaG9sZCB1cGRhdGVNYXhTbGlwcGFnZSB1cGRhdGVUaW55bWFuUG9vbCB1cGRhdGVDcmVhdG9yRmVlUmF0ZSBjb250cmlidXRlRmFybSBzZXRGYXJtRW1pc3Npb25SYXRlIGdldEZhcm1TdGF0cwogICAgZXJyCgptYWluX2NyZWF0ZV9Ob09wQDI1OgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNgogICAgLy8gZXhwb3J0IGNsYXNzIFJhcmVGaVZhdWx0IGV4dGVuZHMgYXJjNC5Db250cmFjdCB7CiAgICBwdXNoYnl0ZXMgMHhlYTcwNzMxOSAvLyBtZXRob2QgImNyZWF0ZVZhdWx0KHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCxhZGRyZXNzLGFkZHJlc3Mpdm9pZCIKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDAKICAgIG1hdGNoIGNyZWF0ZVZhdWx0CiAgICBlcnIKCm1haW5fY2xvc2VPdXRfcm91dGVANDoKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzYyCiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyBhbGxvd0FjdGlvbnM6ICdDbG9zZU91dCcgfSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIHB1c2hpbnQgMiAvLyBDbG9zZU91dAogICAgPT0KICAgIHR4biBBcHBsaWNhdGlvbklECiAgICAmJgogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBtdXN0IGJlIENsb3NlT3V0ICYmIGNhbiBvbmx5IGNhbGwgd2hlbiBub3QgY3JlYXRpbmcKICAgIGIgY2xvc2VPdXQKCm1haW5fb3B0SW5fcm91dGVAMzoKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzUxCiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyBhbGxvd0FjdGlvbnM6ICdPcHRJbicgfSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIGludGNfMSAvLyBPcHRJbgogICAgPT0KICAgIHR4biBBcHBsaWNhdGlvbklECiAgICAmJgogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBtdXN0IGJlIE9wdEluICYmIGNhbiBvbmx5IGNhbGwgd2hlbiBub3QgY3JlYXRpbmcKICAgIGIgb3B0SW4KCm1haW5fYmFyZV9yb3V0aW5nQDI5OgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNgogICAgLy8gZXhwb3J0IGNsYXNzIFJhcmVGaVZhdWx0IGV4dGVuZHMgYXJjNC5Db250cmFjdCB7CiAgICBpbnRjXzMgLy8gVXBkYXRlQXBwbGljYXRpb24KICAgIHB1c2hpbnQgNSAvLyBEZWxldGVBcHBsaWNhdGlvbgogICAgdHhuIE9uQ29tcGxldGlvbgogICAgbWF0Y2ggbWFpbl91cGRhdGVBcHBsaWNhdGlvbkAzMCBtYWluX2RlbGV0ZUFwcGxpY2F0aW9uQDMxCiAgICBlcnIKCm1haW5fZGVsZXRlQXBwbGljYXRpb25AMzE6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjc1NQogICAgLy8gQGJhcmVtZXRob2QoeyBhbGxvd0FjdGlvbnM6ICdEZWxldGVBcHBsaWNhdGlvbicgfSkKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gY2FuIG9ubHkgY2FsbCB3aGVuIG5vdCBjcmVhdGluZwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NTcKICAgIC8vIGFzc2VydChmYWxzZSwgJ0NvbnRyYWN0IGRlbGV0aW9uIGRpc2FibGVkJyk7CiAgICBlcnIgLy8gQ29udHJhY3QgZGVsZXRpb24gZGlzYWJsZWQKCm1haW5fdXBkYXRlQXBwbGljYXRpb25AMzA6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjc1MAogICAgLy8gQGJhcmVtZXRob2QoeyBhbGxvd0FjdGlvbnM6ICdVcGRhdGVBcHBsaWNhdGlvbicgfSkKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gY2FuIG9ubHkgY2FsbCB3aGVuIG5vdCBjcmVhdGluZwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NTIKICAgIC8vIGFzc2VydChmYWxzZSwgJ0NvbnRyYWN0IHVwZGF0ZXMgZGlzYWJsZWQnKTsKICAgIGVyciAvLyBDb250cmFjdCB1cGRhdGVzIGRpc2FibGVkCgoKLy8gUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQuY3JlYXRlVmF1bHRbcm91dGluZ10oKSAtPiB2b2lkOgpjcmVhdGVWYXVsdDoKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjM4CiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyBvbkNyZWF0ZTogJ3JlcXVpcmUnIH0pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAzCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyA0CiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyA1CiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyA2CiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyA3CiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyA4CiAgICBkdXAKICAgIGxlbgogICAgcHVzaGludCAzMiAvLyAzMgogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC5zdGF0aWNfYXJyYXk8YXJjNC51aW50OCwgMzI+CiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyA5CiAgICBkdXAKICAgIGxlbgogICAgcHVzaGludCAzMiAvLyAzMgogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC5zdGF0aWNfYXJyYXk8YXJjNC51aW50OCwgMzI+CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI1MQogICAgLy8gYXNzZXJ0KGNyZWF0b3JGZWVSYXRlIDw9IE1BWF9GRUVfUkFURSwgJ0NyZWF0b3IgZmVlIHJhdGUgZXhjZWVkcyBtYXhpbXVtICg2JSknKTsKICAgIGRpZyA1CiAgICBwdXNoaW50IDYgLy8gNgogICAgPD0KICAgIGFzc2VydCAvLyBDcmVhdG9yIGZlZSByYXRlIGV4Y2VlZHMgbWF4aW11bSAoNiUpCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI1MgogICAgLy8gYXNzZXJ0KG1pblN3YXBUaHJlc2hvbGQgPj0gTUlOX1NXQVBfQU1PVU5ULCAnU3dhcCB0aHJlc2hvbGQgdG9vIGxvdycpOwogICAgZGlnIDQKICAgIGludGMgNiAvLyAyMDAwMDAKICAgID49CiAgICBhc3NlcnQgLy8gU3dhcCB0aHJlc2hvbGQgdG9vIGxvdwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyNTMKICAgIC8vIGFzc2VydChtYXhTbGlwcGFnZUJwcyA+PSBNSU5fTUFYX1NMSVBQQUdFX0JQUywgJ01heCBzbGlwcGFnZSB0b28gbG93IChtaW4gNSUpJyk7CiAgICBkaWcgMwogICAgcHVzaGludCA1MDAgLy8gNTAwCiAgICA+PQogICAgYXNzZXJ0IC8vIE1heCBzbGlwcGFnZSB0b28gbG93IChtaW4gNSUpCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI1NAogICAgLy8gYXNzZXJ0KG1heFNsaXBwYWdlQnBzIDw9IE1BWF9TTElQUEFHRV9CUFMsICdNYXggc2xpcHBhZ2UgdG9vIGhpZ2gnKTsKICAgIGRpZyAzCiAgICBpbnRjIDQgLy8gMTAwMDAKICAgIDw9CiAgICBhc3NlcnQgLy8gTWF4IHNsaXBwYWdlIHRvbyBoaWdoCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI1NQogICAgLy8gYXNzZXJ0KGRlcG9zaXRBc3NldElkICE9PSBVaW50NjQoMCksICdJbnZhbGlkIGRlcG9zaXQgYXNzZXQnKTsKICAgIGRpZyA4CiAgICBhc3NlcnQgLy8gSW52YWxpZCBkZXBvc2l0IGFzc2V0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI1NgogICAgLy8gYXNzZXJ0KHlpZWxkQXNzZXRJZCAhPT0gVWludDY0KDApLCAnSW52YWxpZCB5aWVsZCBhc3NldCcpOwogICAgZGlnIDcKICAgIGFzc2VydCAvLyBJbnZhbGlkIHlpZWxkIGFzc2V0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI1NwogICAgLy8gYXNzZXJ0KHN3YXBBc3NldElkICE9PSBVaW50NjQoMCksICdJbnZhbGlkIHN3YXAgYXNzZXQnKTsKICAgIGRpZyA2CiAgICBhc3NlcnQgLy8gSW52YWxpZCBzd2FwIGFzc2V0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI1OAogICAgLy8gYXNzZXJ0KHRpbnltYW5Qb29sQXBwSWQgIT09IFVpbnQ2NCgwKSwgJ0ludmFsaWQgVGlueW1hbiBwb29sIGFwcCBJRCcpOwogICAgZGlnIDIKICAgIGFzc2VydCAvLyBJbnZhbGlkIFRpbnltYW4gcG9vbCBhcHAgSUQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjYxCiAgICAvLyBhc3NlcnQoZGVwb3NpdEFzc2V0SWQgIT09IHlpZWxkQXNzZXRJZCwgJ0RlcG9zaXQgYW5kIHlpZWxkIGFzc2V0cyBtdXN0IGJlIGRpZmZlcmVudCcpOwogICAgZGlnIDgKICAgIGRpZyA4CiAgICAhPQogICAgYXNzZXJ0IC8vIERlcG9zaXQgYW5kIHlpZWxkIGFzc2V0cyBtdXN0IGJlIGRpZmZlcmVudAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyNjIKICAgIC8vIGFzc2VydChkZXBvc2l0QXNzZXRJZCAhPT0gc3dhcEFzc2V0SWQsICdEZXBvc2l0IGFuZCBzd2FwIGFzc2V0cyBtdXN0IGJlIGRpZmZlcmVudCcpOwogICAgZGlnIDgKICAgIGRpZyA3CiAgICAhPQogICAgYXNzZXJ0IC8vIERlcG9zaXQgYW5kIHN3YXAgYXNzZXRzIG11c3QgYmUgZGlmZmVyZW50CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI2MwogICAgLy8gYXNzZXJ0KHlpZWxkQXNzZXRJZCAhPT0gc3dhcEFzc2V0SWQsICdZaWVsZCBhbmQgc3dhcCBhc3NldHMgbXVzdCBiZSBkaWZmZXJlbnQnKTsKICAgIGRpZyA3CiAgICBkaWcgNwogICAgIT0KICAgIGFzc2VydCAvLyBZaWVsZCBhbmQgc3dhcCBhc3NldHMgbXVzdCBiZSBkaWZmZXJlbnQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDIKICAgIC8vIGRlcG9zaXRBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAvLyBBbHBoYSBBU0EgSUQgKHdoYXQgdXNlcnMgZGVwb3NpdCkKICAgIGJ5dGVjIDkgLy8gImRlcG9zaXRBc3NldCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjY2CiAgICAvLyB0aGlzLmRlcG9zaXRBc3NldC52YWx1ZSA9IGRlcG9zaXRBc3NldElkOwogICAgdW5jb3ZlciA5CiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MwogICAgLy8geWllbGRBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFVTREMgQVNBIElEICh3aGF0IGFpcmRyb3BzIGNvbWUgaW4gYXMpCiAgICBieXRlY18xIC8vICJ5aWVsZEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyNjcKICAgIC8vIHRoaXMueWllbGRBc3NldC52YWx1ZSA9IHlpZWxkQXNzZXRJZDsKICAgIHVuY292ZXIgOAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDQKICAgIC8vIHN3YXBBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBQcm9qZWN0J3MgQVNBIElEICh3aGF0IHlpZWxkIGlzIHN3YXBwZWQgdG8pCiAgICBieXRlY18yIC8vICJzd2FwQXNzZXQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI2OAogICAgLy8gdGhpcy5zd2FwQXNzZXQudmFsdWUgPSBzd2FwQXNzZXRJZDsKICAgIHVuY292ZXIgNwogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDcKICAgIC8vIGNyZWF0b3JBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAvLyBWYXVsdCBjcmVhdG9yIHdobyByZWNlaXZlcyBmZWUKICAgIGJ5dGVjIDUgLy8gImNyZWF0b3JBZGRyZXNzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyNzEKICAgIC8vIHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWUgPSBUeG4uc2VuZGVyOwogICAgdHhuIFNlbmRlcgogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDgKICAgIC8vIHJhcmVmaUFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgICAvLyBSYXJlRmkgcGxhdGZvcm0gYWRkcmVzcyAoY2FuIGFsc28gdHJpZ2dlciBzd2FwcykKICAgIGJ5dGVjIDEyIC8vICJyYXJlZmlBZGRyZXNzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyNzIKICAgIC8vIHRoaXMucmFyZWZpQWRkcmVzcy52YWx1ZSA9IHJhcmVmaUFkZHJlc3M7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0OQogICAgLy8gY3JlYXRvckZlZVJhdGUgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIDAtMTAwLCBwZXJjZW50YWdlIG9mIHlpZWxkIHRvIGNyZWF0b3IKICAgIGJ5dGVjIDE5IC8vICJjcmVhdG9yRmVlUmF0ZSIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjczCiAgICAvLyB0aGlzLmNyZWF0b3JGZWVSYXRlLnZhbHVlID0gY3JlYXRvckZlZVJhdGU7CiAgICB1bmNvdmVyIDUKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUwCiAgICAvLyBjcmVhdG9yVW5jbGFpbWVkWWllbGQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIEFjY3VtdWxhdGVkIHlpZWxkIGZvciBjcmVhdG9yIHRvIGNsYWltCiAgICBieXRlYyA4IC8vICJjcmVhdG9yVW5jbGFpbWVkWWllbGQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI3NAogICAgLy8gdGhpcy5jcmVhdG9yVW5jbGFpbWVkWWllbGQudmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTMKICAgIC8vIHRvdGFsRGVwb3NpdHMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAvLyBUb3RhbCBBbHBoYSBkZXBvc2l0ZWQgaW4gdmF1bHQKICAgIGJ5dGVjXzAgLy8gInRvdGFsRGVwb3NpdHMiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI3NwogICAgLy8gdGhpcy50b3RhbERlcG9zaXRzLnZhbHVlID0gVWludDY0KDApOwogICAgaW50Y18wIC8vIDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU0CiAgICAvLyB5aWVsZFBlclRva2VuID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgLy8gQWNjdW11bGF0b3IgZm9yIHlpZWxkIGRpc3RyaWJ1dGlvbiAoc2NhbGVkIGJ5IFNDQUxFKQogICAgYnl0ZWMgNiAvLyAieWllbGRQZXJUb2tlbiIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mjc4CiAgICAvLyB0aGlzLnlpZWxkUGVyVG9rZW4udmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTUKICAgIC8vIG1pblN3YXBUaHJlc2hvbGQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBNaW5pbXVtIFVTREMgYmVmb3JlIHN3YXAgYWxsb3dlZAogICAgYnl0ZWMgMTMgLy8gIm1pblN3YXBUaHJlc2hvbGQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI3OQogICAgLy8gdGhpcy5taW5Td2FwVGhyZXNob2xkLnZhbHVlID0gbWluU3dhcFRocmVzaG9sZDsKICAgIHVuY292ZXIgNAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTYKICAgIC8vIG1heFNsaXBwYWdlQnBzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyBNYXhpbXVtIHNsaXBwYWdlIHRvbGVyYW5jZSBpbiBiYXNpcyBwb2ludHMKICAgIGJ5dGVjIDE0IC8vICJtYXhTbGlwcGFnZUJwcyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjgwCiAgICAvLyB0aGlzLm1heFNsaXBwYWdlQnBzLnZhbHVlID0gbWF4U2xpcHBhZ2VCcHM7CiAgICB1bmNvdmVyIDMKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU3CiAgICAvLyB0b3RhbFlpZWxkR2VuZXJhdGVkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBUb3RhbCB5aWVsZCBnZW5lcmF0ZWQgZnJvbSBzd2FwcyAoc3dhcCBvdXRwdXQgaW4gc3dhcEFzc2V0KQogICAgYnl0ZWMgMTUgLy8gInRvdGFsWWllbGRHZW5lcmF0ZWQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI4MQogICAgLy8gdGhpcy50b3RhbFlpZWxkR2VuZXJhdGVkLnZhbHVlID0gVWludDY0KDApOwogICAgaW50Y18wIC8vIDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYwCiAgICAvLyB0aW55bWFuUG9vbEFwcElkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgLy8gVGlueW1hbiBWMiBwb29sIGFwcCBJRCAoVVNEQy9zd2FwQXNzZXQpCiAgICBieXRlYyAxNiAvLyAidGlueW1hblBvb2xBcHBJZCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mjg0CiAgICAvLyB0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUgPSB0aW55bWFuUG9vbEFwcElkOwogICAgdW5jb3ZlciAyCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MQogICAgLy8gdGlueW1hblBvb2xBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgLy8gVGlueW1hbiBwb29sIGFkZHJlc3MKICAgIGJ5dGVjIDE3IC8vICJ0aW55bWFuUG9vbEFkZHJlc3MiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI4NQogICAgLy8gdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWUgPSB0aW55bWFuUG9vbEFkZHJlc3M7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgc3dhcEFzc2V0IGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMyAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjI4OAogICAgLy8gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NQogICAgLy8gZmFybUVtaXNzaW9uUmF0ZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gQmFzaXMgcG9pbnRzIG9mIHN3YXAgb3V0cHV0IHRvIGFkZCBmcm9tIGZhcm0gKGUuZy4sIDEwMDAgPSAxMCUpCiAgICBieXRlYyAxMCAvLyAiZmFybUVtaXNzaW9uUmF0ZSIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mjg5CiAgICAvLyB0aGlzLmZhcm1FbWlzc2lvblJhdGUudmFsdWUgPSBVaW50NjQoMCk7IC8vIERpc2FibGVkIGJ5IGRlZmF1bHQKICAgIGludGNfMCAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2OAogICAgLy8gYXNzZXRzT3B0ZWRJbiA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAvLyAxIGlmIGFzc2V0cyBhcmUgb3B0ZWQgaW4sIDAgb3RoZXJ3aXNlCiAgICBieXRlYyAyMCAvLyAiYXNzZXRzT3B0ZWRJbiIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjkyCiAgICAvLyB0aGlzLmFzc2V0c09wdGVkSW4udmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjM4CiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyBvbkNyZWF0ZTogJ3JlcXVpcmUnIH0pCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQub3B0SW5Bc3NldHNbcm91dGluZ10oKSAtPiB2b2lkOgpvcHRJbkFzc2V0czoKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzAyCiAgICAvLyBhc3NlcnQoVHhuLnNlbmRlciA9PT0gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZSwgJ09ubHkgY3JlYXRvciBjYW4gb3B0LWluIGFzc2V0cycpOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDcKICAgIC8vIGNyZWF0b3JBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAvLyBWYXVsdCBjcmVhdG9yIHdobyByZWNlaXZlcyBmZWUKICAgIGJ5dGVjIDUgLy8gImNyZWF0b3JBZGRyZXNzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMDIKICAgIC8vIGFzc2VydChUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlLCAnT25seSBjcmVhdG9yIGNhbiBvcHQtaW4gYXNzZXRzJyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBPbmx5IGNyZWF0b3IgY2FuIG9wdC1pbiBhc3NldHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzAzCiAgICAvLyBhc3NlcnQodGhpcy5hc3NldHNPcHRlZEluLnZhbHVlID09PSBVaW50NjQoMCksICdBc3NldHMgYWxyZWFkeSBvcHRlZCBpbicpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjgKICAgIC8vIGFzc2V0c09wdGVkSW4gPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgLy8gMSBpZiBhc3NldHMgYXJlIG9wdGVkIGluLCAwIG90aGVyd2lzZQogICAgYnl0ZWMgMjAgLy8gImFzc2V0c09wdGVkSW4iCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMwMwogICAgLy8gYXNzZXJ0KHRoaXMuYXNzZXRzT3B0ZWRJbi52YWx1ZSA9PT0gVWludDY0KDApLCAnQXNzZXRzIGFscmVhZHkgb3B0ZWQgaW4nKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAhCiAgICBhc3NlcnQgLy8gQXNzZXRzIGFscmVhZHkgb3B0ZWQgaW4KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzA1CiAgICAvLyBjb25zdCBhcHBBZGRyOiBBY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3M7CiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMDkKICAgIC8vIGNvbnN0IGN1cnJlbnRJbmRleCA9IFR4bi5ncm91cEluZGV4OwogICAgdHhuIEdyb3VwSW5kZXgKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzEwCiAgICAvLyBhc3NlcnQoY3VycmVudEluZGV4ID49IFVpbnQ2NCgxKSwgJ0FwcCBjYWxsIG11c3QgZm9sbG93IHBheW1lbnQnKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIEFwcCBjYWxsIG11c3QgZm9sbG93IHBheW1lbnQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzEyCiAgICAvLyBjb25zdCBhbGdvUGF5bWVudCA9IGd0eG4uUGF5bWVudFR4bihjdXJyZW50SW5kZXggLSBVaW50NjQoMSkpOwogICAgaW50Y18xIC8vIDEKICAgIC0KICAgIGR1cAogICAgZ3R4bnMgVHlwZUVudW0KICAgIGludGNfMSAvLyBwYXkKICAgID09CiAgICBhc3NlcnQgLy8gdHJhbnNhY3Rpb24gdHlwZSBpcyBwYXkKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzEzCiAgICAvLyBhc3NlcnQoYWxnb1BheW1lbnQucmVjZWl2ZXIgPT09IGFwcEFkZHIsICdQYXltZW50IG11c3QgYmUgdG8gYXBwJyk7CiAgICBkdXAKICAgIGd0eG5zIFJlY2VpdmVyCiAgICBkaWcgMgogICAgPT0KICAgIGFzc2VydCAvLyBQYXltZW50IG11c3QgYmUgdG8gYXBwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMxNAogICAgLy8gYXNzZXJ0KGFsZ29QYXltZW50LmFtb3VudCA+PSB0b3RhbFJlcXVpcmVkLCAnSW5zdWZmaWNpZW50IEFMR08gKG5lZWQgNS41IEFMR08pJyk7CiAgICBkdXAKICAgIGd0eG5zIEFtb3VudAogICAgcHVzaGludCA1NTAwMDAwIC8vIDU1MDAwMDAKICAgID49CiAgICBhc3NlcnQgLy8gSW5zdWZmaWNpZW50IEFMR08gKG5lZWQgNS41IEFMR08pCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMxNQogICAgLy8gYXNzZXJ0KGFsZ29QYXltZW50LnNlbmRlciA9PT0gVHhuLnNlbmRlciwgJ1BheW1lbnQgbXVzdCBiZSBmcm9tIGNhbGxlcicpOwogICAgZ3R4bnMgU2VuZGVyCiAgICB0eG4gU2VuZGVyCiAgICA9PQogICAgYXNzZXJ0IC8vIFBheW1lbnQgbXVzdCBiZSBmcm9tIGNhbGxlcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMTgtMzIzCiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBhcHBBZGRyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuZGVwb3NpdEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzIwCiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuZGVwb3NpdEFzc2V0LnZhbHVlKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQyCiAgICAvLyBkZXBvc2l0QXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgLy8gQWxwaGEgQVNBIElEICh3aGF0IHVzZXJzIGRlcG9zaXQpCiAgICBieXRlYyA5IC8vICJkZXBvc2l0QXNzZXQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMyMAogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLmRlcG9zaXRBc3NldC52YWx1ZSksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMjEKICAgIC8vIGFzc2V0QW1vdW50OiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBBc3NldEFtb3VudAogICAgaXR4bl9maWVsZCBYZmVyQXNzZXQKICAgIGR1cAogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMxOC0zMjMKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IGFwcEFkZHIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5kZXBvc2l0QXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaW50Y18zIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzIyCiAgICAvLyBmZWU6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMTgtMzIzCiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBhcHBBZGRyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuZGVwb3NpdEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMyNi0zMzEKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IGFwcEFkZHIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy55aWVsZEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzI4CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMueWllbGRBc3NldC52YWx1ZSksCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MwogICAgLy8geWllbGRBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFVTREMgQVNBIElEICh3aGF0IGFpcmRyb3BzIGNvbWUgaW4gYXMpCiAgICBieXRlY18xIC8vICJ5aWVsZEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMjgKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy55aWVsZEFzc2V0LnZhbHVlKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMyOQogICAgLy8gYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgZHVwCiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzI2LTMzMQogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogYXBwQWRkciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnlpZWxkQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaW50Y18zIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzMwCiAgICAvLyBmZWU6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMjYtMzMxCiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBhcHBBZGRyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMueWllbGRBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBVaW50NjQoMCksCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMzQtMzM5CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBhcHBBZGRyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzM2CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ0CiAgICAvLyBzd2FwQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gUHJvamVjdCdzIEFTQSBJRCAod2hhdCB5aWVsZCBpcyBzd2FwcGVkIHRvKQogICAgYnl0ZWNfMiAvLyAic3dhcEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMzYKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzM3CiAgICAvLyBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzM0LTMzOQogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogYXBwQWRkciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBVaW50NjQoMCksCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpbnRjXzMgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozMzgKICAgIC8vIGZlZTogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMzNC0zMzkKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IGFwcEFkZHIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjgKICAgIC8vIGFzc2V0c09wdGVkSW4gPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgLy8gMSBpZiBhc3NldHMgYXJlIG9wdGVkIGluLCAwIG90aGVyd2lzZQogICAgYnl0ZWMgMjAgLy8gImFzc2V0c09wdGVkSW4iCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM0MQogICAgLy8gdGhpcy5hc3NldHNPcHRlZEluLnZhbHVlID0gVWludDY0KDEpOwogICAgaW50Y18xIC8vIDEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjMwMAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjpSYXJlRmlWYXVsdC5vcHRJbltyb3V0aW5nXSgpIC0+IHZvaWQ6Cm9wdEluOgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNTQKICAgIC8vIHRoaXMuZGVwb3NpdGVkQW1vdW50KFR4bi5zZW5kZXIpLnZhbHVlID0gVWludDY0KDApOwogICAgdHhuIFNlbmRlcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NAogICAgLy8gZGVwb3NpdGVkQW1vdW50ID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIFVzZXIncyBBbHBoYSBiYWxhbmNlIGluIHZhdWx0CiAgICBieXRlYyA0IC8vICJkZXBvc2l0ZWRBbW91bnQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM1NAogICAgLy8gdGhpcy5kZXBvc2l0ZWRBbW91bnQoVHhuLnNlbmRlcikudmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2xvY2FsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNTUKICAgIC8vIHRoaXMudXNlcllpZWxkUGVyVG9rZW4oVHhuLnNlbmRlcikudmFsdWUgPSBVaW50NjQoMCk7CiAgICB0eG4gU2VuZGVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjc1CiAgICAvLyB1c2VyWWllbGRQZXJUb2tlbiA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgLy8gU25hcHNob3Qgb2YgeWllbGRQZXJUb2tlbiBhdCBsYXN0IGFjdGlvbgogICAgYnl0ZWMgMTggLy8gInVzZXJZaWVsZFBlclRva2VuIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNTUKICAgIC8vIHRoaXMudXNlcllpZWxkUGVyVG9rZW4oVHhuLnNlbmRlcikudmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2xvY2FsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNTYKICAgIC8vIHRoaXMuZWFybmVkWWllbGQoVHhuLnNlbmRlcikudmFsdWUgPSBVaW50NjQoMCk7CiAgICB0eG4gU2VuZGVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjc2CiAgICAvLyBlYXJuZWRZaWVsZCA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gQWNjdW11bGF0ZWQgeWllbGQgbm90IHlldCBjbGFpbWVkCiAgICBieXRlYyA3IC8vICJlYXJuZWRZaWVsZCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzU2CiAgICAvLyB0aGlzLmVhcm5lZFlpZWxkKFR4bi5zZW5kZXIpLnZhbHVlID0gVWludDY0KDApOwogICAgaW50Y18wIC8vIDAKICAgIGFwcF9sb2NhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzUxCiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyBhbGxvd0FjdGlvbnM6ICdPcHRJbicgfSkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjpSYXJlRmlWYXVsdC5jbG9zZU91dFtyb3V0aW5nXSgpIC0+IHZvaWQ6CmNsb3NlT3V0OgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNjUKICAgIC8vIHRoaXMudXBkYXRlRWFybmVkWWllbGQoVHhuLnNlbmRlcik7CiAgICB0eG4gU2VuZGVyCiAgICBjYWxsc3ViIHVwZGF0ZUVhcm5lZFlpZWxkCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM2NwogICAgLy8gY29uc3QgdXNlckRlcG9zaXQgPSB0aGlzLmRlcG9zaXRlZEFtb3VudChUeG4uc2VuZGVyKS52YWx1ZTsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjc0CiAgICAvLyBkZXBvc2l0ZWRBbW91bnQgPSBMb2NhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gVXNlcidzIEFscGhhIGJhbGFuY2UgaW4gdmF1bHQKICAgIGJ5dGVjIDQgLy8gImRlcG9zaXRlZEFtb3VudCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzY3CiAgICAvLyBjb25zdCB1c2VyRGVwb3NpdCA9IHRoaXMuZGVwb3NpdGVkQW1vdW50KFR4bi5zZW5kZXIpLnZhbHVlOwogICAgYXBwX2xvY2FsX2dldF9leAogICAgc3dhcAogICAgZHVwCiAgICB1bmNvdmVyIDIKICAgIGFzc2VydCAvLyBjaGVjayBMb2NhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNjgKICAgIC8vIGNvbnN0IHVzZXJZaWVsZCA9IHRoaXMuZWFybmVkWWllbGQoVHhuLnNlbmRlcikudmFsdWU7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NgogICAgLy8gZWFybmVkWWllbGQgPSBMb2NhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIEFjY3VtdWxhdGVkIHlpZWxkIG5vdCB5ZXQgY2xhaW1lZAogICAgYnl0ZWMgNyAvLyAiZWFybmVkWWllbGQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM2OAogICAgLy8gY29uc3QgdXNlcllpZWxkID0gdGhpcy5lYXJuZWRZaWVsZChUeG4uc2VuZGVyKS52YWx1ZTsKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGNvdmVyIDIKICAgIGFzc2VydCAvLyBjaGVjayBMb2NhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNzEKICAgIC8vIGlmICh1c2VyRGVwb3NpdCA+IFVpbnQ2NCgwKSkgewogICAgYnogY2xvc2VPdXRfYWZ0ZXJfaWZfZWxzZUA0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM3MgogICAgLy8gdGhpcy50b3RhbERlcG9zaXRzLnZhbHVlID0gdGhpcy50b3RhbERlcG9zaXRzLnZhbHVlIC0gdXNlckRlcG9zaXQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MwogICAgLy8gdG90YWxEZXBvc2l0cyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIFRvdGFsIEFscGhhIGRlcG9zaXRlZCBpbiB2YXVsdAogICAgYnl0ZWNfMCAvLyAidG90YWxEZXBvc2l0cyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MzcyCiAgICAvLyB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgPSB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgLSB1c2VyRGVwb3NpdDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBkaWcgMgogICAgZHVwCiAgICBjb3ZlciAyCiAgICAtCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUzCiAgICAvLyB0b3RhbERlcG9zaXRzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgLy8gVG90YWwgQWxwaGEgZGVwb3NpdGVkIGluIHZhdWx0CiAgICBieXRlY18wIC8vICJ0b3RhbERlcG9zaXRzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNzIKICAgIC8vIHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSA9IHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSAtIHVzZXJEZXBvc2l0OwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mzc0LTM3OQogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLmRlcG9zaXRBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiB1c2VyRGVwb3NpdCwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mzc1CiAgICAvLyBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgdHhuIFNlbmRlcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozNzYKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5kZXBvc2l0QXNzZXQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDIKICAgIC8vIGRlcG9zaXRBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAvLyBBbHBoYSBBU0EgSUQgKHdoYXQgdXNlcnMgZGVwb3NpdCkKICAgIGJ5dGVjIDkgLy8gImRlcG9zaXRBc3NldCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mzc2CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuZGVwb3NpdEFzc2V0LnZhbHVlKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICB1bmNvdmVyIDIKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mzc0LTM3OQogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLmRlcG9zaXRBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiB1c2VyRGVwb3NpdCwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGludGNfMyAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM3OAogICAgLy8gZmVlOiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mzc0LTM3OQogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLmRlcG9zaXRBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiB1c2VyRGVwb3NpdCwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CgpjbG9zZU91dF9hZnRlcl9pZl9lbHNlQDQ6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM4MwogICAgLy8gaWYgKHVzZXJZaWVsZCA+IFVpbnQ2NCgwKSkgewogICAgZHVwCiAgICBieiBjbG9zZU91dF9hZnRlcl9pZl9lbHNlQDcKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mzg0LTM4OQogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiB1c2VyWWllbGQsCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM4NQogICAgLy8gYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mzg2CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ0CiAgICAvLyBzd2FwQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gUHJvamVjdCdzIEFTQSBJRCAod2hhdCB5aWVsZCBpcyBzd2FwcGVkIHRvKQogICAgYnl0ZWNfMiAvLyAic3dhcEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozODYKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGRpZyAyCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM4NC0zODkKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogdXNlcllpZWxkLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaW50Y18zIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Mzg4CiAgICAvLyBmZWU6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czozODQtMzg5CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IHVzZXJZaWVsZCwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CgpjbG9zZU91dF9hZnRlcl9pZl9lbHNlQDc6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjM2MgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAnQ2xvc2VPdXQnIH0pCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQuZGVwb3NpdFtyb3V0aW5nXSgpIC0+IHZvaWQ6CmRlcG9zaXQ6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQwNwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIGR1cAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MDkKICAgIC8vIGFzc2VydChzbGlwcGFnZUJwcyA8PSB0aGlzLm1heFNsaXBwYWdlQnBzLnZhbHVlLCAnU2xpcHBhZ2UgZXhjZWVkcyBtYXhpbXVtIGFsbG93ZWQnKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU2CiAgICAvLyBtYXhTbGlwcGFnZUJwcyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gTWF4aW11bSBzbGlwcGFnZSB0b2xlcmFuY2UgaW4gYmFzaXMgcG9pbnRzCiAgICBieXRlYyAxNCAvLyAibWF4U2xpcHBhZ2VCcHMiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQwOQogICAgLy8gYXNzZXJ0KHNsaXBwYWdlQnBzIDw9IHRoaXMubWF4U2xpcHBhZ2VCcHMudmFsdWUsICdTbGlwcGFnZSBleGNlZWRzIG1heGltdW0gYWxsb3dlZCcpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIDw9CiAgICBhc3NlcnQgLy8gU2xpcHBhZ2UgZXhjZWVkcyBtYXhpbXVtIGFsbG93ZWQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDExCiAgICAvLyBjb25zdCBhcHBBZGRyOiBBY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3M7CiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgZHVwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQxMgogICAgLy8gY29uc3QgdXNkY0JhbGFuY2UgPSBBc3NldCh0aGlzLnlpZWxkQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MwogICAgLy8geWllbGRBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFVTREMgQVNBIElEICh3aGF0IGFpcmRyb3BzIGNvbWUgaW4gYXMpCiAgICBieXRlY18xIC8vICJ5aWVsZEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MTIKICAgIC8vIGNvbnN0IHVzZGNCYWxhbmNlID0gQXNzZXQodGhpcy55aWVsZEFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGFzc2V0X2hvbGRpbmdfZ2V0IEFzc2V0QmFsYW5jZQogICAgc3dhcAogICAgZHVwCiAgICB1bmNvdmVyIDIKICAgIGFzc2VydCAvLyBhY2NvdW50IG9wdGVkIGludG8gYXNzZXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDE2CiAgICAvLyBpZiAodXNkY0JhbGFuY2UgPj0gdGhpcy5taW5Td2FwVGhyZXNob2xkLnZhbHVlICYmIHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSA+IFVpbnQ2NCgwKSkgewogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTUKICAgIC8vIG1pblN3YXBUaHJlc2hvbGQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBNaW5pbXVtIFVTREMgYmVmb3JlIHN3YXAgYWxsb3dlZAogICAgYnl0ZWMgMTMgLy8gIm1pblN3YXBUaHJlc2hvbGQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQxNgogICAgLy8gaWYgKHVzZGNCYWxhbmNlID49IHRoaXMubWluU3dhcFRocmVzaG9sZC52YWx1ZSAmJiB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgPiBVaW50NjQoMCkpIHsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA+PQogICAgYnogZGVwb3NpdF9hZnRlcl9pZl9lbHNlQDQKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUzCiAgICAvLyB0b3RhbERlcG9zaXRzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgLy8gVG90YWwgQWxwaGEgZGVwb3NpdGVkIGluIHZhdWx0CiAgICBieXRlY18wIC8vICJ0b3RhbERlcG9zaXRzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MTYKICAgIC8vIGlmICh1c2RjQmFsYW5jZSA+PSB0aGlzLm1pblN3YXBUaHJlc2hvbGQudmFsdWUgJiYgdGhpcy50b3RhbERlcG9zaXRzLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnogZGVwb3NpdF9hZnRlcl9pZl9lbHNlQDQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDE3CiAgICAvLyB0aGlzLmV4ZWN1dGVTd2FwQW5kRGlzdHJpYnV0ZSh1c2RjQmFsYW5jZSwgc2xpcHBhZ2VCcHMpOwogICAgZHVwCiAgICBkaWcgMwogICAgY2FsbHN1YiBleGVjdXRlU3dhcEFuZERpc3RyaWJ1dGUKCmRlcG9zaXRfYWZ0ZXJfaWZfZWxzZUA0OgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MjEKICAgIC8vIGNvbnN0IGN1cnJlbnRJbmRleCA9IFR4bi5ncm91cEluZGV4OwogICAgdHhuIEdyb3VwSW5kZXgKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDIyCiAgICAvLyBhc3NlcnQoY3VycmVudEluZGV4ID49IFVpbnQ2NCgxKSwgJ0FwcCBjYWxsIG11c3QgZm9sbG93IGFzc2V0IHRyYW5zZmVyJyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBBcHAgY2FsbCBtdXN0IGZvbGxvdyBhc3NldCB0cmFuc2ZlcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MjQKICAgIC8vIGNvbnN0IGRlcG9zaXRUcmFuc2ZlciA9IGd0eG4uQXNzZXRUcmFuc2ZlclR4bihjdXJyZW50SW5kZXggLSBVaW50NjQoMSkpOwogICAgaW50Y18xIC8vIDEKICAgIC0KICAgIGR1cAogICAgZ3R4bnMgVHlwZUVudW0KICAgIGludGNfMyAvLyBheGZlcgogICAgPT0KICAgIGFzc2VydCAvLyB0cmFuc2FjdGlvbiB0eXBlIGlzIGF4ZmVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQyNQogICAgLy8gYXNzZXJ0KGRlcG9zaXRUcmFuc2Zlci54ZmVyQXNzZXQgPT09IEFzc2V0KHRoaXMuZGVwb3NpdEFzc2V0LnZhbHVlKSwgJ011c3QgdHJhbnNmZXIgZGVwb3NpdCBhc3NldCcpOwogICAgZHVwCiAgICBndHhucyBYZmVyQXNzZXQKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQyCiAgICAvLyBkZXBvc2l0QXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgLy8gQWxwaGEgQVNBIElEICh3aGF0IHVzZXJzIGRlcG9zaXQpCiAgICBieXRlYyA5IC8vICJkZXBvc2l0QXNzZXQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQyNQogICAgLy8gYXNzZXJ0KGRlcG9zaXRUcmFuc2Zlci54ZmVyQXNzZXQgPT09IEFzc2V0KHRoaXMuZGVwb3NpdEFzc2V0LnZhbHVlKSwgJ011c3QgdHJhbnNmZXIgZGVwb3NpdCBhc3NldCcpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBhc3NlcnQgLy8gTXVzdCB0cmFuc2ZlciBkZXBvc2l0IGFzc2V0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQyNgogICAgLy8gYXNzZXJ0KGRlcG9zaXRUcmFuc2Zlci5hc3NldFJlY2VpdmVyID09PSBhcHBBZGRyLCAnTXVzdCBzZW5kIHRvIGNvbnRyYWN0Jyk7CiAgICBkdXAKICAgIGd0eG5zIEFzc2V0UmVjZWl2ZXIKICAgIGRpZyAzCiAgICA9PQogICAgYXNzZXJ0IC8vIE11c3Qgc2VuZCB0byBjb250cmFjdAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MjcKICAgIC8vIGFzc2VydChkZXBvc2l0VHJhbnNmZXIuc2VuZGVyID09PSBUeG4uc2VuZGVyLCAnVHJhbnNmZXIgbXVzdCBiZSBmcm9tIGNhbGxlcicpOwogICAgZHVwCiAgICBndHhucyBTZW5kZXIKICAgIHR4biBTZW5kZXIKICAgID09CiAgICBhc3NlcnQgLy8gVHJhbnNmZXIgbXVzdCBiZSBmcm9tIGNhbGxlcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MjkKICAgIC8vIGNvbnN0IGFtb3VudCA9IGRlcG9zaXRUcmFuc2Zlci5hc3NldEFtb3VudDsKICAgIGd0eG5zIEFzc2V0QW1vdW50CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQzMAogICAgLy8gYXNzZXJ0KGFtb3VudCA+PSBNSU5fREVQT1NJVF9BTU9VTlQsICdEZXBvc2l0IHRvbyBzbWFsbCcpOwogICAgZHVwCiAgICBwdXNoaW50IDEwMDAwMDAgLy8gMTAwMDAwMAogICAgPj0KICAgIGFzc2VydCAvLyBEZXBvc2l0IHRvbyBzbWFsbAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MzMKICAgIC8vIHRoaXMudXBkYXRlRWFybmVkWWllbGQoVHhuLnNlbmRlcik7CiAgICB0eG4gU2VuZGVyCiAgICBjYWxsc3ViIHVwZGF0ZUVhcm5lZFlpZWxkCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQzNgogICAgLy8gdGhpcy5kZXBvc2l0ZWRBbW91bnQoVHhuLnNlbmRlcikudmFsdWUgPSB0aGlzLmRlcG9zaXRlZEFtb3VudChUeG4uc2VuZGVyKS52YWx1ZSArIGFtb3VudDsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjc0CiAgICAvLyBkZXBvc2l0ZWRBbW91bnQgPSBMb2NhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gVXNlcidzIEFscGhhIGJhbGFuY2UgaW4gdmF1bHQKICAgIGJ5dGVjIDQgLy8gImRlcG9zaXRlZEFtb3VudCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDM2CiAgICAvLyB0aGlzLmRlcG9zaXRlZEFtb3VudChUeG4uc2VuZGVyKS52YWx1ZSA9IHRoaXMuZGVwb3NpdGVkQW1vdW50KFR4bi5zZW5kZXIpLnZhbHVlICsgYW1vdW50OwogICAgYXBwX2xvY2FsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIExvY2FsU3RhdGUgZXhpc3RzCiAgICBkaWcgMQogICAgKwogICAgdHhuIFNlbmRlcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NAogICAgLy8gZGVwb3NpdGVkQW1vdW50ID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIFVzZXIncyBBbHBoYSBiYWxhbmNlIGluIHZhdWx0CiAgICBieXRlYyA0IC8vICJkZXBvc2l0ZWRBbW91bnQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQzNgogICAgLy8gdGhpcy5kZXBvc2l0ZWRBbW91bnQoVHhuLnNlbmRlcikudmFsdWUgPSB0aGlzLmRlcG9zaXRlZEFtb3VudChUeG4uc2VuZGVyKS52YWx1ZSArIGFtb3VudDsKICAgIHVuY292ZXIgMgogICAgYXBwX2xvY2FsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MzcKICAgIC8vIHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSA9IHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSArIGFtb3VudDsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUzCiAgICAvLyB0b3RhbERlcG9zaXRzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgLy8gVG90YWwgQWxwaGEgZGVwb3NpdGVkIGluIHZhdWx0CiAgICBieXRlY18wIC8vICJ0b3RhbERlcG9zaXRzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MzcKICAgIC8vIHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSA9IHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSArIGFtb3VudDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICArCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUzCiAgICAvLyB0b3RhbERlcG9zaXRzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgLy8gVG90YWwgQWxwaGEgZGVwb3NpdGVkIGluIHZhdWx0CiAgICBieXRlY18wIC8vICJ0b3RhbERlcG9zaXRzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MzcKICAgIC8vIHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSA9IHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSArIGFtb3VudDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQwNwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjpSYXJlRmlWYXVsdC53aXRoZHJhd1tyb3V0aW5nXSgpIC0+IHZvaWQ6CndpdGhkcmF3OgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NDQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICBkdXAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDQ2CiAgICAvLyBjb25zdCB1c2VyQmFsYW5jZSA9IHRoaXMuZGVwb3NpdGVkQW1vdW50KFR4bi5zZW5kZXIpLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzQKICAgIC8vIGRlcG9zaXRlZEFtb3VudCA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAvLyBVc2VyJ3MgQWxwaGEgYmFsYW5jZSBpbiB2YXVsdAogICAgYnl0ZWMgNCAvLyAiZGVwb3NpdGVkQW1vdW50IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NDYKICAgIC8vIGNvbnN0IHVzZXJCYWxhbmNlID0gdGhpcy5kZXBvc2l0ZWRBbW91bnQoVHhuLnNlbmRlcikudmFsdWU7CiAgICBhcHBfbG9jYWxfZ2V0X2V4CiAgICBzd2FwCiAgICBjb3ZlciAyCiAgICBhc3NlcnQgLy8gY2hlY2sgTG9jYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDUwCiAgICAvLyBpZiAod2l0aGRyYXdBbW91bnQgPT09IFVpbnQ2NCgwKSkgewogICAgYnogd2l0aGRyYXdfaWZfYm9keUAyCiAgICBkaWcgMQoKd2l0aGRyYXdfYWZ0ZXJfaWZfZWxzZUAzOgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NTQKICAgIC8vIGFzc2VydCh3aXRoZHJhd0Ftb3VudCA+IFVpbnQ2NCgwKSwgJ05vdGhpbmcgdG8gd2l0aGRyYXcnKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIE5vdGhpbmcgdG8gd2l0aGRyYXcKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDU1CiAgICAvLyBhc3NlcnQod2l0aGRyYXdBbW91bnQgPD0gdXNlckJhbGFuY2UsICdJbnN1ZmZpY2llbnQgYmFsYW5jZScpOwogICAgZHVwCiAgICBkaWcgMgogICAgZHVwCiAgICBjb3ZlciAyCiAgICA8PQogICAgYXNzZXJ0IC8vIEluc3VmZmljaWVudCBiYWxhbmNlCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ1OAogICAgLy8gdGhpcy51cGRhdGVFYXJuZWRZaWVsZChUeG4uc2VuZGVyKTsKICAgIHR4biBTZW5kZXIKICAgIGNhbGxzdWIgdXBkYXRlRWFybmVkWWllbGQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDYxCiAgICAvLyB0aGlzLmRlcG9zaXRlZEFtb3VudChUeG4uc2VuZGVyKS52YWx1ZSA9IHVzZXJCYWxhbmNlIC0gd2l0aGRyYXdBbW91bnQ7CiAgICBkaWcgMQogICAgLQogICAgdHhuIFNlbmRlcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NAogICAgLy8gZGVwb3NpdGVkQW1vdW50ID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIFVzZXIncyBBbHBoYSBiYWxhbmNlIGluIHZhdWx0CiAgICBieXRlYyA0IC8vICJkZXBvc2l0ZWRBbW91bnQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ2MQogICAgLy8gdGhpcy5kZXBvc2l0ZWRBbW91bnQoVHhuLnNlbmRlcikudmFsdWUgPSB1c2VyQmFsYW5jZSAtIHdpdGhkcmF3QW1vdW50OwogICAgdW5jb3ZlciAyCiAgICBhcHBfbG9jYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ2MgogICAgLy8gdGhpcy50b3RhbERlcG9zaXRzLnZhbHVlID0gdGhpcy50b3RhbERlcG9zaXRzLnZhbHVlIC0gd2l0aGRyYXdBbW91bnQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MwogICAgLy8gdG90YWxEZXBvc2l0cyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIFRvdGFsIEFscGhhIGRlcG9zaXRlZCBpbiB2YXVsdAogICAgYnl0ZWNfMCAvLyAidG90YWxEZXBvc2l0cyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDYyCiAgICAvLyB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgPSB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgLSB3aXRoZHJhd0Ftb3VudDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBkaWcgMQogICAgLQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MwogICAgLy8gdG90YWxEZXBvc2l0cyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIFRvdGFsIEFscGhhIGRlcG9zaXRlZCBpbiB2YXVsdAogICAgYnl0ZWNfMCAvLyAidG90YWxEZXBvc2l0cyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDYyCiAgICAvLyB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgPSB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgLSB3aXRoZHJhd0Ftb3VudDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ2NS00NzAKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5kZXBvc2l0QXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogd2l0aGRyYXdBbW91bnQsCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ2NgogICAgLy8gYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDY3CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuZGVwb3NpdEFzc2V0LnZhbHVlKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQyCiAgICAvLyBkZXBvc2l0QXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgLy8gQWxwaGEgQVNBIElEICh3aGF0IHVzZXJzIGRlcG9zaXQpCiAgICBieXRlYyA5IC8vICJkZXBvc2l0QXNzZXQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ2NwogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLmRlcG9zaXRBc3NldC52YWx1ZSksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgdW5jb3ZlciAyCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ2NS00NzAKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5kZXBvc2l0QXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogd2l0aGRyYXdBbW91bnQsCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpbnRjXzMgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NjkKICAgIC8vIGZlZTogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ2NS00NzAKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5kZXBvc2l0QXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogd2l0aGRyYXdBbW91bnQsCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NDQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgp3aXRoZHJhd19pZl9ib2R5QDI6CiAgICBkdXAKICAgIGIgd2l0aGRyYXdfYWZ0ZXJfaWZfZWxzZUAzCgoKLy8gUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQuY2xhaW1bcm91dGluZ10oKSAtPiB2b2lkOgpjbGFpbToKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDgzCiAgICAvLyB0aGlzLnVwZGF0ZUVhcm5lZFlpZWxkKFR4bi5zZW5kZXIpOwogICAgdHhuIFNlbmRlcgogICAgY2FsbHN1YiB1cGRhdGVFYXJuZWRZaWVsZAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0ODUKICAgIC8vIGNvbnN0IGNsYWltYWJsZSA9IHRoaXMuZWFybmVkWWllbGQoVHhuLnNlbmRlcikudmFsdWU7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NgogICAgLy8gZWFybmVkWWllbGQgPSBMb2NhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIEFjY3VtdWxhdGVkIHlpZWxkIG5vdCB5ZXQgY2xhaW1lZAogICAgYnl0ZWMgNyAvLyAiZWFybmVkWWllbGQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ4NQogICAgLy8gY29uc3QgY2xhaW1hYmxlID0gdGhpcy5lYXJuZWRZaWVsZChUeG4uc2VuZGVyKS52YWx1ZTsKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBMb2NhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0ODYKICAgIC8vIGFzc2VydChjbGFpbWFibGUgPiBVaW50NjQoMCksICdOb3RoaW5nIHRvIGNsYWltJyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBOb3RoaW5nIHRvIGNsYWltCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ4OQogICAgLy8gdGhpcy5lYXJuZWRZaWVsZChUeG4uc2VuZGVyKS52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzYKICAgIC8vIGVhcm5lZFlpZWxkID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBBY2N1bXVsYXRlZCB5aWVsZCBub3QgeWV0IGNsYWltZWQKICAgIGJ5dGVjIDcgLy8gImVhcm5lZFlpZWxkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0ODkKICAgIC8vIHRoaXMuZWFybmVkWWllbGQoVHhuLnNlbmRlcikudmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2xvY2FsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0OTItNDk3CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IGNsYWltYWJsZSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDkzCiAgICAvLyBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgdHhuIFNlbmRlcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0OTQKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDQKICAgIC8vIHN3YXBBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBQcm9qZWN0J3MgQVNBIElEICh3aGF0IHlpZWxkIGlzIHN3YXBwZWQgdG8pCiAgICBieXRlY18yIC8vICJzd2FwQXNzZXQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ5NAogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgdW5jb3ZlciAyCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ5Mi00OTcKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogY2xhaW1hYmxlLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaW50Y18zIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDk2CiAgICAvLyBmZWU6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0OTItNDk3CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IGNsYWltYWJsZSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ4MAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjpSYXJlRmlWYXVsdC5jbGFpbUNyZWF0b3Jbcm91dGluZ10oKSAtPiB2b2lkOgpjbGFpbUNyZWF0b3I6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUwNQogICAgLy8gYXNzZXJ0KFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWUsICdPbmx5IGNyZWF0b3IgY2FuIGNsYWltJyk7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NwogICAgLy8gY3JlYXRvckFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgIC8vIFZhdWx0IGNyZWF0b3Igd2hvIHJlY2VpdmVzIGZlZQogICAgYnl0ZWMgNSAvLyAiY3JlYXRvckFkZHJlc3MiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUwNQogICAgLy8gYXNzZXJ0KFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWUsICdPbmx5IGNyZWF0b3IgY2FuIGNsYWltJyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBPbmx5IGNyZWF0b3IgY2FuIGNsYWltCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUwNwogICAgLy8gY29uc3QgY2xhaW1hYmxlID0gdGhpcy5jcmVhdG9yVW5jbGFpbWVkWWllbGQudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MAogICAgLy8gY3JlYXRvclVuY2xhaW1lZFlpZWxkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBBY2N1bXVsYXRlZCB5aWVsZCBmb3IgY3JlYXRvciB0byBjbGFpbQogICAgYnl0ZWMgOCAvLyAiY3JlYXRvclVuY2xhaW1lZFlpZWxkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MDcKICAgIC8vIGNvbnN0IGNsYWltYWJsZSA9IHRoaXMuY3JlYXRvclVuY2xhaW1lZFlpZWxkLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTA4CiAgICAvLyBhc3NlcnQoY2xhaW1hYmxlID4gVWludDY0KDApLCAnTm90aGluZyB0byBjbGFpbScpOwogICAgZHVwCiAgICBhc3NlcnQgLy8gTm90aGluZyB0byBjbGFpbQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MAogICAgLy8gY3JlYXRvclVuY2xhaW1lZFlpZWxkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBBY2N1bXVsYXRlZCB5aWVsZCBmb3IgY3JlYXRvciB0byBjbGFpbQogICAgYnl0ZWMgOCAvLyAiY3JlYXRvclVuY2xhaW1lZFlpZWxkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MTEKICAgIC8vIHRoaXMuY3JlYXRvclVuY2xhaW1lZFlpZWxkLnZhbHVlID0gVWludDY0KDApOwogICAgaW50Y18wIC8vIDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUxNC01MTkKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogY2xhaW1hYmxlLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9iZWdpbgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MTUKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICB0eG4gU2VuZGVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUxNgogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSksCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NAogICAgLy8gc3dhcEFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFByb2plY3QncyBBU0EgSUQgKHdoYXQgeWllbGQgaXMgc3dhcHBlZCB0bykKICAgIGJ5dGVjXzIgLy8gInN3YXBBc3NldCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTE2CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICB1bmNvdmVyIDIKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTE0LTUxOQogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBjbGFpbWFibGUsCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpbnRjXzMgLy8gNAogICAgaXR4bl9maWVsZCBUeXBlRW51bQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MTgKICAgIC8vIGZlZTogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUxNC01MTkKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5zd2FwQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogY2xhaW1hYmxlLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTAzCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaVZhdWx0LmFsZ28udHM6OlJhcmVGaVZhdWx0LnN3YXBZaWVsZFtyb3V0aW5nXSgpIC0+IHZvaWQ6CnN3YXBZaWVsZDoKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTMzCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MzUKICAgIC8vIGFzc2VydChzbGlwcGFnZUJwcyA8PSB0aGlzLm1heFNsaXBwYWdlQnBzLnZhbHVlLCAnU2xpcHBhZ2UgZXhjZWVkcyBtYXhpbXVtIGFsbG93ZWQnKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU2CiAgICAvLyBtYXhTbGlwcGFnZUJwcyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gTWF4aW11bSBzbGlwcGFnZSB0b2xlcmFuY2UgaW4gYmFzaXMgcG9pbnRzCiAgICBieXRlYyAxNCAvLyAibWF4U2xpcHBhZ2VCcHMiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUzNQogICAgLy8gYXNzZXJ0KHNsaXBwYWdlQnBzIDw9IHRoaXMubWF4U2xpcHBhZ2VCcHMudmFsdWUsICdTbGlwcGFnZSBleGNlZWRzIG1heGltdW0gYWxsb3dlZCcpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGRpZyAxCiAgICA+PQogICAgYXNzZXJ0IC8vIFNsaXBwYWdlIGV4Y2VlZHMgbWF4aW11bSBhbGxvd2VkCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUzNwogICAgLy8gY29uc3QgYXBwQWRkcjogQWNjb3VudCA9IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzOwogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTM4CiAgICAvLyBjb25zdCB1c2RjQmFsYW5jZSA9IEFzc2V0KHRoaXMueWllbGRBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQzCiAgICAvLyB5aWVsZEFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKHdoYXQgYWlyZHJvcHMgY29tZSBpbiBhcykKICAgIGJ5dGVjXzEgLy8gInlpZWxkQXNzZXQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUzOAogICAgLy8gY29uc3QgdXNkY0JhbGFuY2UgPSBBc3NldCh0aGlzLnlpZWxkQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCiAgICBhc3NlcnQgLy8gYWNjb3VudCBvcHRlZCBpbnRvIGFzc2V0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU0MAogICAgLy8gYXNzZXJ0KHVzZGNCYWxhbmNlID49IHRoaXMubWluU3dhcFRocmVzaG9sZC52YWx1ZSwgJ0JlbG93IG1pbmltdW0gc3dhcCB0aHJlc2hvbGQnKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU1CiAgICAvLyBtaW5Td2FwVGhyZXNob2xkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgLy8gTWluaW11bSBVU0RDIGJlZm9yZSBzd2FwIGFsbG93ZWQKICAgIGJ5dGVjIDEzIC8vICJtaW5Td2FwVGhyZXNob2xkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NDAKICAgIC8vIGFzc2VydCh1c2RjQmFsYW5jZSA+PSB0aGlzLm1pblN3YXBUaHJlc2hvbGQudmFsdWUsICdCZWxvdyBtaW5pbXVtIHN3YXAgdGhyZXNob2xkJyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZGlnIDEKICAgIDw9CiAgICBhc3NlcnQgLy8gQmVsb3cgbWluaW11bSBzd2FwIHRocmVzaG9sZAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NDEKICAgIC8vIGFzc2VydCh0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgPiBVaW50NjQoMCksICdObyBkZXBvc2l0b3JzIHRvIGRpc3RyaWJ1dGUgdG8nKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUzCiAgICAvLyB0b3RhbERlcG9zaXRzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgLy8gVG90YWwgQWxwaGEgZGVwb3NpdGVkIGluIHZhdWx0CiAgICBieXRlY18wIC8vICJ0b3RhbERlcG9zaXRzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NDEKICAgIC8vIGFzc2VydCh0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUgPiBVaW50NjQoMCksICdObyBkZXBvc2l0b3JzIHRvIGRpc3RyaWJ1dGUgdG8nKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBhc3NlcnQgLy8gTm8gZGVwb3NpdG9ycyB0byBkaXN0cmlidXRlIHRvCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU0MwogICAgLy8gdGhpcy5leGVjdXRlU3dhcEFuZERpc3RyaWJ1dGUodXNkY0JhbGFuY2UsIHNsaXBwYWdlQnBzKTsKICAgIHN3YXAKICAgIGNhbGxzdWIgZXhlY3V0ZVN3YXBBbmREaXN0cmlidXRlCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUzMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjpSYXJlRmlWYXVsdC5nZXRWYXVsdFN0YXRzW3JvdXRpbmddKCkgLT4gdm9pZDoKZ2V0VmF1bHRTdGF0czoKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTU1CiAgICAvLyBjb25zdCBhcHBBZGRyOiBBY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3M7CiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NTYKICAgIC8vIGNvbnN0IHVzZGNCYWxhbmNlID0gQXNzZXQodGhpcy55aWVsZEFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDMKICAgIC8vIHlpZWxkQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBVU0RDIEFTQSBJRCAod2hhdCBhaXJkcm9wcyBjb21lIGluIGFzKQogICAgYnl0ZWNfMSAvLyAieWllbGRBc3NldCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTU2CiAgICAvLyBjb25zdCB1c2RjQmFsYW5jZSA9IEFzc2V0KHRoaXMueWllbGRBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBkaWcgMQogICAgc3dhcAogICAgYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCiAgICBhc3NlcnQgLy8gYWNjb3VudCBvcHRlZCBpbnRvIGFzc2V0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU1NwogICAgLy8gY29uc3Qgc3dhcEFzc2V0QmFsYW5jZSA9IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDQKICAgIC8vIHN3YXBBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBQcm9qZWN0J3MgQVNBIElEICh3aGF0IHlpZWxkIGlzIHN3YXBwZWQgdG8pCiAgICBieXRlY18yIC8vICJzd2FwQXNzZXQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU1NwogICAgLy8gY29uc3Qgc3dhcEFzc2V0QmFsYW5jZSA9IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIHVuY292ZXIgMgogICAgc3dhcAogICAgYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCiAgICBhc3NlcnQgLy8gYWNjb3VudCBvcHRlZCBpbnRvIGFzc2V0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU2MQogICAgLy8gdGhpcy50b3RhbERlcG9zaXRzLnZhbHVlLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTMKICAgIC8vIHRvdGFsRGVwb3NpdHMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAvLyBUb3RhbCBBbHBoYSBkZXBvc2l0ZWQgaW4gdmF1bHQKICAgIGJ5dGVjXzAgLy8gInRvdGFsRGVwb3NpdHMiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU2MQogICAgLy8gdGhpcy50b3RhbERlcG9zaXRzLnZhbHVlLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTYyCiAgICAvLyB0aGlzLnlpZWxkUGVyVG9rZW4udmFsdWUsCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NAogICAgLy8geWllbGRQZXJUb2tlbiA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIEFjY3VtdWxhdG9yIGZvciB5aWVsZCBkaXN0cmlidXRpb24gKHNjYWxlZCBieSBTQ0FMRSkKICAgIGJ5dGVjIDYgLy8gInlpZWxkUGVyVG9rZW4iCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU2MgogICAgLy8gdGhpcy55aWVsZFBlclRva2VuLnZhbHVlLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTYzCiAgICAvLyB0aGlzLmNyZWF0b3JVbmNsYWltZWRZaWVsZC52YWx1ZSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUwCiAgICAvLyBjcmVhdG9yVW5jbGFpbWVkWWllbGQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIEFjY3VtdWxhdGVkIHlpZWxkIGZvciBjcmVhdG9yIHRvIGNsYWltCiAgICBieXRlYyA4IC8vICJjcmVhdG9yVW5jbGFpbWVkWWllbGQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU2MwogICAgLy8gdGhpcy5jcmVhdG9yVW5jbGFpbWVkWWllbGQudmFsdWUsCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NjYKICAgIC8vIHRoaXMudG90YWxZaWVsZEdlbmVyYXRlZC52YWx1ZQogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTcKICAgIC8vIHRvdGFsWWllbGRHZW5lcmF0ZWQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIFRvdGFsIHlpZWxkIGdlbmVyYXRlZCBmcm9tIHN3YXBzIChzd2FwIG91dHB1dCBpbiBzd2FwQXNzZXQpCiAgICBieXRlYyAxNSAvLyAidG90YWxZaWVsZEdlbmVyYXRlZCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTY2CiAgICAvLyB0aGlzLnRvdGFsWWllbGRHZW5lcmF0ZWQudmFsdWUKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU2MC01NjcKICAgIC8vIHJldHVybiBbCiAgICAvLyAgIHRoaXMudG90YWxEZXBvc2l0cy52YWx1ZSwKICAgIC8vICAgdGhpcy55aWVsZFBlclRva2VuLnZhbHVlLAogICAgLy8gICB0aGlzLmNyZWF0b3JVbmNsYWltZWRZaWVsZC52YWx1ZSwKICAgIC8vICAgdXNkY0JhbGFuY2UsCiAgICAvLyAgIHN3YXBBc3NldEJhbGFuY2UsCiAgICAvLyAgIHRoaXMudG90YWxZaWVsZEdlbmVyYXRlZC52YWx1ZQogICAgLy8gXTsKICAgIHVuY292ZXIgMwogICAgaXRvYgogICAgdW5jb3ZlciAzCiAgICBpdG9iCiAgICBjb25jYXQKICAgIHVuY292ZXIgMgogICAgaXRvYgogICAgY29uY2F0CiAgICB1bmNvdmVyIDMKICAgIGl0b2IKICAgIGNvbmNhdAogICAgdW5jb3ZlciAyCiAgICBpdG9iCiAgICBjb25jYXQKICAgIHN3YXAKICAgIGl0b2IKICAgIGNvbmNhdAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NTMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICBieXRlYyAxMSAvLyAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaVZhdWx0LmFsZ28udHM6OlJhcmVGaVZhdWx0LmdldFBlbmRpbmdZaWVsZFtyb3V0aW5nXSgpIC0+IHZvaWQ6CmdldFBlbmRpbmdZaWVsZDoKICAgIHB1c2hieXRlcyAiIgogICAgZHVwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU3MwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cG4gMgogICAgbGVuCiAgICBwdXNoaW50IDMyIC8vIDMyCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnN0YXRpY19hcnJheTxhcmM0LnVpbnQ4LCAzMj4KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTc1CiAgICAvLyBjb25zdCBkZXBvc2l0ZWQgPSB0aGlzLmRlcG9zaXRlZEFtb3VudCh1c2VyKS52YWx1ZTsKICAgIGR1cAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzQKICAgIC8vIGRlcG9zaXRlZEFtb3VudCA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAvLyBVc2VyJ3MgQWxwaGEgYmFsYW5jZSBpbiB2YXVsdAogICAgYnl0ZWMgNCAvLyAiZGVwb3NpdGVkQW1vdW50IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NzUKICAgIC8vIGNvbnN0IGRlcG9zaXRlZCA9IHRoaXMuZGVwb3NpdGVkQW1vdW50KHVzZXIpLnZhbHVlOwogICAgYXBwX2xvY2FsX2dldF9leAogICAgc3dhcAogICAgZHVwCiAgICBjb3ZlciAzCiAgICBjb3ZlciAzCiAgICBhc3NlcnQgLy8gY2hlY2sgTG9jYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTc2CiAgICAvLyBsZXQgcGVuZGluZyA9IHRoaXMuZWFybmVkWWllbGQodXNlcikudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NgogICAgLy8gZWFybmVkWWllbGQgPSBMb2NhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIEFjY3VtdWxhdGVkIHlpZWxkIG5vdCB5ZXQgY2xhaW1lZAogICAgYnl0ZWMgNyAvLyAiZWFybmVkWWllbGQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU3NgogICAgLy8gbGV0IHBlbmRpbmcgPSB0aGlzLmVhcm5lZFlpZWxkKHVzZXIpLnZhbHVlOwogICAgYXBwX2xvY2FsX2dldF9leAogICAgc3dhcAogICAgY292ZXIgMgogICAgYXNzZXJ0IC8vIGNoZWNrIExvY2FsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU3OAogICAgLy8gaWYgKGRlcG9zaXRlZCA+IFVpbnQ2NCgwKSkgewogICAgYnogZ2V0UGVuZGluZ1lpZWxkX2FmdGVyX2lmX2Vsc2VANQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NzkKICAgIC8vIGNvbnN0IGN1cnJlbnRZUFQgPSB0aGlzLnlpZWxkUGVyVG9rZW4udmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NAogICAgLy8geWllbGRQZXJUb2tlbiA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIEFjY3VtdWxhdG9yIGZvciB5aWVsZCBkaXN0cmlidXRpb24gKHNjYWxlZCBieSBTQ0FMRSkKICAgIGJ5dGVjIDYgLy8gInlpZWxkUGVyVG9rZW4iCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU3OQogICAgLy8gY29uc3QgY3VycmVudFlQVCA9IHRoaXMueWllbGRQZXJUb2tlbi52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBzd2FwCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGJ1cnkgNwogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1ODAKICAgIC8vIGNvbnN0IHVzZXJZUFQgPSB0aGlzLnVzZXJZaWVsZFBlclRva2VuKHVzZXIpLnZhbHVlOwogICAgZGlnIDMKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjc1CiAgICAvLyB1c2VyWWllbGRQZXJUb2tlbiA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgLy8gU25hcHNob3Qgb2YgeWllbGRQZXJUb2tlbiBhdCBsYXN0IGFjdGlvbgogICAgYnl0ZWMgMTggLy8gInVzZXJZaWVsZFBlclRva2VuIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1ODAKICAgIC8vIGNvbnN0IHVzZXJZUFQgPSB0aGlzLnVzZXJZaWVsZFBlclRva2VuKHVzZXIpLnZhbHVlOwogICAgYXBwX2xvY2FsX2dldF9leAogICAgc3dhcAogICAgZHVwCiAgICBjb3ZlciAyCiAgICBidXJ5IDcKICAgIGFzc2VydCAvLyBjaGVjayBMb2NhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1ODIKICAgIC8vIGlmIChjdXJyZW50WVBUID4gdXNlcllQVCkgewogICAgPgogICAgYnogZ2V0UGVuZGluZ1lpZWxkX2FmdGVyX2lmX2Vsc2VANQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1ODMKICAgIC8vIHBlbmRpbmcgPSBwZW5kaW5nICsgdGhpcy5tdWxEaXZGbG9vcihkZXBvc2l0ZWQsIGN1cnJlbnRZUFQgLSB1c2VyWVBULCBTQ0FMRSk7CiAgICBkaWcgNAogICAgZGlnIDQKICAgIC0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODcKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgZGlnIDIKICAgIG11bHcKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODgKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1ODMKICAgIC8vIHBlbmRpbmcgPSBwZW5kaW5nICsgdGhpcy5tdWxEaXZGbG9vcihkZXBvc2l0ZWQsIGN1cnJlbnRZUFQgLSB1c2VyWVBULCBTQ0FMRSk7CiAgICBpbnRjIDUgLy8gMTAwMDAwMDAwMDAwMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4OAogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4OQogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTgzCiAgICAvLyBwZW5kaW5nID0gcGVuZGluZyArIHRoaXMubXVsRGl2Rmxvb3IoZGVwb3NpdGVkLCBjdXJyZW50WVBUIC0gdXNlcllQVCwgU0NBTEUpOwogICAgZGlnIDEKICAgICsKICAgIGJ1cnkgMQoKZ2V0UGVuZGluZ1lpZWxkX2FmdGVyX2lmX2Vsc2VANToKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTczCiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgZHVwCiAgICBpdG9iCiAgICBieXRlYyAxMSAvLyAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaVZhdWx0LmFsZ28udHM6OlJhcmVGaVZhdWx0LmdldFVzZXJEZXBvc2l0W3JvdXRpbmddKCkgLT4gdm9pZDoKZ2V0VXNlckRlcG9zaXQ6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU5MwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBwdXNoaW50IDMyIC8vIDMyCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnN0YXRpY19hcnJheTxhcmM0LnVpbnQ4LCAzMj4KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTk1CiAgICAvLyByZXR1cm4gdGhpcy5kZXBvc2l0ZWRBbW91bnQodXNlcikudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NAogICAgLy8gZGVwb3NpdGVkQW1vdW50ID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIFVzZXIncyBBbHBoYSBiYWxhbmNlIGluIHZhdWx0CiAgICBieXRlYyA0IC8vICJkZXBvc2l0ZWRBbW91bnQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU5NQogICAgLy8gcmV0dXJuIHRoaXMuZGVwb3NpdGVkQW1vdW50KHVzZXIpLnZhbHVlOwogICAgYXBwX2xvY2FsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIExvY2FsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU5MwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIGl0b2IKICAgIGJ5dGVjIDExIC8vIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQuZ2V0U3dhcFF1b3RlW3JvdXRpbmddKCkgLT4gdm9pZDoKZ2V0U3dhcFF1b3RlOgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MDUKICAgIC8vIGNvbnN0IGFwcEFkZHI6IEFjY291bnQgPSBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzczsKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYwNgogICAgLy8gY29uc3QgdXNkY0JhbGFuY2UgPSBBc3NldCh0aGlzLnlpZWxkQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MwogICAgLy8geWllbGRBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFVTREMgQVNBIElEICh3aGF0IGFpcmRyb3BzIGNvbWUgaW4gYXMpCiAgICBieXRlY18xIC8vICJ5aWVsZEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MDYKICAgIC8vIGNvbnN0IHVzZGNCYWxhbmNlID0gQXNzZXQodGhpcy55aWVsZEFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGFzc2V0X2hvbGRpbmdfZ2V0IEFzc2V0QmFsYW5jZQogICAgc3dhcAogICAgZHVwCiAgICB1bmNvdmVyIDIKICAgIGFzc2VydCAvLyBhY2NvdW50IG9wdGVkIGludG8gYXNzZXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjA4CiAgICAvLyBpZiAodXNkY0JhbGFuY2UgPT09IFVpbnQ2NCgwKSkgewogICAgYm56IGdldFN3YXBRdW90ZV9hZnRlcl9pZl9lbHNlQDMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjA5CiAgICAvLyByZXR1cm4gW1VpbnQ2NCgwKSwgVWludDY0KDApLCBVaW50NjQoMCldOwogICAgcHVzaGJ5dGVzIDB4MDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwCgpnZXRTd2FwUXVvdGVfYWZ0ZXJfaW5saW5lZF9SYXJlRmlWYXVsdC5hbGdvLnRzOjpSYXJlRmlWYXVsdC5nZXRTd2FwUXVvdGVANDoKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjAzCiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgYnl0ZWMgMTEgLy8gMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCmdldFN3YXBRdW90ZV9hZnRlcl9pZl9lbHNlQDM6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYxMgogICAgLy8gY29uc3QgZXhwZWN0ZWRPdXRwdXQgPSB0aGlzLmdldEV4cGVjdGVkU3dhcE91dHB1dCh1c2RjQmFsYW5jZSk7CiAgICBkdXBuIDIKICAgIGNhbGxzdWIgZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjg3CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGR1cAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MTQKICAgIC8vIGNvbnN0IG1pbkF0NTBCcHMgPSB0aGlzLm11bERpdkZsb29yKGV4cGVjdGVkT3V0cHV0LCBGRUVfQlBTX0JBU0UgLSBVaW50NjQoNTApLCBGRUVfQlBTX0JBU0UpOwogICAgcHVzaGludCA5OTUwIC8vIDk5NTAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODcKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgbXVsdwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4OAogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYxNAogICAgLy8gY29uc3QgbWluQXQ1MEJwcyA9IHRoaXMubXVsRGl2Rmxvb3IoZXhwZWN0ZWRPdXRwdXQsIEZFRV9CUFNfQkFTRSAtIFVpbnQ2NCg1MCksIEZFRV9CUFNfQkFTRSk7CiAgICBpbnRjIDQgLy8gMTAwMDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODgKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBkaXZtb2R3CiAgICBwb3BuIDIKICAgIHN3YXAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODkKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYxNgogICAgLy8gcmV0dXJuIFt1c2RjQmFsYW5jZSwgZXhwZWN0ZWRPdXRwdXQsIG1pbkF0NTBCcHNdOwogICAgdW5jb3ZlciAyCiAgICBpdG9iCiAgICB1bmNvdmVyIDIKICAgIGl0b2IKICAgIGNvbmNhdAogICAgc3dhcAogICAgaXRvYgogICAgY29uY2F0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYwMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIGIgZ2V0U3dhcFF1b3RlX2FmdGVyX2lubGluZWRfUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQuZ2V0U3dhcFF1b3RlQDQKCgovLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjpSYXJlRmlWYXVsdC51cGRhdGVNaW5Td2FwVGhyZXNob2xkW3JvdXRpbmddKCkgLT4gdm9pZDoKdXBkYXRlTWluU3dhcFRocmVzaG9sZDoKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjI2CiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MjgKICAgIC8vIGNvbnN0IGlzQ3JlYXRvciA9IFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWU7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NwogICAgLy8gY3JlYXRvckFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgIC8vIFZhdWx0IGNyZWF0b3Igd2hvIHJlY2VpdmVzIGZlZQogICAgYnl0ZWMgNSAvLyAiY3JlYXRvckFkZHJlc3MiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYyOAogICAgLy8gY29uc3QgaXNDcmVhdG9yID0gVHhuLnNlbmRlciA9PT0gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MjkKICAgIC8vIGNvbnN0IGlzUmFyZWZpID0gVHhuLnNlbmRlciA9PT0gdGhpcy5yYXJlZmlBZGRyZXNzLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDgKICAgIC8vIHJhcmVmaUFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgICAvLyBSYXJlRmkgcGxhdGZvcm0gYWRkcmVzcyAoY2FuIGFsc28gdHJpZ2dlciBzd2FwcykKICAgIGJ5dGVjIDEyIC8vICJyYXJlZmlBZGRyZXNzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MjkKICAgIC8vIGNvbnN0IGlzUmFyZWZpID0gVHhuLnNlbmRlciA9PT0gdGhpcy5yYXJlZmlBZGRyZXNzLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYzMAogICAgLy8gYXNzZXJ0KGlzQ3JlYXRvciB8fCBpc1JhcmVmaSwgJ09ubHkgY3JlYXRvciBvciBSYXJlRmkgY2FuIHVwZGF0ZScpOwogICAgfHwKICAgIGFzc2VydCAvLyBPbmx5IGNyZWF0b3Igb3IgUmFyZUZpIGNhbiB1cGRhdGUKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjMxCiAgICAvLyBhc3NlcnQobmV3VGhyZXNob2xkID49IE1JTl9TV0FQX0FNT1VOVCwgJ1RocmVzaG9sZCB0b28gbG93Jyk7CiAgICBkdXAKICAgIGludGMgNiAvLyAyMDAwMDAKICAgID49CiAgICBhc3NlcnQgLy8gVGhyZXNob2xkIHRvbyBsb3cKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTUKICAgIC8vIG1pblN3YXBUaHJlc2hvbGQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBNaW5pbXVtIFVTREMgYmVmb3JlIHN3YXAgYWxsb3dlZAogICAgYnl0ZWMgMTMgLy8gIm1pblN3YXBUaHJlc2hvbGQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYzMgogICAgLy8gdGhpcy5taW5Td2FwVGhyZXNob2xkLnZhbHVlID0gbmV3VGhyZXNob2xkOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjI2CiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaVZhdWx0LmFsZ28udHM6OlJhcmVGaVZhdWx0LnVwZGF0ZU1heFNsaXBwYWdlW3JvdXRpbmddKCkgLT4gdm9pZDoKdXBkYXRlTWF4U2xpcHBhZ2U6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYzOQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjQxCiAgICAvLyBhc3NlcnQoVHhuLnNlbmRlciA9PT0gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZSwgJ09ubHkgY3JlYXRvciBjYW4gdXBkYXRlIG1heCBzbGlwcGFnZScpOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDcKICAgIC8vIGNyZWF0b3JBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAvLyBWYXVsdCBjcmVhdG9yIHdobyByZWNlaXZlcyBmZWUKICAgIGJ5dGVjIDUgLy8gImNyZWF0b3JBZGRyZXNzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NDEKICAgIC8vIGFzc2VydChUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlLCAnT25seSBjcmVhdG9yIGNhbiB1cGRhdGUgbWF4IHNsaXBwYWdlJyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBPbmx5IGNyZWF0b3IgY2FuIHVwZGF0ZSBtYXggc2xpcHBhZ2UKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjQyCiAgICAvLyBhc3NlcnQobmV3TWF4U2xpcHBhZ2VCcHMgPj0gTUlOX01BWF9TTElQUEFHRV9CUFMsICdNYXggc2xpcHBhZ2UgdG9vIGxvdyAobWluIDUlKScpOwogICAgZHVwCiAgICBwdXNoaW50IDUwMCAvLyA1MDAKICAgID49CiAgICBhc3NlcnQgLy8gTWF4IHNsaXBwYWdlIHRvbyBsb3cgKG1pbiA1JSkKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjQzCiAgICAvLyBhc3NlcnQobmV3TWF4U2xpcHBhZ2VCcHMgPD0gTUFYX1NMSVBQQUdFX0JQUywgJ01heCBzbGlwcGFnZSB0b28gaGlnaCcpOwogICAgZHVwCiAgICBpbnRjIDQgLy8gMTAwMDAKICAgIDw9CiAgICBhc3NlcnQgLy8gTWF4IHNsaXBwYWdlIHRvbyBoaWdoCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU2CiAgICAvLyBtYXhTbGlwcGFnZUJwcyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gTWF4aW11bSBzbGlwcGFnZSB0b2xlcmFuY2UgaW4gYmFzaXMgcG9pbnRzCiAgICBieXRlYyAxNCAvLyAibWF4U2xpcHBhZ2VCcHMiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY0NAogICAgLy8gdGhpcy5tYXhTbGlwcGFnZUJwcy52YWx1ZSA9IG5ld01heFNsaXBwYWdlQnBzOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjM5CiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaVZhdWx0LmFsZ28udHM6OlJhcmVGaVZhdWx0LnVwZGF0ZVRpbnltYW5Qb29sW3JvdXRpbmddKCkgLT4gdm9pZDoKdXBkYXRlVGlueW1hblBvb2w6CiAgICBwdXNoYnl0ZXMgIiIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjUyCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgZHVwCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAyCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGR1cAogICAgbGVuCiAgICBwdXNoaW50IDMyIC8vIDMyCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnN0YXRpY19hcnJheTxhcmM0LnVpbnQ4LCAzMj4KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjU0CiAgICAvLyBjb25zdCBpc0NyZWF0b3IgPSBUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDcKICAgIC8vIGNyZWF0b3JBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAvLyBWYXVsdCBjcmVhdG9yIHdobyByZWNlaXZlcyBmZWUKICAgIGJ5dGVjIDUgLy8gImNyZWF0b3JBZGRyZXNzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NTQKICAgIC8vIGNvbnN0IGlzQ3JlYXRvciA9IFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjU1CiAgICAvLyBjb25zdCBpc1JhcmVmaSA9IFR4bi5zZW5kZXIgPT09IHRoaXMucmFyZWZpQWRkcmVzcy52YWx1ZTsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ4CiAgICAvLyByYXJlZmlBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAgLy8gUmFyZUZpIHBsYXRmb3JtIGFkZHJlc3MgKGNhbiBhbHNvIHRyaWdnZXIgc3dhcHMpCiAgICBieXRlYyAxMiAvLyAicmFyZWZpQWRkcmVzcyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjU1CiAgICAvLyBjb25zdCBpc1JhcmVmaSA9IFR4bi5zZW5kZXIgPT09IHRoaXMucmFyZWZpQWRkcmVzcy52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NTYKICAgIC8vIGFzc2VydChpc0NyZWF0b3IgfHwgaXNSYXJlZmksICdPbmx5IGNyZWF0b3Igb3IgUmFyZUZpIGNhbiB1cGRhdGUnKTsKICAgIHx8CiAgICBhc3NlcnQgLy8gT25seSBjcmVhdG9yIG9yIFJhcmVGaSBjYW4gdXBkYXRlCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY1NwogICAgLy8gYXNzZXJ0KG5ld1Bvb2xBcHBJZCAhPT0gVWludDY0KDApLCAnSW52YWxpZCBwb29sIGFwcCBJRCcpOwogICAgZGlnIDEKICAgIGFzc2VydCAvLyBJbnZhbGlkIHBvb2wgYXBwIElECiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY2MAogICAgLy8gY29uc3QgW2Fzc2V0MUlkLCBoYXNBc3NldDFdID0gQXBwTG9jYWwuZ2V0RXhVaW50NjQobmV3UG9vbEFkZHJlc3MsIG5ld1Bvb2xBcHBJZCwgQnl0ZXMoJ2Fzc2V0XzFfaWQnKSk7CiAgICBkdXAKICAgIGRpZyAyCiAgICBieXRlYyAyMSAvLyAiYXNzZXRfMV9pZCIKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIGNvdmVyIDMKICAgIGR1cAogICAgY292ZXIgNAogICAgY292ZXIgNAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NjEKICAgIC8vIGNvbnN0IFthc3NldDJJZCwgaGFzQXNzZXQyXSA9IEFwcExvY2FsLmdldEV4VWludDY0KG5ld1Bvb2xBZGRyZXNzLCBuZXdQb29sQXBwSWQsIEJ5dGVzKCdhc3NldF8yX2lkJykpOwogICAgc3dhcAogICAgcHVzaGJ5dGVzICJhc3NldF8yX2lkIgogICAgYXBwX2xvY2FsX2dldF9leAogICAgc3dhcAogICAgY292ZXIgMwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NjIKICAgIC8vIGFzc2VydChoYXNBc3NldDEgJiYgaGFzQXNzZXQyLCAnQ2Fubm90IHJlYWQgcG9vbCBhc3NldHMnKTsKICAgICYmCiAgICBhc3NlcnQgLy8gQ2Fubm90IHJlYWQgcG9vbCBhc3NldHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjY1CiAgICAvLyBjb25zdCBoYXNZaWVsZEFzc2V0ID0gYXNzZXQxSWQgPT09IHRoaXMueWllbGRBc3NldC52YWx1ZSB8fCBhc3NldDJJZCA9PT0gdGhpcy55aWVsZEFzc2V0LnZhbHVlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDMKICAgIC8vIHlpZWxkQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBVU0RDIEFTQSBJRCAod2hhdCBhaXJkcm9wcyBjb21lIGluIGFzKQogICAgYnl0ZWNfMSAvLyAieWllbGRBc3NldCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjY1CiAgICAvLyBjb25zdCBoYXNZaWVsZEFzc2V0ID0gYXNzZXQxSWQgPT09IHRoaXMueWllbGRBc3NldC52YWx1ZSB8fCBhc3NldDJJZCA9PT0gdGhpcy55aWVsZEFzc2V0LnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBibnogdXBkYXRlVGlueW1hblBvb2xfYm9vbF90cnVlQDMKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQzCiAgICAvLyB5aWVsZEFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKHdoYXQgYWlyZHJvcHMgY29tZSBpbiBhcykKICAgIGJ5dGVjXzEgLy8gInlpZWxkQXNzZXQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY2NQogICAgLy8gY29uc3QgaGFzWWllbGRBc3NldCA9IGFzc2V0MUlkID09PSB0aGlzLnlpZWxkQXNzZXQudmFsdWUgfHwgYXNzZXQySWQgPT09IHRoaXMueWllbGRBc3NldC52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBkaWcgMQogICAgPT0KICAgIGJ6IHVwZGF0ZVRpbnltYW5Qb29sX2Jvb2xfZmFsc2VANAoKdXBkYXRlVGlueW1hblBvb2xfYm9vbF90cnVlQDM6CiAgICBpbnRjXzEgLy8gMQogICAgYnVyeSA1Cgp1cGRhdGVUaW55bWFuUG9vbF9ib29sX21lcmdlQDU6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY2NgogICAgLy8gY29uc3QgaGFzU3dhcEFzc2V0ID0gYXNzZXQxSWQgPT09IHRoaXMuc3dhcEFzc2V0LnZhbHVlIHx8IGFzc2V0MklkID09PSB0aGlzLnN3YXBBc3NldC52YWx1ZTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ0CiAgICAvLyBzd2FwQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gUHJvamVjdCdzIEFTQSBJRCAod2hhdCB5aWVsZCBpcyBzd2FwcGVkIHRvKQogICAgYnl0ZWNfMiAvLyAic3dhcEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NjYKICAgIC8vIGNvbnN0IGhhc1N3YXBBc3NldCA9IGFzc2V0MUlkID09PSB0aGlzLnN3YXBBc3NldC52YWx1ZSB8fCBhc3NldDJJZCA9PT0gdGhpcy5zd2FwQXNzZXQudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZGlnIDIKICAgID09CiAgICBibnogdXBkYXRlVGlueW1hblBvb2xfYm9vbF90cnVlQDcKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ0CiAgICAvLyBzd2FwQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gUHJvamVjdCdzIEFTQSBJRCAod2hhdCB5aWVsZCBpcyBzd2FwcGVkIHRvKQogICAgYnl0ZWNfMiAvLyAic3dhcEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NjYKICAgIC8vIGNvbnN0IGhhc1N3YXBBc3NldCA9IGFzc2V0MUlkID09PSB0aGlzLnN3YXBBc3NldC52YWx1ZSB8fCBhc3NldDJJZCA9PT0gdGhpcy5zd2FwQXNzZXQudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZGlnIDEKICAgID09CiAgICBieiB1cGRhdGVUaW55bWFuUG9vbF9ib29sX2ZhbHNlQDgKCnVwZGF0ZVRpbnltYW5Qb29sX2Jvb2xfdHJ1ZUA3OgogICAgaW50Y18xIC8vIDEKCnVwZGF0ZVRpbnltYW5Qb29sX2Jvb2xfbWVyZ2VAOToKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjY3CiAgICAvLyBhc3NlcnQoaGFzWWllbGRBc3NldCAmJiBoYXNTd2FwQXNzZXQsICdQb29sIG11c3QgY29udGFpbiB5aWVsZCBhbmQgc3dhcCBhc3NldHMnKTsKICAgIGRpZyA1CiAgICAmJgogICAgYXNzZXJ0IC8vIFBvb2wgbXVzdCBjb250YWluIHlpZWxkIGFuZCBzd2FwIGFzc2V0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MAogICAgLy8gdGlueW1hblBvb2xBcHBJZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgIC8vIFRpbnltYW4gVjIgcG9vbCBhcHAgSUQgKFVTREMvc3dhcEFzc2V0KQogICAgYnl0ZWMgMTYgLy8gInRpbnltYW5Qb29sQXBwSWQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY2OQogICAgLy8gdGhpcy50aW55bWFuUG9vbEFwcElkLnZhbHVlID0gbmV3UG9vbEFwcElkOwogICAgZGlnIDQKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYxCiAgICAvLyB0aW55bWFuUG9vbEFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAvLyBUaW55bWFuIHBvb2wgYWRkcmVzcwogICAgYnl0ZWMgMTcgLy8gInRpbnltYW5Qb29sQWRkcmVzcyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjcwCiAgICAvLyB0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZSA9IG5ld1Bvb2xBZGRyZXNzOwogICAgZGlnIDMKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY1MgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCnVwZGF0ZVRpbnltYW5Qb29sX2Jvb2xfZmFsc2VAODoKICAgIGludGNfMCAvLyAwCiAgICBiIHVwZGF0ZVRpbnltYW5Qb29sX2Jvb2xfbWVyZ2VAOQoKdXBkYXRlVGlueW1hblBvb2xfYm9vbF9mYWxzZUA0OgogICAgaW50Y18wIC8vIDAKICAgIGJ1cnkgNQogICAgYiB1cGRhdGVUaW55bWFuUG9vbF9ib29sX21lcmdlQDUKCgovLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjpSYXJlRmlWYXVsdC51cGRhdGVDcmVhdG9yRmVlUmF0ZVtyb3V0aW5nXSgpIC0+IHZvaWQ6CnVwZGF0ZUNyZWF0b3JGZWVSYXRlOgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NzcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY3OQogICAgLy8gYXNzZXJ0KFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWUsICdPbmx5IGNyZWF0b3IgY2FuIHVwZGF0ZSBmZWUgcmF0ZScpOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDcKICAgIC8vIGNyZWF0b3JBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAvLyBWYXVsdCBjcmVhdG9yIHdobyByZWNlaXZlcyBmZWUKICAgIGJ5dGVjIDUgLy8gImNyZWF0b3JBZGRyZXNzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NzkKICAgIC8vIGFzc2VydChUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlLCAnT25seSBjcmVhdG9yIGNhbiB1cGRhdGUgZmVlIHJhdGUnKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIE9ubHkgY3JlYXRvciBjYW4gdXBkYXRlIGZlZSByYXRlCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY4MAogICAgLy8gYXNzZXJ0KG5ld0ZlZVJhdGUgPD0gTUFYX0ZFRV9SQVRFLCAnRmVlIHJhdGUgZXhjZWVkcyBtYXhpbXVtICg2JSknKTsKICAgIGR1cAogICAgcHVzaGludCA2IC8vIDYKICAgIDw9CiAgICBhc3NlcnQgLy8gRmVlIHJhdGUgZXhjZWVkcyBtYXhpbXVtICg2JSkKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDkKICAgIC8vIGNyZWF0b3JGZWVSYXRlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyAwLTEwMCwgcGVyY2VudGFnZSBvZiB5aWVsZCB0byBjcmVhdG9yCiAgICBieXRlYyAxOSAvLyAiY3JlYXRvckZlZVJhdGUiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY4MQogICAgLy8gdGhpcy5jcmVhdG9yRmVlUmF0ZS52YWx1ZSA9IG5ld0ZlZVJhdGU7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NzcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQuY29udHJpYnV0ZUZhcm1bcm91dGluZ10oKSAtPiB2b2lkOgpjb250cmlidXRlRmFybToKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Njk3CiAgICAvLyBjb25zdCBhcHBBZGRyOiBBY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3M7CiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2OTgKICAgIC8vIGNvbnN0IGN1cnJlbnRJbmRleCA9IFR4bi5ncm91cEluZGV4OwogICAgdHhuIEdyb3VwSW5kZXgKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6Njk5CiAgICAvLyBhc3NlcnQoY3VycmVudEluZGV4ID49IFVpbnQ2NCgxKSwgJ0FwcCBjYWxsIG11c3QgZm9sbG93IGFzc2V0IHRyYW5zZmVyJyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBBcHAgY2FsbCBtdXN0IGZvbGxvdyBhc3NldCB0cmFuc2ZlcgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3MDIKICAgIC8vIGNvbnN0IGZhcm1UcmFuc2ZlciA9IGd0eG4uQXNzZXRUcmFuc2ZlclR4bihjdXJyZW50SW5kZXggLSBVaW50NjQoMSkpOwogICAgaW50Y18xIC8vIDEKICAgIC0KICAgIGR1cAogICAgZ3R4bnMgVHlwZUVudW0KICAgIGludGNfMyAvLyBheGZlcgogICAgPT0KICAgIGFzc2VydCAvLyB0cmFuc2FjdGlvbiB0eXBlIGlzIGF4ZmVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjcwMwogICAgLy8gYXNzZXJ0KGZhcm1UcmFuc2Zlci54ZmVyQXNzZXQgPT09IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKSwgJ011c3QgdHJhbnNmZXIgc3dhcCBhc3NldCcpOwogICAgZHVwCiAgICBndHhucyBYZmVyQXNzZXQKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ0CiAgICAvLyBzd2FwQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gUHJvamVjdCdzIEFTQSBJRCAod2hhdCB5aWVsZCBpcyBzd2FwcGVkIHRvKQogICAgYnl0ZWNfMiAvLyAic3dhcEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3MDMKICAgIC8vIGFzc2VydChmYXJtVHJhbnNmZXIueGZlckFzc2V0ID09PSBBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSksICdNdXN0IHRyYW5zZmVyIHN3YXAgYXNzZXQnKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIE11c3QgdHJhbnNmZXIgc3dhcCBhc3NldAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3MDQKICAgIC8vIGFzc2VydChmYXJtVHJhbnNmZXIuYXNzZXRSZWNlaXZlciA9PT0gYXBwQWRkciwgJ011c3Qgc2VuZCB0byBjb250cmFjdCcpOwogICAgZHVwCiAgICBndHhucyBBc3NldFJlY2VpdmVyCiAgICB1bmNvdmVyIDIKICAgID09CiAgICBhc3NlcnQgLy8gTXVzdCBzZW5kIHRvIGNvbnRyYWN0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjcwNQogICAgLy8gYXNzZXJ0KGZhcm1UcmFuc2Zlci5zZW5kZXIgPT09IFR4bi5zZW5kZXIsICdUcmFuc2ZlciBtdXN0IGJlIGZyb20gY2FsbGVyJyk7CiAgICBkdXAKICAgIGd0eG5zIFNlbmRlcgogICAgdHhuIFNlbmRlcgogICAgPT0KICAgIGFzc2VydCAvLyBUcmFuc2ZlciBtdXN0IGJlIGZyb20gY2FsbGVyCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjcwNwogICAgLy8gY29uc3QgYW1vdW50ID0gZmFybVRyYW5zZmVyLmFzc2V0QW1vdW50OwogICAgZ3R4bnMgQXNzZXRBbW91bnQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzA4CiAgICAvLyBhc3NlcnQoYW1vdW50ID4gVWludDY0KDApLCAnQ29udHJpYnV0aW9uIG11c3QgYmUgcG9zaXRpdmUnKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIENvbnRyaWJ1dGlvbiBtdXN0IGJlIHBvc2l0aXZlCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjcxMQogICAgLy8gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA9IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgKyBhbW91bnQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgc3dhcEFzc2V0IGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMyAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjcxMQogICAgLy8gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA9IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgKyBhbW91bnQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgKwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgc3dhcEFzc2V0IGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMyAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjcxMQogICAgLy8gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA9IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgKyBhbW91bnQ7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2OTUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQuc2V0RmFybUVtaXNzaW9uUmF0ZVtyb3V0aW5nXSgpIC0+IHZvaWQ6CnNldEZhcm1FbWlzc2lvblJhdGU6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjcyMgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIGR1cAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3MjQKICAgIC8vIGNvbnN0IGlzQ3JlYXRvciA9IFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWU7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0NwogICAgLy8gY3JlYXRvckFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgIC8vIFZhdWx0IGNyZWF0b3Igd2hvIHJlY2VpdmVzIGZlZQogICAgYnl0ZWMgNSAvLyAiY3JlYXRvckFkZHJlc3MiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjcyNAogICAgLy8gY29uc3QgaXNDcmVhdG9yID0gVHhuLnNlbmRlciA9PT0gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3MjUKICAgIC8vIGNvbnN0IGlzUmFyZWZpID0gVHhuLnNlbmRlciA9PT0gdGhpcy5yYXJlZmlBZGRyZXNzLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDgKICAgIC8vIHJhcmVmaUFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgICAvLyBSYXJlRmkgcGxhdGZvcm0gYWRkcmVzcyAoY2FuIGFsc28gdHJpZ2dlciBzd2FwcykKICAgIGJ5dGVjIDEyIC8vICJyYXJlZmlBZGRyZXNzIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3MjUKICAgIC8vIGNvbnN0IGlzUmFyZWZpID0gVHhuLnNlbmRlciA9PT0gdGhpcy5yYXJlZmlBZGRyZXNzLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjcyNgogICAgLy8gYXNzZXJ0KGlzQ3JlYXRvciB8fCBpc1JhcmVmaSwgJ09ubHkgY3JlYXRvciBvciBSYXJlRmkgY2FuIHNldCBmYXJtIHJhdGUnKTsKICAgIHx8CiAgICBhc3NlcnQgLy8gT25seSBjcmVhdG9yIG9yIFJhcmVGaSBjYW4gc2V0IGZhcm0gcmF0ZQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3MjcKICAgIC8vIGFzc2VydChlbWlzc2lvblJhdGVCcHMgPD0gTUFYX0ZBUk1fRU1JU1NJT05fQlBTLCAnRW1pc3Npb24gcmF0ZSB0b28gaGlnaCAobWF4IDEwMCUpJyk7CiAgICBpbnRjIDQgLy8gMTAwMDAKICAgIDw9CiAgICBhc3NlcnQgLy8gRW1pc3Npb24gcmF0ZSB0b28gaGlnaCAobWF4IDEwMCUpCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjczMAogICAgLy8gaWYgKHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPiBVaW50NjQoMCkpIHsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY0CiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBzd2FwQXNzZXQgYXZhaWxhYmxlIGZvciBmYXJtIGJvbnVzCiAgICBieXRlY18zIC8vICJmYXJtQmFsYW5jZSIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzMwCiAgICAvLyBpZiAodGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA+IFVpbnQ2NCgwKSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ6IHNldEZhcm1FbWlzc2lvblJhdGVfYWZ0ZXJfaWZfZWxzZUAzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjczMQogICAgLy8gYXNzZXJ0KGVtaXNzaW9uUmF0ZUJwcyA+PSBNSU5fRkFSTV9FTUlTU0lPTl9CUFMsICdFbWlzc2lvbiByYXRlIHRvbyBsb3cgKG1pbiAxMCUgd2hlbiBmYXJtIGhhcyBiYWxhbmNlKScpOwogICAgZHVwCiAgICBwdXNoaW50IDEwMDAgLy8gMTAwMAogICAgPj0KICAgIGFzc2VydCAvLyBFbWlzc2lvbiByYXRlIHRvbyBsb3cgKG1pbiAxMCUgd2hlbiBmYXJtIGhhcyBiYWxhbmNlKQoKc2V0RmFybUVtaXNzaW9uUmF0ZV9hZnRlcl9pZl9lbHNlQDM6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY1CiAgICAvLyBmYXJtRW1pc3Npb25SYXRlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyBCYXNpcyBwb2ludHMgb2Ygc3dhcCBvdXRwdXQgdG8gYWRkIGZyb20gZmFybSAoZS5nLiwgMTAwMCA9IDEwJSkKICAgIGJ5dGVjIDEwIC8vICJmYXJtRW1pc3Npb25SYXRlIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3MzQKICAgIC8vIHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSA9IGVtaXNzaW9uUmF0ZUJwczsKICAgIGRpZyAxCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3MjIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQuZ2V0RmFybVN0YXRzW3JvdXRpbmddKCkgLT4gdm9pZDoKZ2V0RmFybVN0YXRzOgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NDMKICAgIC8vIHJldHVybiBbdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSwgdGhpcy5mYXJtRW1pc3Npb25SYXRlLnZhbHVlXTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjY0CiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBzd2FwQXNzZXQgYXZhaWxhYmxlIGZvciBmYXJtIGJvbnVzCiAgICBieXRlY18zIC8vICJmYXJtQmFsYW5jZSIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzQzCiAgICAvLyByZXR1cm4gW3RoaXMuZmFybUJhbGFuY2UudmFsdWUsIHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZV07CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjUKICAgIC8vIGZhcm1FbWlzc2lvblJhdGUgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIEJhc2lzIHBvaW50cyBvZiBzd2FwIG91dHB1dCB0byBhZGQgZnJvbSBmYXJtIChlLmcuLCAxMDAwID0gMTAlKQogICAgYnl0ZWMgMTAgLy8gImZhcm1FbWlzc2lvblJhdGUiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjc0MwogICAgLy8gcmV0dXJuIFt0aGlzLmZhcm1CYWxhbmNlLnZhbHVlLCB0aGlzLmZhcm1FbWlzc2lvblJhdGUudmFsdWVdOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIHN3YXAKICAgIGl0b2IKICAgIHN3YXAKICAgIGl0b2IKICAgIGNvbmNhdAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NDEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICBieXRlYyAxMSAvLyAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaVZhdWx0LmFsZ28udHM6OlJhcmVGaVZhdWx0LnVwZGF0ZUVhcm5lZFlpZWxkKHVzZXI6IGJ5dGVzKSAtPiB2b2lkOgp1cGRhdGVFYXJuZWRZaWVsZDoKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6OTcKICAgIC8vIHByaXZhdGUgdXBkYXRlRWFybmVkWWllbGQodXNlcjogQWNjb3VudCk6IHZvaWQgewogICAgcHJvdG8gMSAwCiAgICBwdXNoYnl0ZXMgIiIKICAgIGR1cAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo5OAogICAgLy8gY29uc3QgZGVwb3NpdGVkID0gdGhpcy5kZXBvc2l0ZWRBbW91bnQodXNlcikudmFsdWU7CiAgICBmcmFtZV9kaWcgLTEKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjc0CiAgICAvLyBkZXBvc2l0ZWRBbW91bnQgPSBMb2NhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gVXNlcidzIEFscGhhIGJhbGFuY2UgaW4gdmF1bHQKICAgIGJ5dGVjIDQgLy8gImRlcG9zaXRlZEFtb3VudCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6OTgKICAgIC8vIGNvbnN0IGRlcG9zaXRlZCA9IHRoaXMuZGVwb3NpdGVkQW1vdW50KHVzZXIpLnZhbHVlOwogICAgYXBwX2xvY2FsX2dldF9leAogICAgc3dhcAogICAgZHVwCiAgICB1bmNvdmVyIDIKICAgIGFzc2VydCAvLyBjaGVjayBMb2NhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMDAKICAgIC8vIGlmIChkZXBvc2l0ZWQgPiBVaW50NjQoMCkpIHsKICAgIGJ6IHVwZGF0ZUVhcm5lZFlpZWxkX2FmdGVyX2lmX2Vsc2VANAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMDIKICAgIC8vIGNvbnN0IGN1cnJlbnRZUFQgPSB0aGlzLnlpZWxkUGVyVG9rZW4udmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NAogICAgLy8geWllbGRQZXJUb2tlbiA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIEFjY3VtdWxhdG9yIGZvciB5aWVsZCBkaXN0cmlidXRpb24gKHNjYWxlZCBieSBTQ0FMRSkKICAgIGJ5dGVjIDYgLy8gInlpZWxkUGVyVG9rZW4iCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjEwMgogICAgLy8gY29uc3QgY3VycmVudFlQVCA9IHRoaXMueWllbGRQZXJUb2tlbi52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBzd2FwCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGZyYW1lX2J1cnkgMAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMDMKICAgIC8vIGNvbnN0IHVzZXJZUFQgPSB0aGlzLnVzZXJZaWVsZFBlclRva2VuKHVzZXIpLnZhbHVlOwogICAgZnJhbWVfZGlnIC0xCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NQogICAgLy8gdXNlcllpZWxkUGVyVG9rZW4gPSBMb2NhbFN0YXRlPHVpbnQ2ND4oKTsgIC8vIFNuYXBzaG90IG9mIHlpZWxkUGVyVG9rZW4gYXQgbGFzdCBhY3Rpb24KICAgIGJ5dGVjIDE4IC8vICJ1c2VyWWllbGRQZXJUb2tlbiIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTAzCiAgICAvLyBjb25zdCB1c2VyWVBUID0gdGhpcy51c2VyWWllbGRQZXJUb2tlbih1c2VyKS52YWx1ZTsKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGR1cAogICAgY292ZXIgMgogICAgZnJhbWVfYnVyeSAxCiAgICBhc3NlcnQgLy8gY2hlY2sgTG9jYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTA1CiAgICAvLyBpZiAoY3VycmVudFlQVCA+IHVzZXJZUFQpIHsKICAgID4KICAgIGJ6IHVwZGF0ZUVhcm5lZFlpZWxkX2FmdGVyX2lmX2Vsc2VANAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMDYKICAgIC8vIGNvbnN0IHBlbmRpbmcgPSB0aGlzLm11bERpdkZsb29yKGRlcG9zaXRlZCwgY3VycmVudFlQVCAtIHVzZXJZUFQsIFNDQUxFKTsKICAgIGZyYW1lX2RpZyAwCiAgICBmcmFtZV9kaWcgMQogICAgLQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4NwogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KG4xLCBuMik7CiAgICBmcmFtZV9kaWcgMgogICAgbXVsdwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4OAogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjEwNgogICAgLy8gY29uc3QgcGVuZGluZyA9IHRoaXMubXVsRGl2Rmxvb3IoZGVwb3NpdGVkLCBjdXJyZW50WVBUIC0gdXNlcllQVCwgU0NBTEUpOwogICAgaW50YyA1IC8vIDEwMDAwMDAwMDAwMDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODgKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBkaXZtb2R3CiAgICBwb3BuIDIKICAgIHN3YXAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODkKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjEwNwogICAgLy8gdGhpcy5lYXJuZWRZaWVsZCh1c2VyKS52YWx1ZSA9IHRoaXMuZWFybmVkWWllbGQodXNlcikudmFsdWUgKyBwZW5kaW5nOwogICAgZnJhbWVfZGlnIC0xCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo3NgogICAgLy8gZWFybmVkWWllbGQgPSBMb2NhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIEFjY3VtdWxhdGVkIHlpZWxkIG5vdCB5ZXQgY2xhaW1lZAogICAgYnl0ZWMgNyAvLyAiZWFybmVkWWllbGQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjEwNwogICAgLy8gdGhpcy5lYXJuZWRZaWVsZCh1c2VyKS52YWx1ZSA9IHRoaXMuZWFybmVkWWllbGQodXNlcikudmFsdWUgKyBwZW5kaW5nOwogICAgYXBwX2xvY2FsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIExvY2FsU3RhdGUgZXhpc3RzCiAgICArCiAgICBmcmFtZV9kaWcgLTEKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzYKICAgIC8vIGVhcm5lZFlpZWxkID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBBY2N1bXVsYXRlZCB5aWVsZCBub3QgeWV0IGNsYWltZWQKICAgIGJ5dGVjIDcgLy8gImVhcm5lZFlpZWxkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMDcKICAgIC8vIHRoaXMuZWFybmVkWWllbGQodXNlcikudmFsdWUgPSB0aGlzLmVhcm5lZFlpZWxkKHVzZXIpLnZhbHVlICsgcGVuZGluZzsKICAgIHVuY292ZXIgMgogICAgYXBwX2xvY2FsX3B1dAoKdXBkYXRlRWFybmVkWWllbGRfYWZ0ZXJfaWZfZWxzZUA0OgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMTIKICAgIC8vIHRoaXMudXNlcllpZWxkUGVyVG9rZW4odXNlcikudmFsdWUgPSB0aGlzLnlpZWxkUGVyVG9rZW4udmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1NAogICAgLy8geWllbGRQZXJUb2tlbiA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgIC8vIEFjY3VtdWxhdG9yIGZvciB5aWVsZCBkaXN0cmlidXRpb24gKHNjYWxlZCBieSBTQ0FMRSkKICAgIGJ5dGVjIDYgLy8gInlpZWxkUGVyVG9rZW4iCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjExMgogICAgLy8gdGhpcy51c2VyWWllbGRQZXJUb2tlbih1c2VyKS52YWx1ZSA9IHRoaXMueWllbGRQZXJUb2tlbi52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBmcmFtZV9kaWcgLTEKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NzUKICAgIC8vIHVzZXJZaWVsZFBlclRva2VuID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBTbmFwc2hvdCBvZiB5aWVsZFBlclRva2VuIGF0IGxhc3QgYWN0aW9uCiAgICBieXRlYyAxOCAvLyAidXNlcllpZWxkUGVyVG9rZW4iCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjExMgogICAgLy8gdGhpcy51c2VyWWllbGRQZXJUb2tlbih1c2VyKS52YWx1ZSA9IHRoaXMueWllbGRQZXJUb2tlbi52YWx1ZTsKICAgIHVuY292ZXIgMgogICAgYXBwX2xvY2FsX3B1dAogICAgcmV0c3ViCgoKLy8gUmFyZUZpVmF1bHQuYWxnby50czo6UmFyZUZpVmF1bHQuZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0KGlucHV0QW1vdW50OiB1aW50NjQpIC0+IHVpbnQ2NDoKZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0OgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMjIKICAgIC8vIHByaXZhdGUgZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0KGlucHV0QW1vdW50OiB1aW50NjQpOiB1aW50NjQgewogICAgcHJvdG8gMSAxCiAgICBwdXNoYnl0ZXMgIiIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTIzCiAgICAvLyBjb25zdCBwb29sQXBwID0gdGhpcy50aW55bWFuUG9vbEFwcElkLnZhbHVlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjAKICAgIC8vIHRpbnltYW5Qb29sQXBwSWQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBUaW55bWFuIFYyIHBvb2wgYXBwIElEIChVU0RDL3N3YXBBc3NldCkKICAgIGJ5dGVjIDE2IC8vICJ0aW55bWFuUG9vbEFwcElkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMjMKICAgIC8vIGNvbnN0IHBvb2xBcHAgPSB0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMjQKICAgIC8vIGNvbnN0IHBvb2xBZGRyID0gdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MQogICAgLy8gdGlueW1hblBvb2xBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgLy8gVGlueW1hbiBwb29sIGFkZHJlc3MKICAgIGJ5dGVjIDE3IC8vICJ0aW55bWFuUG9vbEFkZHJlc3MiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjEyNAogICAgLy8gY29uc3QgcG9vbEFkZHIgPSB0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjEyNwogICAgLy8gY29uc3QgW2Fzc2V0MUlkLCBoYXNBc3NldDFJZF0gPSBBcHBMb2NhbC5nZXRFeFVpbnQ2NChwb29sQWRkciwgcG9vbEFwcCwgQnl0ZXMoJ2Fzc2V0XzFfaWQnKSk7CiAgICBkdXAKICAgIGRpZyAyCiAgICBieXRlYyAyMSAvLyAiYXNzZXRfMV9pZCIKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTI4CiAgICAvLyBhc3NlcnQoaGFzQXNzZXQxSWQsICdDYW5ub3QgcmVhZCBwb29sIGFzc2V0XzFfaWQnKTsKICAgIGFzc2VydCAvLyBDYW5ub3QgcmVhZCBwb29sIGFzc2V0XzFfaWQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTMwCiAgICAvLyBjb25zdCBbYXNzZXQxUmVzZXJ2ZXMsIGhhc0Fzc2V0MVJlc2VydmVzXSA9IEFwcExvY2FsLmdldEV4VWludDY0KHBvb2xBZGRyLCBwb29sQXBwLCBCeXRlcygnYXNzZXRfMV9yZXNlcnZlcycpKTsKICAgIGRpZyAxCiAgICBkaWcgMwogICAgcHVzaGJ5dGVzICJhc3NldF8xX3Jlc2VydmVzIgogICAgYXBwX2xvY2FsX2dldF9leAogICAgc3dhcAogICAgY292ZXIgNAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMzEKICAgIC8vIGFzc2VydChoYXNBc3NldDFSZXNlcnZlcywgJ0Nhbm5vdCByZWFkIHBvb2wgYXNzZXRfMV9yZXNlcnZlcycpOwogICAgYXNzZXJ0IC8vIENhbm5vdCByZWFkIHBvb2wgYXNzZXRfMV9yZXNlcnZlcwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMzMKICAgIC8vIGNvbnN0IFthc3NldDJSZXNlcnZlcywgaGFzQXNzZXQyUmVzZXJ2ZXNdID0gQXBwTG9jYWwuZ2V0RXhVaW50NjQocG9vbEFkZHIsIHBvb2xBcHAsIEJ5dGVzKCdhc3NldF8yX3Jlc2VydmVzJykpOwogICAgZGlnIDEKICAgIGRpZyAzCiAgICBwdXNoYnl0ZXMgImFzc2V0XzJfcmVzZXJ2ZXMiCiAgICBhcHBfbG9jYWxfZ2V0X2V4CiAgICBzd2FwCiAgICBjb3ZlciA0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjEzNAogICAgLy8gYXNzZXJ0KGhhc0Fzc2V0MlJlc2VydmVzLCAnQ2Fubm90IHJlYWQgcG9vbCBhc3NldF8yX3Jlc2VydmVzJyk7CiAgICBhc3NlcnQgLy8gQ2Fubm90IHJlYWQgcG9vbCBhc3NldF8yX3Jlc2VydmVzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjEzNgogICAgLy8gY29uc3QgW3RvdGFsRmVlU2hhcmUsIGhhc1RvdGFsRmVlU2hhcmVdID0gQXBwTG9jYWwuZ2V0RXhVaW50NjQocG9vbEFkZHIsIHBvb2xBcHAsIEJ5dGVzKCd0b3RhbF9mZWVfc2hhcmUnKSk7CiAgICBzd2FwCiAgICB1bmNvdmVyIDIKICAgIHB1c2hieXRlcyAidG90YWxfZmVlX3NoYXJlIgogICAgYXBwX2xvY2FsX2dldF9leAogICAgc3dhcAogICAgY292ZXIgMwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxMzcKICAgIC8vIGFzc2VydChoYXNUb3RhbEZlZVNoYXJlLCAnQ2Fubm90IHJlYWQgcG9vbCB0b3RhbF9mZWVfc2hhcmUnKTsKICAgIGFzc2VydCAvLyBDYW5ub3QgcmVhZCBwb29sIHRvdGFsX2ZlZV9zaGFyZQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxNDMKICAgIC8vIGlmIChhc3NldDFJZCA9PT0gdGhpcy55aWVsZEFzc2V0LnZhbHVlKSB7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0MwogICAgLy8geWllbGRBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFVTREMgQVNBIElEICh3aGF0IGFpcmRyb3BzIGNvbWUgaW4gYXMpCiAgICBieXRlY18xIC8vICJ5aWVsZEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxNDMKICAgIC8vIGlmIChhc3NldDFJZCA9PT0gdGhpcy55aWVsZEFzc2V0LnZhbHVlKSB7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIGJ6IGdldEV4cGVjdGVkU3dhcE91dHB1dF9lbHNlX2JvZHlAMgogICAgZnJhbWVfZGlnIDEKICAgIGZyYW1lX2J1cnkgMAoKZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0X2FmdGVyX2lmX2Vsc2VAMzoKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTU1CiAgICAvLyBjb25zdCBuZXRJbnB1dCA9IHRoaXMubXVsRGl2Rmxvb3IoaW5wdXRBbW91bnQsIEZFRV9CUFNfQkFTRSAtIGZlZUJwcywgRkVFX0JQU19CQVNFKTsKICAgIGludGMgNCAvLyAxMDAwMAogICAgZnJhbWVfZGlnIDIKICAgIC0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODcKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgZnJhbWVfZGlnIC0xCiAgICBtdWx3CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjg4CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTU1CiAgICAvLyBjb25zdCBuZXRJbnB1dCA9IHRoaXMubXVsRGl2Rmxvb3IoaW5wdXRBbW91bnQsIEZFRV9CUFNfQkFTRSAtIGZlZUJwcywgRkVFX0JQU19CQVNFKTsKICAgIGludGMgNCAvLyAxMDAwMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4OAogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4OQogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTU4CiAgICAvLyBjb25zdCBleHBlY3RlZE91dHB1dCA9IHRoaXMubXVsRGl2Rmxvb3Iob3V0cHV0UmVzZXJ2ZXMsIG5ldElucHV0LCBpbnB1dFJlc2VydmVzICsgbmV0SW5wdXQpOwogICAgZnJhbWVfZGlnIDAKICAgIGRpZyAxCiAgICArCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjg3CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGNvdmVyIDIKICAgIG11bHcKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODgKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBpbnRjXzAgLy8gMAogICAgdW5jb3ZlciAzCiAgICBkaXZtb2R3CiAgICBwb3BuIDIKICAgIHN3YXAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODkKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjE2MAogICAgLy8gcmV0dXJuIGV4cGVjdGVkT3V0cHV0OwogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCmdldEV4cGVjdGVkU3dhcE91dHB1dF9lbHNlX2JvZHlAMjoKICAgIGZyYW1lX2J1cnkgMAogICAgZnJhbWVfZGlnIDEKICAgIGIgZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0X2FmdGVyX2lmX2Vsc2VAMwoKCi8vIFJhcmVGaVZhdWx0LmFsZ28udHM6OlJhcmVGaVZhdWx0LmV4ZWN1dGVTd2FwQW5kRGlzdHJpYnV0ZSh1c2RjQmFsYW5jZTogdWludDY0LCBzbGlwcGFnZUJwczogdWludDY0KSAtPiB2b2lkOgpleGVjdXRlU3dhcEFuZERpc3RyaWJ1dGU6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjE2NwogICAgLy8gcHJpdmF0ZSBleGVjdXRlU3dhcEFuZERpc3RyaWJ1dGUodXNkY0JhbGFuY2U6IHVpbnQ2NCwgc2xpcHBhZ2VCcHM6IHVpbnQ2NCk6IHZvaWQgewogICAgcHJvdG8gMiAwCiAgICBwdXNoYnl0ZXMgIiIKICAgIGR1cAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxNjgKICAgIC8vIGNvbnN0IGFwcEFkZHI6IEFjY291bnQgPSBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzczsKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjE3MQogICAgLy8gY29uc3QgZXhwZWN0ZWRPdXRwdXQgPSB0aGlzLmdldEV4cGVjdGVkU3dhcE91dHB1dCh1c2RjQmFsYW5jZSk7CiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjE3MgogICAgLy8gYXNzZXJ0KGV4cGVjdGVkT3V0cHV0ID4gVWludDY0KDApLCAnRXhwZWN0ZWQgb3V0cHV0IGlzIHplcm8nKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIEV4cGVjdGVkIG91dHB1dCBpcyB6ZXJvCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjE3NQogICAgLy8gY29uc3QgbWluQW1vdW50T3V0ID0gdGhpcy5tdWxEaXZGbG9vcihleHBlY3RlZE91dHB1dCwgRkVFX0JQU19CQVNFIC0gc2xpcHBhZ2VCcHMsIEZFRV9CUFNfQkFTRSk7CiAgICBpbnRjIDQgLy8gMTAwMDAKICAgIGZyYW1lX2RpZyAtMQogICAgLQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4NwogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KG4xLCBuMik7CiAgICBtdWx3CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjg4CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTc1CiAgICAvLyBjb25zdCBtaW5BbW91bnRPdXQgPSB0aGlzLm11bERpdkZsb29yKGV4cGVjdGVkT3V0cHV0LCBGRUVfQlBTX0JBU0UgLSBzbGlwcGFnZUJwcywgRkVFX0JQU19CQVNFKTsKICAgIGludGMgNCAvLyAxMDAwMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4OAogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgY292ZXIgMgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4OQogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTc4CiAgICAvLyBjb25zdCBzd2FwQXNzZXRCZWZvcmUgPSBBc3NldCh0aGlzLnN3YXBBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjQ0CiAgICAvLyBzd2FwQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gUHJvamVjdCdzIEFTQSBJRCAod2hhdCB5aWVsZCBpcyBzd2FwcGVkIHRvKQogICAgYnl0ZWNfMiAvLyAic3dhcEFzc2V0IgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxNzgKICAgIC8vIGNvbnN0IHN3YXBBc3NldEJlZm9yZSA9IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGR1cDIKICAgIGFzc2V0X2hvbGRpbmdfZ2V0IEFzc2V0QmFsYW5jZQogICAgYXNzZXJ0IC8vIGFjY291bnQgb3B0ZWQgaW50byBhc3NldAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxODEtMTk1CiAgICAvLyBpdHhuLnN1Ym1pdEdyb3VwKAogICAgLy8gICBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlLAogICAgLy8gICAgIHhmZXJBc3NldDogQXNzZXQodGhpcy55aWVsZEFzc2V0LnZhbHVlKSwKICAgIC8vICAgICBhc3NldEFtb3VudDogdXNkY0JhbGFuY2UsCiAgICAvLyAgICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyAgIH0pLAogICAgLy8gICBpdHhuLmFwcGxpY2F0aW9uQ2FsbCh7CiAgICAvLyAgICAgYXBwSWQ6IEFwcGxpY2F0aW9uKHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZSksCiAgICAvLyAgICAgYXBwQXJnczogW0J5dGVzKCdzd2FwJyksIEJ5dGVzKCdmaXhlZC1pbnB1dCcpLCBpdG9iKG1pbkFtb3VudE91dCldLAogICAgLy8gICAgIGFzc2V0czogW0Fzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKV0sCiAgICAvLyAgICAgYWNjb3VudHM6IFt0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZV0sCiAgICAvLyAgICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyAgIH0pLAogICAgLy8gKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTgzCiAgICAvLyBhc3NldFJlY2VpdmVyOiB0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjYxCiAgICAvLyB0aW55bWFuUG9vbEFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAvLyBUaW55bWFuIHBvb2wgYWRkcmVzcwogICAgYnl0ZWMgMTcgLy8gInRpbnltYW5Qb29sQWRkcmVzcyIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTgzCiAgICAvLyBhc3NldFJlY2VpdmVyOiB0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjE4NAogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLnlpZWxkQXNzZXQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NDMKICAgIC8vIHlpZWxkQXNzZXQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBVU0RDIEFTQSBJRCAod2hhdCBhaXJkcm9wcyBjb21lIGluIGFzKQogICAgYnl0ZWNfMSAvLyAieWllbGRBc3NldCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTg0CiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMueWllbGRBc3NldC52YWx1ZSksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZnJhbWVfZGlnIC0yCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgZHVwCiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTgyLTE4NwogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWUsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy55aWVsZEFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IHVzZGNCYWxhbmNlLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLAogICAgaW50Y18zIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTg2CiAgICAvLyBmZWU6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxODgtMTk0CiAgICAvLyBpdHhuLmFwcGxpY2F0aW9uQ2FsbCh7CiAgICAvLyAgIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgLy8gICBhcHBBcmdzOiBbQnl0ZXMoJ3N3YXAnKSwgQnl0ZXMoJ2ZpeGVkLWlucHV0JyksIGl0b2IobWluQW1vdW50T3V0KV0sCiAgICAvLyAgIGFzc2V0czogW0Fzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKV0sCiAgICAvLyAgIGFjY291bnRzOiBbdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWVdLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLAogICAgaXR4bl9uZXh0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjE4OQogICAgLy8gYXBwSWQ6IEFwcGxpY2F0aW9uKHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZSksCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2MAogICAgLy8gdGlueW1hblBvb2xBcHBJZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgIC8vIFRpbnltYW4gVjIgcG9vbCBhcHAgSUQgKFVTREMvc3dhcEFzc2V0KQogICAgYnl0ZWMgMTYgLy8gInRpbnltYW5Qb29sQXBwSWQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjE4OQogICAgLy8gYXBwSWQ6IEFwcGxpY2F0aW9uKHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZSksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxOTAKICAgIC8vIGFwcEFyZ3M6IFtCeXRlcygnc3dhcCcpLCBCeXRlcygnZml4ZWQtaW5wdXQnKSwgaXRvYihtaW5BbW91bnRPdXQpXSwKICAgIGRpZyA1CiAgICBpdG9iCiAgICB1bmNvdmVyIDIKICAgIGl0eG5fZmllbGQgQWNjb3VudHMKICAgIGRpZyAzCiAgICBpdHhuX2ZpZWxkIEFzc2V0cwogICAgcHVzaGJ5dGVzICJzd2FwIgogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIHB1c2hieXRlcyAiZml4ZWQtaW5wdXQiCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbkFyZ3MKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25JRAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxODgtMTk0CiAgICAvLyBpdHhuLmFwcGxpY2F0aW9uQ2FsbCh7CiAgICAvLyAgIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgLy8gICBhcHBBcmdzOiBbQnl0ZXMoJ3N3YXAnKSwgQnl0ZXMoJ2ZpeGVkLWlucHV0JyksIGl0b2IobWluQW1vdW50T3V0KV0sCiAgICAvLyAgIGFzc2V0czogW0Fzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKV0sCiAgICAvLyAgIGFjY291bnRzOiBbdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWVdLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLAogICAgcHVzaGludCA2IC8vIDYKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MTkzCiAgICAvLyBmZWU6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEZlZQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoxODEtMTk1CiAgICAvLyBpdHhuLnN1Ym1pdEdyb3VwKAogICAgLy8gICBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlLAogICAgLy8gICAgIHhmZXJBc3NldDogQXNzZXQodGhpcy55aWVsZEFzc2V0LnZhbHVlKSwKICAgIC8vICAgICBhc3NldEFtb3VudDogdXNkY0JhbGFuY2UsCiAgICAvLyAgICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyAgIH0pLAogICAgLy8gICBpdHhuLmFwcGxpY2F0aW9uQ2FsbCh7CiAgICAvLyAgICAgYXBwSWQ6IEFwcGxpY2F0aW9uKHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZSksCiAgICAvLyAgICAgYXBwQXJnczogW0J5dGVzKCdzd2FwJyksIEJ5dGVzKCdmaXhlZC1pbnB1dCcpLCBpdG9iKG1pbkFtb3VudE91dCldLAogICAgLy8gICAgIGFzc2V0czogW0Fzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKV0sCiAgICAvLyAgICAgYWNjb3VudHM6IFt0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZV0sCiAgICAvLyAgICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyAgIH0pLAogICAgLy8gKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjE5OAogICAgLy8gY29uc3Qgc3dhcEFzc2V0QWZ0ZXI6IHVpbnQ2NCA9IEFzc2V0KHRoaXMuc3dhcEFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgY292ZXIgMgogICAgYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCiAgICBhc3NlcnQgLy8gYWNjb3VudCBvcHRlZCBpbnRvIGFzc2V0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjE5OQogICAgLy8gY29uc3Qgc3dhcE91dHB1dDogdWludDY0ID0gc3dhcEFzc2V0QWZ0ZXIgLSBzd2FwQXNzZXRCZWZvcmU7CiAgICBzd2FwCiAgICAtCiAgICBkdXAKICAgIHVuY292ZXIgMgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyMDAKICAgIC8vIGFzc2VydChzd2FwT3V0cHV0ID49IG1pbkFtb3VudE91dCwgJ1N3YXAgb3V0cHV0IGJlbG93IG1pbmltdW0nKTsKICAgID49CiAgICBhc3NlcnQgLy8gU3dhcCBvdXRwdXQgYmVsb3cgbWluaW11bQogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyMDMKICAgIC8vIGxldCBmYXJtQm9udXM6IHVpbnQ2NCA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIwNAogICAgLy8gaWYgKHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSA+IFVpbnQ2NCgwKSAmJiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBkdXAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjUKICAgIC8vIGZhcm1FbWlzc2lvblJhdGUgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIEJhc2lzIHBvaW50cyBvZiBzd2FwIG91dHB1dCB0byBhZGQgZnJvbSBmYXJtIChlLmcuLCAxMDAwID0gMTAlKQogICAgYnl0ZWMgMTAgLy8gImZhcm1FbWlzc2lvblJhdGUiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIwNAogICAgLy8gaWYgKHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSA+IFVpbnQ2NCgwKSAmJiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnogZXhlY3V0ZVN3YXBBbmREaXN0cmlidXRlX2FmdGVyX2lmX2Vsc2VAOAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjQKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIHN3YXBBc3NldCBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzMgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyMDQKICAgIC8vIGlmICh0aGlzLmZhcm1FbWlzc2lvblJhdGUudmFsdWUgPiBVaW50NjQoMCkgJiYgdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA+IFVpbnQ2NCgwKSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ6IGV4ZWN1dGVTd2FwQW5kRGlzdHJpYnV0ZV9hZnRlcl9pZl9lbHNlQDgKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjA1CiAgICAvLyBjb25zdCByZXF1ZXN0ZWRCb251cyA9IHRoaXMubXVsRGl2Rmxvb3Ioc3dhcE91dHB1dCwgdGhpcy5mYXJtRW1pc3Npb25SYXRlLnZhbHVlLCBGRUVfQlBTX0JBU0UpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjUKICAgIC8vIGZhcm1FbWlzc2lvblJhdGUgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIEJhc2lzIHBvaW50cyBvZiBzd2FwIG91dHB1dCB0byBhZGQgZnJvbSBmYXJtIChlLmcuLCAxMDAwID0gMTAlKQogICAgYnl0ZWMgMTAgLy8gImZhcm1FbWlzc2lvblJhdGUiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIwNQogICAgLy8gY29uc3QgcmVxdWVzdGVkQm9udXMgPSB0aGlzLm11bERpdkZsb29yKHN3YXBPdXRwdXQsIHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSwgRkVFX0JQU19CQVNFKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjg3CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGZyYW1lX2RpZyAyCiAgICBtdWx3CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjg4CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjA1CiAgICAvLyBjb25zdCByZXF1ZXN0ZWRCb251cyA9IHRoaXMubXVsRGl2Rmxvb3Ioc3dhcE91dHB1dCwgdGhpcy5mYXJtRW1pc3Npb25SYXRlLnZhbHVlLCBGRUVfQlBTX0JBU0UpOwogICAgaW50YyA0IC8vIDEwMDAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjg4CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgZGl2bW9kdwogICAgcG9wbiAyCiAgICBkdXAKICAgIGNvdmVyIDIKICAgIGZyYW1lX2J1cnkgMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4OQogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjA2CiAgICAvLyBmYXJtQm9udXMgPSByZXF1ZXN0ZWRCb251cyA8IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPyByZXF1ZXN0ZWRCb251cyA6IHRoaXMuZmFybUJhbGFuY2UudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgc3dhcEFzc2V0IGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMyAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIwNgogICAgLy8gZmFybUJvbnVzID0gcmVxdWVzdGVkQm9udXMgPCB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID8gcmVxdWVzdGVkQm9udXMgOiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIDwKICAgIGJ6IGV4ZWN1dGVTd2FwQW5kRGlzdHJpYnV0ZV90ZXJuYXJ5X2ZhbHNlQDYKICAgIGZyYW1lX2RpZyAwCiAgICBmcmFtZV9idXJ5IDMKCmV4ZWN1dGVTd2FwQW5kRGlzdHJpYnV0ZV90ZXJuYXJ5X21lcmdlQDc6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIwNwogICAgLy8gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA9IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgLSBmYXJtQm9udXM7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo2NAogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgc3dhcEFzc2V0IGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMyAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIwNwogICAgLy8gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA9IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgLSBmYXJtQm9udXM7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZnJhbWVfZGlnIDMKICAgIC0KICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjQKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIHN3YXBBc3NldCBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzMgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyMDcKICAgIC8vIHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPSB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlIC0gZmFybUJvbnVzOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKCmV4ZWN1dGVTd2FwQW5kRGlzdHJpYnV0ZV9hZnRlcl9pZl9lbHNlQDg6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIxMQogICAgLy8gY29uc3QgdG90YWxPdXRwdXQ6IHVpbnQ2NCA9IHN3YXBPdXRwdXQgKyBmYXJtQm9udXM7CiAgICBmcmFtZV9kaWcgMgogICAgZnJhbWVfZGlnIDMKICAgICsKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjE0CiAgICAvLyB0aGlzLnRvdGFsWWllbGRHZW5lcmF0ZWQudmFsdWUgPSB0aGlzLnRvdGFsWWllbGRHZW5lcmF0ZWQudmFsdWUgKyB0b3RhbE91dHB1dDsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU3CiAgICAvLyB0b3RhbFlpZWxkR2VuZXJhdGVkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBUb3RhbCB5aWVsZCBnZW5lcmF0ZWQgZnJvbSBzd2FwcyAoc3dhcCBvdXRwdXQgaW4gc3dhcEFzc2V0KQogICAgYnl0ZWMgMTUgLy8gInRvdGFsWWllbGRHZW5lcmF0ZWQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIxNAogICAgLy8gdGhpcy50b3RhbFlpZWxkR2VuZXJhdGVkLnZhbHVlID0gdGhpcy50b3RhbFlpZWxkR2VuZXJhdGVkLnZhbHVlICsgdG90YWxPdXRwdXQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZGlnIDEKICAgICsKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTcKICAgIC8vIHRvdGFsWWllbGRHZW5lcmF0ZWQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIFRvdGFsIHlpZWxkIGdlbmVyYXRlZCBmcm9tIHN3YXBzIChzd2FwIG91dHB1dCBpbiBzd2FwQXNzZXQpCiAgICBieXRlYyAxNSAvLyAidG90YWxZaWVsZEdlbmVyYXRlZCIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjE0CiAgICAvLyB0aGlzLnRvdGFsWWllbGRHZW5lcmF0ZWQudmFsdWUgPSB0aGlzLnRvdGFsWWllbGRHZW5lcmF0ZWQudmFsdWUgKyB0b3RhbE91dHB1dDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIxNwogICAgLy8gY29uc3QgY3JlYXRvckN1dDogdWludDY0ID0gdGhpcy5tdWxEaXZGbG9vcih0b3RhbE91dHB1dCwgdGhpcy5jcmVhdG9yRmVlUmF0ZS52YWx1ZSwgRkVFX1BFUkNFTlRfQkFTRSk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo0OQogICAgLy8gY3JlYXRvckZlZVJhdGUgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIDAtMTAwLCBwZXJjZW50YWdlIG9mIHlpZWxkIHRvIGNyZWF0b3IKICAgIGJ5dGVjIDE5IC8vICJjcmVhdG9yRmVlUmF0ZSIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjE3CiAgICAvLyBjb25zdCBjcmVhdG9yQ3V0OiB1aW50NjQgPSB0aGlzLm11bERpdkZsb29yKHRvdGFsT3V0cHV0LCB0aGlzLmNyZWF0b3JGZWVSYXRlLnZhbHVlLCBGRUVfUEVSQ0VOVF9CQVNFKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjg3CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGRpZyAxCiAgICBtdWx3CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjg4CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjE3CiAgICAvLyBjb25zdCBjcmVhdG9yQ3V0OiB1aW50NjQgPSB0aGlzLm11bERpdkZsb29yKHRvdGFsT3V0cHV0LCB0aGlzLmNyZWF0b3JGZWVSYXRlLnZhbHVlLCBGRUVfUEVSQ0VOVF9CQVNFKTsKICAgIHB1c2hpbnQgMTAwIC8vIDEwMAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4OAogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo4OQogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjE4CiAgICAvLyBjb25zdCB1c2VyQ3V0OiB1aW50NjQgPSB0b3RhbE91dHB1dCAtIGNyZWF0b3JDdXQ7CiAgICBzd2FwCiAgICBkaWcgMQogICAgLQogICAgZHVwCiAgICBjb3ZlciAyCiAgICBmcmFtZV9idXJ5IDEKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjIxCiAgICAvLyB0aGlzLmNyZWF0b3JVbmNsYWltZWRZaWVsZC52YWx1ZSA9IHRoaXMuY3JlYXRvclVuY2xhaW1lZFlpZWxkLnZhbHVlICsgY3JlYXRvckN1dDsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjUwCiAgICAvLyBjcmVhdG9yVW5jbGFpbWVkWWllbGQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7IC8vIEFjY3VtdWxhdGVkIHlpZWxkIGZvciBjcmVhdG9yIHRvIGNsYWltCiAgICBieXRlYyA4IC8vICJjcmVhdG9yVW5jbGFpbWVkWWllbGQiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIyMQogICAgLy8gdGhpcy5jcmVhdG9yVW5jbGFpbWVkWWllbGQudmFsdWUgPSB0aGlzLmNyZWF0b3JVbmNsYWltZWRZaWVsZC52YWx1ZSArIGNyZWF0b3JDdXQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgKwogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czo1MAogICAgLy8gY3JlYXRvclVuY2xhaW1lZFlpZWxkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBBY2N1bXVsYXRlZCB5aWVsZCBmb3IgY3JlYXRvciB0byBjbGFpbQogICAgYnl0ZWMgOCAvLyAiY3JlYXRvclVuY2xhaW1lZFlpZWxkIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyMjEKICAgIC8vIHRoaXMuY3JlYXRvclVuY2xhaW1lZFlpZWxkLnZhbHVlID0gdGhpcy5jcmVhdG9yVW5jbGFpbWVkWWllbGQudmFsdWUgKyBjcmVhdG9yQ3V0OwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjI0CiAgICAvLyBpZiAodXNlckN1dCA+IFVpbnQ2NCgwKSkgewogICAgYnogZXhlY3V0ZVN3YXBBbmREaXN0cmlidXRlX2FmdGVyX2lmX2Vsc2VAMTAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjI1CiAgICAvLyBjb25zdCB5aWVsZEluY3JlYXNlOiB1aW50NjQgPSB0aGlzLm11bERpdkZsb29yKHVzZXJDdXQsIFNDQUxFLCB0aGlzLnRvdGFsRGVwb3NpdHMudmFsdWUpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTMKICAgIC8vIHRvdGFsRGVwb3NpdHMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAvLyBUb3RhbCBBbHBoYSBkZXBvc2l0ZWQgaW4gdmF1bHQKICAgIGJ5dGVjXzAgLy8gInRvdGFsRGVwb3NpdHMiCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIyNQogICAgLy8gY29uc3QgeWllbGRJbmNyZWFzZTogdWludDY0ID0gdGhpcy5tdWxEaXZGbG9vcih1c2VyQ3V0LCBTQ0FMRSwgdGhpcy50b3RhbERlcG9zaXRzLnZhbHVlKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjg3CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGZyYW1lX2RpZyAxCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIyNQogICAgLy8gY29uc3QgeWllbGRJbmNyZWFzZTogdWludDY0ID0gdGhpcy5tdWxEaXZGbG9vcih1c2VyQ3V0LCBTQ0FMRSwgdGhpcy50b3RhbERlcG9zaXRzLnZhbHVlKTsKICAgIGludGMgNSAvLyAxMDAwMDAwMDAwMDAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjg3CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIG11bHcKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODgKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBpbnRjXzAgLy8gMAogICAgdW5jb3ZlciAzCiAgICBkaXZtb2R3CiAgICBwb3BuIDIKICAgIHN3YXAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6ODkKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIyNgogICAgLy8gdGhpcy55aWVsZFBlclRva2VuLnZhbHVlID0gdGhpcy55aWVsZFBlclRva2VuLnZhbHVlICsgeWllbGRJbmNyZWFzZTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjU0CiAgICAvLyB5aWVsZFBlclRva2VuID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgLy8gQWNjdW11bGF0b3IgZm9yIHlpZWxkIGRpc3RyaWJ1dGlvbiAoc2NhbGVkIGJ5IFNDQUxFKQogICAgYnl0ZWMgNiAvLyAieWllbGRQZXJUb2tlbiIKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6MjI2CiAgICAvLyB0aGlzLnlpZWxkUGVyVG9rZW4udmFsdWUgPSB0aGlzLnlpZWxkUGVyVG9rZW4udmFsdWUgKyB5aWVsZEluY3JlYXNlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgICsKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NTQKICAgIC8vIHlpZWxkUGVyVG9rZW4gPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAvLyBBY2N1bXVsYXRvciBmb3IgeWllbGQgZGlzdHJpYnV0aW9uIChzY2FsZWQgYnkgU0NBTEUpCiAgICBieXRlYyA2IC8vICJ5aWVsZFBlclRva2VuIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyMjYKICAgIC8vIHRoaXMueWllbGRQZXJUb2tlbi52YWx1ZSA9IHRoaXMueWllbGRQZXJUb2tlbi52YWx1ZSArIHlpZWxkSW5jcmVhc2U7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAoKZXhlY3V0ZVN3YXBBbmREaXN0cmlidXRlX2FmdGVyX2lmX2Vsc2VAMTA6CiAgICByZXRzdWIKCmV4ZWN1dGVTd2FwQW5kRGlzdHJpYnV0ZV90ZXJuYXJ5X2ZhbHNlQDY6CiAgICAvLyBSYXJlRmlWYXVsdC5hbGdvLnRzOjIwNgogICAgLy8gZmFybUJvbnVzID0gcmVxdWVzdGVkQm9udXMgPCB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID8gcmVxdWVzdGVkQm9udXMgOiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaVZhdWx0LmFsZ28udHM6NjQKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIHN3YXBBc3NldCBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzMgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpVmF1bHQuYWxnby50czoyMDYKICAgIC8vIGZhcm1Cb251cyA9IHJlcXVlc3RlZEJvbnVzIDwgdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA/IHJlcXVlc3RlZEJvbnVzIDogdGhpcy5mYXJtQmFsYW5jZS52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBmcmFtZV9idXJ5IDMKICAgIGIgZXhlY3V0ZVN3YXBBbmREaXN0cmlidXRlX3Rlcm5hcnlfbWVyZ2VANwo=",
        "clear": "I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYmFzZS1jb250cmFjdC5kLnRzOjpCYXNlQ29udHJhY3QuY2xlYXJTdGF0ZVByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBwdXNoaW50IDEgLy8gMQogICAgcmV0dXJuCg=="
    },
    "byteCode": {
        "approval": "CyAHAAEIBJBOgKCUpY0dwJoMJhYNdG90YWxEZXBvc2l0cwp5aWVsZEFzc2V0CXN3YXBBc3NldAtmYXJtQmFsYW5jZQ9kZXBvc2l0ZWRBbW91bnQOY3JlYXRvckFkZHJlc3MNeWllbGRQZXJUb2tlbgtlYXJuZWRZaWVsZBVjcmVhdG9yVW5jbGFpbWVkWWllbGQMZGVwb3NpdEFzc2V0EGZhcm1FbWlzc2lvblJhdGUEFR98dQ1yYXJlZmlBZGRyZXNzEG1pblN3YXBUaHJlc2hvbGQObWF4U2xpcHBhZ2VCcHMTdG90YWxZaWVsZEdlbmVyYXRlZBB0aW55bWFuUG9vbEFwcElkEnRpbnltYW5Qb29sQWRkcmVzcxF1c2VyWWllbGRQZXJUb2tlbg5jcmVhdG9yRmVlUmF0ZQ1hc3NldHNPcHRlZEluCmFzc2V0XzFfaWQxG0EAwoICBCkxTZUEamkf4jYaAI4CAKIAljEZFEQxGEEAf4IRBEFOQbUEbi68mwQh8d3/BPFXdyYEvJlEngQ287L0BAA1l6IEsN9cDwQ/uKknBPQdo10Eq273OwSq4srSBB73tYYEvF44xgSv6/ysBBJ4UGUEOEWnHTYaAI4RAQwB9AJ2As8C+wMnA1YDnAP7BBEEYgSIBKsFPAVZBYwFwACABOpwcxk2GgCOAQAsADEZgQISMRgQREIBfDEZIxIxGBBEQgFdJYEFMRmOAgAFAAEAMRhEADEYRAA2GgFJFSQSRBc2GgJJFSQSRBc2GgNJFSQSRBc2GgRJFSQSRBc2GgVJFSQSRBc2GgZJFSQSRBc2GgdJFSQSRBc2GghJFYEgEkQ2GglJFYEgEkRLBYEGDkRLBCEGD0RLA4H0Aw9ESwMhBA5ESwhESwdESwZESwJESwhLCBNESwhLBxNESwdLBxNEJwlPCWcpTwhnKk8HZycFMQBnJwxMZycTTwVnJwgiZygiZycGImcnDU8EZycOTwNnJw8iZycQTwJnJxFMZysiZycKImcnFCJnI0MxACInBWVEEkQiJxRlRBREMgoxFklEIwlJOBAjEkRJOAdLAhJESTgIgeDYzwIPRDgAMQASRLEiJwllRCKyErIRSbIUJbIQIrIBs7EiKWVEIrISshFJshQlshAisgGzsSIqZUQishKyEbIUJbIQIrIBsycUI2cjQzEAJwQiZjEAJxIiZjEAJwciZiNDMQCIBDkxACInBGNMSU8CRDEAIicHY0xOAkRBACQiKGVESwJJTgIJKExnsTEAIicJZURPArISshGyFCWyECKyAbNJQQAWsTEAIiplREsCshKyEbIUJbIQIrIBsyNDNhoBSRUkEkQXSSInDmVEDkQyCkkiKWVEcABMSU8CRCInDWVED0EADSIoZURBAAZJSwOIBKYxFklEIwlJOBAlEkRJOBEiJwllRBJESTgUSwMSREk4ADEAEkQ4EkmBwIQ9D0QxAIgDejEAIicEY0RLAQgxACcETwJmIihlRAgoTGcjQzYaAUkVJBJEF0kxACInBGNMTgJEQQA+SwFJRElLAklOAg5EMQCIAzdLAQkxACcETwJmIihlREsBCShMZ7ExACInCWVETwKyErIRshQlshAisgGzI0NJQv/AMQCIAwExACInB2NESUQxACcHImaxMQAiKmVETwKyErIRshQlshAisgGzI0MxACInBWVEEkQiJwhlRElEJwgiZ7ExACIqZURPArISshGyFCWyECKyAbMjQzYaAUkVJBJEFyInDmVESwEPRDIKIillRHAARCInDWVESwEORCIoZURETIgDeyNDMgoiKWVESwFMcABEIiplRE8CTHAARCIoZUQiJwZlRCInCGVEIicPZURPAxZPAxZQTwIWUE8DFlBPAhZQTBZQJwtMULAjQ4AASTYaAUcCFYEgEkRJIicEY0xJTgNOA0QiJwdjTE4CREEAMiInBmVMSU4CRQdESwMiJxJjTElOAkUHRA1BABZLBEsECUsCHSIhBR9GAkwUREsBCEUBSRYnC0xQsCNDNhoBSRWBIBJEIicEY0QWJwtMULAjQzIKIillRHAATElPAkRAACGAGAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAACcLTFCwI0NHAogB60mB3k0dIiEEH0YCTBRETwIWTwIWUEwWUEL/2TYaAUkVJBJEFzEAIicFZUQSMQAiJwxlRBIRREkhBg9EJw1MZyNDNhoBSRUkEkQXMQAiJwVlRBJESYH0Aw9ESSEEDkQnDkxnI0OAADYaAUkVJBJEF0k2GgJJTgJJFYEgEkQxACInBWVEEjEAIicMZUQSEURLAURJSwInFWNOA0lOBE4ETIAKYXNzZXRfMl9pZGNMTgMQRCIpZUQSQAAKIillREsBEkEALCNFBSIqZURLAhJAAAoiKmVESwESQQARI0sFEEQnEEsEZycRSwNnI0MiQv/sIkUFQv/RNhoBSRUkEkQXMQAiJwVlRBJESYEGDkQnE0xnI0MyCjEWSUQjCUk4ECUSREk4ESIqZUQSREk4FE8CEkRJOAAxABJEOBJJRCIrZUQIK0xnI0M2GgFJFSQSRBdJMQAiJwVlRBIxACInDGVEEhFEIQQORCIrZURBAAZJgegHD0QnCksBZyNDIitlRCInCmVETBZMFlAnC0xQsCNDigEAgABJi/8iJwRjTElPAkRBADwiJwZlTElOAowARIv/IicSY0xJTgKMAUQNQQAgiwCLAQmLAh0iIQUfRgJMFESL/yInB2NECIv/JwdPAmYiJwZlRIv/JxJPAmaJigEBgAAiJxBlRCInEWVESUsCJxVjREsBSwOAEGFzc2V0XzFfcmVzZXJ2ZXNjTE4EREsBSwOAEGFzc2V0XzJfcmVzZXJ2ZXNjTE4ERExPAoAPdG90YWxfZmVlX3NoYXJlY0xOA0QiKWVEEkEAKYsBjAAhBIsCCYv/HSIhBB9GAkwURIsASwEITgIdIk8DH0YCTBREjACJjACLAUL/1IoCAIAASTIKi/6I/1ZJRCEEi/8JHSIhBB9GAk4CFEQiKmVESnAARLEiJxFlRCIpZUSL/rISshFJshQlshAisgG2IicQZURLBRZPArIcSwOyMIAEc3dhcLIagAtmaXhlZC1pbnB1dLIashqyGIEGshAisgGzTgJwAERMCUlPAg9EIkknCmVEQQAyIitlREEAKyInCmVEiwIdIiEEH0YCSU4CjAAURCIrZUQMQQBjiwCMAyIrZUSLAwkrTGeLAosDCCInD2VESwEIJw9MZyInE2VESwEdIoFkH0YCTBRETEsBCUlOAowBIicIZUQIJwhMZ0EAHCIoZUSLASEFHSJPAx9GAkwURCInBmVECCcGTGeJIitlRIwDQv+Y",
        "clear": "C4EBQw=="
    },
    "compilerInfo": {
        "compiler": "puya",
        "compilerVersion": {
            "major": 5,
            "minor": 3,
            "patch": 2
        }
    },
    "events": [],
    "templateVariables": {}
}