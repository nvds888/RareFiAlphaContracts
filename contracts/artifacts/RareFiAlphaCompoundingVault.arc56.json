{
    "name": "RareFiAlphaCompoundingVault",
    "structs": {},
    "methods": [
        {
            "name": "createVault",
            "args": [
                {
                    "type": "uint64",
                    "name": "alphaAssetId"
                },
                {
                    "type": "uint64",
                    "name": "usdcAssetId"
                },
                {
                    "type": "uint64",
                    "name": "creatorFeeRate"
                },
                {
                    "type": "uint64",
                    "name": "minSwapThreshold"
                },
                {
                    "type": "uint64",
                    "name": "maxSlippageBps"
                },
                {
                    "type": "uint64",
                    "name": "tinymanPoolAppId"
                },
                {
                    "type": "address",
                    "name": "tinymanPoolAddress"
                },
                {
                    "type": "address",
                    "name": "rarefiAddress"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [
                    "NoOp"
                ],
                "call": []
            },
            "readonly": false,
            "desc": "Create and initialize the vault\r\nCalled once at deployment",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "optInAssets",
            "args": [],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Opt the contract into required assets\r\nMust be called by creator after deployment with:\r\n- 5.4 ALGO payment (stays in contract for MBR and operational fees)",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "optIn",
            "args": [],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "OptIn"
                ]
            },
            "readonly": false,
            "desc": "User opts into the contract to enable local storage",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "closeOut",
            "args": [],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "CloseOut"
                ]
            },
            "readonly": false,
            "desc": "User closes out - withdraws all Alpha (deposit + yield)",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "deposit",
            "args": [
                {
                    "type": "uint64",
                    "name": "slippageBps",
                    "desc": "- Slippage tolerance for auto-compound (ignored if no compound needed)"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "User deposits Alpha into the vault\r\nReceives shares proportional to their deposit\r\n\r\nIf USDC balance >= threshold and has existing depositors, automatically\r\ncompounds yield BEFORE processing deposit. This ensures yield goes to\r\nexisting depositors, not the new one.",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "withdraw",
            "args": [
                {
                    "type": "uint64",
                    "name": "shareAmount",
                    "desc": "- Shares to redeem (0 = withdraw all)"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "User withdraws Alpha from the vault\r\nReceives proportional share of vault's Alpha (original deposit + compounded yield)",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "claimCreator",
            "args": [],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Creator claims their accumulated Alpha from fees",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "compoundYield",
            "args": [
                {
                    "type": "uint64",
                    "name": "slippageBps",
                    "desc": "- Slippage tolerance in basis points (e.g., 50 = 0.5%, 100 = 1%)"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Swaps accumulated USDC to Alpha and compounds into vault\r\nThe Alpha is added to totalAlpha, increasing the value of all shares\r\nPermissionless - anyone can trigger, slippage capped by maxSlippageBps",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "getVaultStats",
            "args": [],
            "returns": {
                "type": "(uint64,uint64,uint64,uint64,uint64,uint64)",
                "desc": "[totalShares, totalAlpha, creatorUnclaimedAlpha, usdcBalance, totalYieldCompounded, sharePrice]\r\nNote: sharePrice is scaled by SCALE (1e12) for precision"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": true,
            "desc": "Get vault statistics",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "getUserAlphaBalance",
            "args": [
                {
                    "type": "address",
                    "name": "user"
                }
            ],
            "returns": {
                "type": "uint64"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": true,
            "desc": "Get user's current Alpha balance (shares converted to Alpha)\r\nThis includes their original deposit + all compounded yield",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "getUserShares",
            "args": [
                {
                    "type": "address",
                    "name": "user"
                }
            ],
            "returns": {
                "type": "uint64"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": true,
            "desc": "Get user's share balance",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "previewDeposit",
            "args": [
                {
                    "type": "uint64",
                    "name": "alphaAmount"
                }
            ],
            "returns": {
                "type": "uint64"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": true,
            "desc": "Preview how many shares a deposit would receive",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "previewWithdraw",
            "args": [
                {
                    "type": "uint64",
                    "name": "shareAmount"
                }
            ],
            "returns": {
                "type": "uint64"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": true,
            "desc": "Preview how much Alpha a share redemption would receive",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "getCompoundQuote",
            "args": [],
            "returns": {
                "type": "(uint64,uint64,uint64)",
                "desc": "[usdcBalance, expectedAlphaOutput, minOutputAt50bps]"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": true,
            "desc": "Preview compound - shows expected Alpha for current USDC balance",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "updateMinSwapThreshold",
            "args": [
                {
                    "type": "uint64",
                    "name": "newThreshold"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Update the minimum swap threshold",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "updateMaxSlippage",
            "args": [
                {
                    "type": "uint64",
                    "name": "newMaxSlippageBps"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Update the maximum slippage tolerance for swaps\r\nOnly callable by creator",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "updateCreatorFeeRate",
            "args": [
                {
                    "type": "uint64",
                    "name": "newFeeRate"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Update the creator fee rate\r\nOnly callable by creator, constrained to 0-6% range",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "contributeFarm",
            "args": [],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Anyone can contribute to the farm by sending Alpha\r\nFarm bonus is distributed proportionally during yield compounds\r\nThis allows projects/sponsors to boost yield for depositors\r\n\r\nExpects an asset transfer of alphaAsset before this call",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "setFarmEmissionRate",
            "args": [
                {
                    "type": "uint64",
                    "name": "emissionRateBps",
                    "desc": "- Emission rate in basis points (e.g., 1000 = 10%, 5000 = 50%)\r\n  Maximum 50000 (500%) - up to 5x compound output from farm\r\n  Minimum 1000 (10%) when farm has balance (to protect contributors)"
                }
            ],
            "returns": {
                "type": "void"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": false,
            "desc": "Set the farm emission rate (percentage of compound output to add from farm)\r\nOnly callable by creator or RareFi",
            "events": [],
            "recommendations": {}
        },
        {
            "name": "getFarmStats",
            "args": [],
            "returns": {
                "type": "(uint64,uint64)",
                "desc": "[farmBalance, farmEmissionRate]"
            },
            "actions": {
                "create": [],
                "call": [
                    "NoOp"
                ]
            },
            "readonly": true,
            "desc": "Get farm statistics",
            "events": [],
            "recommendations": {}
        }
    ],
    "arcs": [
        22,
        28
    ],
    "networks": {},
    "state": {
        "schema": {
            "global": {
                "ints": 13,
                "bytes": 3
            },
            "local": {
                "ints": 1,
                "bytes": 0
            }
        },
        "keys": {
            "global": {
                "alphaAsset": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "YWxwaGFBc3NldA=="
                },
                "usdcAsset": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "dXNkY0Fzc2V0"
                },
                "creatorAddress": {
                    "keyType": "AVMString",
                    "valueType": "address",
                    "key": "Y3JlYXRvckFkZHJlc3M="
                },
                "rarefiAddress": {
                    "keyType": "AVMString",
                    "valueType": "address",
                    "key": "cmFyZWZpQWRkcmVzcw=="
                },
                "creatorFeeRate": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "Y3JlYXRvckZlZVJhdGU="
                },
                "creatorUnclaimedAlpha": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "Y3JlYXRvclVuY2xhaW1lZEFscGhh"
                },
                "totalShares": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "dG90YWxTaGFyZXM="
                },
                "totalAlpha": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "dG90YWxBbHBoYQ=="
                },
                "minSwapThreshold": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "bWluU3dhcFRocmVzaG9sZA=="
                },
                "maxSlippageBps": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "bWF4U2xpcHBhZ2VCcHM="
                },
                "totalYieldCompounded": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "dG90YWxZaWVsZENvbXBvdW5kZWQ="
                },
                "tinymanPoolAppId": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "dGlueW1hblBvb2xBcHBJZA=="
                },
                "tinymanPoolAddress": {
                    "keyType": "AVMString",
                    "valueType": "address",
                    "key": "dGlueW1hblBvb2xBZGRyZXNz"
                },
                "farmBalance": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "ZmFybUJhbGFuY2U="
                },
                "farmEmissionRate": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "ZmFybUVtaXNzaW9uUmF0ZQ=="
                },
                "assetsOptedIn": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "YXNzZXRzT3B0ZWRJbg=="
                }
            },
            "local": {
                "userShares": {
                    "keyType": "AVMString",
                    "valueType": "AVMUint64",
                    "key": "dXNlclNoYXJlcw=="
                }
            },
            "box": {}
        },
        "maps": {
            "global": {},
            "local": {},
            "box": {}
        }
    },
    "bareActions": {
        "create": [],
        "call": [
            "DeleteApplication",
            "UpdateApplication"
        ]
    },
    "sourceInfo": {
        "approval": {
            "sourceInfo": [
                {
                    "pc": [
                        1065
                    ],
                    "errorMessage": "Alpha amount is zero"
                },
                {
                    "pc": [
                        615
                    ],
                    "errorMessage": "Alpha and USDC must be different"
                },
                {
                    "pc": [
                        929,
                        1588
                    ],
                    "errorMessage": "App call must follow asset transfer"
                },
                {
                    "pc": [
                        709
                    ],
                    "errorMessage": "App call must follow payment"
                },
                {
                    "pc": [
                        703
                    ],
                    "errorMessage": "Assets already opted in"
                },
                {
                    "pc": [
                        1206
                    ],
                    "errorMessage": "Below minimum swap threshold"
                },
                {
                    "pc": [
                        1825
                    ],
                    "errorMessage": "Cannot read pool asset_1_id"
                },
                {
                    "pc": [
                        1852
                    ],
                    "errorMessage": "Cannot read pool asset_1_reserves"
                },
                {
                    "pc": [
                        1879
                    ],
                    "errorMessage": "Cannot read pool asset_2_reserves"
                },
                {
                    "pc": [
                        1904
                    ],
                    "errorMessage": "Cannot read pool total_fee_share"
                },
                {
                    "pc": [
                        496
                    ],
                    "errorMessage": "Contract deletion disabled"
                },
                {
                    "pc": [
                        500
                    ],
                    "errorMessage": "Contract updates disabled"
                },
                {
                    "pc": [
                        1637
                    ],
                    "errorMessage": "Contribution must be positive"
                },
                {
                    "pc": [
                        578
                    ],
                    "errorMessage": "Creator fee rate exceeds maximum (6%)"
                },
                {
                    "pc": [
                        983
                    ],
                    "errorMessage": "Deposit too small"
                },
                {
                    "pc": [
                        1681
                    ],
                    "errorMessage": "Emission rate too high (max 500%)"
                },
                {
                    "pc": [
                        1694
                    ],
                    "errorMessage": "Emission rate too low (min 10% when farm has balance)"
                },
                {
                    "pc": [
                        1975
                    ],
                    "errorMessage": "Expected output is zero"
                },
                {
                    "pc": [
                        1576
                    ],
                    "errorMessage": "Fee rate exceeds maximum (6%)"
                },
                {
                    "pc": [
                        734
                    ],
                    "errorMessage": "Insufficient ALGO (need 5.4 ALGO)"
                },
                {
                    "pc": [
                        1059
                    ],
                    "errorMessage": "Insufficient shares"
                },
                {
                    "pc": [
                        606
                    ],
                    "errorMessage": "Invalid Alpha asset"
                },
                {
                    "pc": [
                        618
                    ],
                    "errorMessage": "Invalid Tinyman pool app ID"
                },
                {
                    "pc": [
                        609
                    ],
                    "errorMessage": "Invalid USDC asset"
                },
                {
                    "pc": [
                        603,
                        1547
                    ],
                    "errorMessage": "Max slippage too high"
                },
                {
                    "pc": [
                        597,
                        1542
                    ],
                    "errorMessage": "Max slippage too low (min 5%)"
                },
                {
                    "pc": [
                        1257,
                        1462,
                        1757,
                        1792,
                        1934,
                        1951,
                        1991,
                        2126,
                        2170
                    ],
                    "errorMessage": "Multiplication overflow in mulDivFloor"
                },
                {
                    "pc": [
                        953,
                        1612
                    ],
                    "errorMessage": "Must send to contract"
                },
                {
                    "pc": [
                        946,
                        1605
                    ],
                    "errorMessage": "Must transfer Alpha asset"
                },
                {
                    "pc": [
                        1211
                    ],
                    "errorMessage": "No depositors to compound for"
                },
                {
                    "pc": [
                        1141
                    ],
                    "errorMessage": "Nothing to claim"
                },
                {
                    "pc": [
                        1051
                    ],
                    "errorMessage": "Nothing to withdraw"
                },
                {
                    "pc": [
                        466
                    ],
                    "errorMessage": "OnCompletion must be CloseOut && can only call when not creating"
                },
                {
                    "pc": [
                        311
                    ],
                    "errorMessage": "OnCompletion must be NoOp"
                },
                {
                    "pc": [
                        477
                    ],
                    "errorMessage": "OnCompletion must be OptIn && can only call when not creating"
                },
                {
                    "pc": [
                        1134
                    ],
                    "errorMessage": "Only creator can claim"
                },
                {
                    "pc": [
                        696
                    ],
                    "errorMessage": "Only creator can opt-in assets"
                },
                {
                    "pc": [
                        1571
                    ],
                    "errorMessage": "Only creator can update fee rate"
                },
                {
                    "pc": [
                        1536
                    ],
                    "errorMessage": "Only creator can update max slippage"
                },
                {
                    "pc": [
                        1675
                    ],
                    "errorMessage": "Only creator or RareFi can set farm rate"
                },
                {
                    "pc": [
                        1502
                    ],
                    "errorMessage": "Only creator or RareFi can update"
                },
                {
                    "pc": [
                        741
                    ],
                    "errorMessage": "Payment must be from caller"
                },
                {
                    "pc": [
                        724
                    ],
                    "errorMessage": "Payment must be to app"
                },
                {
                    "pc": [
                        989
                    ],
                    "errorMessage": "Shares to mint is zero"
                },
                {
                    "pc": [
                        888,
                        1187
                    ],
                    "errorMessage": "Slippage exceeds maximum allowed"
                },
                {
                    "pc": [
                        2089
                    ],
                    "errorMessage": "Swap output below minimum"
                },
                {
                    "pc": [
                        590
                    ],
                    "errorMessage": "Swap threshold too high (max 50 USDC)"
                },
                {
                    "pc": [
                        584
                    ],
                    "errorMessage": "Swap threshold too low"
                },
                {
                    "pc": [
                        1512
                    ],
                    "errorMessage": "Threshold too high (max 50 USDC)"
                },
                {
                    "pc": [
                        1507
                    ],
                    "errorMessage": "Threshold too low"
                },
                {
                    "pc": [
                        960,
                        1619
                    ],
                    "errorMessage": "Transfer must be from caller"
                },
                {
                    "pc": [
                        903,
                        1197,
                        1227,
                        1407,
                        1999,
                        2082
                    ],
                    "errorMessage": "account opted into asset"
                },
                {
                    "pc": [
                        974,
                        1633
                    ],
                    "errorMessage": "assetCloseTo must be zero"
                },
                {
                    "pc": [
                        495,
                        499
                    ],
                    "errorMessage": "can only call when not creating"
                },
                {
                    "pc": [
                        694,
                        701,
                        759,
                        780,
                        831,
                        841,
                        854,
                        886,
                        896,
                        908,
                        916,
                        944,
                        1010,
                        1018,
                        1081,
                        1091,
                        1104,
                        1132,
                        1139,
                        1152,
                        1183,
                        1194,
                        1202,
                        1210,
                        1224,
                        1233,
                        1240,
                        1244,
                        1263,
                        1267,
                        1272,
                        1277,
                        1400,
                        1491,
                        1499,
                        1534,
                        1569,
                        1603,
                        1641,
                        1664,
                        1672,
                        1685,
                        1705,
                        1710,
                        1729,
                        1739,
                        1743,
                        1765,
                        1774,
                        1778,
                        1803,
                        1808,
                        1909,
                        1995,
                        2005,
                        2010,
                        2031,
                        2095,
                        2102,
                        2110,
                        2130,
                        2142,
                        2158,
                        2177,
                        2188,
                        2197,
                        2207
                    ],
                    "errorMessage": "check GlobalState exists"
                },
                {
                    "pc": [
                        819,
                        996,
                        1044,
                        1320,
                        1345
                    ],
                    "errorMessage": "check LocalState exists"
                },
                {
                    "pc": [
                        754
                    ],
                    "errorMessage": "closeRemainderTo must be zero"
                },
                {
                    "pc": [
                        563,
                        572,
                        1315,
                        1340
                    ],
                    "errorMessage": "invalid number of bytes for arc4.static_array<arc4.uint8, 32>"
                },
                {
                    "pc": [
                        508,
                        517,
                        526,
                        535,
                        544,
                        553,
                        879,
                        1032,
                        1177,
                        1361,
                        1381,
                        1483,
                        1526,
                        1561,
                        1655
                    ],
                    "errorMessage": "invalid number of bytes for arc4.uint64"
                },
                {
                    "pc": [
                        748,
                        967,
                        1626
                    ],
                    "errorMessage": "rekeyTo must be zero"
                },
                {
                    "pc": [
                        937,
                        1596
                    ],
                    "errorMessage": "transaction type is axfer"
                },
                {
                    "pc": [
                        717
                    ],
                    "errorMessage": "transaction type is pay"
                }
            ],
            "pcOffsetMethod": "none"
        },
        "clear": {
            "sourceInfo": [],
            "pcOffsetMethod": "none"
        }
    },
    "source": {
        "approval": "I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYXJjNC9pbmRleC5kLnRzOjpDb250cmFjdC5hcHByb3ZhbFByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBpbnRjYmxvY2sgMCAxIDggNCAxMDAwMCAyMDAwMDAgNTAwMDAwMDAgMTAwMDAwMDAwMDAwMAogICAgYnl0ZWNibG9jayAidG90YWxTaGFyZXMiICJ0b3RhbEFscGhhIiAiZmFybUJhbGFuY2UiICJhbHBoYUFzc2V0IiAidXNkY0Fzc2V0IiAidXNlclNoYXJlcyIgImNyZWF0b3JBZGRyZXNzIiAweDE1MWY3Yzc1ICJjcmVhdG9yVW5jbGFpbWVkQWxwaGEiICJmYXJtRW1pc3Npb25SYXRlIiAibWluU3dhcFRocmVzaG9sZCIgIm1heFNsaXBwYWdlQnBzIiAidG90YWxZaWVsZENvbXBvdW5kZWQiICJyYXJlZmlBZGRyZXNzIiAiY3JlYXRvckZlZVJhdGUiICJ0aW55bWFuUG9vbEFwcElkIiAidGlueW1hblBvb2xBZGRyZXNzIiAiYXNzZXRzT3B0ZWRJbiIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM4CiAgICAvLyBleHBvcnQgY2xhc3MgUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0IGV4dGVuZHMgYXJjNC5Db250cmFjdCB7CiAgICB0eG4gTnVtQXBwQXJncwogICAgYnogbWFpbl9iYXJlX3JvdXRpbmdAMjkKICAgIHB1c2hieXRlc3MgMHgyOTMxNGQ5NSAweDZhNjkxZmUyIC8vIG1ldGhvZCAib3B0SW4oKXZvaWQiLCBtZXRob2QgImNsb3NlT3V0KCl2b2lkIgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAogICAgbWF0Y2ggbWFpbl9vcHRJbl9yb3V0ZUAzIG1haW5fY2xvc2VPdXRfcm91dGVANAoKbWFpbl9zd2l0Y2hfY2FzZV9uZXh0QDU6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozOAogICAgLy8gZXhwb3J0IGNsYXNzIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdCBleHRlbmRzIGFyYzQuQ29udHJhY3QgewogICAgdHhuIE9uQ29tcGxldGlvbgogICAgIQogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBtdXN0IGJlIE5vT3AKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBieiBtYWluX2NyZWF0ZV9Ob09wQDI1CiAgICBwdXNoYnl0ZXNzIDB4NDE0ZTQxYjUgMHg2ZTJlYmM5YiAweDIxZjFkZGZmIDB4YmM5OTQ0OWUgMHhjOGIzYzBmMCAweDAwMzU5N2EyIDB4YzdkNGRiZjMgMHgzZTJmN2NiNyAweDNmZDc5ODU2IDB4OTczNjU0YmYgMHgwYzc5M2IxOCAweGFiNmVmNzNiIDB4YWFlMmNhZDIgMHhiYzVlMzhjNiAweGFmZWJmY2FjIDB4MTI3ODUwNjUgMHgzODQ1YTcxZCAvLyBtZXRob2QgIm9wdEluQXNzZXRzKCl2b2lkIiwgbWV0aG9kICJkZXBvc2l0KHVpbnQ2NCl2b2lkIiwgbWV0aG9kICJ3aXRoZHJhdyh1aW50NjQpdm9pZCIsIG1ldGhvZCAiY2xhaW1DcmVhdG9yKCl2b2lkIiwgbWV0aG9kICJjb21wb3VuZFlpZWxkKHVpbnQ2NCl2b2lkIiwgbWV0aG9kICJnZXRWYXVsdFN0YXRzKCkodWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQpIiwgbWV0aG9kICJnZXRVc2VyQWxwaGFCYWxhbmNlKGFkZHJlc3MpdWludDY0IiwgbWV0aG9kICJnZXRVc2VyU2hhcmVzKGFkZHJlc3MpdWludDY0IiwgbWV0aG9kICJwcmV2aWV3RGVwb3NpdCh1aW50NjQpdWludDY0IiwgbWV0aG9kICJwcmV2aWV3V2l0aGRyYXcodWludDY0KXVpbnQ2NCIsIG1ldGhvZCAiZ2V0Q29tcG91bmRRdW90ZSgpKHVpbnQ2NCx1aW50NjQsdWludDY0KSIsIG1ldGhvZCAidXBkYXRlTWluU3dhcFRocmVzaG9sZCh1aW50NjQpdm9pZCIsIG1ldGhvZCAidXBkYXRlTWF4U2xpcHBhZ2UodWludDY0KXZvaWQiLCBtZXRob2QgInVwZGF0ZUNyZWF0b3JGZWVSYXRlKHVpbnQ2NCl2b2lkIiwgbWV0aG9kICJjb250cmlidXRlRmFybSgpdm9pZCIsIG1ldGhvZCAic2V0RmFybUVtaXNzaW9uUmF0ZSh1aW50NjQpdm9pZCIsIG1ldGhvZCAiZ2V0RmFybVN0YXRzKCkodWludDY0LHVpbnQ2NCkiCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAwCiAgICBtYXRjaCBvcHRJbkFzc2V0cyBkZXBvc2l0IHdpdGhkcmF3IGNsYWltQ3JlYXRvciBjb21wb3VuZFlpZWxkIGdldFZhdWx0U3RhdHMgZ2V0VXNlckFscGhhQmFsYW5jZSBnZXRVc2VyU2hhcmVzIHByZXZpZXdEZXBvc2l0IHByZXZpZXdXaXRoZHJhdyBnZXRDb21wb3VuZFF1b3RlIHVwZGF0ZU1pblN3YXBUaHJlc2hvbGQgdXBkYXRlTWF4U2xpcHBhZ2UgdXBkYXRlQ3JlYXRvckZlZVJhdGUgY29udHJpYnV0ZUZhcm0gc2V0RmFybUVtaXNzaW9uUmF0ZSBnZXRGYXJtU3RhdHMKICAgIGVycgoKbWFpbl9jcmVhdGVfTm9PcEAyNToKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM4CiAgICAvLyBleHBvcnQgY2xhc3MgUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0IGV4dGVuZHMgYXJjNC5Db250cmFjdCB7CiAgICBwdXNoYnl0ZXMgMHg0ZDAzY2IyOSAvLyBtZXRob2QgImNyZWF0ZVZhdWx0KHVpbnQ2NCx1aW50NjQsdWludDY0LHVpbnQ2NCx1aW50NjQsdWludDY0LGFkZHJlc3MsYWRkcmVzcyl2b2lkIgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMAogICAgbWF0Y2ggY3JlYXRlVmF1bHQKICAgIGVycgoKbWFpbl9jbG9zZU91dF9yb3V0ZUA0OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzQ1CiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyBhbGxvd0FjdGlvbnM6ICdDbG9zZU91dCcgfSkKICAgIHR4biBPbkNvbXBsZXRpb24KICAgIHB1c2hpbnQgMiAvLyBDbG9zZU91dAogICAgPT0KICAgIHR4biBBcHBsaWNhdGlvbklECiAgICAmJgogICAgYXNzZXJ0IC8vIE9uQ29tcGxldGlvbiBtdXN0IGJlIENsb3NlT3V0ICYmIGNhbiBvbmx5IGNhbGwgd2hlbiBub3QgY3JlYXRpbmcKICAgIGIgY2xvc2VPdXQKCm1haW5fb3B0SW5fcm91dGVAMzoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMzNgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAnT3B0SW4nIH0pCiAgICB0eG4gT25Db21wbGV0aW9uCiAgICBpbnRjXzEgLy8gT3B0SW4KICAgID09CiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgJiYKICAgIGFzc2VydCAvLyBPbkNvbXBsZXRpb24gbXVzdCBiZSBPcHRJbiAmJiBjYW4gb25seSBjYWxsIHdoZW4gbm90IGNyZWF0aW5nCiAgICBiIG9wdEluCgptYWluX2JhcmVfcm91dGluZ0AyOToKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM4CiAgICAvLyBleHBvcnQgY2xhc3MgUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0IGV4dGVuZHMgYXJjNC5Db250cmFjdCB7CiAgICBpbnRjXzMgLy8gVXBkYXRlQXBwbGljYXRpb24KICAgIHB1c2hpbnQgNSAvLyBEZWxldGVBcHBsaWNhdGlvbgogICAgdHhuIE9uQ29tcGxldGlvbgogICAgbWF0Y2ggbWFpbl91cGRhdGVBcHBsaWNhdGlvbkAzMCBtYWluX2RlbGV0ZUFwcGxpY2F0aW9uQDMxCiAgICBlcnIKCm1haW5fZGVsZXRlQXBwbGljYXRpb25AMzE6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3MDQKICAgIC8vIEBiYXJlbWV0aG9kKHsgYWxsb3dBY3Rpb25zOiAnRGVsZXRlQXBwbGljYXRpb24nIH0pCiAgICB0eG4gQXBwbGljYXRpb25JRAogICAgYXNzZXJ0IC8vIGNhbiBvbmx5IGNhbGwgd2hlbiBub3QgY3JlYXRpbmcKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjcwNgogICAgLy8gYXNzZXJ0KGZhbHNlLCAnQ29udHJhY3QgZGVsZXRpb24gZGlzYWJsZWQnKTsKICAgIGVyciAvLyBDb250cmFjdCBkZWxldGlvbiBkaXNhYmxlZAoKbWFpbl91cGRhdGVBcHBsaWNhdGlvbkAzMDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY5OQogICAgLy8gQGJhcmVtZXRob2QoeyBhbGxvd0FjdGlvbnM6ICdVcGRhdGVBcHBsaWNhdGlvbicgfSkKICAgIHR4biBBcHBsaWNhdGlvbklECiAgICBhc3NlcnQgLy8gY2FuIG9ubHkgY2FsbCB3aGVuIG5vdCBjcmVhdGluZwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzAxCiAgICAvLyBhc3NlcnQoZmFsc2UsICdDb250cmFjdCB1cGRhdGVzIGRpc2FibGVkJyk7CiAgICBlcnIgLy8gQ29udHJhY3QgdXBkYXRlcyBkaXNhYmxlZAoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuY3JlYXRlVmF1bHRbcm91dGluZ10oKSAtPiB2b2lkOgpjcmVhdGVWYXVsdDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIzMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgb25DcmVhdGU6ICdyZXF1aXJlJyB9KQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMgogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMwogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNAogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNgogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgNwogICAgZHVwCiAgICBsZW4KICAgIHB1c2hpbnQgMzIgLy8gMzIKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuc3RhdGljX2FycmF5PGFyYzQudWludDgsIDMyPgogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgOAogICAgZHVwCiAgICBsZW4KICAgIHB1c2hpbnQgMzIgLy8gMzIKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuc3RhdGljX2FycmF5PGFyYzQudWludDgsIDMyPgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjQ1CiAgICAvLyBhc3NlcnQoY3JlYXRvckZlZVJhdGUgPD0gTUFYX0ZFRV9SQVRFLCAnQ3JlYXRvciBmZWUgcmF0ZSBleGNlZWRzIG1heGltdW0gKDYlKScpOwogICAgZGlnIDUKICAgIHB1c2hpbnQgNiAvLyA2CiAgICA8PQogICAgYXNzZXJ0IC8vIENyZWF0b3IgZmVlIHJhdGUgZXhjZWVkcyBtYXhpbXVtICg2JSkKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI0NgogICAgLy8gYXNzZXJ0KG1pblN3YXBUaHJlc2hvbGQgPj0gTUlOX1NXQVBfQU1PVU5ULCAnU3dhcCB0aHJlc2hvbGQgdG9vIGxvdycpOwogICAgZGlnIDQKICAgIGludGMgNSAvLyAyMDAwMDAKICAgID49CiAgICBhc3NlcnQgLy8gU3dhcCB0aHJlc2hvbGQgdG9vIGxvdwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjQ3CiAgICAvLyBhc3NlcnQobWluU3dhcFRocmVzaG9sZCA8PSBNQVhfU1dBUF9USFJFU0hPTEQsICdTd2FwIHRocmVzaG9sZCB0b28gaGlnaCAobWF4IDUwIFVTREMpJyk7CiAgICBkaWcgNAogICAgaW50YyA2IC8vIDUwMDAwMDAwCiAgICA8PQogICAgYXNzZXJ0IC8vIFN3YXAgdGhyZXNob2xkIHRvbyBoaWdoIChtYXggNTAgVVNEQykKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI0OAogICAgLy8gYXNzZXJ0KG1heFNsaXBwYWdlQnBzID49IE1JTl9NQVhfU0xJUFBBR0VfQlBTLCAnTWF4IHNsaXBwYWdlIHRvbyBsb3cgKG1pbiA1JSknKTsKICAgIGRpZyAzCiAgICBwdXNoaW50IDUwMCAvLyA1MDAKICAgID49CiAgICBhc3NlcnQgLy8gTWF4IHNsaXBwYWdlIHRvbyBsb3cgKG1pbiA1JSkKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI0OQogICAgLy8gYXNzZXJ0KG1heFNsaXBwYWdlQnBzIDw9IE1BWF9TTElQUEFHRV9CUFMsICdNYXggc2xpcHBhZ2UgdG9vIGhpZ2gnKTsKICAgIGRpZyAzCiAgICBpbnRjIDQgLy8gMTAwMDAKICAgIDw9CiAgICBhc3NlcnQgLy8gTWF4IHNsaXBwYWdlIHRvbyBoaWdoCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyNTAKICAgIC8vIGFzc2VydChhbHBoYUFzc2V0SWQgIT09IFVpbnQ2NCgwKSwgJ0ludmFsaWQgQWxwaGEgYXNzZXQnKTsKICAgIGRpZyA3CiAgICBhc3NlcnQgLy8gSW52YWxpZCBBbHBoYSBhc3NldAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjUxCiAgICAvLyBhc3NlcnQodXNkY0Fzc2V0SWQgIT09IFVpbnQ2NCgwKSwgJ0ludmFsaWQgVVNEQyBhc3NldCcpOwogICAgZGlnIDYKICAgIGFzc2VydCAvLyBJbnZhbGlkIFVTREMgYXNzZXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI1MgogICAgLy8gYXNzZXJ0KGFscGhhQXNzZXRJZCAhPT0gdXNkY0Fzc2V0SWQsICdBbHBoYSBhbmQgVVNEQyBtdXN0IGJlIGRpZmZlcmVudCcpOwogICAgZGlnIDcKICAgIGRpZyA3CiAgICAhPQogICAgYXNzZXJ0IC8vIEFscGhhIGFuZCBVU0RDIG11c3QgYmUgZGlmZmVyZW50CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyNTMKICAgIC8vIGFzc2VydCh0aW55bWFuUG9vbEFwcElkICE9PSBVaW50NjQoMCksICdJbnZhbGlkIFRpbnltYW4gcG9vbCBhcHAgSUQnKTsKICAgIGRpZyAyCiAgICBhc3NlcnQgLy8gSW52YWxpZCBUaW55bWFuIHBvb2wgYXBwIElECiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NAogICAgLy8gYWxwaGFBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gQWxwaGEgQVNBIElEIChkZXBvc2l0ICYgeWllbGQgYXNzZXQpCiAgICBieXRlY18zIC8vICJhbHBoYUFzc2V0IgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjU2CiAgICAvLyB0aGlzLmFscGhhQXNzZXQudmFsdWUgPSBhbHBoYUFzc2V0SWQ7CiAgICB1bmNvdmVyIDgKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NQogICAgLy8gdXNkY0Fzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKGFpcmRyb3BzIGNvbWUgaW4gYXMgdGhpcykKICAgIGJ5dGVjIDQgLy8gInVzZGNBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI1NwogICAgLy8gdGhpcy51c2RjQXNzZXQudmFsdWUgPSB1c2RjQXNzZXRJZDsKICAgIHVuY292ZXIgNwogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ4CiAgICAvLyBjcmVhdG9yQWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7ICAgLy8gVmF1bHQgY3JlYXRvciB3aG8gcmVjZWl2ZXMgZmVlCiAgICBieXRlYyA2IC8vICJjcmVhdG9yQWRkcmVzcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI2MAogICAgLy8gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZSA9IFR4bi5zZW5kZXI7CiAgICB0eG4gU2VuZGVyCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDkKICAgIC8vIHJhcmVmaUFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgICAvLyBSYXJlRmkgcGxhdGZvcm0gYWRkcmVzcyAoY2FuIGFsc28gdHJpZ2dlciBzd2FwcykKICAgIGJ5dGVjIDEzIC8vICJyYXJlZmlBZGRyZXNzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjYxCiAgICAvLyB0aGlzLnJhcmVmaUFkZHJlc3MudmFsdWUgPSByYXJlZmlBZGRyZXNzOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUwCiAgICAvLyBjcmVhdG9yRmVlUmF0ZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gMC0xMDAsIHBlcmNlbnRhZ2Ugb2YgeWllbGQgdG8gY3JlYXRvcgogICAgYnl0ZWMgMTQgLy8gImNyZWF0b3JGZWVSYXRlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjYyCiAgICAvLyB0aGlzLmNyZWF0b3JGZWVSYXRlLnZhbHVlID0gY3JlYXRvckZlZVJhdGU7CiAgICB1bmNvdmVyIDUKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MQogICAgLy8gY3JlYXRvclVuY2xhaW1lZEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBBY2N1bXVsYXRlZCBBbHBoYSBmb3IgY3JlYXRvciB0byBjbGFpbQogICAgYnl0ZWMgOCAvLyAiY3JlYXRvclVuY2xhaW1lZEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjYzCiAgICAvLyB0aGlzLmNyZWF0b3JVbmNsYWltZWRBbHBoYS52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI2NgogICAgLy8gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9IFVpbnQ2NCgwKTsKICAgIGludGNfMCAvLyAwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTUKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjY3CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU2CiAgICAvLyBtaW5Td2FwVGhyZXNob2xkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgLy8gTWluaW11bSBVU0RDIGJlZm9yZSBzd2FwIGFsbG93ZWQKICAgIGJ5dGVjIDEwIC8vICJtaW5Td2FwVGhyZXNob2xkIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjY4CiAgICAvLyB0aGlzLm1pblN3YXBUaHJlc2hvbGQudmFsdWUgPSBtaW5Td2FwVGhyZXNob2xkOwogICAgdW5jb3ZlciA0CiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTcKICAgIC8vIG1heFNsaXBwYWdlQnBzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyBNYXhpbXVtIHNsaXBwYWdlIHRvbGVyYW5jZSBpbiBiYXNpcyBwb2ludHMKICAgIGJ5dGVjIDExIC8vICJtYXhTbGlwcGFnZUJwcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI2OQogICAgLy8gdGhpcy5tYXhTbGlwcGFnZUJwcy52YWx1ZSA9IG1heFNsaXBwYWdlQnBzOwogICAgdW5jb3ZlciAzCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTgKICAgIC8vIHRvdGFsWWllbGRDb21wb3VuZGVkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBUb3RhbCB5aWVsZCBjb21wb3VuZGVkIChmb3Igc3RhdHMpCiAgICBieXRlYyAxMiAvLyAidG90YWxZaWVsZENvbXBvdW5kZWQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyNzAKICAgIC8vIHRoaXMudG90YWxZaWVsZENvbXBvdW5kZWQudmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYxCiAgICAvLyB0aW55bWFuUG9vbEFwcElkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgLy8gVGlueW1hbiBWMiBwb29sIGFwcCBJRAogICAgYnl0ZWMgMTUgLy8gInRpbnltYW5Qb29sQXBwSWQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyNzMKICAgIC8vIHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZSA9IHRpbnltYW5Qb29sQXBwSWQ7CiAgICB1bmNvdmVyIDIKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MgogICAgLy8gdGlueW1hblBvb2xBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgLy8gVGlueW1hbiBwb29sIGFkZHJlc3MKICAgIGJ5dGVjIDE2IC8vICJ0aW55bWFuUG9vbEFkZHJlc3MiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyNzQKICAgIC8vIHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlID0gdGlueW1hblBvb2xBZGRyZXNzOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY1CiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBBbHBoYSBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzIgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mjc3CiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gVWludDY0KDApOwogICAgaW50Y18wIC8vIDAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NgogICAgLy8gZmFybUVtaXNzaW9uUmF0ZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gQmFzaXMgcG9pbnRzIG9mIGNvbXBvdW5kIG91dHB1dCB0byBhZGQgZnJvbSBmYXJtIChlLmcuLCAxMDAwID0gMTAlKQogICAgYnl0ZWMgOSAvLyAiZmFybUVtaXNzaW9uUmF0ZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI3OAogICAgLy8gdGhpcy5mYXJtRW1pc3Npb25SYXRlLnZhbHVlID0gVWludDY0KDApOyAvLyBEaXNhYmxlZCBieSBkZWZhdWx0CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY5CiAgICAvLyBhc3NldHNPcHRlZEluID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgIC8vIDEgaWYgYXNzZXRzIGFyZSBvcHRlZCBpbiwgMCBvdGhlcndpc2UKICAgIGJ5dGVjIDE3IC8vICJhc3NldHNPcHRlZEluIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjgxCiAgICAvLyB0aGlzLmFzc2V0c09wdGVkSW4udmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIzMwogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgb25DcmVhdGU6ICdyZXF1aXJlJyB9KQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQub3B0SW5Bc3NldHNbcm91dGluZ10oKSAtPiB2b2lkOgpvcHRJbkFzc2V0czoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI5MQogICAgLy8gYXNzZXJ0KFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWUsICdPbmx5IGNyZWF0b3IgY2FuIG9wdC1pbiBhc3NldHMnKTsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0OAogICAgLy8gY3JlYXRvckFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAgIC8vIFZhdWx0IGNyZWF0b3Igd2hvIHJlY2VpdmVzIGZlZQogICAgYnl0ZWMgNiAvLyAiY3JlYXRvckFkZHJlc3MiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyOTEKICAgIC8vIGFzc2VydChUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlLCAnT25seSBjcmVhdG9yIGNhbiBvcHQtaW4gYXNzZXRzJyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIGFzc2VydCAvLyBPbmx5IGNyZWF0b3IgY2FuIG9wdC1pbiBhc3NldHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI5MgogICAgLy8gYXNzZXJ0KHRoaXMuYXNzZXRzT3B0ZWRJbi52YWx1ZSA9PT0gVWludDY0KDApLCAnQXNzZXRzIGFscmVhZHkgb3B0ZWQgaW4nKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2OQogICAgLy8gYXNzZXRzT3B0ZWRJbiA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAvLyAxIGlmIGFzc2V0cyBhcmUgb3B0ZWQgaW4sIDAgb3RoZXJ3aXNlCiAgICBieXRlYyAxNyAvLyAiYXNzZXRzT3B0ZWRJbiIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI5MgogICAgLy8gYXNzZXJ0KHRoaXMuYXNzZXRzT3B0ZWRJbi52YWx1ZSA9PT0gVWludDY0KDApLCAnQXNzZXRzIGFscmVhZHkgb3B0ZWQgaW4nKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAhCiAgICBhc3NlcnQgLy8gQXNzZXRzIGFscmVhZHkgb3B0ZWQgaW4KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI5NAogICAgLy8gY29uc3QgYXBwQWRkcjogQWNjb3VudCA9IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzOwogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjI5OAogICAgLy8gY29uc3QgY3VycmVudEluZGV4ID0gVHhuLmdyb3VwSW5kZXg7CiAgICB0eG4gR3JvdXBJbmRleAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mjk5CiAgICAvLyBhc3NlcnQoY3VycmVudEluZGV4ID49IFVpbnQ2NCgxKSwgJ0FwcCBjYWxsIG11c3QgZm9sbG93IHBheW1lbnQnKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIEFwcCBjYWxsIG11c3QgZm9sbG93IHBheW1lbnQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMwMQogICAgLy8gY29uc3QgYWxnb1BheW1lbnQgPSBndHhuLlBheW1lbnRUeG4oY3VycmVudEluZGV4IC0gVWludDY0KDEpKTsKICAgIGludGNfMSAvLyAxCiAgICAtCiAgICBkdXAKICAgIGd0eG5zIFR5cGVFbnVtCiAgICBpbnRjXzEgLy8gcGF5CiAgICA9PQogICAgYXNzZXJ0IC8vIHRyYW5zYWN0aW9uIHR5cGUgaXMgcGF5CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMDIKICAgIC8vIGFzc2VydChhbGdvUGF5bWVudC5yZWNlaXZlciA9PT0gYXBwQWRkciwgJ1BheW1lbnQgbXVzdCBiZSB0byBhcHAnKTsKICAgIGR1cAogICAgZ3R4bnMgUmVjZWl2ZXIKICAgIGRpZyAyCiAgICA9PQogICAgYXNzZXJ0IC8vIFBheW1lbnQgbXVzdCBiZSB0byBhcHAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMwMwogICAgLy8gYXNzZXJ0KGFsZ29QYXltZW50LmFtb3VudCA+PSB0b3RhbFJlcXVpcmVkLCAnSW5zdWZmaWNpZW50IEFMR08gKG5lZWQgNS40IEFMR08pJyk7CiAgICBkdXAKICAgIGd0eG5zIEFtb3VudAogICAgcHVzaGludCA1NDAwMDAwIC8vIDU0MDAwMDAKICAgID49CiAgICBhc3NlcnQgLy8gSW5zdWZmaWNpZW50IEFMR08gKG5lZWQgNS40IEFMR08pCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMDQKICAgIC8vIGFzc2VydChhbGdvUGF5bWVudC5zZW5kZXIgPT09IFR4bi5zZW5kZXIsICdQYXltZW50IG11c3QgYmUgZnJvbSBjYWxsZXInKTsKICAgIGR1cAogICAgZ3R4bnMgU2VuZGVyCiAgICB0eG4gU2VuZGVyCiAgICA9PQogICAgYXNzZXJ0IC8vIFBheW1lbnQgbXVzdCBiZSBmcm9tIGNhbGxlcgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzA3CiAgICAvLyBhc3NlcnQoYWxnb1BheW1lbnQucmVrZXlUbyA9PT0gR2xvYmFsLnplcm9BZGRyZXNzLCAncmVrZXlUbyBtdXN0IGJlIHplcm8nKTsKICAgIGR1cAogICAgZ3R4bnMgUmVrZXlUbwogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIHJla2V5VG8gbXVzdCBiZSB6ZXJvCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMDgKICAgIC8vIGFzc2VydChhbGdvUGF5bWVudC5jbG9zZVJlbWFpbmRlclRvID09PSBHbG9iYWwuemVyb0FkZHJlc3MsICdjbG9zZVJlbWFpbmRlclRvIG11c3QgYmUgemVybycpOwogICAgZ3R4bnMgQ2xvc2VSZW1haW5kZXJUbwogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIGNsb3NlUmVtYWluZGVyVG8gbXVzdCBiZSB6ZXJvCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMTEtMzE2CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBhcHBBZGRyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBVaW50NjQoMCksCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMTMKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NAogICAgLy8gYWxwaGFBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gQWxwaGEgQVNBIElEIChkZXBvc2l0ICYgeWllbGQgYXNzZXQpCiAgICBieXRlY18zIC8vICJhbHBoYUFzc2V0IgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzEzCiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzE0CiAgICAvLyBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBkdXAKICAgIGl0eG5fZmllbGQgQXNzZXRSZWNlaXZlcgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzExLTMxNgogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogYXBwQWRkciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogVWludDY0KDApLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaW50Y18zIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMxNQogICAgLy8gZmVlOiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMxMS0zMTYKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IGFwcEFkZHIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMTktMzI0CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBhcHBBZGRyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMudXNkY0Fzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMyMQogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSksCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDUKICAgIC8vIHVzZGNBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFVTREMgQVNBIElEIChhaXJkcm9wcyBjb21lIGluIGFzIHRoaXMpCiAgICBieXRlYyA0IC8vICJ1c2RjQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMjEKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMyMgogICAgLy8gYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIGludGNfMCAvLyAwCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMTktMzI0CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBhcHBBZGRyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMudXNkY0Fzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGludGNfMyAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMjMKICAgIC8vIGZlZTogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozMTktMzI0CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBhcHBBZGRyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMudXNkY0Fzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IFVpbnQ2NCgwKSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2OQogICAgLy8gYXNzZXRzT3B0ZWRJbiA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAvLyAxIGlmIGFzc2V0cyBhcmUgb3B0ZWQgaW4sIDAgb3RoZXJ3aXNlCiAgICBieXRlYyAxNyAvLyAiYXNzZXRzT3B0ZWRJbiIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjMyNgogICAgLy8gdGhpcy5hc3NldHNPcHRlZEluLnZhbHVlID0gVWludDY0KDEpOwogICAgaW50Y18xIC8vIDEKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyODkKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5vcHRJbltyb3V0aW5nXSgpIC0+IHZvaWQ6Cm9wdEluOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzM5CiAgICAvLyB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWUgPSBVaW50NjQoMCk7CiAgICB0eG4gU2VuZGVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3NQogICAgLy8gdXNlclNoYXJlcyA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFVzZXIncyBzaGFyZSBiYWxhbmNlIChyZXByZXNlbnRzIHByb3BvcnRpb25hbCBvd25lcnNoaXApCiAgICBieXRlYyA1IC8vICJ1c2VyU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzM5CiAgICAvLyB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2xvY2FsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzM2CiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyBhbGxvd0FjdGlvbnM6ICdPcHRJbicgfSkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmNsb3NlT3V0W3JvdXRpbmddKCkgLT4gdm9pZDoKY2xvc2VPdXQ6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNDcKICAgIC8vIGNvbnN0IHNoYXJlcyA9IHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZTsKICAgIHR4biBTZW5kZXIKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo3NQogICAgLy8gdXNlclNoYXJlcyA9IExvY2FsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFVzZXIncyBzaGFyZSBiYWxhbmNlIChyZXByZXNlbnRzIHByb3BvcnRpb25hbCBvd25lcnNoaXApCiAgICBieXRlYyA1IC8vICJ1c2VyU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzQ3CiAgICAvLyBjb25zdCBzaGFyZXMgPSB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWU7CiAgICBhcHBfbG9jYWxfZ2V0X2V4CiAgICBzd2FwCiAgICBkdXAKICAgIHVuY292ZXIgMgogICAgYXNzZXJ0IC8vIGNoZWNrIExvY2FsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNDkKICAgIC8vIGlmIChzaGFyZXMgPiBVaW50NjQoMCkpIHsKICAgIGJ6IGNsb3NlT3V0X2FmdGVyX2lmX2Vsc2VANAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzUxCiAgICAvLyBjb25zdCBhbHBoYUFtb3VudCA9IHRoaXMuc2hhcmVzVG9BbHBoYShzaGFyZXMpOwogICAgZHVwbiAyCiAgICBjYWxsc3ViIHNoYXJlc1RvQWxwaGEKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM1NAogICAgLy8gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9IHRoaXMudG90YWxTaGFyZXMudmFsdWUgLSBzaGFyZXM7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM1NAogICAgLy8gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9IHRoaXMudG90YWxTaGFyZXMudmFsdWUgLSBzaGFyZXM7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgdW5jb3ZlciAyCiAgICAtCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NAogICAgLy8gdG90YWxTaGFyZXMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIFRvdGFsIHNoYXJlcyBpc3N1ZWQgdG8gYWxsIGRlcG9zaXRvcnMKICAgIGJ5dGVjXzAgLy8gInRvdGFsU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzU0CiAgICAvLyB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID0gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSAtIHNoYXJlczsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNTUKICAgIC8vIHRoaXMudG90YWxBbHBoYS52YWx1ZSA9IHRoaXMudG90YWxBbHBoYS52YWx1ZSAtIGFscGhhQW1vdW50OwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU1CiAgICAvLyB0b3RhbEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVG90YWwgQWxwaGEgaGVsZCAoZGVwb3NpdHMgKyBjb21wb3VuZGVkIHlpZWxkKQogICAgYnl0ZWNfMSAvLyAidG90YWxBbHBoYSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM1NQogICAgLy8gdGhpcy50b3RhbEFscGhhLnZhbHVlID0gdGhpcy50b3RhbEFscGhhLnZhbHVlIC0gYWxwaGFBbW91bnQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZGlnIDEKICAgIC0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU1CiAgICAvLyB0b3RhbEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVG90YWwgQWxwaGEgaGVsZCAoZGVwb3NpdHMgKyBjb21wb3VuZGVkIHlpZWxkKQogICAgYnl0ZWNfMSAvLyAidG90YWxBbHBoYSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM1NQogICAgLy8gdGhpcy50b3RhbEFscGhhLnZhbHVlID0gdGhpcy50b3RhbEFscGhhLnZhbHVlIC0gYWxwaGFBbW91bnQ7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzU4LTM2MwogICAgLy8gaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIC8vICAgeGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgLy8gICBhc3NldEFtb3VudDogYWxwaGFBbW91bnQsCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNTkKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICB0eG4gU2VuZGVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNjAKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NAogICAgLy8gYWxwaGFBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gQWxwaGEgQVNBIElEIChkZXBvc2l0ICYgeWllbGQgYXNzZXQpCiAgICBieXRlY18zIC8vICJhbHBoYUFzc2V0IgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzYwCiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgdW5jb3ZlciAyCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgaXR4bl9maWVsZCBBc3NldFJlY2VpdmVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNTgtMzYzCiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBhbHBoYUFtb3VudCwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGludGNfMyAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNjIKICAgIC8vIGZlZTogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNTgtMzYzCiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBhbHBoYUFtb3VudCwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fc3VibWl0CgpjbG9zZU91dF9hZnRlcl9pZl9lbHNlQDQ6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozNDUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IGFsbG93QWN0aW9uczogJ0Nsb3NlT3V0JyB9KQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuZGVwb3NpdFtyb3V0aW5nXSgpIC0+IHZvaWQ6CmRlcG9zaXQ6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozODEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICBkdXAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM4MwogICAgLy8gYXNzZXJ0KHNsaXBwYWdlQnBzIDw9IHRoaXMubWF4U2xpcHBhZ2VCcHMudmFsdWUsICdTbGlwcGFnZSBleGNlZWRzIG1heGltdW0gYWxsb3dlZCcpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU3CiAgICAvLyBtYXhTbGlwcGFnZUJwcyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gTWF4aW11bSBzbGlwcGFnZSB0b2xlcmFuY2UgaW4gYmFzaXMgcG9pbnRzCiAgICBieXRlYyAxMSAvLyAibWF4U2xpcHBhZ2VCcHMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozODMKICAgIC8vIGFzc2VydChzbGlwcGFnZUJwcyA8PSB0aGlzLm1heFNsaXBwYWdlQnBzLnZhbHVlLCAnU2xpcHBhZ2UgZXhjZWVkcyBtYXhpbXVtIGFsbG93ZWQnKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA8PQogICAgYXNzZXJ0IC8vIFNsaXBwYWdlIGV4Y2VlZHMgbWF4aW11bSBhbGxvd2VkCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozODUKICAgIC8vIGNvbnN0IGFwcEFkZHI6IEFjY291bnQgPSBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzczsKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICBkdXAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM4NgogICAgLy8gY29uc3QgdXNkY0JhbGFuY2UgPSBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NQogICAgLy8gdXNkY0Fzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKGFpcmRyb3BzIGNvbWUgaW4gYXMgdGhpcykKICAgIGJ5dGVjIDQgLy8gInVzZGNBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjM4NgogICAgLy8gY29uc3QgdXNkY0JhbGFuY2UgPSBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBhc3NldF9ob2xkaW5nX2dldCBBc3NldEJhbGFuY2UKICAgIHN3YXAKICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICBhc3NlcnQgLy8gYWNjb3VudCBvcHRlZCBpbnRvIGFzc2V0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozOTAKICAgIC8vIGlmICh1c2RjQmFsYW5jZSA+PSB0aGlzLm1pblN3YXBUaHJlc2hvbGQudmFsdWUgJiYgdGhpcy50b3RhbFNoYXJlcy52YWx1ZSA+IFVpbnQ2NCgwKSkgewogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU2CiAgICAvLyBtaW5Td2FwVGhyZXNob2xkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgLy8gTWluaW11bSBVU0RDIGJlZm9yZSBzd2FwIGFsbG93ZWQKICAgIGJ5dGVjIDEwIC8vICJtaW5Td2FwVGhyZXNob2xkIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzkwCiAgICAvLyBpZiAodXNkY0JhbGFuY2UgPj0gdGhpcy5taW5Td2FwVGhyZXNob2xkLnZhbHVlICYmIHRoaXMudG90YWxTaGFyZXMudmFsdWUgPiBVaW50NjQoMCkpIHsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA+PQogICAgYnogZGVwb3NpdF9hZnRlcl9pZl9lbHNlQDQKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NAogICAgLy8gdG90YWxTaGFyZXMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIFRvdGFsIHNoYXJlcyBpc3N1ZWQgdG8gYWxsIGRlcG9zaXRvcnMKICAgIGJ5dGVjXzAgLy8gInRvdGFsU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzkwCiAgICAvLyBpZiAodXNkY0JhbGFuY2UgPj0gdGhpcy5taW5Td2FwVGhyZXNob2xkLnZhbHVlICYmIHRoaXMudG90YWxTaGFyZXMudmFsdWUgPiBVaW50NjQoMCkpIHsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBieiBkZXBvc2l0X2FmdGVyX2lmX2Vsc2VANAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MzkxCiAgICAvLyB0aGlzLmV4ZWN1dGVDb21wb3VuZCh1c2RjQmFsYW5jZSwgc2xpcHBhZ2VCcHMpOwogICAgZHVwCiAgICBkaWcgMwogICAgY2FsbHN1YiBleGVjdXRlQ29tcG91bmQKCmRlcG9zaXRfYWZ0ZXJfaWZfZWxzZUA0OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mzk1CiAgICAvLyBjb25zdCBjdXJyZW50SW5kZXggPSBUeG4uZ3JvdXBJbmRleDsKICAgIHR4biBHcm91cEluZGV4CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozOTYKICAgIC8vIGFzc2VydChjdXJyZW50SW5kZXggPj0gVWludDY0KDEpLCAnQXBwIGNhbGwgbXVzdCBmb2xsb3cgYXNzZXQgdHJhbnNmZXInKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIEFwcCBjYWxsIG11c3QgZm9sbG93IGFzc2V0IHRyYW5zZmVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozOTgKICAgIC8vIGNvbnN0IGRlcG9zaXRUcmFuc2ZlciA9IGd0eG4uQXNzZXRUcmFuc2ZlclR4bihjdXJyZW50SW5kZXggLSBVaW50NjQoMSkpOwogICAgaW50Y18xIC8vIDEKICAgIC0KICAgIGR1cAogICAgZ3R4bnMgVHlwZUVudW0KICAgIGludGNfMyAvLyBheGZlcgogICAgPT0KICAgIGFzc2VydCAvLyB0cmFuc2FjdGlvbiB0eXBlIGlzIGF4ZmVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozOTkKICAgIC8vIGFzc2VydChkZXBvc2l0VHJhbnNmZXIueGZlckFzc2V0ID09PSBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLCAnTXVzdCB0cmFuc2ZlciBBbHBoYSBhc3NldCcpOwogICAgZHVwCiAgICBndHhucyBYZmVyQXNzZXQKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NAogICAgLy8gYWxwaGFBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gQWxwaGEgQVNBIElEIChkZXBvc2l0ICYgeWllbGQgYXNzZXQpCiAgICBieXRlY18zIC8vICJhbHBoYUFzc2V0IgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Mzk5CiAgICAvLyBhc3NlcnQoZGVwb3NpdFRyYW5zZmVyLnhmZXJBc3NldCA9PT0gQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwgJ011c3QgdHJhbnNmZXIgQWxwaGEgYXNzZXQnKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIE11c3QgdHJhbnNmZXIgQWxwaGEgYXNzZXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQwMAogICAgLy8gYXNzZXJ0KGRlcG9zaXRUcmFuc2Zlci5hc3NldFJlY2VpdmVyID09PSBhcHBBZGRyLCAnTXVzdCBzZW5kIHRvIGNvbnRyYWN0Jyk7CiAgICBkdXAKICAgIGd0eG5zIEFzc2V0UmVjZWl2ZXIKICAgIGRpZyAzCiAgICA9PQogICAgYXNzZXJ0IC8vIE11c3Qgc2VuZCB0byBjb250cmFjdAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDAxCiAgICAvLyBhc3NlcnQoZGVwb3NpdFRyYW5zZmVyLnNlbmRlciA9PT0gVHhuLnNlbmRlciwgJ1RyYW5zZmVyIG11c3QgYmUgZnJvbSBjYWxsZXInKTsKICAgIGR1cAogICAgZ3R4bnMgU2VuZGVyCiAgICB0eG4gU2VuZGVyCiAgICA9PQogICAgYXNzZXJ0IC8vIFRyYW5zZmVyIG11c3QgYmUgZnJvbSBjYWxsZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQwNAogICAgLy8gYXNzZXJ0KGRlcG9zaXRUcmFuc2Zlci5yZWtleVRvID09PSBHbG9iYWwuemVyb0FkZHJlc3MsICdyZWtleVRvIG11c3QgYmUgemVybycpOwogICAgZHVwCiAgICBndHhucyBSZWtleVRvCiAgICBnbG9iYWwgWmVyb0FkZHJlc3MKICAgID09CiAgICBhc3NlcnQgLy8gcmVrZXlUbyBtdXN0IGJlIHplcm8KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQwNQogICAgLy8gYXNzZXJ0KGRlcG9zaXRUcmFuc2Zlci5hc3NldENsb3NlVG8gPT09IEdsb2JhbC56ZXJvQWRkcmVzcywgJ2Fzc2V0Q2xvc2VUbyBtdXN0IGJlIHplcm8nKTsKICAgIGR1cAogICAgZ3R4bnMgQXNzZXRDbG9zZVRvCiAgICBnbG9iYWwgWmVyb0FkZHJlc3MKICAgID09CiAgICBhc3NlcnQgLy8gYXNzZXRDbG9zZVRvIG11c3QgYmUgemVybwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDA3CiAgICAvLyBjb25zdCBhbW91bnQgPSBkZXBvc2l0VHJhbnNmZXIuYXNzZXRBbW91bnQ7CiAgICBndHhucyBBc3NldEFtb3VudAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDA4CiAgICAvLyBhc3NlcnQoYW1vdW50ID49IE1JTl9ERVBPU0lUX0FNT1VOVCwgJ0RlcG9zaXQgdG9vIHNtYWxsJyk7CiAgICBkdXAKICAgIHB1c2hpbnQgMTAwMDAwMCAvLyAxMDAwMDAwCiAgICA+PQogICAgYXNzZXJ0IC8vIERlcG9zaXQgdG9vIHNtYWxsCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MTEKICAgIC8vIGNvbnN0IHNoYXJlc1RvTWludCA9IHRoaXMuYWxwaGFUb1NoYXJlcyhhbW91bnQpOwogICAgZHVwCiAgICBjYWxsc3ViIGFscGhhVG9TaGFyZXMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQxMgogICAgLy8gYXNzZXJ0KHNoYXJlc1RvTWludCA+IFVpbnQ2NCgwKSwgJ1NoYXJlcyB0byBtaW50IGlzIHplcm8nKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIFNoYXJlcyB0byBtaW50IGlzIHplcm8KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQxNQogICAgLy8gdGhpcy51c2VyU2hhcmVzKFR4bi5zZW5kZXIpLnZhbHVlID0gdGhpcy51c2VyU2hhcmVzKFR4bi5zZW5kZXIpLnZhbHVlICsgc2hhcmVzVG9NaW50OwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjc1CiAgICAvLyB1c2VyU2hhcmVzID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVXNlcidzIHNoYXJlIGJhbGFuY2UgKHJlcHJlc2VudHMgcHJvcG9ydGlvbmFsIG93bmVyc2hpcCkKICAgIGJ5dGVjIDUgLy8gInVzZXJTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MTUKICAgIC8vIHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZSA9IHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZSArIHNoYXJlc1RvTWludDsKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBMb2NhbFN0YXRlIGV4aXN0cwogICAgZGlnIDEKICAgICsKICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjc1CiAgICAvLyB1c2VyU2hhcmVzID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVXNlcidzIHNoYXJlIGJhbGFuY2UgKHJlcHJlc2VudHMgcHJvcG9ydGlvbmFsIG93bmVyc2hpcCkKICAgIGJ5dGVjIDUgLy8gInVzZXJTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MTUKICAgIC8vIHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZSA9IHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZSArIHNoYXJlc1RvTWludDsKICAgIHVuY292ZXIgMgogICAgYXBwX2xvY2FsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDE2CiAgICAvLyB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID0gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSArIHNoYXJlc1RvTWludDsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NAogICAgLy8gdG90YWxTaGFyZXMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIFRvdGFsIHNoYXJlcyBpc3N1ZWQgdG8gYWxsIGRlcG9zaXRvcnMKICAgIGJ5dGVjXzAgLy8gInRvdGFsU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDE2CiAgICAvLyB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID0gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSArIHNoYXJlc1RvTWludDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICArCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NAogICAgLy8gdG90YWxTaGFyZXMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIFRvdGFsIHNoYXJlcyBpc3N1ZWQgdG8gYWxsIGRlcG9zaXRvcnMKICAgIGJ5dGVjXzAgLy8gInRvdGFsU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDE2CiAgICAvLyB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID0gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSArIHNoYXJlc1RvTWludDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MTcKICAgIC8vIHRoaXMudG90YWxBbHBoYS52YWx1ZSA9IHRoaXMudG90YWxBbHBoYS52YWx1ZSArIGFtb3VudDsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NQogICAgLy8gdG90YWxBbHBoYSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFRvdGFsIEFscGhhIGhlbGQgKGRlcG9zaXRzICsgY29tcG91bmRlZCB5aWVsZCkKICAgIGJ5dGVjXzEgLy8gInRvdGFsQWxwaGEiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MTcKICAgIC8vIHRoaXMudG90YWxBbHBoYS52YWx1ZSA9IHRoaXMudG90YWxBbHBoYS52YWx1ZSArIGFtb3VudDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICArCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NQogICAgLy8gdG90YWxBbHBoYSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFRvdGFsIEFscGhhIGhlbGQgKGRlcG9zaXRzICsgY29tcG91bmRlZCB5aWVsZCkKICAgIGJ5dGVjXzEgLy8gInRvdGFsQWxwaGEiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MTcKICAgIC8vIHRoaXMudG90YWxBbHBoYS52YWx1ZSA9IHRoaXMudG90YWxBbHBoYS52YWx1ZSArIGFtb3VudDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czozODEKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC53aXRoZHJhd1tyb3V0aW5nXSgpIC0+IHZvaWQ6CndpdGhkcmF3OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDI1CiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgZHVwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MjcKICAgIC8vIGNvbnN0IHVzZXJTaGFyZUJhbGFuY2UgPSB0aGlzLnVzZXJTaGFyZXMoVHhuLnNlbmRlcikudmFsdWU7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NzUKICAgIC8vIHVzZXJTaGFyZXMgPSBMb2NhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBVc2VyJ3Mgc2hhcmUgYmFsYW5jZSAocmVwcmVzZW50cyBwcm9wb3J0aW9uYWwgb3duZXJzaGlwKQogICAgYnl0ZWMgNSAvLyAidXNlclNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQyNwogICAgLy8gY29uc3QgdXNlclNoYXJlQmFsYW5jZSA9IHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZTsKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGNvdmVyIDIKICAgIGFzc2VydCAvLyBjaGVjayBMb2NhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDMxCiAgICAvLyBpZiAoc2hhcmVzVG9SZWRlZW0gPT09IFVpbnQ2NCgwKSkgewogICAgYnogd2l0aGRyYXdfaWZfYm9keUAyCiAgICBkaWcgMQoKd2l0aGRyYXdfYWZ0ZXJfaWZfZWxzZUAzOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDM1CiAgICAvLyBhc3NlcnQoc2hhcmVzVG9SZWRlZW0gPiBVaW50NjQoMCksICdOb3RoaW5nIHRvIHdpdGhkcmF3Jyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBOb3RoaW5nIHRvIHdpdGhkcmF3CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0MzYKICAgIC8vIGFzc2VydChzaGFyZXNUb1JlZGVlbSA8PSB1c2VyU2hhcmVCYWxhbmNlLCAnSW5zdWZmaWNpZW50IHNoYXJlcycpOwogICAgZHVwCiAgICBkaWcgMgogICAgZHVwCiAgICBjb3ZlciAzCiAgICA8PQogICAgYXNzZXJ0IC8vIEluc3VmZmljaWVudCBzaGFyZXMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQzOQogICAgLy8gY29uc3QgYWxwaGFBbW91bnQgPSB0aGlzLnNoYXJlc1RvQWxwaGEoc2hhcmVzVG9SZWRlZW0pOwogICAgZHVwCiAgICBjYWxsc3ViIHNoYXJlc1RvQWxwaGEKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0MAogICAgLy8gYXNzZXJ0KGFscGhhQW1vdW50ID4gVWludDY0KDApLCAnQWxwaGEgYW1vdW50IGlzIHplcm8nKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIEFscGhhIGFtb3VudCBpcyB6ZXJvCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NDMKICAgIC8vIHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZSA9IHVzZXJTaGFyZUJhbGFuY2UgLSBzaGFyZXNUb1JlZGVlbTsKICAgIHVuY292ZXIgMgogICAgZGlnIDIKICAgIC0KICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjc1CiAgICAvLyB1c2VyU2hhcmVzID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVXNlcidzIHNoYXJlIGJhbGFuY2UgKHJlcHJlc2VudHMgcHJvcG9ydGlvbmFsIG93bmVyc2hpcCkKICAgIGJ5dGVjIDUgLy8gInVzZXJTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NDMKICAgIC8vIHRoaXMudXNlclNoYXJlcyhUeG4uc2VuZGVyKS52YWx1ZSA9IHVzZXJTaGFyZUJhbGFuY2UgLSBzaGFyZXNUb1JlZGVlbTsKICAgIHVuY292ZXIgMgogICAgYXBwX2xvY2FsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDQ0CiAgICAvLyB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID0gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSAtIHNoYXJlc1RvUmVkZWVtOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0CiAgICAvLyB0b3RhbFNoYXJlcyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gVG90YWwgc2hhcmVzIGlzc3VlZCB0byBhbGwgZGVwb3NpdG9ycwogICAgYnl0ZWNfMCAvLyAidG90YWxTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NDQKICAgIC8vIHRoaXMudG90YWxTaGFyZXMudmFsdWUgPSB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlIC0gc2hhcmVzVG9SZWRlZW07CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgdW5jb3ZlciAyCiAgICAtCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NAogICAgLy8gdG90YWxTaGFyZXMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIFRvdGFsIHNoYXJlcyBpc3N1ZWQgdG8gYWxsIGRlcG9zaXRvcnMKICAgIGJ5dGVjXzAgLy8gInRvdGFsU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDQ0CiAgICAvLyB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID0gdGhpcy50b3RhbFNoYXJlcy52YWx1ZSAtIHNoYXJlc1RvUmVkZWVtOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0NQogICAgLy8gdGhpcy50b3RhbEFscGhhLnZhbHVlID0gdGhpcy50b3RhbEFscGhhLnZhbHVlIC0gYWxwaGFBbW91bnQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTUKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDQ1CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgLSBhbHBoYUFtb3VudDsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBkaWcgMQogICAgLQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTUKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDQ1CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgLSBhbHBoYUFtb3VudDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NDgtNDUzCiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBhbHBoYUFtb3VudCwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0OQogICAgLy8gYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ1MAogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0CiAgICAvLyBhbHBoYUFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBBbHBoYSBBU0EgSUQgKGRlcG9zaXQgJiB5aWVsZCBhc3NldCkKICAgIGJ5dGVjXzMgLy8gImFscGhhQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NTAKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICB1bmNvdmVyIDIKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0OC00NTMKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IGFscGhhQW1vdW50LAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaW50Y18zIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ1MgogICAgLy8gZmVlOiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0OC00NTMKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IGFscGhhQW1vdW50LAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLnN1Ym1pdCgpOwogICAgaXR4bl9zdWJtaXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQyNQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCndpdGhkcmF3X2lmX2JvZHlAMjoKICAgIGR1cAogICAgYiB3aXRoZHJhd19hZnRlcl9pZl9lbHNlQDMKCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmNsYWltQ3JlYXRvcltyb3V0aW5nXSgpIC0+IHZvaWQ6CmNsYWltQ3JlYXRvcjoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ2NQogICAgLy8gYXNzZXJ0KFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWUsICdPbmx5IGNyZWF0b3IgY2FuIGNsYWltJyk7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDgKICAgIC8vIGNyZWF0b3JBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAvLyBWYXVsdCBjcmVhdG9yIHdobyByZWNlaXZlcyBmZWUKICAgIGJ5dGVjIDYgLy8gImNyZWF0b3JBZGRyZXNzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDY1CiAgICAvLyBhc3NlcnQoVHhuLnNlbmRlciA9PT0gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZSwgJ09ubHkgY3JlYXRvciBjYW4gY2xhaW0nKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIE9ubHkgY3JlYXRvciBjYW4gY2xhaW0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ2NwogICAgLy8gY29uc3QgY2xhaW1hYmxlID0gdGhpcy5jcmVhdG9yVW5jbGFpbWVkQWxwaGEudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTEKICAgIC8vIGNyZWF0b3JVbmNsYWltZWRBbHBoYSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgLy8gQWNjdW11bGF0ZWQgQWxwaGEgZm9yIGNyZWF0b3IgdG8gY2xhaW0KICAgIGJ5dGVjIDggLy8gImNyZWF0b3JVbmNsYWltZWRBbHBoYSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ2NwogICAgLy8gY29uc3QgY2xhaW1hYmxlID0gdGhpcy5jcmVhdG9yVW5jbGFpbWVkQWxwaGEudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDY4CiAgICAvLyBhc3NlcnQoY2xhaW1hYmxlID4gVWludDY0KDApLCAnTm90aGluZyB0byBjbGFpbScpOwogICAgZHVwCiAgICBhc3NlcnQgLy8gTm90aGluZyB0byBjbGFpbQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTEKICAgIC8vIGNyZWF0b3JVbmNsYWltZWRBbHBoYSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgLy8gQWNjdW11bGF0ZWQgQWxwaGEgZm9yIGNyZWF0b3IgdG8gY2xhaW0KICAgIGJ5dGVjIDggLy8gImNyZWF0b3JVbmNsYWltZWRBbHBoYSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3MQogICAgLy8gdGhpcy5jcmVhdG9yVW5jbGFpbWVkQWxwaGEudmFsdWUgPSBVaW50NjQoMCk7CiAgICBpbnRjXzAgLy8gMAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3NC00NzkKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IGNsYWltYWJsZSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGl0eG5fYmVnaW4KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3NQogICAgLy8gYXNzZXRSZWNlaXZlcjogVHhuLnNlbmRlciwKICAgIHR4biBTZW5kZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3NgogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0CiAgICAvLyBhbHBoYUFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBBbHBoYSBBU0EgSUQgKGRlcG9zaXQgJiB5aWVsZCBhc3NldCkKICAgIGJ5dGVjXzMgLy8gImFscGhhQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NzYKICAgIC8vIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICB1bmNvdmVyIDIKICAgIGl0eG5fZmllbGQgQXNzZXRBbW91bnQKICAgIGl0eG5fZmllbGQgWGZlckFzc2V0CiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ3NC00NzkKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IFR4bi5zZW5kZXIsCiAgICAvLyAgIHhmZXJBc3NldDogQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IGNsYWltYWJsZSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KS5zdWJtaXQoKTsKICAgIGludGNfMyAvLyA0CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NzgKICAgIC8vIGZlZTogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NzQtNDc5CiAgICAvLyBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICBhc3NldFJlY2VpdmVyOiBUeG4uc2VuZGVyLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSksCiAgICAvLyAgIGFzc2V0QW1vdW50OiBjbGFpbWFibGUsCiAgICAvLyAgIGZlZTogVWludDY0KDApLAogICAgLy8gfSkuc3VibWl0KCk7CiAgICBpdHhuX3N1Ym1pdAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDYzCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuY29tcG91bmRZaWVsZFtyb3V0aW5nXSgpIC0+IHZvaWQ6CmNvbXBvdW5kWWllbGQ6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0OTMKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0OTUKICAgIC8vIGFzc2VydChzbGlwcGFnZUJwcyA8PSB0aGlzLm1heFNsaXBwYWdlQnBzLnZhbHVlLCAnU2xpcHBhZ2UgZXhjZWVkcyBtYXhpbXVtIGFsbG93ZWQnKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NwogICAgLy8gbWF4U2xpcHBhZ2VCcHMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIE1heGltdW0gc2xpcHBhZ2UgdG9sZXJhbmNlIGluIGJhc2lzIHBvaW50cwogICAgYnl0ZWMgMTEgLy8gIm1heFNsaXBwYWdlQnBzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDk1CiAgICAvLyBhc3NlcnQoc2xpcHBhZ2VCcHMgPD0gdGhpcy5tYXhTbGlwcGFnZUJwcy52YWx1ZSwgJ1NsaXBwYWdlIGV4Y2VlZHMgbWF4aW11bSBhbGxvd2VkJyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZGlnIDEKICAgID49CiAgICBhc3NlcnQgLy8gU2xpcHBhZ2UgZXhjZWVkcyBtYXhpbXVtIGFsbG93ZWQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ5NwogICAgLy8gY29uc3QgYXBwQWRkcjogQWNjb3VudCA9IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzOwogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ5OAogICAgLy8gY29uc3QgdXNkY0JhbGFuY2UgPSBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NQogICAgLy8gdXNkY0Fzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKGFpcmRyb3BzIGNvbWUgaW4gYXMgdGhpcykKICAgIGJ5dGVjIDQgLy8gInVzZGNBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ5OAogICAgLy8gY29uc3QgdXNkY0JhbGFuY2UgPSBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBhc3NldF9ob2xkaW5nX2dldCBBc3NldEJhbGFuY2UKICAgIGFzc2VydCAvLyBhY2NvdW50IG9wdGVkIGludG8gYXNzZXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUwMAogICAgLy8gYXNzZXJ0KHVzZGNCYWxhbmNlID49IHRoaXMubWluU3dhcFRocmVzaG9sZC52YWx1ZSwgJ0JlbG93IG1pbmltdW0gc3dhcCB0aHJlc2hvbGQnKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NgogICAgLy8gbWluU3dhcFRocmVzaG9sZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgIC8vIE1pbmltdW0gVVNEQyBiZWZvcmUgc3dhcCBhbGxvd2VkCiAgICBieXRlYyAxMCAvLyAibWluU3dhcFRocmVzaG9sZCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUwMAogICAgLy8gYXNzZXJ0KHVzZGNCYWxhbmNlID49IHRoaXMubWluU3dhcFRocmVzaG9sZC52YWx1ZSwgJ0JlbG93IG1pbmltdW0gc3dhcCB0aHJlc2hvbGQnKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBkaWcgMQogICAgPD0KICAgIGFzc2VydCAvLyBCZWxvdyBtaW5pbXVtIHN3YXAgdGhyZXNob2xkCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MDEKICAgIC8vIGFzc2VydCh0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID4gVWludDY0KDApLCAnTm8gZGVwb3NpdG9ycyB0byBjb21wb3VuZCBmb3InKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NAogICAgLy8gdG90YWxTaGFyZXMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgIC8vIFRvdGFsIHNoYXJlcyBpc3N1ZWQgdG8gYWxsIGRlcG9zaXRvcnMKICAgIGJ5dGVjXzAgLy8gInRvdGFsU2hhcmVzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTAxCiAgICAvLyBhc3NlcnQodGhpcy50b3RhbFNoYXJlcy52YWx1ZSA+IFVpbnQ2NCgwKSwgJ05vIGRlcG9zaXRvcnMgdG8gY29tcG91bmQgZm9yJyk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYXNzZXJ0IC8vIE5vIGRlcG9zaXRvcnMgdG8gY29tcG91bmQgZm9yCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MDMKICAgIC8vIHRoaXMuZXhlY3V0ZUNvbXBvdW5kKHVzZGNCYWxhbmNlLCBzbGlwcGFnZUJwcyk7CiAgICBzd2FwCiAgICBjYWxsc3ViIGV4ZWN1dGVDb21wb3VuZAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDkzCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuZ2V0VmF1bHRTdGF0c1tyb3V0aW5nXSgpIC0+IHZvaWQ6CmdldFZhdWx0U3RhdHM6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MTcKICAgIC8vIGNvbnN0IGFwcEFkZHI6IEFjY291bnQgPSBHbG9iYWwuY3VycmVudEFwcGxpY2F0aW9uQWRkcmVzczsKICAgIGdsb2JhbCBDdXJyZW50QXBwbGljYXRpb25BZGRyZXNzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MTgKICAgIC8vIGNvbnN0IHVzZGNCYWxhbmNlID0gQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDUKICAgIC8vIHVzZGNBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFVTREMgQVNBIElEIChhaXJkcm9wcyBjb21lIGluIGFzIHRoaXMpCiAgICBieXRlYyA0IC8vICJ1c2RjQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MTgKICAgIC8vIGNvbnN0IHVzZGNCYWxhbmNlID0gQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLmJhbGFuY2UoYXBwQWRkcik7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYXNzZXRfaG9sZGluZ19nZXQgQXNzZXRCYWxhbmNlCiAgICBhc3NlcnQgLy8gYWNjb3VudCBvcHRlZCBpbnRvIGFzc2V0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MjEKICAgIC8vIGxldCBzaGFyZVByaWNlOiB1aW50NjQgPSBTQ0FMRTsgLy8gRGVmYXVsdCAxOjEgaWYgbm8gc2hhcmVzCiAgICBpbnRjIDcgLy8gMTAwMDAwMDAwMDAwMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTIyCiAgICAvLyBpZiAodGhpcy50b3RhbFNoYXJlcy52YWx1ZSA+IFVpbnQ2NCgwKSkgewogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0CiAgICAvLyB0b3RhbFNoYXJlcyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gVG90YWwgc2hhcmVzIGlzc3VlZCB0byBhbGwgZGVwb3NpdG9ycwogICAgYnl0ZWNfMCAvLyAidG90YWxTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MjIKICAgIC8vIGlmICh0aGlzLnRvdGFsU2hhcmVzLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYnogZ2V0VmF1bHRTdGF0c19hZnRlcl9pZl9lbHNlQDMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUyMwogICAgLy8gc2hhcmVQcmljZSA9IHRoaXMubXVsRGl2Rmxvb3IodGhpcy50b3RhbEFscGhhLnZhbHVlLCBTQ0FMRSwgdGhpcy50b3RhbFNoYXJlcy52YWx1ZSk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTUKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTIzCiAgICAvLyBzaGFyZVByaWNlID0gdGhpcy5tdWxEaXZGbG9vcih0aGlzLnRvdGFsQWxwaGEudmFsdWUsIFNDQUxFLCB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUyMwogICAgLy8gc2hhcmVQcmljZSA9IHRoaXMubXVsRGl2Rmxvb3IodGhpcy50b3RhbEFscGhhLnZhbHVlLCBTQ0FMRSwgdGhpcy50b3RhbFNoYXJlcy52YWx1ZSk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODYKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgc3dhcAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTIzCiAgICAvLyBzaGFyZVByaWNlID0gdGhpcy5tdWxEaXZGbG9vcih0aGlzLnRvdGFsQWxwaGEudmFsdWUsIFNDQUxFLCB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlKTsKICAgIGludGMgNyAvLyAxMDAwMDAwMDAwMDAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NgogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KG4xLCBuMik7CiAgICBtdWx3CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NwogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICB1bmNvdmVyIDMKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODgKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICBidXJ5IDEKCmdldFZhdWx0U3RhdHNfYWZ0ZXJfaWZfZWxzZUAzOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTI3CiAgICAvLyB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0CiAgICAvLyB0b3RhbFNoYXJlcyA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gVG90YWwgc2hhcmVzIGlzc3VlZCB0byBhbGwgZGVwb3NpdG9ycwogICAgYnl0ZWNfMCAvLyAidG90YWxTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MjcKICAgIC8vIHRoaXMudG90YWxTaGFyZXMudmFsdWUsCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTI4CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUsCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTUKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTI4CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUsCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTI5CiAgICAvLyB0aGlzLmNyZWF0b3JVbmNsYWltZWRBbHBoYS52YWx1ZSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MQogICAgLy8gY3JlYXRvclVuY2xhaW1lZEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBBY2N1bXVsYXRlZCBBbHBoYSBmb3IgY3JlYXRvciB0byBjbGFpbQogICAgYnl0ZWMgOCAvLyAiY3JlYXRvclVuY2xhaW1lZEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTI5CiAgICAvLyB0aGlzLmNyZWF0b3JVbmNsYWltZWRBbHBoYS52YWx1ZSwKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MzEKICAgIC8vIHRoaXMudG90YWxZaWVsZENvbXBvdW5kZWQudmFsdWUsCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTgKICAgIC8vIHRvdGFsWWllbGRDb21wb3VuZGVkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBUb3RhbCB5aWVsZCBjb21wb3VuZGVkIChmb3Igc3RhdHMpCiAgICBieXRlYyAxMiAvLyAidG90YWxZaWVsZENvbXBvdW5kZWQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MzEKICAgIC8vIHRoaXMudG90YWxZaWVsZENvbXBvdW5kZWQudmFsdWUsCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTI2LTUzMwogICAgLy8gcmV0dXJuIFsKICAgIC8vICAgdGhpcy50b3RhbFNoYXJlcy52YWx1ZSwKICAgIC8vICAgdGhpcy50b3RhbEFscGhhLnZhbHVlLAogICAgLy8gICB0aGlzLmNyZWF0b3JVbmNsYWltZWRBbHBoYS52YWx1ZSwKICAgIC8vICAgdXNkY0JhbGFuY2UsCiAgICAvLyAgIHRoaXMudG90YWxZaWVsZENvbXBvdW5kZWQudmFsdWUsCiAgICAvLyAgIHNoYXJlUHJpY2UKICAgIC8vIF07CiAgICB1bmNvdmVyIDMKICAgIGl0b2IKICAgIHVuY292ZXIgMwogICAgaXRvYgogICAgY29uY2F0CiAgICB1bmNvdmVyIDIKICAgIGl0b2IKICAgIGNvbmNhdAogICAgZGlnIDMKICAgIGl0b2IKICAgIGNvbmNhdAogICAgc3dhcAogICAgaXRvYgogICAgY29uY2F0CiAgICBkaWcgMQogICAgaXRvYgogICAgY29uY2F0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MTUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICBieXRlYyA3IC8vIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5nZXRVc2VyQWxwaGFCYWxhbmNlW3JvdXRpbmddKCkgLT4gdm9pZDoKZ2V0VXNlckFscGhhQmFsYW5jZToKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0MAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBwdXNoaW50IDMyIC8vIDMyCiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnN0YXRpY19hcnJheTxhcmM0LnVpbnQ4LCAzMj4KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0MgogICAgLy8gY29uc3Qgc2hhcmVzID0gdGhpcy51c2VyU2hhcmVzKHVzZXIpLnZhbHVlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjc1CiAgICAvLyB1c2VyU2hhcmVzID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVXNlcidzIHNoYXJlIGJhbGFuY2UgKHJlcHJlc2VudHMgcHJvcG9ydGlvbmFsIG93bmVyc2hpcCkKICAgIGJ5dGVjIDUgLy8gInVzZXJTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NDIKICAgIC8vIGNvbnN0IHNoYXJlcyA9IHRoaXMudXNlclNoYXJlcyh1c2VyKS52YWx1ZTsKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBMb2NhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQzCiAgICAvLyByZXR1cm4gdGhpcy5zaGFyZXNUb0FscGhhKHNoYXJlcyk7CiAgICBjYWxsc3ViIHNoYXJlc1RvQWxwaGEKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0MAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIGl0b2IKICAgIGJ5dGVjIDcgLy8gMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmdldFVzZXJTaGFyZXNbcm91dGluZ10oKSAtPiB2b2lkOgpnZXRVc2VyU2hhcmVzOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQ5CiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIHB1c2hpbnQgMzIgLy8gMzIKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQuc3RhdGljX2FycmF5PGFyYzQudWludDgsIDMyPgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTUxCiAgICAvLyByZXR1cm4gdGhpcy51c2VyU2hhcmVzKHVzZXIpLnZhbHVlOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjc1CiAgICAvLyB1c2VyU2hhcmVzID0gTG9jYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVXNlcidzIHNoYXJlIGJhbGFuY2UgKHJlcHJlc2VudHMgcHJvcG9ydGlvbmFsIG93bmVyc2hpcCkKICAgIGJ5dGVjIDUgLy8gInVzZXJTaGFyZXMiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NTEKICAgIC8vIHJldHVybiB0aGlzLnVzZXJTaGFyZXModXNlcikudmFsdWU7CiAgICBhcHBfbG9jYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgTG9jYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU0OQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKHsgcmVhZG9ubHk6IHRydWUgfSkKICAgIGl0b2IKICAgIGJ5dGVjIDcgLy8gMHgxNTFmN2M3NQogICAgc3dhcAogICAgY29uY2F0CiAgICBsb2cKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LnByZXZpZXdEZXBvc2l0W3JvdXRpbmddKCkgLT4gdm9pZDoKcHJldmlld0RlcG9zaXQ6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NTcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NTkKICAgIC8vIHJldHVybiB0aGlzLmFscGhhVG9TaGFyZXMoYWxwaGFBbW91bnQpOwogICAgY2FsbHN1YiBhbHBoYVRvU2hhcmVzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NTcKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICBpdG9iCiAgICBieXRlYyA3IC8vIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5wcmV2aWV3V2l0aGRyYXdbcm91dGluZ10oKSAtPiB2b2lkOgpwcmV2aWV3V2l0aGRyYXc6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NjUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NjcKICAgIC8vIHJldHVybiB0aGlzLnNoYXJlc1RvQWxwaGEoc2hhcmVBbW91bnQpOwogICAgY2FsbHN1YiBzaGFyZXNUb0FscGhhCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NjUKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICBpdG9iCiAgICBieXRlYyA3IC8vIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5nZXRDb21wb3VuZFF1b3RlW3JvdXRpbmddKCkgLT4gdm9pZDoKZ2V0Q29tcG91bmRRdW90ZToKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU3NgogICAgLy8gY29uc3QgYXBwQWRkcjogQWNjb3VudCA9IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzOwogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU3NwogICAgLy8gY29uc3QgdXNkY0JhbGFuY2UgPSBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NQogICAgLy8gdXNkY0Fzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKGFpcmRyb3BzIGNvbWUgaW4gYXMgdGhpcykKICAgIGJ5dGVjIDQgLy8gInVzZGNBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU3NwogICAgLy8gY29uc3QgdXNkY0JhbGFuY2UgPSBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBhc3NldF9ob2xkaW5nX2dldCBBc3NldEJhbGFuY2UKICAgIHN3YXAKICAgIGR1cAogICAgdW5jb3ZlciAyCiAgICBhc3NlcnQgLy8gYWNjb3VudCBvcHRlZCBpbnRvIGFzc2V0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NzkKICAgIC8vIGlmICh1c2RjQmFsYW5jZSA9PT0gVWludDY0KDApKSB7CiAgICBibnogZ2V0Q29tcG91bmRRdW90ZV9hZnRlcl9pZl9lbHNlQDMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU4MAogICAgLy8gcmV0dXJuIFtVaW50NjQoMCksIFVpbnQ2NCgwKSwgVWludDY0KDApXTsKICAgIHB1c2hieXRlcyAweDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMDAwMAoKZ2V0Q29tcG91bmRRdW90ZV9hZnRlcl9pbmxpbmVkX1JhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuZ2V0Q29tcG91bmRRdW90ZUA0OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTc0CiAgICAvLyBAYXJjNC5hYmltZXRob2QoeyByZWFkb25seTogdHJ1ZSB9KQogICAgYnl0ZWMgNyAvLyAweDE1MWY3Yzc1CiAgICBzd2FwCiAgICBjb25jYXQKICAgIGxvZwogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKZ2V0Q29tcG91bmRRdW90ZV9hZnRlcl9pZl9lbHNlQDM6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1ODMKICAgIC8vIGNvbnN0IGV4cGVjdGVkT3V0cHV0ID0gdGhpcy5nZXRFeHBlY3RlZFN3YXBPdXRwdXQodXNkY0JhbGFuY2UpOwogICAgZHVwbiAyCiAgICBjYWxsc3ViIGdldEV4cGVjdGVkU3dhcE91dHB1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODYKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgZHVwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1ODQKICAgIC8vIGNvbnN0IG1pbkF0NTBCcHMgPSB0aGlzLm11bERpdkZsb29yKGV4cGVjdGVkT3V0cHV0LCBGRUVfQlBTX0JBU0UgLSBVaW50NjQoNTApLCBGRUVfQlBTX0JBU0UpOwogICAgcHVzaGludCA5OTUwIC8vIDk5NTAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg2CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIG11bHcKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg3CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU4NAogICAgLy8gY29uc3QgbWluQXQ1MEJwcyA9IHRoaXMubXVsRGl2Rmxvb3IoZXhwZWN0ZWRPdXRwdXQsIEZFRV9CUFNfQkFTRSAtIFVpbnQ2NCg1MCksIEZFRV9CUFNfQkFTRSk7CiAgICBpbnRjIDQgLy8gMTAwMDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg3CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgZGl2bW9kdwogICAgcG9wbiAyCiAgICBzd2FwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4OAogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU4NgogICAgLy8gcmV0dXJuIFt1c2RjQmFsYW5jZSwgZXhwZWN0ZWRPdXRwdXQsIG1pbkF0NTBCcHNdOwogICAgdW5jb3ZlciAyCiAgICBpdG9iCiAgICB1bmNvdmVyIDIKICAgIGl0b2IKICAgIGNvbmNhdAogICAgc3dhcAogICAgaXRvYgogICAgY29uY2F0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NzQKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICBiIGdldENvbXBvdW5kUXVvdGVfYWZ0ZXJfaW5saW5lZF9SYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmdldENvbXBvdW5kUXVvdGVANAoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQudXBkYXRlTWluU3dhcFRocmVzaG9sZFtyb3V0aW5nXSgpIC0+IHZvaWQ6CnVwZGF0ZU1pblN3YXBUaHJlc2hvbGQ6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1OTYKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1OTgKICAgIC8vIGNvbnN0IGlzQ3JlYXRvciA9IFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWU7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDgKICAgIC8vIGNyZWF0b3JBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAvLyBWYXVsdCBjcmVhdG9yIHdobyByZWNlaXZlcyBmZWUKICAgIGJ5dGVjIDYgLy8gImNyZWF0b3JBZGRyZXNzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTk4CiAgICAvLyBjb25zdCBpc0NyZWF0b3IgPSBUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1OTkKICAgIC8vIGNvbnN0IGlzUmFyZWZpID0gVHhuLnNlbmRlciA9PT0gdGhpcy5yYXJlZmlBZGRyZXNzLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ5CiAgICAvLyByYXJlZmlBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAgLy8gUmFyZUZpIHBsYXRmb3JtIGFkZHJlc3MgKGNhbiBhbHNvIHRyaWdnZXIgc3dhcHMpCiAgICBieXRlYyAxMyAvLyAicmFyZWZpQWRkcmVzcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU5OQogICAgLy8gY29uc3QgaXNSYXJlZmkgPSBUeG4uc2VuZGVyID09PSB0aGlzLnJhcmVmaUFkZHJlc3MudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYwMAogICAgLy8gYXNzZXJ0KGlzQ3JlYXRvciB8fCBpc1JhcmVmaSwgJ09ubHkgY3JlYXRvciBvciBSYXJlRmkgY2FuIHVwZGF0ZScpOwogICAgfHwKICAgIGFzc2VydCAvLyBPbmx5IGNyZWF0b3Igb3IgUmFyZUZpIGNhbiB1cGRhdGUKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYwMQogICAgLy8gYXNzZXJ0KG5ld1RocmVzaG9sZCA+PSBNSU5fU1dBUF9BTU9VTlQsICdUaHJlc2hvbGQgdG9vIGxvdycpOwogICAgZHVwCiAgICBpbnRjIDUgLy8gMjAwMDAwCiAgICA+PQogICAgYXNzZXJ0IC8vIFRocmVzaG9sZCB0b28gbG93CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MDIKICAgIC8vIGFzc2VydChuZXdUaHJlc2hvbGQgPD0gTUFYX1NXQVBfVEhSRVNIT0xELCAnVGhyZXNob2xkIHRvbyBoaWdoIChtYXggNTAgVVNEQyknKTsKICAgIGR1cAogICAgaW50YyA2IC8vIDUwMDAwMDAwCiAgICA8PQogICAgYXNzZXJ0IC8vIFRocmVzaG9sZCB0b28gaGlnaCAobWF4IDUwIFVTREMpCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NgogICAgLy8gbWluU3dhcFRocmVzaG9sZCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgIC8vIE1pbmltdW0gVVNEQyBiZWZvcmUgc3dhcCBhbGxvd2VkCiAgICBieXRlYyAxMCAvLyAibWluU3dhcFRocmVzaG9sZCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYwMwogICAgLy8gdGhpcy5taW5Td2FwVGhyZXNob2xkLnZhbHVlID0gbmV3VGhyZXNob2xkOwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU5NgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LnVwZGF0ZU1heFNsaXBwYWdlW3JvdXRpbmddKCkgLT4gdm9pZDoKdXBkYXRlTWF4U2xpcHBhZ2U6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MTAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICB0eG5hIEFwcGxpY2F0aW9uQXJncyAxCiAgICBkdXAKICAgIGxlbgogICAgaW50Y18yIC8vIDgKICAgID09CiAgICBhc3NlcnQgLy8gaW52YWxpZCBudW1iZXIgb2YgYnl0ZXMgZm9yIGFyYzQudWludDY0CiAgICBidG9pCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MTIKICAgIC8vIGFzc2VydChUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlLCAnT25seSBjcmVhdG9yIGNhbiB1cGRhdGUgbWF4IHNsaXBwYWdlJyk7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDgKICAgIC8vIGNyZWF0b3JBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAvLyBWYXVsdCBjcmVhdG9yIHdobyByZWNlaXZlcyBmZWUKICAgIGJ5dGVjIDYgLy8gImNyZWF0b3JBZGRyZXNzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjEyCiAgICAvLyBhc3NlcnQoVHhuLnNlbmRlciA9PT0gdGhpcy5jcmVhdG9yQWRkcmVzcy52YWx1ZSwgJ09ubHkgY3JlYXRvciBjYW4gdXBkYXRlIG1heCBzbGlwcGFnZScpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBhc3NlcnQgLy8gT25seSBjcmVhdG9yIGNhbiB1cGRhdGUgbWF4IHNsaXBwYWdlCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MTMKICAgIC8vIGFzc2VydChuZXdNYXhTbGlwcGFnZUJwcyA+PSBNSU5fTUFYX1NMSVBQQUdFX0JQUywgJ01heCBzbGlwcGFnZSB0b28gbG93IChtaW4gNSUpJyk7CiAgICBkdXAKICAgIHB1c2hpbnQgNTAwIC8vIDUwMAogICAgPj0KICAgIGFzc2VydCAvLyBNYXggc2xpcHBhZ2UgdG9vIGxvdyAobWluIDUlKQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjE0CiAgICAvLyBhc3NlcnQobmV3TWF4U2xpcHBhZ2VCcHMgPD0gTUFYX1NMSVBQQUdFX0JQUywgJ01heCBzbGlwcGFnZSB0b28gaGlnaCcpOwogICAgZHVwCiAgICBpbnRjIDQgLy8gMTAwMDAKICAgIDw9CiAgICBhc3NlcnQgLy8gTWF4IHNsaXBwYWdlIHRvbyBoaWdoCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NwogICAgLy8gbWF4U2xpcHBhZ2VCcHMgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIE1heGltdW0gc2xpcHBhZ2UgdG9sZXJhbmNlIGluIGJhc2lzIHBvaW50cwogICAgYnl0ZWMgMTEgLy8gIm1heFNsaXBwYWdlQnBzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjE1CiAgICAvLyB0aGlzLm1heFNsaXBwYWdlQnBzLnZhbHVlID0gbmV3TWF4U2xpcHBhZ2VCcHM7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjEwCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgaW50Y18xIC8vIDEKICAgIHJldHVybgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQudXBkYXRlQ3JlYXRvckZlZVJhdGVbcm91dGluZ10oKSAtPiB2b2lkOgp1cGRhdGVDcmVhdG9yRmVlUmF0ZToKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYyMgogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIHR4bmEgQXBwbGljYXRpb25BcmdzIDEKICAgIGR1cAogICAgbGVuCiAgICBpbnRjXzIgLy8gOAogICAgPT0KICAgIGFzc2VydCAvLyBpbnZhbGlkIG51bWJlciBvZiBieXRlcyBmb3IgYXJjNC51aW50NjQKICAgIGJ0b2kKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYyNAogICAgLy8gYXNzZXJ0KFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWUsICdPbmx5IGNyZWF0b3IgY2FuIHVwZGF0ZSBmZWUgcmF0ZScpOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ4CiAgICAvLyBjcmVhdG9yQWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7ICAgLy8gVmF1bHQgY3JlYXRvciB3aG8gcmVjZWl2ZXMgZmVlCiAgICBieXRlYyA2IC8vICJjcmVhdG9yQWRkcmVzcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYyNAogICAgLy8gYXNzZXJ0KFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWUsICdPbmx5IGNyZWF0b3IgY2FuIHVwZGF0ZSBmZWUgcmF0ZScpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBhc3NlcnQgLy8gT25seSBjcmVhdG9yIGNhbiB1cGRhdGUgZmVlIHJhdGUKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYyNQogICAgLy8gYXNzZXJ0KG5ld0ZlZVJhdGUgPD0gTUFYX0ZFRV9SQVRFLCAnRmVlIHJhdGUgZXhjZWVkcyBtYXhpbXVtICg2JSknKTsKICAgIGR1cAogICAgcHVzaGludCA2IC8vIDYKICAgIDw9CiAgICBhc3NlcnQgLy8gRmVlIHJhdGUgZXhjZWVkcyBtYXhpbXVtICg2JSkKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjUwCiAgICAvLyBjcmVhdG9yRmVlUmF0ZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gMC0xMDAsIHBlcmNlbnRhZ2Ugb2YgeWllbGQgdG8gY3JlYXRvcgogICAgYnl0ZWMgMTQgLy8gImNyZWF0b3JGZWVSYXRlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjI2CiAgICAvLyB0aGlzLmNyZWF0b3JGZWVSYXRlLnZhbHVlID0gbmV3RmVlUmF0ZTsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2MjIKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCgpCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5jb250cmlidXRlRmFybVtyb3V0aW5nXSgpIC0+IHZvaWQ6CmNvbnRyaWJ1dGVGYXJtOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjQyCiAgICAvLyBjb25zdCBhcHBBZGRyOiBBY2NvdW50ID0gR2xvYmFsLmN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3M7CiAgICBnbG9iYWwgQ3VycmVudEFwcGxpY2F0aW9uQWRkcmVzcwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjQzCiAgICAvLyBjb25zdCBjdXJyZW50SW5kZXggPSBUeG4uZ3JvdXBJbmRleDsKICAgIHR4biBHcm91cEluZGV4CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NDQKICAgIC8vIGFzc2VydChjdXJyZW50SW5kZXggPj0gVWludDY0KDEpLCAnQXBwIGNhbGwgbXVzdCBmb2xsb3cgYXNzZXQgdHJhbnNmZXInKTsKICAgIGR1cAogICAgYXNzZXJ0IC8vIEFwcCBjYWxsIG11c3QgZm9sbG93IGFzc2V0IHRyYW5zZmVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NDcKICAgIC8vIGNvbnN0IGZhcm1UcmFuc2ZlciA9IGd0eG4uQXNzZXRUcmFuc2ZlclR4bihjdXJyZW50SW5kZXggLSBVaW50NjQoMSkpOwogICAgaW50Y18xIC8vIDEKICAgIC0KICAgIGR1cAogICAgZ3R4bnMgVHlwZUVudW0KICAgIGludGNfMyAvLyBheGZlcgogICAgPT0KICAgIGFzc2VydCAvLyB0cmFuc2FjdGlvbiB0eXBlIGlzIGF4ZmVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NDgKICAgIC8vIGFzc2VydChmYXJtVHJhbnNmZXIueGZlckFzc2V0ID09PSBBc3NldCh0aGlzLmFscGhhQXNzZXQudmFsdWUpLCAnTXVzdCB0cmFuc2ZlciBBbHBoYSBhc3NldCcpOwogICAgZHVwCiAgICBndHhucyBYZmVyQXNzZXQKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NAogICAgLy8gYWxwaGFBc3NldCA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgLy8gQWxwaGEgQVNBIElEIChkZXBvc2l0ICYgeWllbGQgYXNzZXQpCiAgICBieXRlY18zIC8vICJhbHBoYUFzc2V0IgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjQ4CiAgICAvLyBhc3NlcnQoZmFybVRyYW5zZmVyLnhmZXJBc3NldCA9PT0gQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKSwgJ011c3QgdHJhbnNmZXIgQWxwaGEgYXNzZXQnKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA9PQogICAgYXNzZXJ0IC8vIE11c3QgdHJhbnNmZXIgQWxwaGEgYXNzZXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY0OQogICAgLy8gYXNzZXJ0KGZhcm1UcmFuc2Zlci5hc3NldFJlY2VpdmVyID09PSBhcHBBZGRyLCAnTXVzdCBzZW5kIHRvIGNvbnRyYWN0Jyk7CiAgICBkdXAKICAgIGd0eG5zIEFzc2V0UmVjZWl2ZXIKICAgIHVuY292ZXIgMgogICAgPT0KICAgIGFzc2VydCAvLyBNdXN0IHNlbmQgdG8gY29udHJhY3QKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY1MAogICAgLy8gYXNzZXJ0KGZhcm1UcmFuc2Zlci5zZW5kZXIgPT09IFR4bi5zZW5kZXIsICdUcmFuc2ZlciBtdXN0IGJlIGZyb20gY2FsbGVyJyk7CiAgICBkdXAKICAgIGd0eG5zIFNlbmRlcgogICAgdHhuIFNlbmRlcgogICAgPT0KICAgIGFzc2VydCAvLyBUcmFuc2ZlciBtdXN0IGJlIGZyb20gY2FsbGVyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NTMKICAgIC8vIGFzc2VydChmYXJtVHJhbnNmZXIucmVrZXlUbyA9PT0gR2xvYmFsLnplcm9BZGRyZXNzLCAncmVrZXlUbyBtdXN0IGJlIHplcm8nKTsKICAgIGR1cAogICAgZ3R4bnMgUmVrZXlUbwogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIHJla2V5VG8gbXVzdCBiZSB6ZXJvCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NTQKICAgIC8vIGFzc2VydChmYXJtVHJhbnNmZXIuYXNzZXRDbG9zZVRvID09PSBHbG9iYWwuemVyb0FkZHJlc3MsICdhc3NldENsb3NlVG8gbXVzdCBiZSB6ZXJvJyk7CiAgICBkdXAKICAgIGd0eG5zIEFzc2V0Q2xvc2VUbwogICAgZ2xvYmFsIFplcm9BZGRyZXNzCiAgICA9PQogICAgYXNzZXJ0IC8vIGFzc2V0Q2xvc2VUbyBtdXN0IGJlIHplcm8KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY1NgogICAgLy8gY29uc3QgYW1vdW50ID0gZmFybVRyYW5zZmVyLmFzc2V0QW1vdW50OwogICAgZ3R4bnMgQXNzZXRBbW91bnQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY1NwogICAgLy8gYXNzZXJ0KGFtb3VudCA+IFVpbnQ2NCgwKSwgJ0NvbnRyaWJ1dGlvbiBtdXN0IGJlIHBvc2l0aXZlJyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBDb250cmlidXRpb24gbXVzdCBiZSBwb3NpdGl2ZQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjYwCiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSArIGFtb3VudDsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NQogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgQWxwaGEgYXZhaWxhYmxlIGZvciBmYXJtIGJvbnVzCiAgICBieXRlY18yIC8vICJmYXJtQmFsYW5jZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY2MAogICAgLy8gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA9IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgKyBhbW91bnQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgKwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjUKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIEFscGhhIGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMiAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NjAKICAgIC8vIHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPSB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlICsgYW1vdW50OwogICAgc3dhcAogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY0MAogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LnNldEZhcm1FbWlzc2lvblJhdGVbcm91dGluZ10oKSAtPiB2b2lkOgpzZXRGYXJtRW1pc3Npb25SYXRlOgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjcxCiAgICAvLyBAYXJjNC5hYmltZXRob2QoKQogICAgdHhuYSBBcHBsaWNhdGlvbkFyZ3MgMQogICAgZHVwCiAgICBsZW4KICAgIGludGNfMiAvLyA4CiAgICA9PQogICAgYXNzZXJ0IC8vIGludmFsaWQgbnVtYmVyIG9mIGJ5dGVzIGZvciBhcmM0LnVpbnQ2NAogICAgYnRvaQogICAgZHVwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NzMKICAgIC8vIGNvbnN0IGlzQ3JlYXRvciA9IFR4bi5zZW5kZXIgPT09IHRoaXMuY3JlYXRvckFkZHJlc3MudmFsdWU7CiAgICB0eG4gU2VuZGVyCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NDgKICAgIC8vIGNyZWF0b3JBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAvLyBWYXVsdCBjcmVhdG9yIHdobyByZWNlaXZlcyBmZWUKICAgIGJ5dGVjIDYgLy8gImNyZWF0b3JBZGRyZXNzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjczCiAgICAvLyBjb25zdCBpc0NyZWF0b3IgPSBUeG4uc2VuZGVyID09PSB0aGlzLmNyZWF0b3JBZGRyZXNzLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NzQKICAgIC8vIGNvbnN0IGlzUmFyZWZpID0gVHhuLnNlbmRlciA9PT0gdGhpcy5yYXJlZmlBZGRyZXNzLnZhbHVlOwogICAgdHhuIFNlbmRlcgogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ5CiAgICAvLyByYXJlZmlBZGRyZXNzID0gR2xvYmFsU3RhdGU8QWNjb3VudD4oKTsgICAgLy8gUmFyZUZpIHBsYXRmb3JtIGFkZHJlc3MgKGNhbiBhbHNvIHRyaWdnZXIgc3dhcHMpCiAgICBieXRlYyAxMyAvLyAicmFyZWZpQWRkcmVzcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY3NAogICAgLy8gY29uc3QgaXNSYXJlZmkgPSBUeG4uc2VuZGVyID09PSB0aGlzLnJhcmVmaUFkZHJlc3MudmFsdWU7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgPT0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY3NQogICAgLy8gYXNzZXJ0KGlzQ3JlYXRvciB8fCBpc1JhcmVmaSwgJ09ubHkgY3JlYXRvciBvciBSYXJlRmkgY2FuIHNldCBmYXJtIHJhdGUnKTsKICAgIHx8CiAgICBhc3NlcnQgLy8gT25seSBjcmVhdG9yIG9yIFJhcmVGaSBjYW4gc2V0IGZhcm0gcmF0ZQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6Njc2CiAgICAvLyBhc3NlcnQoZW1pc3Npb25SYXRlQnBzIDw9IE1BWF9GQVJNX0VNSVNTSU9OX0JQUywgJ0VtaXNzaW9uIHJhdGUgdG9vIGhpZ2ggKG1heCA1MDAlKScpOwogICAgcHVzaGludCA1MDAwMCAvLyA1MDAwMAogICAgPD0KICAgIGFzc2VydCAvLyBFbWlzc2lvbiByYXRlIHRvbyBoaWdoIChtYXggNTAwJSkKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY3OQogICAgLy8gaWYgKHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPiBVaW50NjQoMCkpIHsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NQogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgQWxwaGEgYXZhaWxhYmxlIGZvciBmYXJtIGJvbnVzCiAgICBieXRlY18yIC8vICJmYXJtQmFsYW5jZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY3OQogICAgLy8gaWYgKHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPiBVaW50NjQoMCkpIHsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBieiBzZXRGYXJtRW1pc3Npb25SYXRlX2FmdGVyX2lmX2Vsc2VAMwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjgwCiAgICAvLyBhc3NlcnQoZW1pc3Npb25SYXRlQnBzID49IE1JTl9GQVJNX0VNSVNTSU9OX0JQUywgJ0VtaXNzaW9uIHJhdGUgdG9vIGxvdyAobWluIDEwJSB3aGVuIGZhcm0gaGFzIGJhbGFuY2UpJyk7CiAgICBkdXAKICAgIHB1c2hpbnQgMTAwMCAvLyAxMDAwCiAgICA+PQogICAgYXNzZXJ0IC8vIEVtaXNzaW9uIHJhdGUgdG9vIGxvdyAobWluIDEwJSB3aGVuIGZhcm0gaGFzIGJhbGFuY2UpCgpzZXRGYXJtRW1pc3Npb25SYXRlX2FmdGVyX2lmX2Vsc2VAMzoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY2CiAgICAvLyBmYXJtRW1pc3Npb25SYXRlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyBCYXNpcyBwb2ludHMgb2YgY29tcG91bmQgb3V0cHV0IHRvIGFkZCBmcm9tIGZhcm0gKGUuZy4sIDEwMDAgPSAxMCUpCiAgICBieXRlYyA5IC8vICJmYXJtRW1pc3Npb25SYXRlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjgzCiAgICAvLyB0aGlzLmZhcm1FbWlzc2lvblJhdGUudmFsdWUgPSBlbWlzc2lvblJhdGVCcHM7CiAgICBkaWcgMQogICAgYXBwX2dsb2JhbF9wdXQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY3MQogICAgLy8gQGFyYzQuYWJpbWV0aG9kKCkKICAgIGludGNfMSAvLyAxCiAgICByZXR1cm4KCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmdldEZhcm1TdGF0c1tyb3V0aW5nXSgpIC0+IHZvaWQ6CmdldEZhcm1TdGF0czoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY5MgogICAgLy8gcmV0dXJuIFt0aGlzLmZhcm1CYWxhbmNlLnZhbHVlLCB0aGlzLmZhcm1FbWlzc2lvblJhdGUudmFsdWVdOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY1CiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBBbHBoYSBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzIgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjkyCiAgICAvLyByZXR1cm4gW3RoaXMuZmFybUJhbGFuY2UudmFsdWUsIHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZV07CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY2CiAgICAvLyBmYXJtRW1pc3Npb25SYXRlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyBCYXNpcyBwb2ludHMgb2YgY29tcG91bmQgb3V0cHV0IHRvIGFkZCBmcm9tIGZhcm0gKGUuZy4sIDEwMDAgPSAxMCUpCiAgICBieXRlYyA5IC8vICJmYXJtRW1pc3Npb25SYXRlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjkyCiAgICAvLyByZXR1cm4gW3RoaXMuZmFybUJhbGFuY2UudmFsdWUsIHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZV07CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgc3dhcAogICAgaXRvYgogICAgc3dhcAogICAgaXRvYgogICAgY29uY2F0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2OTAKICAgIC8vIEBhcmM0LmFiaW1ldGhvZCh7IHJlYWRvbmx5OiB0cnVlIH0pCiAgICBieXRlYyA3IC8vIDB4MTUxZjdjNzUKICAgIHN3YXAKICAgIGNvbmNhdAogICAgbG9nCiAgICBpbnRjXzEgLy8gMQogICAgcmV0dXJuCgoKLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6OlJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbHBoYVRvU2hhcmVzKGFscGhhQW1vdW50OiB1aW50NjQpIC0+IHVpbnQ2NDoKYWxwaGFUb1NoYXJlczoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjk3CiAgICAvLyBwcml2YXRlIGFscGhhVG9TaGFyZXMoYWxwaGFBbW91bnQ6IHVpbnQ2NCk6IHVpbnQ2NCB7CiAgICBwcm90byAxIDEKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjk4CiAgICAvLyBpZiAodGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9PT0gVWludDY0KDApKSB7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjk4CiAgICAvLyBpZiAodGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9PT0gVWludDY0KDApKSB7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgYm56IGFscGhhVG9TaGFyZXNfYWZ0ZXJfaWZfZWxzZUAyCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMDAKICAgIC8vIHJldHVybiBhbHBoYUFtb3VudDsKICAgIGZyYW1lX2RpZyAtMQogICAgcmV0c3ViCgphbHBoYVRvU2hhcmVzX2FmdGVyX2lmX2Vsc2VAMjoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEwMgogICAgLy8gcmV0dXJuIHRoaXMubXVsRGl2Rmxvb3IoYWxwaGFBbW91bnQsIHRoaXMudG90YWxTaGFyZXMudmFsdWUsIHRoaXMudG90YWxBbHBoYS52YWx1ZSk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEwMgogICAgLy8gcmV0dXJuIHRoaXMubXVsRGl2Rmxvb3IoYWxwaGFBbW91bnQsIHRoaXMudG90YWxTaGFyZXMudmFsdWUsIHRoaXMudG90YWxBbHBoYS52YWx1ZSk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU1CiAgICAvLyB0b3RhbEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVG90YWwgQWxwaGEgaGVsZCAoZGVwb3NpdHMgKyBjb21wb3VuZGVkIHlpZWxkKQogICAgYnl0ZWNfMSAvLyAidG90YWxBbHBoYSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEwMgogICAgLy8gcmV0dXJuIHRoaXMubXVsRGl2Rmxvb3IoYWxwaGFBbW91bnQsIHRoaXMudG90YWxTaGFyZXMudmFsdWUsIHRoaXMudG90YWxBbHBoYS52YWx1ZSk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODYKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgZnJhbWVfZGlnIC0xCiAgICB1bmNvdmVyIDIKICAgIG11bHcKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg3CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIHVuY292ZXIgMwogICAgZGl2bW9kdwogICAgcG9wbiAyCiAgICBzd2FwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4OAogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEwMgogICAgLy8gcmV0dXJuIHRoaXMubXVsRGl2Rmxvb3IoYWxwaGFBbW91bnQsIHRoaXMudG90YWxTaGFyZXMudmFsdWUsIHRoaXMudG90YWxBbHBoYS52YWx1ZSk7CiAgICByZXRzdWIKCgovLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo6UmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LnNoYXJlc1RvQWxwaGEoc2hhcmVzOiB1aW50NjQpIC0+IHVpbnQ2NDoKc2hhcmVzVG9BbHBoYToKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEwOQogICAgLy8gcHJpdmF0ZSBzaGFyZXNUb0FscGhhKHNoYXJlczogdWludDY0KTogdWludDY0IHsKICAgIHByb3RvIDEgMQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTEwCiAgICAvLyBpZiAodGhpcy50b3RhbFNoYXJlcy52YWx1ZSA9PT0gVWludDY0KDApKSB7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjExMAogICAgLy8gaWYgKHRoaXMudG90YWxTaGFyZXMudmFsdWUgPT09IFVpbnQ2NCgwKSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJueiBzaGFyZXNUb0FscGhhX2FmdGVyX2lmX2Vsc2VAMgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTExCiAgICAvLyByZXR1cm4gVWludDY0KDApOwogICAgaW50Y18wIC8vIDAKICAgIHJldHN1YgoKc2hhcmVzVG9BbHBoYV9hZnRlcl9pZl9lbHNlQDI6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMTMKICAgIC8vIHJldHVybiB0aGlzLm11bERpdkZsb29yKHNoYXJlcywgdGhpcy50b3RhbEFscGhhLnZhbHVlLCB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1NQogICAgLy8gdG90YWxBbHBoYSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgIC8vIFRvdGFsIEFscGhhIGhlbGQgKGRlcG9zaXRzICsgY29tcG91bmRlZCB5aWVsZCkKICAgIGJ5dGVjXzEgLy8gInRvdGFsQWxwaGEiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMTMKICAgIC8vIHJldHVybiB0aGlzLm11bERpdkZsb29yKHNoYXJlcywgdGhpcy50b3RhbEFscGhhLnZhbHVlLCB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTQKICAgIC8vIHRvdGFsU2hhcmVzID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBUb3RhbCBzaGFyZXMgaXNzdWVkIHRvIGFsbCBkZXBvc2l0b3JzCiAgICBieXRlY18wIC8vICJ0b3RhbFNoYXJlcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjExMwogICAgLy8gcmV0dXJuIHRoaXMubXVsRGl2Rmxvb3Ioc2hhcmVzLCB0aGlzLnRvdGFsQWxwaGEudmFsdWUsIHRoaXMudG90YWxTaGFyZXMudmFsdWUpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg2CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGZyYW1lX2RpZyAtMQogICAgdW5jb3ZlciAyCiAgICBtdWx3CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NwogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICB1bmNvdmVyIDMKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODgKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMTMKICAgIC8vIHJldHVybiB0aGlzLm11bERpdkZsb29yKHNoYXJlcywgdGhpcy50b3RhbEFscGhhLnZhbHVlLCB0aGlzLnRvdGFsU2hhcmVzLnZhbHVlKTsKICAgIHJldHN1YgoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0KGlucHV0QW1vdW50OiB1aW50NjQpIC0+IHVpbnQ2NDoKZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTIwCiAgICAvLyBwcml2YXRlIGdldEV4cGVjdGVkU3dhcE91dHB1dChpbnB1dEFtb3VudDogdWludDY0KTogdWludDY0IHsKICAgIHByb3RvIDEgMQogICAgcHVzaGJ5dGVzICIiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMjEKICAgIC8vIGNvbnN0IHBvb2xBcHAgPSB0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjEKICAgIC8vIHRpbnltYW5Qb29sQXBwSWQgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAvLyBUaW55bWFuIFYyIHBvb2wgYXBwIElECiAgICBieXRlYyAxNSAvLyAidGlueW1hblBvb2xBcHBJZCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEyMQogICAgLy8gY29uc3QgcG9vbEFwcCA9IHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMjIKICAgIC8vIGNvbnN0IHBvb2xBZGRyID0gdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjIKICAgIC8vIHRpbnltYW5Qb29sQWRkcmVzcyA9IEdsb2JhbFN0YXRlPEFjY291bnQ+KCk7IC8vIFRpbnltYW4gcG9vbCBhZGRyZXNzCiAgICBieXRlYyAxNiAvLyAidGlueW1hblBvb2xBZGRyZXNzIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTIyCiAgICAvLyBjb25zdCBwb29sQWRkciA9IHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEyNQogICAgLy8gY29uc3QgW2Fzc2V0MUlkLCBoYXNBc3NldDFJZF0gPSBBcHBMb2NhbC5nZXRFeFVpbnQ2NChwb29sQWRkciwgcG9vbEFwcCwgQnl0ZXMoJ2Fzc2V0XzFfaWQnKSk7CiAgICBkdXAKICAgIGRpZyAyCiAgICBwdXNoYnl0ZXMgImFzc2V0XzFfaWQiCiAgICBhcHBfbG9jYWxfZ2V0X2V4CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMjYKICAgIC8vIGFzc2VydChoYXNBc3NldDFJZCwgJ0Nhbm5vdCByZWFkIHBvb2wgYXNzZXRfMV9pZCcpOwogICAgYXNzZXJ0IC8vIENhbm5vdCByZWFkIHBvb2wgYXNzZXRfMV9pZAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTI4CiAgICAvLyBjb25zdCBbYXNzZXQxUmVzZXJ2ZXMsIGhhc0Fzc2V0MVJlc2VydmVzXSA9IEFwcExvY2FsLmdldEV4VWludDY0KHBvb2xBZGRyLCBwb29sQXBwLCBCeXRlcygnYXNzZXRfMV9yZXNlcnZlcycpKTsKICAgIGRpZyAxCiAgICBkaWcgMwogICAgcHVzaGJ5dGVzICJhc3NldF8xX3Jlc2VydmVzIgogICAgYXBwX2xvY2FsX2dldF9leAogICAgc3dhcAogICAgY292ZXIgNAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTI5CiAgICAvLyBhc3NlcnQoaGFzQXNzZXQxUmVzZXJ2ZXMsICdDYW5ub3QgcmVhZCBwb29sIGFzc2V0XzFfcmVzZXJ2ZXMnKTsKICAgIGFzc2VydCAvLyBDYW5ub3QgcmVhZCBwb29sIGFzc2V0XzFfcmVzZXJ2ZXMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEzMQogICAgLy8gY29uc3QgW2Fzc2V0MlJlc2VydmVzLCBoYXNBc3NldDJSZXNlcnZlc10gPSBBcHBMb2NhbC5nZXRFeFVpbnQ2NChwb29sQWRkciwgcG9vbEFwcCwgQnl0ZXMoJ2Fzc2V0XzJfcmVzZXJ2ZXMnKSk7CiAgICBkaWcgMQogICAgZGlnIDMKICAgIHB1c2hieXRlcyAiYXNzZXRfMl9yZXNlcnZlcyIKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGNvdmVyIDQKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEzMgogICAgLy8gYXNzZXJ0KGhhc0Fzc2V0MlJlc2VydmVzLCAnQ2Fubm90IHJlYWQgcG9vbCBhc3NldF8yX3Jlc2VydmVzJyk7CiAgICBhc3NlcnQgLy8gQ2Fubm90IHJlYWQgcG9vbCBhc3NldF8yX3Jlc2VydmVzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxMzQKICAgIC8vIGNvbnN0IFt0b3RhbEZlZVNoYXJlLCBoYXNUb3RhbEZlZVNoYXJlXSA9IEFwcExvY2FsLmdldEV4VWludDY0KHBvb2xBZGRyLCBwb29sQXBwLCBCeXRlcygndG90YWxfZmVlX3NoYXJlJykpOwogICAgc3dhcAogICAgdW5jb3ZlciAyCiAgICBwdXNoYnl0ZXMgInRvdGFsX2ZlZV9zaGFyZSIKICAgIGFwcF9sb2NhbF9nZXRfZXgKICAgIHN3YXAKICAgIGNvdmVyIDMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjEzNQogICAgLy8gYXNzZXJ0KGhhc1RvdGFsRmVlU2hhcmUsICdDYW5ub3QgcmVhZCBwb29sIHRvdGFsX2ZlZV9zaGFyZScpOwogICAgYXNzZXJ0IC8vIENhbm5vdCByZWFkIHBvb2wgdG90YWxfZmVlX3NoYXJlCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNDEKICAgIC8vIGlmIChhc3NldDFJZCA9PT0gdGhpcy51c2RjQXNzZXQudmFsdWUpIHsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NQogICAgLy8gdXNkY0Fzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKGFpcmRyb3BzIGNvbWUgaW4gYXMgdGhpcykKICAgIGJ5dGVjIDQgLy8gInVzZGNBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE0MQogICAgLy8gaWYgKGFzc2V0MUlkID09PSB0aGlzLnVzZGNBc3NldC52YWx1ZSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgID09CiAgICBieiBnZXRFeHBlY3RlZFN3YXBPdXRwdXRfZWxzZV9ib2R5QDIKICAgIGZyYW1lX2RpZyAxCiAgICBmcmFtZV9idXJ5IDAKCmdldEV4cGVjdGVkU3dhcE91dHB1dF9hZnRlcl9pZl9lbHNlQDM6CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNTMKICAgIC8vIGNvbnN0IG5ldElucHV0ID0gdGhpcy5tdWxEaXZGbG9vcihpbnB1dEFtb3VudCwgRkVFX0JQU19CQVNFIC0gZmVlQnBzLCBGRUVfQlBTX0JBU0UpOwogICAgaW50YyA0IC8vIDEwMDAwCiAgICBmcmFtZV9kaWcgMgogICAgLQogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODYKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgZnJhbWVfZGlnIC0xCiAgICBtdWx3CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NwogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNTMKICAgIC8vIGNvbnN0IG5ldElucHV0ID0gdGhpcy5tdWxEaXZGbG9vcihpbnB1dEFtb3VudCwgRkVFX0JQU19CQVNFIC0gZmVlQnBzLCBGRUVfQlBTX0JBU0UpOwogICAgaW50YyA0IC8vIDEwMDAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NwogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgc3dhcAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODgKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNTYKICAgIC8vIGNvbnN0IGV4cGVjdGVkT3V0cHV0ID0gdGhpcy5tdWxEaXZGbG9vcihvdXRwdXRSZXNlcnZlcywgbmV0SW5wdXQsIGlucHV0UmVzZXJ2ZXMgKyBuZXRJbnB1dCk7CiAgICBmcmFtZV9kaWcgMAogICAgZGlnIDEKICAgICsKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg2CiAgICAvLyBjb25zdCBbaGksIGxvXSA9IG11bHcobjEsIG4yKTsKICAgIGNvdmVyIDIKICAgIG11bHcKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg3CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIHVuY292ZXIgMwogICAgZGl2bW9kdwogICAgcG9wbiAyCiAgICBzd2FwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4OAogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE1OAogICAgLy8gcmV0dXJuIGV4cGVjdGVkT3V0cHV0OwogICAgZnJhbWVfYnVyeSAwCiAgICByZXRzdWIKCmdldEV4cGVjdGVkU3dhcE91dHB1dF9lbHNlX2JvZHlAMjoKICAgIGZyYW1lX2J1cnkgMAogICAgZnJhbWVfZGlnIDEKICAgIGIgZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0X2FmdGVyX2lmX2Vsc2VAMwoKCi8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjpSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuZXhlY3V0ZUNvbXBvdW5kKHVzZGNCYWxhbmNlOiB1aW50NjQsIHNsaXBwYWdlQnBzOiB1aW50NjQpIC0+IHZvaWQ6CmV4ZWN1dGVDb21wb3VuZDoKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE2NQogICAgLy8gcHJpdmF0ZSBleGVjdXRlQ29tcG91bmQodXNkY0JhbGFuY2U6IHVpbnQ2NCwgc2xpcHBhZ2VCcHM6IHVpbnQ2NCk6IHZvaWQgewogICAgcHJvdG8gMiAwCiAgICBwdXNoYnl0ZXMgIiIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE2NgogICAgLy8gY29uc3QgYXBwQWRkcjogQWNjb3VudCA9IEdsb2JhbC5jdXJyZW50QXBwbGljYXRpb25BZGRyZXNzOwogICAgZ2xvYmFsIEN1cnJlbnRBcHBsaWNhdGlvbkFkZHJlc3MKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE2OQogICAgLy8gY29uc3QgZXhwZWN0ZWRPdXRwdXQgPSB0aGlzLmdldEV4cGVjdGVkU3dhcE91dHB1dCh1c2RjQmFsYW5jZSk7CiAgICBmcmFtZV9kaWcgLTIKICAgIGNhbGxzdWIgZ2V0RXhwZWN0ZWRTd2FwT3V0cHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNzAKICAgIC8vIGFzc2VydChleHBlY3RlZE91dHB1dCA+IFVpbnQ2NCgwKSwgJ0V4cGVjdGVkIG91dHB1dCBpcyB6ZXJvJyk7CiAgICBkdXAKICAgIGFzc2VydCAvLyBFeHBlY3RlZCBvdXRwdXQgaXMgemVybwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTczCiAgICAvLyBjb25zdCBtaW5BbW91bnRPdXQgPSB0aGlzLm11bERpdkZsb29yKGV4cGVjdGVkT3V0cHV0LCBGRUVfQlBTX0JBU0UgLSBzbGlwcGFnZUJwcywgRkVFX0JQU19CQVNFKTsKICAgIGludGMgNCAvLyAxMDAwMAogICAgZnJhbWVfZGlnIC0xCiAgICAtCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NgogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KG4xLCBuMik7CiAgICBtdWx3CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NwogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNzMKICAgIC8vIGNvbnN0IG1pbkFtb3VudE91dCA9IHRoaXMubXVsRGl2Rmxvb3IoZXhwZWN0ZWRPdXRwdXQsIEZFRV9CUFNfQkFTRSAtIHNsaXBwYWdlQnBzLCBGRUVfQlBTX0JBU0UpOwogICAgaW50YyA0IC8vIDEwMDAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NwogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgY292ZXIgMgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODgKICAgIC8vIGFzc2VydChxX2hpID09PSBVaW50NjQoMCksICdNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcicpOwogICAgIQogICAgYXNzZXJ0IC8vIE11bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNzYKICAgIC8vIGNvbnN0IGFscGhhQmVmb3JlID0gQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjQ0CiAgICAvLyBhbHBoYUFzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAvLyBBbHBoYSBBU0EgSUQgKGRlcG9zaXQgJiB5aWVsZCBhc3NldCkKICAgIGJ5dGVjXzMgLy8gImFscGhhQXNzZXQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNzYKICAgIC8vIGNvbnN0IGFscGhhQmVmb3JlID0gQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKS5iYWxhbmNlKGFwcEFkZHIpOwogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGR1cDIKICAgIGFzc2V0X2hvbGRpbmdfZ2V0IEFzc2V0QmFsYW5jZQogICAgYXNzZXJ0IC8vIGFjY291bnQgb3B0ZWQgaW50byBhc3NldAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTc5LTE5MwogICAgLy8gaXR4bi5zdWJtaXRHcm91cCgKICAgIC8vICAgaXR4bi5hc3NldFRyYW5zZmVyKHsKICAgIC8vICAgICBhc3NldFJlY2VpdmVyOiB0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZSwKICAgIC8vICAgICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMudXNkY0Fzc2V0LnZhbHVlKSwKICAgIC8vICAgICBhc3NldEFtb3VudDogdXNkY0JhbGFuY2UsCiAgICAvLyAgICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyAgIH0pLAogICAgLy8gICBpdHhuLmFwcGxpY2F0aW9uQ2FsbCh7CiAgICAvLyAgICAgYXBwSWQ6IEFwcGxpY2F0aW9uKHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZSksCiAgICAvLyAgICAgYXBwQXJnczogW0J5dGVzKCdzd2FwJyksIEJ5dGVzKCdmaXhlZC1pbnB1dCcpLCBpdG9iKG1pbkFtb3VudE91dCldLAogICAgLy8gICAgIGFzc2V0czogW0Fzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSldLAogICAgLy8gICAgIGFjY291bnRzOiBbdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWVdLAogICAgLy8gICAgIGZlZTogVWludDY0KDApLAogICAgLy8gICB9KSwKICAgIC8vICk7CiAgICBpdHhuX2JlZ2luCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxODEKICAgIC8vIGFzc2V0UmVjZWl2ZXI6IHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYyCiAgICAvLyB0aW55bWFuUG9vbEFkZHJlc3MgPSBHbG9iYWxTdGF0ZTxBY2NvdW50PigpOyAvLyBUaW55bWFuIHBvb2wgYWRkcmVzcwogICAgYnl0ZWMgMTYgLy8gInRpbnltYW5Qb29sQWRkcmVzcyIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE4MQogICAgLy8gYXNzZXRSZWNlaXZlcjogdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWUsCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTgyCiAgICAvLyB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMudXNkY0Fzc2V0LnZhbHVlKSwKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo0NQogICAgLy8gdXNkY0Fzc2V0ID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVVNEQyBBU0EgSUQgKGFpcmRyb3BzIGNvbWUgaW4gYXMgdGhpcykKICAgIGJ5dGVjIDQgLy8gInVzZGNBc3NldCIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE4MgogICAgLy8geGZlckFzc2V0OiBBc3NldCh0aGlzLnVzZGNBc3NldC52YWx1ZSksCiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZnJhbWVfZGlnIC0yCiAgICBpdHhuX2ZpZWxkIEFzc2V0QW1vdW50CiAgICBpdHhuX2ZpZWxkIFhmZXJBc3NldAogICAgZHVwCiAgICBpdHhuX2ZpZWxkIEFzc2V0UmVjZWl2ZXIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE4MC0xODUKICAgIC8vIGl0eG4uYXNzZXRUcmFuc2Zlcih7CiAgICAvLyAgIGFzc2V0UmVjZWl2ZXI6IHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlLAogICAgLy8gICB4ZmVyQXNzZXQ6IEFzc2V0KHRoaXMudXNkY0Fzc2V0LnZhbHVlKSwKICAgIC8vICAgYXNzZXRBbW91bnQ6IHVzZGNCYWxhbmNlLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLAogICAgaW50Y18zIC8vIDQKICAgIGl0eG5fZmllbGQgVHlwZUVudW0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE4NAogICAgLy8gZmVlOiBVaW50NjQoMCksCiAgICBpbnRjXzAgLy8gMAogICAgaXR4bl9maWVsZCBGZWUKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE4Ni0xOTIKICAgIC8vIGl0eG4uYXBwbGljYXRpb25DYWxsKHsKICAgIC8vICAgYXBwSWQ6IEFwcGxpY2F0aW9uKHRoaXMudGlueW1hblBvb2xBcHBJZC52YWx1ZSksCiAgICAvLyAgIGFwcEFyZ3M6IFtCeXRlcygnc3dhcCcpLCBCeXRlcygnZml4ZWQtaW5wdXQnKSwgaXRvYihtaW5BbW91bnRPdXQpXSwKICAgIC8vICAgYXNzZXRzOiBbQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKV0sCiAgICAvLyAgIGFjY291bnRzOiBbdGhpcy50aW55bWFuUG9vbEFkZHJlc3MudmFsdWVdLAogICAgLy8gICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vIH0pLAogICAgaXR4bl9uZXh0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxODcKICAgIC8vIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjYxCiAgICAvLyB0aW55bWFuUG9vbEFwcElkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgLy8gVGlueW1hbiBWMiBwb29sIGFwcCBJRAogICAgYnl0ZWMgMTUgLy8gInRpbnltYW5Qb29sQXBwSWQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxODcKICAgIC8vIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjE4OAogICAgLy8gYXBwQXJnczogW0J5dGVzKCdzd2FwJyksIEJ5dGVzKCdmaXhlZC1pbnB1dCcpLCBpdG9iKG1pbkFtb3VudE91dCldLAogICAgZGlnIDUKICAgIGl0b2IKICAgIHVuY292ZXIgMgogICAgaXR4bl9maWVsZCBBY2NvdW50cwogICAgZGlnIDMKICAgIGl0eG5fZmllbGQgQXNzZXRzCiAgICBwdXNoYnl0ZXMgInN3YXAiCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgcHVzaGJ5dGVzICJmaXhlZC1pbnB1dCIKICAgIGl0eG5fZmllbGQgQXBwbGljYXRpb25BcmdzCiAgICBpdHhuX2ZpZWxkIEFwcGxpY2F0aW9uQXJncwogICAgaXR4bl9maWVsZCBBcHBsaWNhdGlvbklECiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxODYtMTkyCiAgICAvLyBpdHhuLmFwcGxpY2F0aW9uQ2FsbCh7CiAgICAvLyAgIGFwcElkOiBBcHBsaWNhdGlvbih0aGlzLnRpbnltYW5Qb29sQXBwSWQudmFsdWUpLAogICAgLy8gICBhcHBBcmdzOiBbQnl0ZXMoJ3N3YXAnKSwgQnl0ZXMoJ2ZpeGVkLWlucHV0JyksIGl0b2IobWluQW1vdW50T3V0KV0sCiAgICAvLyAgIGFzc2V0czogW0Fzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSldLAogICAgLy8gICBhY2NvdW50czogW3RoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlXSwKICAgIC8vICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyB9KSwKICAgIHB1c2hpbnQgNiAvLyA2CiAgICBpdHhuX2ZpZWxkIFR5cGVFbnVtCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxOTEKICAgIC8vIGZlZTogVWludDY0KDApLAogICAgaW50Y18wIC8vIDAKICAgIGl0eG5fZmllbGQgRmVlCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxNzktMTkzCiAgICAvLyBpdHhuLnN1Ym1pdEdyb3VwKAogICAgLy8gICBpdHhuLmFzc2V0VHJhbnNmZXIoewogICAgLy8gICAgIGFzc2V0UmVjZWl2ZXI6IHRoaXMudGlueW1hblBvb2xBZGRyZXNzLnZhbHVlLAogICAgLy8gICAgIHhmZXJBc3NldDogQXNzZXQodGhpcy51c2RjQXNzZXQudmFsdWUpLAogICAgLy8gICAgIGFzc2V0QW1vdW50OiB1c2RjQmFsYW5jZSwKICAgIC8vICAgICBmZWU6IFVpbnQ2NCgwKSwKICAgIC8vICAgfSksCiAgICAvLyAgIGl0eG4uYXBwbGljYXRpb25DYWxsKHsKICAgIC8vICAgICBhcHBJZDogQXBwbGljYXRpb24odGhpcy50aW55bWFuUG9vbEFwcElkLnZhbHVlKSwKICAgIC8vICAgICBhcHBBcmdzOiBbQnl0ZXMoJ3N3YXAnKSwgQnl0ZXMoJ2ZpeGVkLWlucHV0JyksIGl0b2IobWluQW1vdW50T3V0KV0sCiAgICAvLyAgICAgYXNzZXRzOiBbQXNzZXQodGhpcy5hbHBoYUFzc2V0LnZhbHVlKV0sCiAgICAvLyAgICAgYWNjb3VudHM6IFt0aGlzLnRpbnltYW5Qb29sQWRkcmVzcy52YWx1ZV0sCiAgICAvLyAgICAgZmVlOiBVaW50NjQoMCksCiAgICAvLyAgIH0pLAogICAgLy8gKTsKICAgIGl0eG5fc3VibWl0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoxOTYKICAgIC8vIGNvbnN0IGFscGhhQWZ0ZXI6IHVpbnQ2NCA9IEFzc2V0KHRoaXMuYWxwaGFBc3NldC52YWx1ZSkuYmFsYW5jZShhcHBBZGRyKTsKICAgIGNvdmVyIDIKICAgIGFzc2V0X2hvbGRpbmdfZ2V0IEFzc2V0QmFsYW5jZQogICAgYXNzZXJ0IC8vIGFjY291bnQgb3B0ZWQgaW50byBhc3NldAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTk3CiAgICAvLyBjb25zdCBzd2FwT3V0cHV0OiB1aW50NjQgPSBhbHBoYUFmdGVyIC0gYWxwaGFCZWZvcmU7CiAgICBzd2FwCiAgICAtCiAgICBkdXAKICAgIHVuY292ZXIgMgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MTk4CiAgICAvLyBhc3NlcnQoc3dhcE91dHB1dCA+PSBtaW5BbW91bnRPdXQsICdTd2FwIG91dHB1dCBiZWxvdyBtaW5pbXVtJyk7CiAgICA+PQogICAgYXNzZXJ0IC8vIFN3YXAgb3V0cHV0IGJlbG93IG1pbmltdW0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIwMQogICAgLy8gbGV0IGZhcm1Cb251czogdWludDY0ID0gVWludDY0KDApOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIwMgogICAgLy8gaWYgKHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSA+IFVpbnQ2NCgwKSAmJiB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID4gVWludDY0KDApKSB7CiAgICBkdXAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY2CiAgICAvLyBmYXJtRW1pc3Npb25SYXRlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAvLyBCYXNpcyBwb2ludHMgb2YgY29tcG91bmQgb3V0cHV0IHRvIGFkZCBmcm9tIGZhcm0gKGUuZy4sIDEwMDAgPSAxMCUpCiAgICBieXRlYyA5IC8vICJmYXJtRW1pc3Npb25SYXRlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjAyCiAgICAvLyBpZiAodGhpcy5mYXJtRW1pc3Npb25SYXRlLnZhbHVlID4gVWludDY0KDApICYmIHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPiBVaW50NjQoMCkpIHsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBieiBleGVjdXRlQ29tcG91bmRfYWZ0ZXJfaWZfZWxzZUA4CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjUKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIEFscGhhIGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMiAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMDIKICAgIC8vIGlmICh0aGlzLmZhcm1FbWlzc2lvblJhdGUudmFsdWUgPiBVaW50NjQoMCkgJiYgdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA+IFVpbnQ2NCgwKSkgewogICAgYXBwX2dsb2JhbF9nZXRfZXgKICAgIGFzc2VydCAvLyBjaGVjayBHbG9iYWxTdGF0ZSBleGlzdHMKICAgIGJ6IGV4ZWN1dGVDb21wb3VuZF9hZnRlcl9pZl9lbHNlQDgKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIwMwogICAgLy8gY29uc3QgcmVxdWVzdGVkQm9udXMgPSB0aGlzLm11bERpdkZsb29yKHN3YXBPdXRwdXQsIHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSwgRkVFX0JQU19CQVNFKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NgogICAgLy8gZmFybUVtaXNzaW9uUmF0ZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgLy8gQmFzaXMgcG9pbnRzIG9mIGNvbXBvdW5kIG91dHB1dCB0byBhZGQgZnJvbSBmYXJtIChlLmcuLCAxMDAwID0gMTAlKQogICAgYnl0ZWMgOSAvLyAiZmFybUVtaXNzaW9uUmF0ZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIwMwogICAgLy8gY29uc3QgcmVxdWVzdGVkQm9udXMgPSB0aGlzLm11bERpdkZsb29yKHN3YXBPdXRwdXQsIHRoaXMuZmFybUVtaXNzaW9uUmF0ZS52YWx1ZSwgRkVFX0JQU19CQVNFKTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NgogICAgLy8gY29uc3QgW2hpLCBsb10gPSBtdWx3KG4xLCBuMik7CiAgICBmcmFtZV9kaWcgMQogICAgbXVsdwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODcKICAgIC8vIGNvbnN0IFtxX2hpLCBxX2xvLCBfcl9oaSwgX3JfbG9dID0gZGl2bW9kdyhoaSwgbG8sIFVpbnQ2NCgwKSwgZCk7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjAzCiAgICAvLyBjb25zdCByZXF1ZXN0ZWRCb251cyA9IHRoaXMubXVsRGl2Rmxvb3Ioc3dhcE91dHB1dCwgdGhpcy5mYXJtRW1pc3Npb25SYXRlLnZhbHVlLCBGRUVfQlBTX0JBU0UpOwogICAgaW50YyA0IC8vIDEwMDAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4NwogICAgLy8gY29uc3QgW3FfaGksIHFfbG8sIF9yX2hpLCBfcl9sb10gPSBkaXZtb2R3KGhpLCBsbywgVWludDY0KDApLCBkKTsKICAgIGRpdm1vZHcKICAgIHBvcG4gMgogICAgZHVwCiAgICBjb3ZlciAyCiAgICBmcmFtZV9idXJ5IDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg4CiAgICAvLyBhc3NlcnQocV9oaSA9PT0gVWludDY0KDApLCAnTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3InKTsKICAgICEKICAgIGFzc2VydCAvLyBNdWx0aXBsaWNhdGlvbiBvdmVyZmxvdyBpbiBtdWxEaXZGbG9vcgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjA0CiAgICAvLyBmYXJtQm9udXMgPSByZXF1ZXN0ZWRCb251cyA8IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPyByZXF1ZXN0ZWRCb251cyA6IHRoaXMuZmFybUJhbGFuY2UudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjUKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIEFscGhhIGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMiAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMDQKICAgIC8vIGZhcm1Cb251cyA9IHJlcXVlc3RlZEJvbnVzIDwgdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA/IHJlcXVlc3RlZEJvbnVzIDogdGhpcy5mYXJtQmFsYW5jZS52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICA8CiAgICBieiBleGVjdXRlQ29tcG91bmRfdGVybmFyeV9mYWxzZUA2CiAgICBmcmFtZV9kaWcgMAogICAgZnJhbWVfYnVyeSAyCgpleGVjdXRlQ29tcG91bmRfdGVybmFyeV9tZXJnZUA3OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjA1CiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSAtIGZhcm1Cb251czsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo2NQogICAgLy8gZmFybUJhbGFuY2UgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAgLy8gVG90YWwgQWxwaGEgYXZhaWxhYmxlIGZvciBmYXJtIGJvbnVzCiAgICBieXRlY18yIC8vICJmYXJtQmFsYW5jZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIwNQogICAgLy8gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA9IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgLSBmYXJtQm9udXM7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgZnJhbWVfZGlnIDIKICAgIC0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjY1CiAgICAvLyBmYXJtQmFsYW5jZSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgICAgICAgICAvLyBUb3RhbCBBbHBoYSBhdmFpbGFibGUgZm9yIGZhcm0gYm9udXMKICAgIGJ5dGVjXzIgLy8gImZhcm1CYWxhbmNlIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjA1CiAgICAvLyB0aGlzLmZhcm1CYWxhbmNlLnZhbHVlID0gdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSAtIGZhcm1Cb251czsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CgpleGVjdXRlQ29tcG91bmRfYWZ0ZXJfaWZfZWxzZUA4OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjA5CiAgICAvLyBjb25zdCB0b3RhbE91dHB1dDogdWludDY0ID0gc3dhcE91dHB1dCArIGZhcm1Cb251czsKICAgIGZyYW1lX2RpZyAxCiAgICBmcmFtZV9kaWcgMgogICAgKwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjEyCiAgICAvLyBjb25zdCBjcmVhdG9yQ3V0OiB1aW50NjQgPSB0aGlzLm11bERpdkZsb29yKHRvdGFsT3V0cHV0LCB0aGlzLmNyZWF0b3JGZWVSYXRlLnZhbHVlLCBGRUVfUEVSQ0VOVF9CQVNFKTsKICAgIGludGNfMCAvLyAwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MAogICAgLy8gY3JlYXRvckZlZVJhdGUgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgIC8vIDAtMTAwLCBwZXJjZW50YWdlIG9mIHlpZWxkIHRvIGNyZWF0b3IKICAgIGJ5dGVjIDE0IC8vICJjcmVhdG9yRmVlUmF0ZSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIxMgogICAgLy8gY29uc3QgY3JlYXRvckN1dDogdWludDY0ID0gdGhpcy5tdWxEaXZGbG9vcih0b3RhbE91dHB1dCwgdGhpcy5jcmVhdG9yRmVlUmF0ZS52YWx1ZSwgRkVFX1BFUkNFTlRfQkFTRSk7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6ODYKICAgIC8vIGNvbnN0IFtoaSwgbG9dID0gbXVsdyhuMSwgbjIpOwogICAgZGlnIDEKICAgIG11bHcKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg3CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIxMgogICAgLy8gY29uc3QgY3JlYXRvckN1dDogdWludDY0ID0gdGhpcy5tdWxEaXZGbG9vcih0b3RhbE91dHB1dCwgdGhpcy5jcmVhdG9yRmVlUmF0ZS52YWx1ZSwgRkVFX1BFUkNFTlRfQkFTRSk7CiAgICBwdXNoaW50IDEwMCAvLyAxMDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjg3CiAgICAvLyBjb25zdCBbcV9oaSwgcV9sbywgX3JfaGksIF9yX2xvXSA9IGRpdm1vZHcoaGksIGxvLCBVaW50NjQoMCksIGQpOwogICAgZGl2bW9kdwogICAgcG9wbiAyCiAgICBzd2FwCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo4OAogICAgLy8gYXNzZXJ0KHFfaGkgPT09IFVpbnQ2NCgwKSwgJ011bHRpcGxpY2F0aW9uIG92ZXJmbG93IGluIG11bERpdkZsb29yJyk7CiAgICAhCiAgICBhc3NlcnQgLy8gTXVsdGlwbGljYXRpb24gb3ZlcmZsb3cgaW4gbXVsRGl2Rmxvb3IKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIxMwogICAgLy8gY29uc3QgdmF1bHRDdXQ6IHVpbnQ2NCA9IHRvdGFsT3V0cHV0IC0gY3JlYXRvckN1dDsKICAgIGR1cDIKICAgIC0KICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIxNgogICAgLy8gdGhpcy5jcmVhdG9yVW5jbGFpbWVkQWxwaGEudmFsdWUgPSB0aGlzLmNyZWF0b3JVbmNsYWltZWRBbHBoYS52YWx1ZSArIGNyZWF0b3JDdXQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTEKICAgIC8vIGNyZWF0b3JVbmNsYWltZWRBbHBoYSA9IEdsb2JhbFN0YXRlPHVpbnQ2ND4oKTsgLy8gQWNjdW11bGF0ZWQgQWxwaGEgZm9yIGNyZWF0b3IgdG8gY2xhaW0KICAgIGJ5dGVjIDggLy8gImNyZWF0b3JVbmNsYWltZWRBbHBoYSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIxNgogICAgLy8gdGhpcy5jcmVhdG9yVW5jbGFpbWVkQWxwaGEudmFsdWUgPSB0aGlzLmNyZWF0b3JVbmNsYWltZWRBbHBoYS52YWx1ZSArIGNyZWF0b3JDdXQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgdW5jb3ZlciAyCiAgICArCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czo1MQogICAgLy8gY3JlYXRvclVuY2xhaW1lZEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBBY2N1bXVsYXRlZCBBbHBoYSBmb3IgY3JlYXRvciB0byBjbGFpbQogICAgYnl0ZWMgOCAvLyAiY3JlYXRvclVuY2xhaW1lZEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjE2CiAgICAvLyB0aGlzLmNyZWF0b3JVbmNsYWltZWRBbHBoYS52YWx1ZSA9IHRoaXMuY3JlYXRvclVuY2xhaW1lZEFscGhhLnZhbHVlICsgY3JlYXRvckN1dDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMTkKICAgIC8vIHRoaXMudG90YWxBbHBoYS52YWx1ZSA9IHRoaXMudG90YWxBbHBoYS52YWx1ZSArIHZhdWx0Q3V0OwogICAgaW50Y18wIC8vIDAKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjU1CiAgICAvLyB0b3RhbEFscGhhID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgLy8gVG90YWwgQWxwaGEgaGVsZCAoZGVwb3NpdHMgKyBjb21wb3VuZGVkIHlpZWxkKQogICAgYnl0ZWNfMSAvLyAidG90YWxBbHBoYSIKICAgIC8vIFJhcmVGaUFscGhhQ29tcG91bmRpbmdWYXVsdC5hbGdvLnRzOjIxOQogICAgLy8gdGhpcy50b3RhbEFscGhhLnZhbHVlID0gdGhpcy50b3RhbEFscGhhLnZhbHVlICsgdmF1bHRDdXQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgKwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTUKICAgIC8vIHRvdGFsQWxwaGEgPSBHbG9iYWxTdGF0ZTx1aW50NjQ+KCk7ICAgICAgICAvLyBUb3RhbCBBbHBoYSBoZWxkIChkZXBvc2l0cyArIGNvbXBvdW5kZWQgeWllbGQpCiAgICBieXRlY18xIC8vICJ0b3RhbEFscGhhIgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjE5CiAgICAvLyB0aGlzLnRvdGFsQWxwaGEudmFsdWUgPSB0aGlzLnRvdGFsQWxwaGEudmFsdWUgKyB2YXVsdEN1dDsKICAgIHN3YXAKICAgIGFwcF9nbG9iYWxfcHV0CiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMjIKICAgIC8vIHRoaXMudG90YWxZaWVsZENvbXBvdW5kZWQudmFsdWUgPSB0aGlzLnRvdGFsWWllbGRDb21wb3VuZGVkLnZhbHVlICsgdG90YWxPdXRwdXQ7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTgKICAgIC8vIHRvdGFsWWllbGRDb21wb3VuZGVkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBUb3RhbCB5aWVsZCBjb21wb3VuZGVkIChmb3Igc3RhdHMpCiAgICBieXRlYyAxMiAvLyAidG90YWxZaWVsZENvbXBvdW5kZWQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMjIKICAgIC8vIHRoaXMudG90YWxZaWVsZENvbXBvdW5kZWQudmFsdWUgPSB0aGlzLnRvdGFsWWllbGRDb21wb3VuZGVkLnZhbHVlICsgdG90YWxPdXRwdXQ7CiAgICBhcHBfZ2xvYmFsX2dldF9leAogICAgYXNzZXJ0IC8vIGNoZWNrIEdsb2JhbFN0YXRlIGV4aXN0cwogICAgKwogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NTgKICAgIC8vIHRvdGFsWWllbGRDb21wb3VuZGVkID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAvLyBUb3RhbCB5aWVsZCBjb21wb3VuZGVkIChmb3Igc3RhdHMpCiAgICBieXRlYyAxMiAvLyAidG90YWxZaWVsZENvbXBvdW5kZWQiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMjIKICAgIC8vIHRoaXMudG90YWxZaWVsZENvbXBvdW5kZWQudmFsdWUgPSB0aGlzLnRvdGFsWWllbGRDb21wb3VuZGVkLnZhbHVlICsgdG90YWxPdXRwdXQ7CiAgICBzd2FwCiAgICBhcHBfZ2xvYmFsX3B1dAogICAgcmV0c3ViCgpleGVjdXRlQ29tcG91bmRfdGVybmFyeV9mYWxzZUA2OgogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6MjA0CiAgICAvLyBmYXJtQm9udXMgPSByZXF1ZXN0ZWRCb251cyA8IHRoaXMuZmFybUJhbGFuY2UudmFsdWUgPyByZXF1ZXN0ZWRCb251cyA6IHRoaXMuZmFybUJhbGFuY2UudmFsdWU7CiAgICBpbnRjXzAgLy8gMAogICAgLy8gUmFyZUZpQWxwaGFDb21wb3VuZGluZ1ZhdWx0LmFsZ28udHM6NjUKICAgIC8vIGZhcm1CYWxhbmNlID0gR2xvYmFsU3RhdGU8dWludDY0PigpOyAgICAgICAgIC8vIFRvdGFsIEFscGhhIGF2YWlsYWJsZSBmb3IgZmFybSBib251cwogICAgYnl0ZWNfMiAvLyAiZmFybUJhbGFuY2UiCiAgICAvLyBSYXJlRmlBbHBoYUNvbXBvdW5kaW5nVmF1bHQuYWxnby50czoyMDQKICAgIC8vIGZhcm1Cb251cyA9IHJlcXVlc3RlZEJvbnVzIDwgdGhpcy5mYXJtQmFsYW5jZS52YWx1ZSA/IHJlcXVlc3RlZEJvbnVzIDogdGhpcy5mYXJtQmFsYW5jZS52YWx1ZTsKICAgIGFwcF9nbG9iYWxfZ2V0X2V4CiAgICBhc3NlcnQgLy8gY2hlY2sgR2xvYmFsU3RhdGUgZXhpc3RzCiAgICBmcmFtZV9idXJ5IDIKICAgIGIgZXhlY3V0ZUNvbXBvdW5kX3Rlcm5hcnlfbWVyZ2VANwo=",
        "clear": "I3ByYWdtYSB2ZXJzaW9uIDExCiNwcmFnbWEgdHlwZXRyYWNrIGZhbHNlCgovLyBAYWxnb3JhbmRmb3VuZGF0aW9uL2FsZ29yYW5kLXR5cGVzY3JpcHQvYmFzZS1jb250cmFjdC5kLnRzOjpCYXNlQ29udHJhY3QuY2xlYXJTdGF0ZVByb2dyYW0oKSAtPiB1aW50NjQ6Cm1haW46CiAgICBwdXNoaW50IDEgLy8gMQogICAgcmV0dXJuCg=="
    },
    "byteCode": {
        "approval": "CyAIAAEIBJBOwJoMgOHrF4CglKWNHSYSC3RvdGFsU2hhcmVzCnRvdGFsQWxwaGELZmFybUJhbGFuY2UKYWxwaGFBc3NldAl1c2RjQXNzZXQKdXNlclNoYXJlcw5jcmVhdG9yQWRkcmVzcwQVH3x1FWNyZWF0b3JVbmNsYWltZWRBbHBoYRBmYXJtRW1pc3Npb25SYXRlEG1pblN3YXBUaHJlc2hvbGQObWF4U2xpcHBhZ2VCcHMUdG90YWxZaWVsZENvbXBvdW5kZWQNcmFyZWZpQWRkcmVzcw5jcmVhdG9yRmVlUmF0ZRB0aW55bWFuUG9vbEFwcElkEnRpbnltYW5Qb29sQWRkcmVzcw1hc3NldHNPcHRlZEluMRtBAMKCAgQpMU2VBGppH+I2GgCOAgCiAJYxGRREMRhBAH+CEQRBTkG1BG4uvJsEIfHd/wS8mUSeBMizwPAEADWXogTH1NvzBD4vfLcEP9eYVgSXNlS/BAx5OxgEq273OwSq4srSBLxeOMYEr+v8rAQSeFBlBDhFpx02GgCOEQD1Aa0CRgKrAtcDBwNgA3kDjwOjA7cECQQ0BFcEdAS1BOsAgARNA8spNhoAjgEALAAxGYECEjEYEERCAVMxGSMSMRgQREIBQCWBBTEZjgIABQABADEYRAAxGEQANhoBSRUkEkQXNhoCSRUkEkQXNhoDSRUkEkQXNhoESRUkEkQXNhoFSRUkEkQXNhoGSRUkEkQXNhoHSRWBIBJENhoISRWBIBJESwWBBg5ESwQhBQ9ESwQhBg5ESwOB9AMPREsDIQQOREsHREsGREsHSwcTREsCRCtPCGcnBE8HZycGMQBnJw1MZycOTwVnJwgiZygiZykiZycKTwRnJwtPA2cnDCJnJw9PAmcnEExnKiJnJwkiZycRImcjQzEAIicGZUQSRCInEWVEFEQyCjEWSUQjCUk4ECMSREk4B0sCEkRJOAiBwMvJAg9ESTgAMQASREk4IDIDEkQ4CTIDEkSxIitlRCKyErIRSbIUJbIQIrIBs7EiJwRlRCKyErIRshQlshAisgGzJxEjZyNDMQAnBSJmI0MxACInBWNMSU8CREEAL0cCiAOjIihlRE8CCShMZyIpZURLAQkpTGexMQAiK2VETwKyErIRshQlshAisgGzI0M2GgFJFSQSRBdJIicLZUQORDIKSSInBGVEcABMSU8CRCInCmVED0EADSIoZURBAAZJSwOIBAwxFklEIwlJOBAlEkRJOBEiK2VEEkRJOBRLAxJESTgAMQASREk4IDIDEkRJOBUyAxJEOBJJgcCEPQ9ESYgC30lEMQAiJwVjREsBCDEAJwVPAmYiKGVECChMZyIpZUQIKUxnI0M2GgFJFSQSRBdJMQAiJwVjTE4CREEASksBSURJSwJJTgMOREmIArdJRE8CSwIJMQAnBU8CZiIoZURPAgkoTGciKWVESwEJKUxnsTEAIitlRE8CshKyEbIUJbIQIrIBsyNDSUL/tDEAIicGZUQSRCInCGVESUQnCCJnsTEAIitlRE8CshKyEbIUJbIQIrIBsyNDNhoBSRUkEkQXIicLZURLAQ9EMgoiJwRlRHAARCInCmVESwEORCIoZURETIgC6iNDMgoiJwRlRHAARCEHIihlREEAFyIpZUQiKGVETCEHHSJPAx9GAkwUREUBIihlRCIpZUQiJwhlRCInDGVETwMWTwMWUE8CFlBLAxZQTBZQSwEWUCcHTFCwI0M2GgFJFYEgEkQiJwVjRIgBsxYnB0xQsCNDNhoBSRWBIBJEIicFY0QWJwdMULAjQzYaAUkVJBJEF4gBZRYnB0xQsCNDNhoBSRUkEkQXiAF1FicHTFCwI0MyCiInBGVEcABMSU8CREAAIYAYAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAJwdMULAjQ0cCiAFZSYHeTR0iIQQfRgJMFERPAhZPAhZQTBZQQv/ZNhoBSRUkEkQXMQAiJwZlRBIxACInDWVEEhFESSEFD0RJIQYORCcKTGcjQzYaAUkVJBJEFzEAIicGZUQSREmB9AMPREkhBA5EJwtMZyNDNhoBSRUkEkQXMQAiJwZlRBJESYEGDkQnDkxnI0MyCjEWSUQjCUk4ECUSREk4ESIrZUQSREk4FE8CEkRJOAAxABJESTggMgMSREk4FTIDEkQ4EklEIiplRAgqTGcjQzYaAUkVJBJEF0kxACInBmVEEjEAIicNZUQSEUSB0IYDDkQiKmVEQQAGSYHoBw9EJwlLAWcjQyIqZUQiJwllREwWTBZQJwdMULAjQ4oBASIoZURAAAOL/4kiKGVEIillRIv/TwIdIk8DH0YCTBREiYoBASIoZURAAAIiiSIpZUQiKGVEi/9PAh0iTwMfRgJMFESJigEBgAAiJw9lRCInEGVESUsCgAphc3NldF8xX2lkY0RLAUsDgBBhc3NldF8xX3Jlc2VydmVzY0xOBERLAUsDgBBhc3NldF8yX3Jlc2VydmVzY0xOBERMTwKAD3RvdGFsX2ZlZV9zaGFyZWNMTgNEIicEZUQSQQApiwGMACEEiwIJi/8dIiEEH0YCTBREiwBLAQhOAh0iTwMfRgJMFESMAImMAIsBQv/UigIAgAAyCov+iP9MSUQhBIv/CR0iIQQfRgJOAhREIitlREpwAESxIicQZUQiJwRlRIv+shKyEUmyFCWyECKyAbYiJw9lREsFFk8CshxLA7IwgARzd2FwshqAC2ZpeGVkLWlucHV0shqyGrIYgQayECKyAbNOAnAAREwJSU8CD0QiSScJZURBADIiKmVEQQArIicJZUSLAR0iIQQfRgJJTgKMABREIiplRAxBAEWLAIwCIiplRIsCCSpMZ4sBiwIIIicOZURLAR0igWQfRgJMFERKCSInCGVETwIIJwhMZyIpZUQIKUxnIicMZUQIJwxMZ4kiKmVEjAJC/7Y=",
        "clear": "C4EBQw=="
    },
    "compilerInfo": {
        "compiler": "puya",
        "compilerVersion": {
            "major": 5,
            "minor": 3,
            "patch": 2
        }
    },
    "events": [],
    "templateVariables": {}
}